{"version":3,"sources":["components_hl/MenuGlobal.js","components/FormFilter.js","components/FormAccident.js","components/SidebarTabs.js","components/Sidebar.js","components/ButtonMap_.js","components/Map.js","components/images/markers/marker-red.png","components/images/markers/marker-shadow.png","components/LoginModalForm.js","components/RegisterModalForm.js","App.js","useAuthToken.js","reportWebVitals.js","index.js"],"names":["MenuGlobal","currentCity","appname","onClickShowMenu","setLoginModalShow","authToken","setAuthToken","useState","cities","setCities","useEffect","fetchCities","a","fetch","process","res","json","data","console","log","Navbar","bg","expand","Container","Button","className","variant","id","onClick","Toggle","Collapse","Nav","Link","href","NavDropdown","title","Item","active","map","city","as","to","sysname","cityname","username","undefined","FormFilter","onSubmitFilter","minMaxDateData","dictManeuvers","dictTypeViolations","dictViolators","setDefaultsForDates","setValue","minDate","maxDate","useForm","reValidateMode","defaultValues","dateFromFilter","dateToFilter","descFilter","maneuverFilter","violationsTypeFilter","violatorsFilter","driverViolationFilter","motorcyclistViolationFilter","cyclistViolationFilter","pedestrianViolationFilter","kidsInjuredFilter","pubtrPassengersInjuredFilter","driversKilledFilter","motorcyclistsKilledFilter","cyclistsKilledFilter","pedestrianKilledFilter","kidsKilledFilter","pubtrPassengersKilledFilter","publicTransportInvolvedFilter","showOnlyMyAccidentsFilter","select","control","handleSubmit","reset","optionsManeuverFilter","Array","isArray","x","value","label","maneuvername","optionsTypeViolationsFilter","violationname","optionsViolatorsFilter","violatorname","Form","onSubmit","Row","Group","Col","controlId","Label","name","render","field","Control","type","isClearable","options","isMulti","Card","body","Title","Check","checked","inline","e","style","minWidth","FormAccident","newMarkerState","onSubmitAccident","onDeleteAccident","onCloseAccident","dataAccidentForm","showModalDelete","setShowModalDelete","dateTimeRef","useRef","visible","current","state","inputValue","selectedDate","position","lat","lng","formData","accidentId","properties","latAccidentForm","latitude","lngAccidentForm","longitude","descAccidentForm","description","datetime","dateTimeAccidentForm","moment","maneuver","maneuverAccidentForm","find","item","violations_type","parseInt","violationsTypeAccidentForm","filter","includes","violators","violatorsAccidentForm","driversInjuredAccidentForm","drivers_injured","motorcyclistsInjuredAccidentForm","motorcyclists_injured","cyclistsInjuredAccidentForm","cyclists_injured","pedInjuredAccidentForm","ped_injured","kidsInjuredAccidentForm","kids_injured","pubtrPassengersInjuredAccidentForm","pubtr_passengers_injured","driversKilledAccidentForm","drivers_killed","motorcyclistsKilledAccidentForm","motorcyclists_killed","cyclistsKilledAccidentForm","cyclists_killed","pedKilledAccidentForm","ped_killed","kidsKilledAccidentForm","kids_killed","pubtrPassengersKilledAccidentForm","pubtr_passengers_killed","publicTransportInvolvedAccidentForm","public_transport_involved","keepDefaultValues","getValues","errors","formState","dataRest","format","rules","required","step","size","isInvalid","Feedback","rows","ref","color","marginTop","min","max","Modal","show","onHide","Header","closeButton","Body","Footer","SidebarTabs","showAccidentTab","activeTabKey","setActiveTabKey","Tabs","activeKey","onSelect","k","Tab","eventKey","overflowY","overflowX","width","height","tabClassName","Sidebar","ButtonMap_","heatMapLayer","iconTrue","iconFalse","checkButtonState","L","easyButton","states","stateName","icon","button","backgroundColor","addTo","redIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","geojsonMarkerOptions","radius","fillColor","weight","opacity","fillOpacity","currentCitySysname","Map","mapBaseLayerName","dataAccidents","dataHeatmapPoints","onDragEndNewMarker","checkButtonNewMarker","checkButtonHeatmap","checkButtonGPS","onClickMap","onMarkerClick","onClickNewMarker","onClickHeatmap","onClickGPS","filterMapCallback","onBaselayerchange","setNewMarkerState","isMobileDevice","showOkCancelMobileMarker","setMapCurrentLatLng","showSidebar","currentCityInfo","setCurrentCityInfo","setMap","buttonNewMarker","setButtonNewMarker","buttonHeatmap","setButtonHeatmap","buttonGPS","setButtonGPS","mapname_","document","cookie","split","row","startsWith","newMarkerRef","SetPanToMap","useMap","panTo","parseFloat","markerOnClick","geojson","target","toGeoJSON","NewMarker","eventHandlers","useMemo","dragend","marker","LatLng","getLatLng","coord","toFixed","Marker","draggable","getCenter","MapEvents","useMapEvents","baselayerchange","move","setLatLng","moveend","click","HeatmapFunction","removeLayer","heatLayer","addLayer","fetchCity","DomUtil","addClass","_container","removeClass","window","setTimeout","invalidateSize","pan","MapContainer","cursor","whenCreated","center","zoom","zoomControl","scrollWheelZoom","LayersControl","BaseLayer","TileLayer","attribution","url","accessToken","tileSize","zoomOffset","GeoJSON","pointToLayer","feature","latlng","circleMarker","on","onEachFeature","layer","Date","now","ZoomControl","LoginModalForm","setRegisterModalShow","showWrongPassword","setShowWrongPassword","password","credentials","method","headers","JSON","stringify","then","status","access","centered","loginUser","FloatingLabel","placeholder","Text","display","RegisterModalForm","email","password2","first_name","last_name","setError","token","Object","entries","key","message","registerUser","App","props","getUsernameFromToken","arToken","length","parse","atob","tokenString","localStorage","getItem","userName","getToken","userToken","setItem","removeItem","useAuthToken","innerWidth","screenWidth","setScreenWidth","setIsMobileDevice","isMobileView","paramsRouter","useParams","csrftoken","cookieValue","cookies","i","trim","substring","decodeURIComponent","getCookie","loginModalShow","registerModalShow","setMapBaseLayerName","setDictManeuvers","setTypeViolations","setDictViolators","setDataAccidents","dataFilters","setDataFilters","setMinMaxDateData","setDataAccidentForm","isMobile","setShowSidebar","setShowAccidentTab","setCheckButtonNewMarker","setCheckButtonHeatmap","setCheckButtonGPS","setShowOkCancelMobileMarker","handleWindowSizeChange","fetchManeuvers","fetchTypeViolations","fetchViolators","myHeaders","Headers","append","response","refreshAuthToken","refresh","checkAuthToken","test","navigator","userAgent","addEventListener","removeEventListener","fetchAccidents","cityName","datefilter_Min","datefilter_Max","features","slice","fetchUrl","bodyObject","alert","statusText","detail","interval","setInterval","clearInterval","paddingRight","paddingLeft","valueFilter","dateFrom_Filter","dateTo_Filter","maneuver_Filter","description_Filter","violations_type_Filter","violators_Filter","drivers_injured_Filter","motorcyclists_injured_Filter","cyclists_injured_Filter","ped_injured_Filter","kids_injured_Filter","pubtr_passengers_injured_Filter","drivers_killed_Filter","motorcyclists_killed_Filter","cyclists_killed_Filter","ped_killed_Filter","kids_killed_Filter","pubtr_passengers_killed_Filter","public_transport_involved_Filter","toLowerCase","indexOf","String","driverInjuredFilter","motorcyclistInjuredFilter","cyclistInjuredFilter","pedestrianInjuredFilter","returnValue","push","refreshToken","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","basename","path","element","getElementById"],"mappings":"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","file":"static/js/main.625e58b1.chunk.js","sourcesContent":["import { useState, useEffect } from 'react'\r\nimport Container from 'react-bootstrap/Container';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction MenuGlobal({currentCity, appname, onClickShowMenu, setLoginModalShow, authToken, setAuthToken}) {\r\n    const [cities, setCities] = useState([])    \r\n\r\n\r\n    useEffect(() => {\r\n        const fetchCities = async () => {\r\n          const res = await fetch(`${process.env.REACT_APP_API_URL}cities/`)\r\n          const data = await res.json()\r\n          setCities(data)\r\n          console.log(data)\r\n        }\r\n    \r\n        fetchCities()\r\n      }, [])  \r\n      \r\n      \r\n\r\n    return (\r\n\t\t<Navbar bg=\"light\" expand=\"lg\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"start-0\"\r\n\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\tid=\"menu-toggle\"\r\n\t\t\t\t\tonClick={onClickShowMenu}\r\n\t\t\t\t>\r\n\t\t\t\t\tMenu\r\n\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\r\n\t\t\t\t\t<Nav className=\"ms-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/\">Начало</Nav.Link>\r\n\r\n\t\t\t\t\t\t<NavDropdown title=\"Карти\" id=\"basic-nav-dropdown\">\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/roadaccident/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"roadaccident\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tПътно транспортни произвешствия\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/citytree/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"citytree\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tГрадска растителност\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/urbanobject/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"urbanobject\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tГрадски обекти\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown title=\"Град\" id=\"basic-nav-dropdown\">\r\n\t\t\t\t\t\t\t{cities.map((city) => (\r\n\t\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\t\t\tkey={city.id}\r\n\t\t\t\t\t\t\t\t\tto={`/${city.sysname}`}\r\n\t\t\t\t\t\t\t\t\tactive={currentCity === city.sysname}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{city.cityname}\r\n\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\r\n\t\t\t\t\t\t{authToken ? (\t\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t{`Hello, ${authToken.username}`}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetAuthToken(undefined);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\tLogout\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => setLoginModalShow(true)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tSignin\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t)}\r\n\r\n\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default MenuGlobal\r\n","import { useState, useEffect } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, } from 'react-bootstrap';\r\nimport Select from \"react-select\";\r\n\r\n//export const DictionariesContext = createContext({})\r\n\r\n\r\nfunction FormFilter( {onSubmitFilter, minMaxDateData, dictManeuvers, dictTypeViolations, dictViolators} ) {\r\n\r\n    // used to set default values for dates control, because when it renders first time, minMaxDateData is still empty, after that I just can't change def values, so do it manually \r\n    useEffect(() => {\r\n        setDefaultsForDates()\r\n    }, [minMaxDateData])\r\n\r\n\r\n    function setDefaultsForDates(){\r\n        setValue('dateFromFilter', minMaxDateData.minDate)\r\n        setValue('dateToFilter', minMaxDateData.maxDate)\r\n    }\r\n\r\n \r\n    const { control, handleSubmit, reset, setValue } = useForm({\r\n        reValidateMode: 'onChange',\r\n        defaultValues: {\r\n            dateFromFilter: '',\r\n            dateToFilter: '',\r\n            descFilter: '',\r\n            maneuverFilter: '',\r\n            violationsTypeFilter: '',\r\n            violatorsFilter: '',\r\n\r\n            driverViolationFilter:  false,\r\n            motorcyclistViolationFilter:  false,\r\n            cyclistViolationFilter:  false,\r\n            pedestrianViolationFilter:  false,\r\n            kidsInjuredFilter:  false,\r\n            pubtrPassengersInjuredFilter: false,\r\n            \r\n            driversKilledFilter: false,\r\n            motorcyclistsKilledFilter: false,\r\n            cyclistsKilledFilter: false,\r\n            pedestrianKilledFilter: false,\r\n            kidsKilledFilter: false,\r\n            pubtrPassengersKilledFilter: false,\r\n\r\n            publicTransportInvolvedFilter: false,\r\n            showOnlyMyAccidentsFilter: false,\r\n\r\n          select: {}\r\n        }\r\n      });    \r\n\r\n      \r\n\r\n\r\n      //let optionsManeuverFilter = []\r\n      //let arManeuvers = dictsContex?.dictManeuvers\r\n      //if (Array.isArray(arManeuvers)) {\r\n      //  optionsManeuverFilter = arManeuvers.map((x) => { return {value: x.id, label: x.maneuvername} })  \r\n      //}\r\n\r\n      //let optionsTypeViolationsFilter = []\r\n      //let arTypeViolations = dictsContex?.dictTypeViolations\r\n      //if (Array.isArray(arTypeViolations)) {\r\n      //    optionsTypeViolationsFilter = arTypeViolations.map((x) => { return {value: x.id, label: x.violationname} })  \r\n      //}     \r\n        \r\n      //let optionsViolatorsFilter = []\r\n      //let arViolators = dictsContex?.dictViolators\r\n      //if (Array.isArray(arViolators)) {\r\n      //    optionsViolatorsFilter = arViolators.map((x) => { return {value: x.id, label: x.violatorname} })  \r\n      //}         \r\n\r\n    \r\n    let optionsManeuverFilter = []\r\n    if (Array.isArray(dictManeuvers)) {\r\n        optionsManeuverFilter = dictManeuvers.map((x) => { return {value: x.id, label: x.maneuvername} })  \r\n    }\r\n\r\n    let optionsTypeViolationsFilter = []\r\n    if (Array.isArray(dictTypeViolations)) {\r\n        optionsTypeViolationsFilter = dictTypeViolations.map((x) => { return {value: x.id, label: x.violationname} })  \r\n    }\r\n    \r\n    let optionsViolatorsFilter = []\r\n    if (Array.isArray(dictViolators)) {\r\n        optionsViolatorsFilter = dictViolators.map((x) => { return {value: x.id, label: x.violatorname} })  \r\n    }    \r\n\r\n      \r\n      \r\n    \r\n    \r\n    function onResetButton(e) {\r\n        reset()\r\n        setDefaultsForDates()\r\n        onSubmitFilter({})\r\n    }     \r\n    \r\n\r\n\r\n    return (\r\n        <div>\r\n            <Form className=\"m-1\" onSubmit={handleSubmit(onSubmitFilter)}> \r\n\r\n                <Row >\r\n                    <Form.Group as={Col} controlId=\"formDateFromFilter\">\r\n                        <Form.Label>От</Form.Label>\r\n                        <Controller\r\n                            name=\"dateFromFilter\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"date\" {...field} />}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formDateToFilter\">\r\n                        <Form.Label>До</Form.Label>\r\n                        <Controller\r\n                            name=\"dateToFilter\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"date\" {...field} />}\r\n                        />\r\n                    </Form.Group>\r\n                </Row>\r\n\r\n\r\n\r\n                <Row className=\"mt-3\">\r\n                    <Form.Group as={Col} controlId=\"formManeuverFilter\">\r\n                        <Form.Label>Маньовър на МПС</Form.Label>\r\n                        <Controller\r\n                            name=\"maneuverFilter\"\r\n                            control={control}\r\n                            render={({ field }) => <Select {...field} isClearable options={optionsManeuverFilter} />}\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formDescFilter\">\r\n                        <Form.Label>Описание</Form.Label>\r\n                        <Controller\r\n                            name=\"descFilter\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"text\" {...field} />}\r\n                        />\r\n                    </Form.Group>                    \r\n                </Row>                \r\n\r\n\r\n\r\n                <Form.Group controlId=\"formViolationsTypeFilter\" className=\"mt-3\">\r\n                    <Form.Label>Вид на нарушение</Form.Label>\r\n                    <Controller\r\n                        name=\"violationsTypeFilter\"\r\n                        control={control}\r\n                        render={({ field }) => <Select {...field} isMulti options={optionsTypeViolationsFilter} />}\r\n                    />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formviolatorsFilter\" className=\"mt-3\">\r\n                    <Form.Label>Нарушители</Form.Label>\r\n                    <Controller\r\n                        name=\"violatorsFilter\"\r\n                        control={control}\r\n                        render={({ field }) => <Select {...field} isMulti options={optionsViolatorsFilter} />}\r\n                    />\r\n                </Form.Group>      \r\n\r\n\r\n\r\n                <Card body className=\"mt-3\">\r\n                    <Card.Title><h6>Пострадали</h6></Card.Title>\r\n                    \r\n                        <Controller\r\n                            name=\"driverInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Шофьор\" type=\"checkbox\" id=\"idDriverInjuredFilter\"/>\r\n                            }\r\n                        />        \r\n\r\n                        <Controller\r\n                            name=\"motorcyclistInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Мотоциклист\" type=\"checkbox\" id=\"idMotorcyclistInjuredFilter\"/>\r\n                            }\r\n                        />                                         \r\n\r\n                        <Controller\r\n                            name=\"cyclistInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Велосипедист\" type=\"checkbox\" id=\"idCyclistInjuredFilter\"/>\r\n                            }\r\n                        /> \r\n\r\n                        <Controller\r\n                            name=\"pedestrianInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Пешеходец\" type=\"checkbox\" id=\"idPedestrianInjuredFilter\"/>\r\n                            }\r\n                        /> \r\n\r\n                        <Controller\r\n                            name=\"kidsInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Дете\" type=\"checkbox\" id=\"idKidsInjuredFilter\"/>\r\n                            }\r\n                        /> \r\n     \r\n                        <Controller\r\n                            name=\"pubtrPassengersInjuredFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Пътник на ГТ\" type=\"checkbox\" id=\"idPubtrPassengersInjuredFilter\"/>\r\n                            }\r\n                        />                         \r\n                </Card>          \r\n\r\n\r\n\r\n                <Card body className=\"mt-3\">\r\n                    <Card.Title><h6>Убити</h6></Card.Title>\r\n                    \r\n                        <Controller\r\n                            name=\"driversKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Шофьор\" type=\"checkbox\" id=\"idDriversKilledFilter\"/>\r\n                            }\r\n                        />        \r\n\r\n                        <Controller\r\n                            name=\"motorcyclistsKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Мотоциклист\" type=\"checkbox\" id=\"idMotorcyclistsKilledFilter\"/>\r\n                            }\r\n                        />                                         \r\n\r\n                        <Controller\r\n                            name=\"cyclistsKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Велосипедист\" type=\"checkbox\" id=\"idCyclistsKilledFilter\"/>\r\n                            }\r\n                        /> \r\n\r\n                        <Controller\r\n                            name=\"pedestrianKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Пешеходец\" type=\"checkbox\" id=\"idPedestrianKilledFilter\"/>\r\n                            }\r\n                        /> \r\n\r\n                        <Controller\r\n                            name=\"kidsKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Дете\" type=\"checkbox\" id=\"idKidsKilledFilter\"/>\r\n                            }\r\n                        /> \r\n     \r\n                        <Controller\r\n                            name=\"pubtrPassengersKilledFilter\"\r\n                            control={control}\r\n                            render={({ field }) => \r\n                                <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Пътник на ГТ\" type=\"checkbox\" id=\"idPubtrPassengersKilledFilter\"/>\r\n                            }\r\n                        />                         \r\n                </Card> \r\n\r\n\r\n                <Form.Group controlId=\"formPublicTransportInvolvedFilter\" className=\"mt-3 ms-1\">\r\n                    <Controller\r\n                                name=\"publicTransportInvolvedFilter\"\r\n                                control={control}\r\n                                render={({ field }) => \r\n                                    <Form.Check {...field} checked={field['value'] ?? false} inline label=\"ГТ участва в ПТП\" type=\"checkbox\" id=\"idPublicTransportInvolvedFilter\"/>\r\n                                }\r\n                    /> \r\n                </Form.Group>\r\n\r\n                <Form.Group controlId=\"formShowOnlyMyAccidentsFilter\" className=\"mt-3 ms-1\">\r\n                    <Controller\r\n                                name=\"showOnlyMyAccidentsFilter\"\r\n                                control={control}\r\n                                render={({ field }) => \r\n                                    <Form.Check {...field} checked={field['value'] ?? false} inline label=\"Покажи ПТП добавени от мен\" type=\"checkbox\" id=\"idShowOnlyMyAccidentsFilter\"/>\r\n                                }\r\n                    /> \r\n                </Form.Group>\r\n\r\n\r\n                <div className=\"mt-4 me-2 float-end\">\r\n                    <Button variant=\"light\" onClick={onResetButton}>Изчисти</Button>{' '}\r\n                    <Button type=\"submit\" variant=\"primary\" style={{ minWidth: '150px' }}>Търси</Button>{' '}\r\n                </div>\r\n\r\n            </Form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormFilter\r\n","import { useState, useEffect, useRef } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap';\r\nimport Select from \"react-select\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\"\r\n\r\nimport Datetime from 'react-datetime'\r\nimport \"react-datetime/css/react-datetime.css\"\r\n\r\nimport moment from 'moment';\r\n\r\n\r\nfunction FormAccident( {newMarkerState, onSubmitAccident, onDeleteAccident, onCloseAccident, dictManeuvers, dictTypeViolations, dataAccidentForm, dictViolators, currentCity} ) {\r\n    \r\n    const [showModalDelete, setShowModalDelete] = useState(false);\r\n    const dateTimeRef = useRef(null)\r\n\r\n    //const handleShowModalDeleteClose = () => setShowModalDelete(false);\r\n\r\n\r\n    useEffect(() => {\r\n        if (newMarkerState.visible) {\r\n            reset()\r\n                    \r\n            // perhaps a bug of component, value is not reset, so reset it manually\r\n            dateTimeRef.current.state.inputValue = ''\r\n            dateTimeRef.current.state.selectedDate = undefined\r\n                        \r\n            setValue('latAccidentForm', newMarkerState.position.lat) \r\n            setValue('lngAccidentForm', newMarkerState.position.lng)             \r\n        }\r\n    }, [newMarkerState])\r\n\r\n\r\n    useEffect(() => {\r\n        let formData = {}\r\n\r\n        formData.accidentId = dataAccidentForm?.properties?.id\r\n        formData.latAccidentForm = dataAccidentForm?.properties?.latitude\r\n        formData.lngAccidentForm = dataAccidentForm?.properties?.longitude\r\n        formData.descAccidentForm = dataAccidentForm?.properties?.description\r\n        \r\n        if (dataAccidentForm?.properties?.datetime) {\r\n            formData.dateTimeAccidentForm = moment(dataAccidentForm?.properties?.datetime)\r\n        }\r\n        \r\n        let maneuver = dataAccidentForm?.properties?.maneuver\r\n        if (maneuver) {\r\n            formData.maneuverAccidentForm = optionsManeuverFilter.find((item) => item.value === maneuver)           \r\n        }\r\n\r\n        let violations_type = dataAccidentForm?.properties?.violations_type\r\n        if (violations_type) {\r\n            violations_type = violations_type.map(item => parseInt(item))            \r\n            formData.violationsTypeAccidentForm = optionsTypeViolationsFilter.filter(item => violations_type.includes(item.value))          \r\n        }        \r\n        \r\n        let violators = dataAccidentForm?.properties?.violators\r\n        if (violators) {\r\n            violators = violators.map(item => parseInt(item))            \r\n            formData.violatorsAccidentForm = optionsViolatorsFilter.filter(item => violators.includes(item.value))          \r\n        }          \r\n\r\n        \r\n        formData.driversInjuredAccidentForm = dataAccidentForm?.properties?.drivers_injured\r\n        formData.motorcyclistsInjuredAccidentForm = dataAccidentForm?.properties?.motorcyclists_injured\r\n        formData.cyclistsInjuredAccidentForm = dataAccidentForm?.properties?.cyclists_injured\r\n        formData.pedInjuredAccidentForm = dataAccidentForm?.properties?.ped_injured\r\n        formData.kidsInjuredAccidentForm = dataAccidentForm?.properties?.kids_injured\r\n        formData.pubtrPassengersInjuredAccidentForm = dataAccidentForm?.properties?.pubtr_passengers_injured\r\n        \r\n        formData.driversKilledAccidentForm = dataAccidentForm?.properties?.drivers_killed\r\n        formData.motorcyclistsKilledAccidentForm = dataAccidentForm?.properties?.motorcyclists_killed\r\n        formData.cyclistsKilledAccidentForm = dataAccidentForm?.properties?.cyclists_killed\r\n        formData.pedKilledAccidentForm = dataAccidentForm?.properties?.ped_killed\r\n        formData.kidsKilledAccidentForm = dataAccidentForm?.properties?.kids_killed\r\n        formData.pubtrPassengersKilledAccidentForm = dataAccidentForm?.properties?.pubtr_passengers_killed\r\n\r\n        formData.publicTransportInvolvedAccidentForm = dataAccidentForm?.properties?.public_transport_involved\r\n\r\n\r\n\r\n        //formData.violationsTypeAccidentForm = [{value: 1, label: 'Преминаване на червено'}, {value: 3, label: 'Самокатастрофирал'}]\r\n\r\n\r\n        //setValue(\"violationsTypeAccidentForm\",[{value: 1, label: 'Преминаване на червено'}, {value: 3, label: 'Самокатастрофирал'}]);\r\n\r\n        //formData.violationsTypeAccidentForm = \r\n        \r\n        //console.log('optionsTypeViolationsFilter', optionsTypeViolationsFilter)\r\n        //console.log('violations_type', violations_type)\r\n        \r\n\r\n\r\n        //console.log('dictManeuvers', dictManeuvers)\r\n        //setValue(\"maneuverAccidentForm\", {value: 2, label: 'При завой надясно'}, { shouldValidate: true });\r\n        //setValue(\"maneuverAccidentForm\",[{value: 'optionA', label:'Option A'}]);\r\n\r\n  \r\n        reset(formData, {keepDefaultValues: true} )\r\n    }, [dataAccidentForm])    \r\n        \r\n\r\n\r\n\r\n\r\n    let optionsManeuverFilter = []\r\n    if (Array.isArray(dictManeuvers)) {\r\n        optionsManeuverFilter = dictManeuvers.map((x) => { return {value: x.id, label: x.maneuvername} })  \r\n    }\r\n  \r\n    let optionsTypeViolationsFilter = []\r\n    if (Array.isArray(dictTypeViolations)) {\r\n        optionsTypeViolationsFilter = dictTypeViolations.map((x) => { return {value: x.id, label: x.violationname} })  \r\n    }\r\n      \r\n    let optionsViolatorsFilter = []\r\n    if (Array.isArray(dictViolators)) {\r\n        optionsViolatorsFilter = dictViolators.map((x) => { return {value: x.id, label: x.violatorname} })  \r\n    }      \r\n\r\n\r\n    \r\n\r\n    const { control, handleSubmit, reset, setValue, getValues, formState: { errors }  } = useForm({\r\n        //reValidateMode: 'onChange',\r\n        defaultValues: {\r\n            latAccidentForm: '',\r\n            lngAccidentForm: '',\r\n            descAccidentForm: '',\r\n            dateTimeAccidentForm: '',\r\n            maneuverAccidentForm: null, \r\n            violationsTypeAccidentForm: [],\r\n            violatorsAccidentForm: [],\r\n\r\n            driversInjuredAccidentForm: 0,\r\n            motorcyclistsInjuredAccidentForm: 0,\r\n            cyclistsInjuredAccidentForm: 0,\r\n            pedInjuredAccidentForm: 0,\r\n            kidsInjuredAccidentForm: 0,\r\n            pubtrPassengersInjuredAccidentForm: 0,\r\n            \r\n            driversKilledAccidentForm: 0,\r\n            motorcyclistsKilledAccidentForm: 0,\r\n            cyclistsKilledAccidentForm: 0, \r\n            pedKilledAccidentForm: 0, \r\n            kidsKilledAccidentForm: 0,\r\n            pubtrPassengersKilledAccidentForm: 0,\r\n            \r\n            publicTransportInvolvedAccidentForm: false,\r\n              \r\n            accidentId: ''\r\n        }\r\n    }); \r\n\r\n\r\n\r\n    function prepareOnSubmitAccident (data) {\r\n        let dataRest = {}\r\n\r\n        \r\n        dataRest.id = parseInt(getValues(\"accidentId\")) || null\r\n        //dataRest.city = currentCity\r\n        dataRest.latitude = getValues(\"latAccidentForm\")\r\n        dataRest.longitude = getValues(\"lngAccidentForm\")\r\n        dataRest.datetime = getValues(\"dateTimeAccidentForm\").format('YYYY-MM-DDTHH:mm')\r\n        \r\n        dataRest.maneuver = getValues(\"maneuverAccidentForm\")?.value   \r\n        if (dataRest.maneuver === undefined) { dataRest.maneuver = null }\r\n        \r\n        dataRest.description = getValues(\"descAccidentForm\")        \r\n        dataRest.violations_type = getValues(\"violationsTypeAccidentForm\").map((item) => item.value)\r\n        dataRest.violators = getValues(\"violatorsAccidentForm\").map((item) => item.value)\r\n        \r\n        dataRest.drivers_injured = parseInt(getValues(\"driversInjuredAccidentForm\")) || 0\r\n        dataRest.motorcyclists_injured = parseInt(getValues(\"motorcyclistsInjuredAccidentForm\")) || 0\r\n        dataRest.cyclists_injured = parseInt(getValues(\"cyclistsInjuredAccidentForm\")) || 0\r\n        dataRest.ped_injured = parseInt(getValues(\"pedInjuredAccidentForm\")) || 0\r\n        dataRest.kids_injured = parseInt(getValues(\"kidsInjuredAccidentForm\")) || 0\r\n        dataRest.pubtr_passengers_injured = parseInt(getValues(\"pubtrPassengersInjuredAccidentForm\")) || 0\r\n        \r\n        dataRest.drivers_killed = parseInt(getValues(\"driversKilledAccidentForm\")) || 0\r\n        dataRest.motorcyclists_killed = parseInt(getValues(\"motorcyclistsKilledAccidentForm\")) || 0\r\n        dataRest.cyclists_killed = parseInt(getValues(\"cyclistsKilledAccidentForm\")) || 0\r\n        dataRest.ped_killed = parseInt(getValues(\"pedKilledAccidentForm\")) || 0\r\n        dataRest.kids_killed = parseInt(getValues(\"kidsKilledAccidentForm\")) || 0\r\n        dataRest.pubtr_passengers_killed = parseInt(getValues(\"pubtrPassengersKilledAccidentForm\")) || 0\r\n        \r\n        dataRest.public_transport_involved = getValues(\"publicTransportInvolvedAccidentForm\")\r\n\r\n        onSubmitAccident(dataRest)    \r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Form className=\"m-1\" onSubmit={handleSubmit(prepareOnSubmitAccident)}>\r\n\r\n                <Row>\r\n                    <Form.Group as={Col} controlId=\"formDateFromFilter\">\r\n                        <Form.Label>Lat/Lng <a href=\"#\"><i className=\"fas fa-edit align-middle\"></i></a></Form.Label>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formLatAccident\">\r\n                        <Controller\r\n                            name=\"latAccidentForm\"\r\n                            control={control}\r\n                            rules={{ required: true }}\r\n                            render={({ field }) => <Form.Control type=\"number\" step=\"any\" size=\"sm\" isInvalid={!!errors.latAccidentForm} {...field} />}\r\n                        />\r\n\r\n                        <Form.Control.Feedback type=\"invalid\">\r\n                            Required field\r\n                        </Form.Control.Feedback>                          \r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formLngAccident\">\r\n                        <Controller\r\n                            name=\"lngAccidentForm\"\r\n                            control={control}\r\n                            rules={{ required: true }}\r\n                            render={({ field }) => <Form.Control type=\"number\" step=\"any\" size=\"sm\" isInvalid={!!errors.lngAccidentForm} {...field} />}\r\n                        />\r\n                        <Form.Control.Feedback type=\"invalid\">\r\n                            Required field\r\n                        </Form.Control.Feedback>                        \r\n                    </Form.Group>                    \r\n                </Row>\r\n\r\n\r\n                <Form.Group controlId=\"formDescriptionAccident\" className=\"mt-3\">\r\n                    <Form.Label>Описание</Form.Label>\r\n                    <Controller\r\n                        name=\"descAccidentForm\"\r\n                        control={control}\r\n                        render={({ field }) => <Form.Control type=\"text\" as=\"textarea\" rows={3}  {...field} />}\r\n                    />\r\n                </Form.Group>\r\n\r\n\r\n                <Row className=\"mt-3\">\r\n                    <Form.Group as={Col} controlId=\"formDateTimeAccident\">\r\n                        <Form.Label>Дата и час</Form.Label>\r\n                        <Controller\r\n                            name=\"dateTimeAccidentForm\"\r\n                            control={control}\r\n                            rules={{ required: true }}\r\n                            \r\n                            render={({ field }) => <Datetime {...field} ref={dateTimeRef} />}\r\n                        />\r\n                        { errors.dateTimeAccidentForm ? \r\n                            <p style={{color: \"red\"}}><small>Required field</small></p> \r\n                            : ''                            \r\n                        }   \r\n                      \r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formManeuverAccident\">\r\n                        <Form.Label>Маньовър на МПС</Form.Label>\r\n                        <Controller\r\n                            name=\"maneuverAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Select {...field} isClearable options={optionsManeuverFilter} />}\r\n                        />\r\n                    </Form.Group>                    \r\n                </Row> \r\n\r\n\r\n\r\n                <Form.Group controlId=\"formViolationsTypeAccident\" className=\"mt-3\">\r\n                    <Form.Label>Вид на нарушение</Form.Label>\r\n                    <Controller\r\n                        name=\"violationsTypeAccidentForm\"\r\n                        control={control}\r\n                        render={({ field }) => <Select {...field} isMulti options={optionsTypeViolationsFilter} />}\r\n                    />\r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formViolatorsAccident\" className=\"mt-3\">\r\n                    <Form.Label>Нарушители</Form.Label>\r\n                    <Controller\r\n                        name=\"violatorsAccidentForm\"\r\n                        control={control}\r\n                        render={({ field }) => <Select {...field} isMulti options={optionsViolatorsFilter} />}\r\n                    />\r\n                </Form.Group>                \r\n\r\n\r\n\r\n\r\n                <Row className=\"mt-3\">\r\n                    <Form.Group as={Col} controlId=\"formInjuredLabelAccident\"> \r\n                        <Form.Label style={{marginTop: \"32px\"}}>Постр:</Form.Label>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formDriversInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-car fa-lg\" title=\"Шофьор и пътници\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"driversInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group>    \r\n\r\n                    <Form.Group as={Col} controlId=\"formMotorcyclistsInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-motorcycle fa-lg\" title=\"Мотоциклист\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"motorcyclistsInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formCyclistsInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-bicycle fa-lg\" title=\"Велосипедист\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"cyclistsInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formPedInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-walking fa-lg\" title=\"Пешеходец\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"pedInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formKidsInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-baby fa-lg\" title=\"Дете\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"kidsInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formPubtrPassengersInjuredAccident\" className=\"ps-1 pe-0\">\r\n                        <Form.Label><i className=\"fas fa-bus-alt fa-lg\" title=\"Пътник на градски транспорт\"></i></Form.Label>\r\n                        <Controller\r\n                            name=\"pubtrPassengersInjuredAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group>                                                                                                                     \r\n                </Row> \r\n\r\n\r\n\r\n                <Row className=\"mt-0\">\r\n                    <Form.Group as={Col} controlId=\"formKilledLabelAccident\"> \r\n                        <Form.Label>Убити:</Form.Label>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formDriversKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"driversKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group>    \r\n\r\n                    <Form.Group as={Col} controlId=\"formMotorcyclistsKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"motorcyclistsKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formCyclistsKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"cyclistsKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formPedKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"pedKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formKidsKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"kidsKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group> \r\n\r\n                    <Form.Group as={Col} controlId=\"formPubtrPassengersKilledAccident\" className=\"ps-1 pe-0\">\r\n                        <Controller\r\n                            name=\"pubtrPassengersKilledAccidentForm\"\r\n                            control={control}\r\n                            render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                        />\r\n                    </Form.Group>                                                                                                                     \r\n                </Row>                 \r\n\r\n\r\n                <Form.Group controlId=\"formPublicTransportInvolvedAccident\" className=\"mt-3 ms-1\">\r\n                    <Controller\r\n                                name=\"publicTransportInvolvedAccidentForm\"\r\n                                control={control}\r\n                                render={({ field }) => \r\n                                    <Form.Check {...field} checked={field['value'] ?? false} inline label=\"ГТ участва в ПТП\" type=\"checkbox\" id=\"idPublicTransportInvolvedAccident\"/>\r\n                                }\r\n                    /> \r\n                </Form.Group>\r\n\r\n\r\n                <Form.Group controlId=\"formIdAccident\" className=\"mt-3\">\r\n                    <Controller\r\n                        name=\"accidentId\"\r\n                        control={control}\r\n                        render={({ field }) => <Form.Control type=\"number\" size=\"sm\" min=\"0\" max=\"99\" {...field} />}\r\n                    />\r\n                </Form.Group>\r\n\r\n\r\n\r\n                <div className=\"mt-4 me-2 float-end\">\r\n                    <Button onClick={() => setShowModalDelete(true)} variant=\"light\">Изтрий</Button>{' '}\r\n                    <Button onClick={onCloseAccident} variant=\"secondary\">Изход</Button>{' '}\r\n                    <Button type=\"submit\" variant=\"primary\" style={{ minWidth: '110px' }}>Запази</Button>\r\n                </div>\r\n\r\n\r\n            </Form>            \r\n            \r\n\r\n\r\n            \r\n\r\n            <Modal show={showModalDelete} onHide={() => setShowModalDelete(false)}>\r\n                <Modal.Header closeButton>\r\n                <Modal.Title>Изтриване</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>Наистина ли искате да изтриете този инцидент?</Modal.Body>\r\n                <Modal.Footer>\r\n                <Button variant=\"light\" onClick={() => {setShowModalDelete(false); onDeleteAccident(getValues(\"accidentId\"))} }>\r\n                    Изтрий\r\n                </Button>\r\n                <Button variant=\"secondary\" onClick={() => setShowModalDelete(false)}>\r\n                    Отмени\r\n                </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default FormAccident\r\n","import { useState } from 'react'\r\nimport Tabs from 'react-bootstrap/Tabs'\r\nimport Tab from 'react-bootstrap/Tab'\r\nimport FormFilter from './FormFilter'\r\nimport FormAccident from './FormAccident'\r\n\r\nconst SidebarTabs = ({\r\n\t\t\t\t\t\tonSubmitFilter, \r\n\r\n\t\t\t\t\t\tonSubmitAccident, \r\n\t\t\t\t\t\tonDeleteAccident, \r\n\t\t\t\t\t\tonCloseAccident,\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\tminMaxDateData, \r\n\t\t\t\t\t\tdataAccidentForm,\r\n\r\n\t\t\t\t\t\tshowAccidentTab, \r\n\t\t\t\t\t\tactiveTabKey, \r\n\t\t\t\t\t\tsetActiveTabKey, \r\n\t\t\t\t\t\tnewMarkerState, \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdictManeuvers, \r\n\t\t\t\t\t\tdictTypeViolations, \r\n\t\t\t\t\t\tdictViolators,\r\n\t\t\t\t\t\tcurrentCity\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}) => {\r\n    const [key, setKey] = useState('filter')    \r\n    \r\n    return (\r\n        <Tabs\r\n        \tid=\"controlled-tab-example\"\r\n          \tactiveKey={activeTabKey}\r\n\t\t\tonSelect={(k) => setActiveTabKey(k)}\r\n          \t//onSelect={(k) => setKey(k)}\r\n          \tclassName=\"mb-3\"\r\n\t\t>\r\n\r\n        \t<Tab eventKey=\"filter\" title=\"Търсене\">\r\n\t\t\t\t<div style={{overflowY: 'auto', overflowX: 'hidden', width: '100%', height: 'calc(100vh - 130px)'}}>\r\n\t\t\t\t\t<FormFilter \r\n\t\t\t\t\t\tonSubmitFilter={onSubmitFilter} \r\n\t\t\t\t\t\tminMaxDateData={minMaxDateData} \r\n\t\t\t\t\t\tdictManeuvers={dictManeuvers} \r\n\t\t\t\t\t\tdictTypeViolations={dictTypeViolations} \r\n\t\t\t\t\t\tdictViolators={dictViolators} \r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n          \t</Tab>\r\n\r\n          \t<Tab eventKey=\"accident\" title=\"ПТП\" tabClassName={!showAccidentTab ? 'd-none' : ''}>\r\n\t\t\t  \t<div style={{overflowY: 'auto', overflowX: 'hidden', width: '100%', height: 'calc(100vh - 130px)'}}>\r\n\t\t\t\t\t<FormAccident \r\n\t\t\t\t\t\tonSubmitAccident={onSubmitAccident}\r\n\t\t\t\t\t\tonDeleteAccident={onDeleteAccident}\r\n\t\t\t\t\t\tonCloseAccident={onCloseAccident}\r\n\t\t\t\t\t\tnewMarkerState={newMarkerState}\r\n\t\t\t\t\t\tdictManeuvers={dictManeuvers}\r\n\t\t\t\t\t\tdictTypeViolations={dictTypeViolations}\r\n\t\t\t\t\t\tdictViolators={dictViolators} \r\n\t\t\t\t\t\tdataAccidentForm={dataAccidentForm}\r\n\t\t\t\t\t\tcurrentCity={currentCity}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n          \t</Tab>\r\n          \r\n\r\n\r\n        </Tabs>\r\n      );\r\n}\r\n\r\nexport default SidebarTabs\r\n","import { useState } from 'react'\r\nimport SidebarTabs from './SidebarTabs';\r\n\r\nconst Sidebar = ({\r\n                    onSubmitFilter, \r\n                    \r\n                    onSubmitAccident, \r\n                    onDeleteAccident, \r\n                    onCloseAccident,\r\n                    \r\n                    minMaxDateData, \r\n                    dataAccidentForm,\r\n\r\n                    showAccidentTab, \r\n                    activeTabKey, \r\n                    setActiveTabKey, \r\n                    newMarkerState, \r\n                    dictManeuvers, \r\n                    dictTypeViolations, \r\n                    dictViolators,\r\n                    currentCity\r\n                }) => {\r\n\r\n    \r\n\r\n    return (\r\n        <div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\r\n            <div className=\"list-group list-group-flush\" style={{marginTop: '15px'}}>\r\n\r\n                <SidebarTabs \r\n                    onSubmitFilter={onSubmitFilter} \r\n                    \r\n                    onSubmitAccident={onSubmitAccident}\r\n                    onDeleteAccident={onDeleteAccident}\r\n                    onCloseAccident={onCloseAccident}\r\n\r\n                    minMaxDateData={minMaxDateData} \r\n                    dataAccidentForm={dataAccidentForm}\r\n                    \r\n                    showAccidentTab={showAccidentTab} \r\n                    activeTabKey={activeTabKey}\r\n                    setActiveTabKey={setActiveTabKey}\r\n                    newMarkerState={newMarkerState}\r\n\r\n                    dictManeuvers={dictManeuvers} \r\n                    dictTypeViolations={dictTypeViolations} \r\n                    dictViolators={dictViolators} \r\n                    currentCity={currentCity}\r\n                />\r\n\r\n            </div>            \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Sidebar\r\n","import L from 'leaflet';\r\nimport easyButton from 'leaflet-easybutton'\r\nimport \"leaflet-easybutton/src/easy-button.css\"\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\" \r\n \r\nfunction ButtonMap_ (map, iconTrue, iconFalse, onClick, checkButtonState) {\r\n    //const map = useMap()\r\n    \r\n            const buttonMap = L.easyButton({\r\n                position: 'topright',\r\n                states:[\r\n                    {\r\n                        stateName: 'off',\r\n                        icon: `<i class=\"${iconTrue}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('on');\r\n                            control.button.style.backgroundColor = 'red';\r\n                            onClick(true)\r\n                        }\r\n                    },\r\n        \r\n                    {\r\n                        stateName: 'on',\r\n                        icon: `<i class=\"${iconFalse}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('off');\r\n                            control.button.style.backgroundColor = 'white';\r\n                            onClick(false)\r\n                        }\r\n                    }]\r\n            }).addTo( map );\r\n\r\n\r\n\r\n            //if (checkButtonState) {\r\n            //    buttonMap.state('on');\r\n            //    buttonMap.button.style.backgroundColor = 'red';\r\n            //} else {\r\n            //    buttonMap.state('off');\r\n            //    buttonMap.button.style.backgroundColor = 'white';            \r\n            //}\r\n            \r\n            \r\n    \r\n    return buttonMap\r\n\r\n}\r\n\r\nexport default ButtonMap_\r\n","import { useState, useEffect, useRef, useMemo } from 'react'\r\nimport { MapContainer, LayersControl, TileLayer, ZoomControl, useMapEvents, GeoJSON, useMap, Marker, Popup } from 'react-leaflet'\r\nimport L from 'leaflet'\r\nimport \"leaflet.heat\"\r\n\r\n//import ButtonMap from './ButtonMap'\r\nimport ButtonMap_ from './ButtonMap_'\r\n\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport redIconFile from './images/markers/marker-red.png';\r\nimport redIconShadowFile from './images/markers/marker-shadow.png';\r\n\r\n\r\n\r\n// fix disapeared marker from map\r\n\r\n//import icon from 'leaflet/dist/images/marker-icon.png';\r\n//import iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n//let DefaultIcon = L.icon({\r\n//    iconAnchor: [12, 40],\r\n//    iconUrl: icon,\r\n//    shadowUrl: iconShadow\r\n//});\r\n//L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n\r\n\r\n\r\n\r\nlet redIcon = L.icon({ \r\n    iconUrl: redIconFile,\r\n    shadowUrl: redIconShadowFile,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n  });\r\n\r\n\r\nlet geojsonMarkerOptions = {\r\n    //renderer: myRenderer,\r\n    radius: 6, //6\r\n    fillColor: \"#402000\",//\"#ff7800\",\r\n    color: \"#000\",\r\n    weight: 0, //2  сильно тормозит на мобильной версии если weight > 0\r\n    opacity: 0.5,//0.7\r\n    fillOpacity: 0.6//0.2\r\n};\r\n\r\nlet buttonNewMarker = null\r\nlet buttonHeatmap = null\r\nlet buttonGPS = null\r\n\r\nlet currentCitySysname = ''\r\n\r\nlet heatMapLayer\r\nlet markersLayer\r\n\r\n\r\nfunction Map ({mapBaseLayerName, dataAccidents, dataHeatmapPoints, currentCity, newMarkerState, onDragEndNewMarker, checkButtonNewMarker, checkButtonHeatmap, checkButtonGPS, onClickMap, onMarkerClick, onClickNewMarker, onClickHeatmap, onClickGPS, filterMapCallback, onBaselayerchange, setNewMarkerState, isMobileDevice, showOkCancelMobileMarker, setMapCurrentLatLng, showSidebar}) {\r\n\r\n    const [currentCityInfo, setCurrentCityInfo] = useState({latitude: \"0\", longitude: \"0\"})\r\n    const [map, setMap] = useState(null);    \r\n \r\n\r\n    const [buttonNewMarker, setButtonNewMarker] = useState(null);\r\n    const [buttonHeatmap, setButtonHeatmap] = useState(null);\r\n    const [buttonGPS, setButtonGPS] = useState(null);\r\n\r\n\r\n    let mapname = 'Default'\r\n    let mapname_ = document.cookie\r\n    .split('; ')\r\n    .find(row => row.startsWith('mapname='))\r\n\r\n    if (mapname_) {\r\n        mapname = mapname_.split('=')[1]    \r\n    }\r\n\r\n\r\n    let newMarkerRef = useRef(null)   \r\n\r\n\r\n    // create buttons\r\n    useEffect(() => {        \r\n        if (map) {            \r\n            setButtonNewMarker( ButtonMap_(map, 'fas fa-map-marker-alt fa-lg', 'fas fa-map-marker-alt fa-lg', onClickNewMarker, checkButtonNewMarker) )\r\n            setButtonHeatmap( ButtonMap_(map, 'fas fa-eye fa-lg', 'fas fa-eye-slash fa-lg', onClickHeatmap, checkButtonHeatmap) )\r\n            setButtonGPS( ButtonMap_(map, 'fas fa-satellite-dish fa-lg', 'fas fa-satellite-dish fa-lg', onClickGPS, checkButtonGPS) )\r\n            \r\n            setMapCurrentLatLng({lat: map.getCenter().lat, lng: map.getCenter().lng})\r\n            \r\n            \r\n        }\r\n      }, [map])  //<MapContainer whenCreated={setMap} ...\r\n\r\n\r\n    // load data for the city\r\n    useEffect(() => {\r\n\r\n        const fetchCity = async () => {\r\n          const res = await fetch(`${process.env.REACT_APP_API_URL}cities/${currentCity}`)\r\n          const data = await res.json()\r\n          setCurrentCityInfo(data)\r\n        }\r\n        fetchCity()        \r\n   \r\n      }, [currentCity])  //[currentCity]\r\n   \r\n\r\n\r\n      // apply states for buttons\r\n      useEffect(() => {        \r\n        if (buttonNewMarker) {\r\n            if (checkButtonNewMarker) {\r\n                buttonNewMarker.state('on');\r\n                buttonNewMarker.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonNewMarker.state('off');\r\n                buttonNewMarker.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [checkButtonNewMarker])\r\n      useEffect(() => {        \r\n        if (buttonHeatmap) {\r\n            if (checkButtonHeatmap) {\r\n                buttonHeatmap.state('on');\r\n                buttonHeatmap.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonHeatmap.state('off');\r\n                buttonHeatmap.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [checkButtonHeatmap])\r\n      useEffect(() => {        \r\n        if (buttonGPS) {\r\n            if (checkButtonGPS) {\r\n                buttonGPS.state('on');\r\n                buttonGPS.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonGPS.state('off');\r\n                buttonGPS.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [checkButtonGPS])      \r\n\r\n\r\n\r\n    useEffect(()=>{\r\n\r\n\r\n        if (map && !isMobileDevice) {\r\n            if (checkButtonNewMarker) {\r\n                L.DomUtil.addClass(map._container,'crosshair-cursor-enabled');\r\n            } else {\r\n                L.DomUtil.removeClass(map._container,'crosshair-cursor-enabled');\r\n            }    \r\n        }\r\n    }, [checkButtonNewMarker])\r\n      \r\n\r\n\r\n    useEffect(()=>{\r\n        if (map) {\r\n            window.setTimeout(function(){map.invalidateSize({pan: false});}, 600)\r\n        }        \r\n    }, [showSidebar])\r\n\r\n\r\n    function SetPanToMap() {        \r\n        const map = useMap()\r\n        // change map position when current city has been changed\r\n        if (currentCitySysname !== currentCityInfo[\"sysname\"]) {\r\n            map.panTo( [parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])] )\r\n        }\r\n        currentCitySysname = currentCityInfo[\"sysname\"]\r\n\r\n        return null\r\n    }    \r\n\r\n\r\n    function markerOnClick(e)\r\n    {\r\n        let marker = e.target;\r\n        let geojson = marker.toGeoJSON();\r\n        onMarkerClick(geojson)\r\n        //console.log(geojson)\r\n    }\r\n\r\n    function pointToLayer(feature, latlng) {\r\n        //return L.circleMarker(latlng, geojsonMarkerOptions).bindPopup(\"MESSAGE\")\r\n        if (!checkButtonHeatmap) {\r\n            return L.circleMarker(latlng, geojsonMarkerOptions).on('click', markerOnClick)        \r\n        }\r\n        \r\n    }\r\n\r\n\r\n    function onEachFeaturePoint(feature, layer) {\r\n        //console.log('feature: ', feature);\r\n        //console.log('layer: ', layer);\r\n        layer.on({\r\n          'click': function (e) {\r\n             console.log('e: ', e);\r\n             console.log('click');\r\n           }\r\n        })\r\n    }    \r\n\r\n\r\n\r\n\r\n\r\n    function NewMarker({newMarkerState}) {          \r\n        const visible = newMarkerState.visible\r\n\r\n        const map = useMap()\r\n\r\n        const eventHandlers = useMemo(\r\n            () => ({\r\n                dragend() {\r\n                    const marker = newMarkerRef.current\r\n                    if (!isMobileDevice && marker != null) {\r\n                        //onDragEndNewMarker(marker.getLatLng())                        \r\n                        const LatLng = marker.getLatLng()\r\n                        let coord = { lat: 0, lng: 0 };\r\n                        coord.lat = LatLng.lat.toFixed(5);\r\n                        coord.lng = LatLng.lng.toFixed(5);\r\n                \r\n                        setNewMarkerState({ visible: true, position: coord });                        \r\n                    }\r\n                },\r\n            }),\r\n            [],\r\n        )\r\n\r\n\r\n\r\n\r\n\r\n        return (<>\r\n                    {visible && <> \r\n                        {(!isMobileDevice) \r\n                        ?\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={true}\r\n                                position={newMarkerState.position}\r\n                                ref={newMarkerRef}\r\n                                eventHandlers={eventHandlers}                    \r\n                            />                    \r\n                        :\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={false}\r\n                                //position={map.getCenter()}\r\n                                position={newMarkerState.position.lat==0 ? map.getCenter() : newMarkerState.position }\r\n                                ref={newMarkerRef}                 \r\n                            />\r\n                        } \r\n                </>}\r\n                                         \r\n        </>)\r\n    }\r\n    \r\n\r\n\r\n    function MapEvents() {        \r\n        const map = useMapEvents({\r\n            //baselayerchange(e) {\r\n            //    document.cookie = 'mapname='+e.name\r\n            //    //setMapname(e.name)\r\n            //    mapname = e.name\r\n            //}, \r\n            baselayerchange: onBaselayerchange,\r\n\r\n            move(e) {               \r\n                \r\n                if (showOkCancelMobileMarker) {\r\n\r\n                    const marker = newMarkerRef.current\r\n                    marker.setLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n                                    \r\n                    //let coord = { lat: 0, lng: 0 }\r\n                    //coord.lat = e.target.getCenter().lat.toFixed(5)\r\n                    //coord.lng = e.target.getCenter().lng.toFixed(5)\r\n                }    \r\n            },\r\n\r\n            moveend(e) {\r\n                if (showOkCancelMobileMarker) {\r\n                    \r\n                    const marker = newMarkerRef.current\r\n                    const LatLng = marker.getLatLng()\r\n                    let coord = { lat: 0, lng: 0 };\r\n                    coord.lat = LatLng.lat.toFixed(5);\r\n                    coord.lng = LatLng.lng.toFixed(5);                   \r\n                    setNewMarkerState({visible: true, position: coord})                        \r\n                }\r\n                setMapCurrentLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n\r\n\r\n            },\r\n            \r\n            click(e) {\r\n                onClickMap(e)\r\n            }\r\n        })\r\n      \r\n        return null\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n      function HeatmapFunction(){\r\n        const map = useMap()\r\n        //useEffect(() => {\r\n          //const points = addressPoints\r\n          //? addressPoints.map((p) => {\r\n          //  return [p[0], p[1], p[2]]; // lat lng intensity\r\n          //  })\r\n          //: [];\r\n     \r\n            const points = [\r\n                [43.207650, 27.958490, 1.0]\r\n            ]\r\n\r\n\r\n\r\n            if (heatMapLayer) { \r\n                map.removeLayer(heatMapLayer)\r\n            }\r\n\r\n            if (checkButtonHeatmap) {                \r\n                if (dataHeatmapPoints) {\r\n                    heatMapLayer = L.heatLayer(dataHeatmapPoints)//.addTo(map);\r\n                    map.addLayer(heatMapLayer)                \r\n                }\r\n            }\r\n\r\n\r\n            //heatMap.addLatLng([43.207650, 27.998590])\r\n            //heatMap.setLatLngs([])\r\n\r\n            //L.heatLayer(points).redraw()\r\n            //L.heatLayer(points).addLatLng([43.207650, 27.998590])\r\n\r\n        //}, [dataHeatmapPoints]);\r\n\r\n        return null\r\n     }\r\n\r\n\r\n\r\n    return (\r\n        <>        \r\n        {/* The map rendered before useEffect called, so first we need to load currentCityInfo before to show the map */}\r\n        { currentCityInfo[\"longitude\"] !== \"0\" && currentCityInfo[\"latitude\"]!==\"0\" ? ( \r\n\r\n            <MapContainer style={{cursor: \"crosshair\"}} whenCreated={setMap} center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} zoom={13} zoomControl={false} scrollWheelZoom={true} style={{ height: 'calc(100vh - 60px)', width: '100%' }} >                \r\n                <LayersControl position=\"topleft\">\r\n                    <LayersControl.BaseLayer checked={mapBaseLayerName === 'Default'} name=\"Default\">\r\n                        <TileLayer\r\n                            attribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n                            url=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n                            accessToken='pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ'\r\n                            id='mapbox/streets-v11'\r\n                            tileSize={512}\r\n                            zoomOffset={-1}\r\n                        />\r\n                    </LayersControl.BaseLayer>\r\n\r\n                    <LayersControl.BaseLayer checked={mapBaseLayerName === 'Dark'}  name=\"Dark\">\r\n                        <TileLayer\r\n                            attribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n                            url=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n                            accessToken='pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ'\r\n                            id='mapbox/dark-v10'\r\n                            tileSize={512}\r\n                            zoomOffset={-1}                            \r\n                        />\r\n                    </LayersControl.BaseLayer>  \r\n\r\n                </LayersControl>    \r\n\r\n\r\n                \r\n\r\n                {/* To change center of the map when current city will change */}\r\n                {/*<SetViewMap center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} />*/} \r\n                <SetPanToMap />\r\n\r\n                \r\n                <GeoJSON key={Date.now()} data={dataAccidents} pointToLayer={pointToLayer} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>\r\n                \r\n\r\n                <NewMarker newMarkerState={newMarkerState} onDragEndNewMarker={onDragEndNewMarker}/>\r\n                \r\n                <MapEvents />\r\n                \r\n                <ZoomControl position='bottomright'/>\r\n   \r\n                {/* <ButtonsControl /> */}\r\n\r\n                <HeatmapFunction />\r\n                \r\n\r\n                \r\n            </MapContainer>\r\n        ) : (\r\n            <p>Loading...</p>\r\n        )}    \r\n            \r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Map\r\n\r\n\r\n//https://egghead.io/lessons/react-create-a-new-map-using-react-leaflet\r\n\r\n//https://codesandbox.io/s/63wqz?file=/src/LeafletControlGeocoder.jsx\r\n//https://www.npmjs.com/package/leaflet-control-geocoder\r\n\r\n//https://codesandbox.io/s/how-to-add-a-legend-to-the-map-using-react-leaflet-useleaflet-hook-75jnp?file=/src/index.js\r\n\r\n//https://newbedev.com/home-button-leaflet-map\r\n\r\n//пример без React-Leaflet\r\n//https://stackoverflow.com/questions/69697017/use-leaflet-map-object-outside-useeffect-in-react","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=\"","import { useState, useEffect } from 'react'\r\nimport { Form, Button, FloatingLabel, Modal } from \"react-bootstrap\";\r\nimport { useForm, Controller  } from 'react-hook-form'\r\n\r\nconst LoginModalForm = ({ show, onHide, setLoginModalShow, setRegisterModalShow, setAuthToken }) => {\r\n\r\n    const [showWrongPassword, setShowWrongPassword] = useState(false)\r\n\r\n    useEffect(() => {\r\n        reset()\r\n        setShowWrongPassword(false)\r\n    }, [show])\r\n\r\n\r\n    const { control, handleSubmit, reset, formState: { errors }  } = useForm({\r\n        //reValidateMode: 'onChange',\r\n        defaultValues: {\r\n            username: '',\r\n            password: '',\r\n        }\r\n    }); \r\n\r\n\r\n\r\n\r\n    async function loginUser(credentials) {\r\n        return fetch(`${process.env.REACT_APP_API_URL}token/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\t\t})\r\n\t\t\t.then((data) => {\r\n                if (data.status === 200) {\r\n                    data.json().then((data) => {\r\n\t\t\t\t\t\tsetAuthToken(data)\r\n                        console.log(data.access);\r\n                        setShowWrongPassword(false)\r\n                        setLoginModalShow(false)\r\n\t\t\t\t\t});\r\n                } else if (data.status === 401) {\r\n                    setShowWrongPassword(true)\r\n                }\r\n\t\t\t\t\r\n\t\t\t});\r\n    }\r\n\r\n\r\n\r\n\r\n    const OnSubmitForm = (data) => {\r\n        setShowWrongPassword(false)\r\n        loginUser(data)        \r\n    }    \r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\tshow={show}\r\n\t\t\tonHide={onHide}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tSIGN IN\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formLogin\">\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingInput\"\r\n\t\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\r\n\t\t\t\t\t\t<Form.Check type=\"checkbox\" label=\"Remember me\" />\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{showWrongPassword && (\r\n\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\tWrong username or password.\r\n\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tLOGIN\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\tDon't have account? <a href=\"#\" onClick={()=> { setLoginModalShow(false); setRegisterModalShow(true) } }>Sign up</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default LoginModalForm;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Form, Button, FloatingLabel, Modal, Col, Row } from \"react-bootstrap\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\n\r\nconst RegisterModalForm = ({\r\n\tshow,\r\n\tonHide,\r\n\tsetRegisterModalShow,\r\n\tsetLoginModalShow,\r\n\tsetAuthToken,\r\n}) => {\r\n\t\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\t\r\n\t}, [show]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n        setError,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword2: \"\",\r\n\t\t\tfirst_name: \"\",\r\n\t\t\tlast_name: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\tconst OnSubmitForm = (data) => {\r\n\t\tregisterUser(data);\r\n\t};\r\n\r\n\tasync function registerUser(credentials) {\r\n\r\n\t\treturn fetch(\"http://localhost:8000/api/users/\", {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\r\n\t\t}).then((data) => {            \r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\t\r\n                    console.log('ok', data)\t\t\t\t\r\n                    setRegisterModalShow(false);\r\n                    setAuthToken(data.token) // after register make login\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t} else if (data.status >= 400) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\tconsole.log(data)\r\n                \r\n                    for (const [key, value] of Object.entries(data)) {                \r\n                        setError(key, {\r\n                            type: \"manual\",\r\n                            message: value,\r\n                        }); \r\n                    }                   \r\n\t\t\t\t});                \r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\tshow={show}\r\n\t\t\tonHide={onHide}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\tSIGN UP\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formRegister\">\r\n\t\t\t\t\t\t\r\n                \r\n                        {errors?.username?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{errors.username.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                        \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingUsername\"\r\n\t\t\t\t\t\t\tlabel=\"Username\"\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n                        \r\n                        {errors?.email?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{errors.email.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                          \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingEmail\"\r\n\t\t\t\t\t\t\tlabel=\"Email\"\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.email}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\r\n                        {errors?.password?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{errors.password.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}  \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel=\"Password\"\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword2\"\r\n\t\t\t\t\t\t\tlabel=\"Confirm password\"\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password2}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"first_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Firstname (optional)\"\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.first_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"last_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"Lastname (optional)\"\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.last_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tREGISTER\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\tAlready have an account?{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tsetRegisterModalShow(false);\r\n\t\t\t\t\t\t\t\t\tsetLoginModalShow(true);\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tLogin\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RegisterModalForm;\r\n","import \"./App.css\";\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport MenuGlobal from \"./components_hl/MenuGlobal\";\nimport Sidebar from \"./components/Sidebar\";\nimport Map from \"./components/Map\";\nimport LoginModalForm from \"./components/LoginModalForm\";\nimport RegisterModalForm from \"./components/RegisterModalForm\";\nimport Button from \"react-bootstrap/Button\";\n\nimport useAuthToken from \"./useAuthToken\";\n\n\nfunction App(props) {\n\t//const [userAuthToken, setUserAuthToken] = useState()\n\tconst map = useRef(null) \n\n\tconst { authToken, setAuthToken } = useAuthToken();\n\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth);\n\tconst [isMobileDevice, setIsMobileDevice] = useState(false)\n\tconst isMobileView = screenWidth <= 768;\n\t\n\n\tconst paramsRouter = useParams();\n\tconst csrftoken = getCookie(\"csrftoken\");\n\n\t//const [authToken, setAuthToken] = useState()\n\tconst [loginModalShow, setLoginModalShow] = useState(false);\n    const [registerModalShow, setRegisterModalShow] = useState(false);\n\n\tconst [mapBaseLayerName, setMapBaseLayerName] = useState(\"Default\");\n\tconst [mapCurrentLatLng, setMapCurrentLatLng] = useState({lat: 0, lng: 0})\n\t\n\n\tconst [dictManeuvers, setDictManeuvers] = useState({});\n\tconst [dictTypeViolations, setTypeViolations] = useState({});\n\tconst [dictViolators, setDictViolators] = useState({});\n\n\tconst [dataAccidents, setDataAccidents] = useState([]);\n\tconst [dataFilters, setDataFilters] = useState({});\n\tconst [minMaxDateData, setMinMaxDateData] = useState({\n\t\tminDate: \"\",\n\t\tmaxDate: \"\",\n\t});\n\tconst [dataAccidentForm, setDataAccidentForm] = useState({});\n\n\tconst [newMarkerState, setNewMarkerState] = useState({\n\t\tvisible: false,\n\t\tposition: {},\n\t\tisMobile: false\n\t});\n\n\tconst [showSidebar, setShowSidebar] = useState(!isMobileView);\n\tconst [showAccidentTab, setShowAccidentTab] = useState(false);\n\tconst [activeTabKey, setActiveTabKey] = useState(\"filter\");\n\n\tconst [checkButtonNewMarker, setCheckButtonNewMarker] = useState(false);\n\tconst [checkButtonHeatmap, setCheckButtonHeatmap] = useState(false);\n\tconst [checkButtonGPS, setCheckButtonGPS] = useState(false);\n\n\tconst [showOkCancelMobileMarker, setShowOkCancelMobileMarker] = useState(false)\n\n\tconst accidentId = parseInt(paramsRouter.accidentId, 10);\n\n\tlet dataHeatmapPoints = [];\n\n\n\n\tuseEffect(() => {\n\t\t//setUserAuthToken(getAuthToken())\n\n\t\tconst fetchManeuvers = async () => {\n\t\t\t//const url = `http://127.0.0.1:8000/api/dictionary/roadaccident/maneuvers`;\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/maneuvers`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tsetDictManeuvers(data);\n\t\t};\n\n\t\tconst fetchTypeViolations = async () => {\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/typeviolations`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tsetTypeViolations(data);\n\t\t};\n\n\t\tconst fetchViolators = async () => {\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/violators`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tsetDictViolators(data);\n\t\t};\n\n\t\tfetchManeuvers();\n\t\tfetchTypeViolations();\n\t\tfetchViolators();\n\n\t\tlet mapname_ = document.cookie\n\t\t\t.split(\"; \")\n\t\t\t.find((row) => row.startsWith(\"mapname=\"));\n\n\t\tif (mapname_) {\n\t\t\tsetMapBaseLayerName(mapname_.split(\"=\")[1]);\n\t\t}\n\n\t\tif (authToken) {\n            checkAuthToken()\n        }\n\n        \n\t\tsetIsMobileDevice( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) )\t\t\n\t\t//setIsMobileDevice( true )\t\t\n\t\t\n\t\twindow.addEventListener('resize', handleWindowSizeChange);\n        return () => {\n            window.removeEventListener('resize', handleWindowSizeChange);\t\t\t\n        }\t\t\n\t\t\n\t}, []); /* useEffect triggers when route has been changed too */\n\n\n    function handleWindowSizeChange() {\n        setScreenWidth(window.innerWidth);\n    }\n\n\n\tconst fetchAccidents = async () => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/`;\n\t\tconst res = await fetch(url);\n\t\tconst data = await res.json();\n\n\t\t// find min and max dates\n\t\tlet datefilter_Min = \"2100-01-01\";\n\t\tlet datefilter_Max = \"1970-01-01\";\n\t\tfor (let item of data.features) {\n\t\t\tconsole.log(item);\n\t\t\tif (item.properties.datetime > datefilter_Max) {\n\t\t\t\tdatefilter_Max = item.properties.datetime;\n\t\t\t}\n\t\t\tif (item.properties.datetime < datefilter_Min) {\n\t\t\t\tdatefilter_Min = item.properties.datetime;\n\t\t\t}\n\t\t}\n\t\tsetMinMaxDateData({\n\t\t\tminDate: datefilter_Min.slice(0, 10),\n\t\t\tmaxDate: datefilter_Max.slice(0, 10),\n\t\t});\n\t\tsetDataAccidents(data);\n\t};\n\n\n\n    useEffect(() => {\n        let periodUpdate = 240000 //4 min\n        let interval = setInterval(() => {\n            if (authToken) {\n                refreshAuthToken(authToken.refresh)    \n            }\n        }, periodUpdate)\n\n        return ()=> clearInterval(interval)\n    }, [authToken])\n\n\n\tuseEffect(() => {\n\t\tfetchAccidents();\n\t}, [paramsRouter]); /* useEffect triggers when route has been changed too */\n\n\n\tconst onClickMap = (e) => {\n\t\tif (checkButtonNewMarker && !isMobileDevice) {\n\t\t\tsetCheckButtonNewMarker(false);\n\n\t\t\tlet coord = { lat: 0, lng: 0 };\n\t\t\tcoord.lat = e.latlng.lat.toFixed(5);\n\t\t\tcoord.lng = e.latlng.lng.toFixed(5);\n\n\t\t\tsetNewMarkerState({ visible: true, position: coord });\n\n\t\t\tsetShowAccidentTab(true);\n\t\t\tsetActiveTabKey(\"accident\");\n\t\t}\n\t};\n\n\tconst onDragEndNewMarker = (LatLng) => {\n\t\t//let coord = { lat: 0, lng: 0 };\n\t\t//coord.lat = LatLng.lat.toFixed(5);\n\t\t//coord.lng = LatLng.lng.toFixed(5);\n\n\t\t//setNewMarkerState({ visible: true, position: coord });\n\t};\n\n\tconst onMarkerClick = (data) => {\n\t\tconsole.log(\"makrer\", data);\n\t\tsetShowAccidentTab(true);\n\t\tsetActiveTabKey(\"accident\");\n\t\tsetDataAccidentForm(data);\n\t\tsetShowSidebar(true)\n\t};\n\n\tconst onClickNewMarker = (state) => {\n\t\tsetCheckButtonNewMarker(state);\n\n\t\tif (isMobileDevice && state) {\n\t\t\t\n\t\t\tsetNewMarkerState({ visible: true, position: {lat: 0, lng: 0} })\n\t\t\tsetShowOkCancelMobileMarker(true)\n\t\t\t\n\t\t}\n\t};\n\n\tconst onClickHeatmap = (state) => {\n\t\tconsole.log(\"onClickHeatmap\", state);\n\n\t\tif (state) {\n\t\t\tsetMapBaseLayerName(\"Dark\");\n\t\t} else {\n\t\t\tsetMapBaseLayerName(\"Default\");\n\t\t}\n\t\tsetCheckButtonHeatmap(state);\n\t};\n\n\tconst onClickGPS = (state) => {\n\t\tconsole.log(\"onClickGPS\", state);\n\t\tsetCheckButtonGPS(state);\n\n\t\t//loginUser({\"username\": \"admin\", \"password\": \"admin\"})\n\t\t//setLoginModalShow(true)\n\n\n\t};\n\n\tconst onSubmitFilter = (filter) => {\n\t\tdataHeatmapPoints = [];\n\t\tsetDataFilters(filter);\n\n\t\tif (isMobileView) {\n\t\t\tsetShowSidebar(false)\n\t\t}\n\t};\n\n\tconst onSubmitAccident = (data) => {\n\t\tconsole.log(\"onSubmitAccident\", data);\n\t\tlet method;\n\t\tlet url;\n\t\tif (data.id) {\n\t\t\turl = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/${data.id}/`;\n\t\t\tmethod = \"PUT\";\n\t\t} else {\n\t\t\turl = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/`;\n\t\t\tmethod = \"POST\";\n\t\t}\n\n\t\tfetchUrl(url, method, data);\n\t\t\n\t\tif (isMobileView) {\n\t\t\tsetShowSidebar(false)\n\t\t}\n\t};\n\n\tconst onDeleteAccident = (id) => {\n\t\tfetchUrl(\n\t\t\t`${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/${id}/`,\n\t\t\t\"DELETE\"\n\t\t);\n\t};\n\n\tconst onCloseAccident = () => {\n\t\tsetNewMarkerState({ visible: false, position: {} });\n\t\tsetActiveTabKey(\"filter\");\n\t\tsetShowAccidentTab(false);\n\t};\n\n\tconst onBaselayerchange = (e) => {\n\t\t//console.log('onBaselayerchange', e.name)\n\t\tdocument.cookie = \"mapname=\" + e.name;\n\n\t\t//setMapBaseLayerName(e.name)\n\n\t\t//setMapname(e.name)\n\t\t//mapname = e.name\n\t};\n\n\tconst filterMapCallback = (feature, layer) => {\n\t\tlet dateFrom_Filter = true;\n\t\tlet dateTo_Filter = true;\n\n\t\tlet maneuver_Filter = true;\n\t\tlet description_Filter = true;\n\t\tlet violations_type_Filter = true;\n\t\tlet violators_Filter = true;\n\n\t\tlet drivers_injured_Filter = true;\n\t\tlet motorcyclists_injured_Filter = true;\n\t\tlet cyclists_injured_Filter = true;\n\t\tlet ped_injured_Filter = true;\n\t\tlet kids_injured_Filter = true;\n\t\tlet pubtr_passengers_injured_Filter = true;\n\n\t\tlet drivers_killed_Filter = true;\n\t\tlet motorcyclists_killed_Filter = true;\n\t\tlet cyclists_killed_Filter = true;\n\t\tlet ped_killed_Filter = true;\n\t\tlet kids_killed_Filter = true;\n\t\tlet pubtr_passengers_killed_Filter = true;\n\n\t\tlet public_transport_involved_Filter = true;\n\t\tlet showOnlyMyAccidents_Filter = true;\n\n\t\tlet valueFilter;\n\n\t\tvalueFilter = dataFilters?.dateFromFilter;\n\t\tif (valueFilter) {\n\t\t\tdateFrom_Filter =\n\t\t\t\tfeature.properties.datetime.split(\"T\")[0] >= valueFilter;\n\t\t}\n\t\tvalueFilter = dataFilters?.dateToFilter;\n\t\tif (valueFilter) {\n\t\t\tdateTo_Filter =\n\t\t\t\tfeature.properties.datetime.split(\"T\")[0] <= valueFilter;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.maneuverFilter?.value;\n\t\tif (valueFilter) {\n\t\t\tmaneuver_Filter = valueFilter === feature.properties.maneuver;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.descFilter;\n\t\tif (valueFilter) {\n\t\t\tif (\n\t\t\t\tfeature.properties.description\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.indexOf(valueFilter.toLowerCase()) === -1\n\t\t\t) {\n\t\t\t\tdescription_Filter = false;\n\t\t\t}\n\t\t}\n\n\t\tvalueFilter = dataFilters?.violationsTypeFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.violations_type.includes(String(x.value))\n\t\t\t);\n\t\t\tviolations_type_Filter = intersection.length > 0;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.violatorsFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.violators.includes(String(x.value))\n\t\t\t);\n\t\t\tviolators_Filter = intersection.length > 0;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.driverInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tdrivers_injured_Filter = feature.properties.drivers_injured > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.motorcyclistInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tmotorcyclists_injured_Filter =\n\t\t\t\tfeature.properties.motorcyclists_injured > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.cyclistInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tcyclists_injured_Filter = feature.properties.cyclists_injured > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.pedestrianInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tped_injured_Filter = feature.properties.ped_injured > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.kidsInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tkids_injured_Filter = feature.properties.kids_injured > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.pubtrPassengersInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tpubtr_passengers_injured_Filter =\n\t\t\t\tfeature.properties.pubtr_passengers_injured > 0;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.driversKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tdrivers_killed_Filter = feature.properties.drivers_killed > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.motorcyclistsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tmotorcyclists_killed_Filter =\n\t\t\t\tfeature.properties.motorcyclists_killed > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.cyclistsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tcyclists_killed_Filter = feature.properties.cyclists_killed > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.pedestrianKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tped_killed_Filter = feature.properties.ped_killed > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.kidsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tkids_killed_Filter = feature.properties.kids_killed > 0;\n\t\t}\n\t\tvalueFilter = dataFilters?.pubtrPassengersKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tpubtr_passengers_killed_Filter =\n\t\t\t\tfeature.properties.pubtr_passengers_killed > 0;\n\t\t}\n\n\t\tvalueFilter = dataFilters?.publicTransportInvolvedFilter;\n\t\tif (valueFilter) {\n\t\t\tpublic_transport_involved_Filter =\n\t\t\t\tfeature.properties.public_transport_involved > 0;\n\t\t}\n\t\t//valueFilter = dataFilters?.showOnlyMyAccidentsFilter\n\n\t\tlet returnValue =\n\t\t\tdateFrom_Filter &&\n\t\t\tdateTo_Filter &&\n\t\t\tmaneuver_Filter &&\n\t\t\tdescription_Filter &&\n\t\t\tviolations_type_Filter &&\n\t\t\tviolators_Filter &&\n\t\t\tdrivers_injured_Filter &&\n\t\t\tmotorcyclists_injured_Filter &&\n\t\t\tcyclists_injured_Filter &&\n\t\t\tped_injured_Filter &&\n\t\t\tkids_injured_Filter &&\n\t\t\tpubtr_passengers_injured_Filter &&\n\t\t\tdrivers_killed_Filter &&\n\t\t\tmotorcyclists_killed_Filter &&\n\t\t\tcyclists_killed_Filter &&\n\t\t\tped_killed_Filter &&\n\t\t\tkids_killed_Filter &&\n\t\t\tpubtr_passengers_killed_Filter &&\n\t\t\tpublic_transport_involved_Filter &&\n\t\t\tshowOnlyMyAccidents_Filter;\n\n\t\tif (returnValue) {\n\t\t\tdataHeatmapPoints.push([\n\t\t\t\tfeature.properties.latitude,\n\t\t\t\tfeature.properties.longitude,\n\t\t\t\t1,\n\t\t\t]);\n\t\t}\n\n\t\treturn returnValue;\n\t};\n\n\tfunction fetchUrl(url, method, bodyObject) {\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\tif (authToken?.access) {\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + authToken.access);\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(bodyObject),\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\talert(\n\t\t\t\t\t\tresponse.statusText +\n\t\t\t\t\t\t\t\" (\" +\n\t\t\t\t\t\t\tresponse.status +\n\t\t\t\t\t\t\t\")\\n\\n\" +\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//closeTabAccident();\n\t\t\t\t//if (IS_MOBILE) {\n\t\t\t\t//    CloseSidebar()\n\t\t\t\t//}\n\n\t\t\t\t// select the new/edited accident marker\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tfetchAccidents();\n\t\t\t\t\tsetNewMarkerState({ visible: false, position: {} });\n\t\t\t\t\tsetActiveTabKey(\"filter\");\n\t\t\t\t\tsetShowAccidentTab(false);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\n\n\n\n\n\n\treturn (\n\t\t<div className=\"main-wrapper\">\n\t\t\t<div id=\"app\">\n\n\t\t\t\t<div\n\t\t\t\t\tclassName={`d-flex ${showSidebar ? \"showed\" : \"hided\"}`}\n\t\t\t\t\tid=\"wrapper\"\n\t\t\t\t>\n\t\t\t\t\t{/* <DictionariesContext.Provider value={{dictManeuvers, dictTypeViolations, dictViolators}}> */}\n\t\t\t\t\t<Sidebar\n\t\t\t\t\t\tonSubmitFilter={onSubmitFilter}\n\t\t\t\t\t\tonSubmitAccident={onSubmitAccident}\n\t\t\t\t\t\tonDeleteAccident={onDeleteAccident}\n\t\t\t\t\t\tonCloseAccident={onCloseAccident}\n\t\t\t\t\t\tminMaxDateData={minMaxDateData}\n\t\t\t\t\t\tdataAccidentForm={dataAccidentForm}\n\t\t\t\t\t\tshowAccidentTab={showAccidentTab}\n\t\t\t\t\t\tactiveTabKey={activeTabKey}\n\t\t\t\t\t\tsetActiveTabKey={setActiveTabKey}\n\t\t\t\t\t\tnewMarkerState={newMarkerState}\n\t\t\t\t\t\tdictManeuvers={dictManeuvers}\n\t\t\t\t\t\tdictTypeViolations={dictTypeViolations}\n\t\t\t\t\t\tdictViolators={dictViolators}\n\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t/>\n\t\t\t\t\t{/*</DictionariesContext.Provider> */}\n\n\t\t\t\t\t<div id=\"page-content-wrapper\">\n\t\t\t\t\t\t<MenuGlobal\n\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\tonClickShowMenu={() => setShowSidebar(!showSidebar)}\n\t\t\t\t\t\t\tauthToken={authToken}\n\t\t\t\t\t\t\tsetLoginModalShow={setLoginModalShow}\n\t\t\t\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\t\t\t\tappname=\"roadaccident\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"container-fluid\"\n\t\t\t\t\t\t\tstyle={{ paddingRight: \"0px\", paddingLeft: \"0px\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\tmapBaseLayerName={mapBaseLayerName}\n\t\t\t\t\t\t\t\tdataAccidents={dataAccidents}\n\t\t\t\t\t\t\t\tdataHeatmapPoints={dataHeatmapPoints}\n\t\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\tcheckButtonNewMarker={checkButtonNewMarker}\n\t\t\t\t\t\t\t\tcheckButtonHeatmap={checkButtonHeatmap}\n\t\t\t\t\t\t\t\tcheckButtonGPS={checkButtonGPS}\n\t\t\t\t\t\t\t\tonClickNewMarker={onClickNewMarker}\n\t\t\t\t\t\t\t\tonClickHeatmap={onClickHeatmap}\n\t\t\t\t\t\t\t\tonClickGPS={onClickGPS}\n\t\t\t\t\t\t\t\tonClickMap={onClickMap}\n\t\t\t\t\t\t\t\tonMarkerClick={onMarkerClick}\n\t\t\t\t\t\t\t\tnewMarkerState={newMarkerState}\n\t\t\t\t\t\t\t\tonDragEndNewMarker={onDragEndNewMarker}\n\t\t\t\t\t\t\t\tfilterMapCallback={filterMapCallback}\n\t\t\t\t\t\t\t\tonBaselayerchange={onBaselayerchange}\n\t\t\t\t\t\t\t\tsetNewMarkerState={setNewMarkerState}\n\t\t\t\t\t\t\t\tisMobileDevice={isMobileDevice}\n\t\t\t\t\t\t\t\tshowOkCancelMobileMarker={showOkCancelMobileMarker}\n\t\t\t\t\t\t\t\tsetMapCurrentLatLng={setMapCurrentLatLng}\n\t\t\t\t\t\t\t\tshowSidebar={showSidebar}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{showOkCancelMobileMarker && <> \n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\t\t\tid=\"doneEditMarkerMobile\"\n\t\t\t\t\t\t\t\t\tonClick={()=>{\n\t\t\t\t\t\t\t\t\t\tsetCheckButtonNewMarker(false);\n\t\t\t\t\t\t\t\t\t\tsetShowOkCancelMobileMarker(false)\n\t\t\t\t\t\t\t\t\t\tsetShowAccidentTab(true)\n\t\t\t\t\t\t\t\t\t\tsetActiveTabKey(\"accident\")\n\t\t\t\t\t\t\t\t\t\tsetShowSidebar(true)\n\n\t\t\t\t\t\t\t\t\t\t//setNewMarkerState({visible: true, position: mapCurrentLatLng})\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tГотово\n\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tid=\"cancelMarkerMobile\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tsetNewMarkerState({ visible: false, position: { lat: 0, lng: 0 } })\n\t\t\t\t\t\t\t\t\t\tsetShowOkCancelMobileMarker(false)\n\t\t\t\t\t\t\t\t\t\tsetCheckButtonNewMarker(false)\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}}\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#x2715;\n\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<LoginModalForm\n\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\tshow={loginModalShow}\n\t\t\t\tsetLoginModalShow={setLoginModalShow}\n                setRegisterModalShow={setRegisterModalShow}\n\t\t\t\tonHide={() => setLoginModalShow(false)}\n\t\t\t/>\n\n\t\t\t<RegisterModalForm\n\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\tshow={registerModalShow}\n\t\t\t\tsetRegisterModalShow={setRegisterModalShow}\n                setLoginModalShow={setLoginModalShow}\n\t\t\t\tonHide={() => setRegisterModalShow(false)}\n\t\t\t/>\n\t\t</div>\n\t);\n\n\tfunction getCookie(name) {\n\t\tvar cookieValue = null;\n\t\tif (document.cookie && document.cookie !== \"\") {\n\t\t\tvar cookies = document.cookie.split(\";\");\n\t\t\tfor (var i = 0; i < cookies.length; i++) {\n\t\t\t\tvar cookie = cookies[i].trim();\n\t\t\t\t// Does this cookie string begin with the name we want?\n\t\t\t\tif (cookie.substring(0, name.length + 1) === name + \"=\") {\n\t\t\t\t\tcookieValue = decodeURIComponent(\n\t\t\t\t\t\tcookie.substring(name.length + 1)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cookieValue;\n\t}\n\n\n\n\n\n    function refreshAuthToken(refreshToken){\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\n        fetch(`${process.env.REACT_APP_API_URL}token/refresh/`, {\n            method: \"POST\",\n            headers: myHeaders,\n            body: JSON.stringify({ refresh: refreshToken }),\n\n        }).then(function (response) {\n            if (response.status == 200) {\n                response.json().then((data) => {    \n                    //setAuthToken({access: data.access, refresh: authToken.refresh})\n                    setAuthToken(data)\n                });\n            } else if (response.status >= 400) {\n                setAuthToken(null)    \n            }\n        });\n    }\n\n\n    function checkAuthToken() {\n\t\tlet body = { token: authToken.access }\n\t\tlet url = `${process.env.REACT_APP_API_URL}token/verify/`;\n\t\tlet myHeaders = new Headers();\n\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\n\t\tfetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(body),\n\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\">= 400\", data);\n\n                    refreshAuthToken(authToken.refresh)\n\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\"ok\", data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t}\n\n\n\n\t//function setAuthToken(userToken) {\n\t//    localStorage.setItem('token', JSON.stringify(userToken));\n\t//    setUserAuthToken(JSON.stringify(userToken))\n\t//}\n\n\t//function getAuthToken () {\n\t//    const tokenString = localStorage.getItem('token')\n\t//    return JSON.parse(tokenString)\n\t//}\n}\n\nexport default App;\n\n// Code Splitting in React Using Lazy and Suspense | Code Splitting Made Easy\n// https://www.youtube.com/watch?v=69Oj8JTYXZU\n","import { useState } from 'react';\r\n\r\nexport default function useAuthToken() {\r\n    const getUsernameFromToken = (json) =>{\r\n        let token = json?.access \r\n\r\n        if (token) {\r\n            const arToken = token.split('.')\r\n            if (arToken.length > 1) {\r\n                return JSON.parse(atob(arToken[1])).username\r\n            }\r\n        }\r\n    }\r\n    \r\n    const getToken = () => {\r\n        const tokenString = localStorage.getItem('token');\r\n        let json = JSON.parse(tokenString)\r\n        const userName = getUsernameFromToken(json)\r\n        if (userName) {\r\n            json.username = userName\r\n        }\r\n        return json\r\n      };\r\n\r\n    const [authToken, setAuthToken] = useState(getToken());\r\n\r\n\r\n    const saveToken = userToken => {\r\n        if (userToken) {\r\n            localStorage.setItem('token', JSON.stringify(userToken));\r\n            \r\n            const userName = getUsernameFromToken(userToken)\r\n            if (userName) {\r\n                userToken.username = userName\r\n            }            \r\n        } else {\r\n            localStorage.removeItem(\"token\")    \r\n        }           \r\n        setAuthToken(userToken);\r\n    };    \r\n\r\n    return {\r\n        setAuthToken: saveToken,\r\n        authToken\r\n    }    \r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './index.css';\nimport './sidebar.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n// Importing the Bootstrap CSS\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n  //<React.StrictMode>\n    <BrowserRouter basename=\"/roadaccident\">\n      <Routes>\n        <Route path=\"/\" element={<App />}>\n          <Route path=\":cityName\" element={<App />} >\n            <Route path=\":accidentId\" element={<App />} />\n          </Route>               \n        </Route>\n      </Routes>\n    </BrowserRouter>,\n  //</React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}