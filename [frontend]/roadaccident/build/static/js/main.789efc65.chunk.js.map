{"version":3,"sources":["actions/index.js","components_hl/MenuGlobal.tsx","components_hl/ButtonMap.js","components_hl/MapTileLayers.tsx","components_hl/Map.tsx","components/images/markers/marker-red.png","components/images/markers/marker-shadow.png","components/Sidebar.tsx","components/FormFilter.tsx","components/FormAccident.tsx","components/LoginModalForm.tsx","components/RegisterModalForm.tsx","App.tsx","useAuthToken.tsx","reportWebVitals.js","i18nextConf.js","reducers/userInterface.tsx","reducers/dataApp.tsx","reducers/index.tsx","index.js"],"names":["actNewAccidentCreation","value","type","payload","actShowSidebar","actShowAccidentTab","actActiveTabKey","actLoginModalShow","actRegisterModalShow","actMapBaseLayerName","actMapMarkerState","actShowOkCancelMobileMarker","actCheckButtonNewMarker","actCheckButtonGPS","actDataAccidents","MenuGlobal","currentCity","appname","authToken","setAuthToken","dispatch","useDispatch","rxShowSidebar","useSelector","state","uiReducer","showSidebar","useState","cities","setCities","useTranslation","t","i18n","changeLanguage","useEffect","fetchCities","a","fetch","process","res","json","data","console","log","Navbar","bg","expand","Container","Button","className","variant","id","onClick","Toggle","Collapse","Nav","Link","href","NavDropdown","title","Item","active","map","city","as","to","sysname","cityname","language","user","name","ButtonMap_","iconTrue","iconFalse","L","easyButton","position","states","stateName","icon","control","button","style","backgroundColor","addTo","MapTileLayers","heatMapLayer","setView_nTimes_gps","circle_geolocation","mapBaseLayerName","LayersControl","BaseLayer","checked","TileLayer","attribution","url","accessToken","maxZoom","tileSize","zoomOffset","subdomains","bingkey","redIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","currentCitySysname","Map","mainData","dataHeatmapPoints","onDragEndNewMarker","onClickMap","onZoomEnd","onEachLayer","pointToLayerCallback","filterMapCallback","rxMapBaseLayerName","rxIsMobileDevice","isMobileDevice","rxMapMarkerState","mapMarkerState","rxShowOkCancelMobileMarker","showOkCancelMobileMarker","rxCheckButtonNewMarker","checkButtonNewMarker","rxCheckButtonHeatmap","checkButtonHeatmap","rxCheckButtonGPS","checkButtonGPS","currentCityInfo","setCurrentCityInfo","setMap","currentZoom","setCurrentZoom","buttonNewMarker","setButtonNewMarker","buttonHeatmap","setButtonHeatmap","buttonGPS","setButtonGPS","mapname_","document","cookie","split","find","row","startsWith","newMarkerRef","useRef","onClickNewMarker","onClickHeatmap","onClickGPS","remove","fetchCity","DomUtil","addClass","_container","removeClass","window","setTimeout","invalidateSize","pan","visible","lat","lng","SetPanToMap","useMap","panTo","parseFloat","locate","enableHighAccuracy","watch","maximumAge","stopLocate","removeLayer","onEachFeaturePoint","feature","layer","on","e","NewMarker","eventHandlers","useMemo","dragend","current","marker","LatLng","getLatLng","coord","toFixed","time","Promise","resolve","then","Marker","draggable","getCenter","ref","MapEvents","useMapEvents","baselayerchange","move","setLatLng","target","moveend","click","zoomend","_zoom","locationfound","radius","accuracy","setView","latlng","hasLayer","setRadius","circle","locationerror","alert","message","MarkersZoomAdjustment","zoom","getZoom","eachLayer","HeatmapFunction","heatLayer","gradient","max","blur","addLayer","MapContainer","whenCreated","center","zoomControl","scrollWheelZoom","height","width","GeoJSON","pointToLayer","filter","onEachFeature","dateTimeGenerated","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","maxClusterRadius","iconCreateFunction","cluster","digits","count","getChildCount","divIcon","html","toString","undefined","ZoomControl","Sidebar","children","marginTop","FormFilter","onSubmitFilter","rxDictManeuvers","dataReducer","dictManeuvers","rxDictTypeViolations","dictTypeViolations","rxDictViolators","dictViolators","rxMinMaxDateData","minMaxDateData","setDefaultsForDates","setValue","minDate","maxDate","useForm","reValidateMode","defaultValues","dateFromFilter","dateToFilter","descFilter","maneuverFilter","violationsTypeFilter","violatorsFilter","driverViolationFilter","motorcyclistViolationFilter","cyclistViolationFilter","pedestrianViolationFilter","driverInjuredFilter","motorcyclistInjuredFilter","cyclistInjuredFilter","pedestrianInjuredFilter","kidsInjuredFilter","pubtrPassengersInjuredFilter","driversKilledFilter","motorcyclistsKilledFilter","cyclistsKilledFilter","pedestrianKilledFilter","kidsKilledFilter","pubtrPassengersKilledFilter","publicTransportInvolvedFilter","showOnlyMyAccidentsFilter","select","handleSubmit","reset","optionsManeuverFilter","Array","isArray","x","label","maneuvername","optionsTypeViolationsFilter","violationname","optionsViolatorsFilter","violatorname","Form","onSubmit","Row","Group","Col","controlId","Label","render","field","Control","minWidth","isClearable","isSearchable","options","isMulti","Card","body","Title","Check","inline","FormAccident","onSubmitAccident","onDeleteAccident","onCloseAccident","onClickEditCoords","dataAccidentForm","rxNewAccidentCreation","newAccidentCreation","showModalDelete","setShowModalDelete","dateTimeRef","inputValue","selectedDate","formData","accidentId","properties","latAccidentForm","latitude","lngAccidentForm","longitude","descAccidentForm","description","datetime","dateTimeAccidentForm","moment","maneuver","maneuverAccidentForm","item","violations_type","violationsTypeValues","parseInt","violationsTypeAccidentForm","includes","violators","violatorsValues","violatorsAccidentForm","driversInjuredAccidentForm","drivers_injured","motorcyclistsInjuredAccidentForm","motorcyclists_injured","cyclistsInjuredAccidentForm","cyclists_injured","pedInjuredAccidentForm","ped_injured","kidsInjuredAccidentForm","kids_injured","pubtrPassengersInjuredAccidentForm","pubtr_passengers_injured","driversKilledAccidentForm","drivers_killed","motorcyclistsKilledAccidentForm","motorcyclists_killed","cyclistsKilledAccidentForm","cyclists_killed","pedKilledAccidentForm","ped_killed","kidsKilledAccidentForm","kids_killed","pubtrPassengersKilledAccidentForm","pubtr_passengers_killed","publicTransportInvolvedAccidentForm","public_transport_involved","keepDefaultValues","getValues","errors","formState","dataRest","format","rules","required","step","size","isInvalid","Feedback","rows","color","min","display","Modal","show","onHide","Header","closeButton","Body","Footer","LoginModalForm","rxLoginModalShow","loginModalShow","showWrongPassword","setShowWrongPassword","username","password","rememberme","credentials","method","headers","JSON","stringify","status","centered","localStorage","setItem","loginUser","FloatingLabel","placeholder","Text","RegisterModalForm","rxRegisterModalShow","registerModalShow","email","password2","first_name","last_name","setError","token","Object","entries","key","registerUser","geojsonMarkerOptions","fillColor","weight","opacity","fillOpacity","App","paramsRouter","useParams","csrftoken","cookieValue","cookies","i","length","trim","substring","decodeURIComponent","getCookie","rxDataAccidents","dataAccidents","rxDataFilters","dataFilters","rxActiveTabKey","activeTabKey","rxShowAccidentTab","showAccidentTab","getUsernameFromToken","access","arToken","parse","atob","user_id","tokenString","getItem","sessionStorage","getToken","userToken","removeItem","useAuthToken","innerWidth","screenWidth","setScreenWidth","isMobileView","setDataAccidentForm","handleWindowSizeChange","fetchManeuvers","fetchTypeViolations","fetchViolators","myHeaders","Headers","append","response","refreshAuthToken","refresh","checkAuthToken","test","navigator","userAgent","addEventListener","removeEventListener","fetchAccidents","interval","setInterval","clearInterval","cityName","datefilter_Min","datefilter_Max","features","slice","Date","now","markerOnClick","geojson","toGeoJSON","fetchUrl","bodyObject","statusText","detail","Tabs","activeKey","onSelect","k","Tab","eventKey","overflowY","overflowX","tabClassName","paddingRight","paddingLeft","circleMarker","valueFilter","dateFrom_Filter","dateTo_Filter","maneuver_Filter","description_Filter","violations_type_Filter","violators_Filter","drivers_injured_Filter","motorcyclists_injured_Filter","cyclists_injured_Filter","ped_injured_Filter","kids_injured_Filter","pubtr_passengers_injured_Filter","drivers_killed_Filter","motorcyclists_killed_Filter","cyclists_killed_Filter","ped_killed_Filter","kids_killed_Filter","pubtr_passengers_killed_Filter","public_transport_involved_Filter","toLowerCase","indexOf","String","returnValue","push","refreshToken","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","use","LanguageDetector","initReactI18next","init","resources","en","translation","translationEN","translationBG","fallbackLng","interpolation","escapeValue","initialState","isMobile","action","allReducers","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","basename","path","element","getElementById"],"mappings":"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","file":"static/js/main.789efc65.chunk.js","sourcesContent":["// userInterface actions ================================================\r\nexport const actNewAccidentCreation= (value) => {\r\n    return {\r\n        type: 'NEWACCIDENTCREATION',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowSidebar = (value) => {\r\n    return {\r\n        type: 'SHOWSIDEBAR',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowAccidentTab = (value) => {\r\n    return {\r\n        type: 'SHOWACCIDENTTAB',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actActiveTabKey = (value) => {\r\n    return {\r\n        type: 'ACTIVETABKEY',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actLoginModalShow = (value) => {\r\n    return {\r\n        type: 'LOGINMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actRegisterModalShow = (value) => {\r\n    return {\r\n        type: 'REGISTERMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actMapBaseLayerName = (value) => {\r\n    return {\r\n        type: 'MAPBASELAYERNAME',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actMapMarkerState = (value) => {\r\n    return {\r\n        type: 'MAPMARKERSTATE',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowOkCancelMobileMarker = (value) => {\r\n    return {\r\n        type: 'SHOWOKCANCELMOBILEMARKER',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actCheckButtonNewMarker = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONNEWMARKER',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonHeatmap = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONHEATMAP',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonGPS = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONGPS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actIsMobileDevice = (value) => {\r\n    return {\r\n        type: 'ISMOBILEDEVICE',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// date actions ================================================\r\nexport const actDataAccidents= (value) => {\r\n    return {\r\n        type: 'DATAACCIDENTS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictManeuvers = (value) => {\r\n    return {\r\n        type: 'DICTMANEUVERS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictTypeViolations = (value) => {\r\n    return {\r\n        type: 'DICTTYPEVIOLATIONS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictViolators = (value) => {\r\n    return {\r\n        type: 'DICTVIOLATORS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDataFilters = (value) => {\r\n    return {\r\n        type: 'DATAFILTERS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actMinMaxDateData = (value) => {\r\n    return {\r\n        type: 'MINMAXDATEDATA',\r\n        payload: value\r\n    }\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport Container from 'react-bootstrap/Container';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { actLoginModalShow, actShowSidebar } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface IStateCities {\r\n\tcities: {\r\n\t\tid: number\r\n\t\tsysname: string;\r\n\t\tcityname: string;\r\n\t\tlatitude: number;\r\n\t\tlongitude: number;\r\n\t\tpopulation: number;\r\n\t}[]\r\n}\r\n\r\ninterface MenuGlobalProps {\r\n\tcurrentCity: string;\r\n\tappname: string;\r\n\tauthToken: any;\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n  }\r\n\r\n\r\n\r\nfunction MenuGlobal({\r\n\tcurrentCity,\r\n\tappname,\r\n\tauthToken,\r\n\tsetAuthToken,\r\n}: MenuGlobalProps) {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar)\r\n\tconst [cities, setCities] = useState<IStateCities['cities']>([]);\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchCities = async () => {\r\n\t\t\tconst res = await fetch(`${process.env.REACT_APP_API_URL}cities/`);\r\n\t\t\tconst data = await res.json();\r\n\t\t\tsetCities(data);\r\n\t\t\tconsole.log(data);\r\n\t\t};\r\n\r\n\t\tfetchCities();\r\n\t}, []);\r\n\r\n\tfunction changeLanguage(value: string) {\r\n\t\ti18n.changeLanguage(value);\r\n\t\t//localStorage.setItem('lng', value)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Navbar bg=\"light\" expand=\"lg\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"start-0\"\r\n\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\tid=\"menu-toggle\"\r\n\t\t\t\t\t//onClick={onClickShowMenu}\r\n\t\t\t\t\tonClick={() => dispatch(actShowSidebar(!rxShowSidebar))}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t<string>(\"menu.menu\")}\r\n\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\r\n\t\t\t\t\t<Nav className=\"ms-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/\">{t<string>(\"menu.home\")}</Nav.Link>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.appMaps.title\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/roadaccident/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"roadaccident\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.roadaccident\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/citytree/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"citytree\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.citytree\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/urbanobject/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"urbanobject\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.urbanobject\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.city\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cities.map((city) => (\r\n\t\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\t\t\tkey={city.id}\r\n\t\t\t\t\t\t\t\t\tto={`/${city.sysname}`}\r\n\t\t\t\t\t\t\t\t\tactive={currentCity === city.sysname}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{city.cityname}\r\n\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown title=\"Lang\" id=\"basic-nav-dropdown\">\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={\r\n\t\t\t\t\t\t\t\t\t\"en\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-US\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-GB\" === i18n.language\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue=\"en\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"en\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tEnglish\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={\"bg\" === i18n.language}\r\n\t\t\t\t\t\t\t\tvalue=\"bg\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"bg\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tBulgarian\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t{authToken ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t{`${t(\"words.hello\")}, ${\r\n\t\t\t\t\t\t\t\t\t\tauthToken?.user?.name\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\r\n\t\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetAuthToken(null);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t<string>(\"menu.logout\")}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t//onClick={() => setLoginModalShow(true)}\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.signin\")}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default MenuGlobal\r\n","// don't work with TypeScript, error: TypeError: leaflet__WEBPACK_IMPORTED_MODULE_0___default.a.easyButton is not a function\r\nimport L from 'leaflet';\r\nimport easyButton from 'leaflet-easybutton'\r\nimport \"leaflet-easybutton/src/easy-button.css\"\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\" \r\n \r\n\r\nfunction ButtonMap_ (map, iconTrue, iconFalse, onClick) {\r\n    //const map = useMap()\r\n    \r\n            const buttonMap = L.easyButton({\r\n                position: 'topright',\r\n                states:[\r\n                    {\r\n                        title: '',\r\n                        stateName: 'off',\r\n                        icon: `<i class=\"${iconTrue}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('on');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'red';\r\n                            onClick(true)\r\n                        }\r\n                    },\r\n        \r\n                    {\r\n                        title: '',\r\n                        stateName: 'on',\r\n                        icon: `<i class=\"${iconFalse}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('off');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'white';\r\n                            onClick(false)\r\n                        }\r\n                    }]\r\n            }).addTo( map );\r\n\r\n\r\n\r\n            //if (checkButtonState) {\r\n            //    buttonMap.state('on');\r\n            //    buttonMap.button.style.backgroundColor = 'red';\r\n            //} else {\r\n            //    buttonMap.state('off');\r\n            //    buttonMap.button.style.backgroundColor = 'white';            \r\n            //}\r\n            \r\n            \r\n    \r\n    return buttonMap\r\n\r\n}\r\n\r\nexport default ButtonMap_\r\n","import React from \"react\"\r\nimport { LayersControl, TileLayer } from \"react-leaflet\"\r\n//@ts-ignore\r\nimport {BingLayer} from 'react-leaflet-bing-v2/src/index'\r\n\r\n\r\ninterface MapTileLayersProps {\r\n\tmapBaseLayerName: string;\r\n}\r\n\r\nfunction MapTileLayers({ mapBaseLayerName }: MapTileLayersProps) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Default\"}\r\n\t\t\t\tname=\"Default\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/streets-v11\"\r\n\t\t\t\t\tmaxZoom={21}\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Dark\"}\r\n\t\t\t\tname=\"Dark\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/dark-v10\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Google\"}\r\n\t\t\t\tname=\"Google\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat1\"}\r\n\t\t\t\tname=\"Sat1\"\r\n\t\t\t>\r\n                <BingLayer  bingkey={'AniAD3xsGTaSbK1pa0_UkWS1CldG0nGI7r55MlVZqHhyKil9rD9dFK8536u8hTj1'} type=\"Aerial\"/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n            \r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat2\"}\r\n\t\t\t\tname=\"Sat2\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat3\"}\r\n\t\t\t\tname=\"Sat3\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Tiles &copy; Esri'\r\n\t\t\t\t\turl=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n                    maxZoom={19}                    \r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat4\"}\r\n\t\t\t\tname=\"Sat4\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/satellite-v9\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tmaxZoom={21}\r\n                    zoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MapTileLayers;\r\n","import { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { MapContainer, LayersControl, TileLayer, ZoomControl, useMapEvents, GeoJSON, useMap, Marker, Popup } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport \"leaflet.heat\";\r\nimport \"./Map.css\";\r\n\r\n//import ButtonMap from './ButtonMap'\r\nimport ButtonMap_ from './ButtonMap';\r\nimport MapTileLayers from '../components_hl/MapTileLayers';\r\n\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport redIconFile from '../components/images/markers/marker-red.png';\r\nimport redIconShadowFile from '../components/images/markers/marker-shadow.png';\r\n\r\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\r\nimport 'react-leaflet-markercluster/dist/styles.min.css'; // sass\r\n//require('leaflet/dist/leaflet.css'); // inside .js file\r\n//require('react-leaflet-markercluster/dist/styles.min.css'); // inside .js file\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tactCheckButtonGPS,\r\n\tactCheckButtonHeatmap,\r\n\tactCheckButtonNewMarker,\r\n\tactMapBaseLayerName,\r\n\tactMapMarkerState,\r\n\tactShowOkCancelMobileMarker\r\n    //actShowAccidentTab,\r\n    //actActiveTabKey\r\n} from \"../actions\";\r\nimport { RootState } from '../reducers/index';\r\n\r\n// fix disapeared marker from map\r\n\r\n//import icon from 'leaflet/dist/images/marker-icon.png';\r\n//import iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n//let DefaultIcon = L.icon({\r\n//    iconAnchor: [12, 40],\r\n//    iconUrl: icon,\r\n//    shadowUrl: iconShadow\r\n//});\r\n//L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n\r\n\r\n\r\n\r\nlet redIcon = L.icon({ \r\n    iconUrl: redIconFile,\r\n    shadowUrl: redIconShadowFile,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//let buttonNewMarker = null\r\n//let buttonHeatmap = null\r\n//let buttonGPS = null\r\n\r\nlet currentCitySysname = ''\r\n\r\nlet heatMapLayer: any;\r\nlet markersLayer\r\n\r\nlet setView_nTimes_gps: number;\r\nlet circle_geolocation: L.Circle<any>;\r\n\r\n\r\n\r\n\r\n\r\ninterface IStateCurrentCity {\r\n    id: number\r\n\tsysname: string;\r\n\tcityname: string;\r\n\tlatitude: string;\r\n\tlongitude: string;\r\n\tpopulation: number;\t\r\n    zoom: number;\r\n}\r\n\r\ninterface MapProps {\r\n    mainData: any;\r\n    appname: string;\r\n    dataHeatmapPoints: number[][]; // [[lat, lng, value],[lat, lng, value]...]\r\n    currentCity: string;\r\n    onDragEndNewMarker: (LatLng: {lat: number; lng: number}) => void;\r\n    onClickMap: (e: any) => void;\r\n    onZoomEnd?: (e: any) => void;\r\n    onEachLayer?: (layer: L.Layer, zoom: number) => void;\r\n    //onMarkerClick: (data: any) => void;\r\n    pointToLayerCallback: (feature: any, latlng: L.LatLng) => any;\r\n    filterMapCallback: (feature: any) => boolean;\r\n}\r\n\r\nfunction Map ({\r\n                mainData,  \r\n                appname,          \r\n                dataHeatmapPoints, \r\n                currentCity,                 \r\n                onDragEndNewMarker, \r\n                onClickMap, \r\n                onZoomEnd,  \r\n                onEachLayer,                            \r\n                //onMarkerClick,                 \r\n                pointToLayerCallback,\r\n                filterMapCallback               \r\n            }: MapProps) {\r\n               \r\n\r\n    const dispatch = useDispatch()\r\n    //const defaultZoom = 13;\r\n    //const rxDataAccidents = useSelector((state: RootState) => state.dataReducer.dataAccidents)\r\n    \r\n    const rxMapBaseLayerName = useSelector((state: RootState) => state.uiReducer.mapBaseLayerName);\r\n    const rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\r\n    const rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\r\n    const rxMapMarkerState = useSelector((state: RootState) => state.uiReducer.mapMarkerState);\r\n    const rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\r\n    \r\n    const rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\r\n    const rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\r\n    const rxCheckButtonGPS = useSelector((state: RootState) => state.uiReducer.checkButtonGPS);\r\n\r\n    //const [currentCityInfo, setCurrentCityInfo] = useState({latitude: \"0\", longitude: \"0\"})\r\n    const [currentCityInfo, setCurrentCityInfo] = useState<IStateCurrentCity | null>(null);\r\n    const [map, setMap] = useState<any>(null);  \r\n    \r\n    const [currentZoom, setCurrentZoom] = useState(13); \r\n\r\n    const [buttonNewMarker, setButtonNewMarker] = useState<any>(null);\r\n    const [buttonHeatmap, setButtonHeatmap] = useState<any>(null);\r\n    const [buttonGPS, setButtonGPS] = useState<any>(null);\r\n\r\n\r\n    let mapname_ = document.cookie\r\n    .split('; ')\r\n    .find(row => row.startsWith('mapname='))\r\n\r\n    let mapname\r\n    if (mapname_) {\r\n        mapname = mapname_.split('=')[1]    \r\n    }\r\n\r\n\r\n    let newMarkerRef = useRef(null)   \r\n \r\n\r\n    // create buttons\r\n    useEffect(() => {        \r\n        if (map) {            \r\n            setButtonNewMarker( ButtonMap_(map, 'fas fa-map-marker-alt fa-lg', 'fas fa-map-marker-alt fa-lg', onClickNewMarker) )\r\n            setButtonHeatmap( ButtonMap_(map, 'fas fa-eye fa-lg', 'fas fa-eye-slash fa-lg', onClickHeatmap) )\r\n            setButtonGPS( ButtonMap_(map, 'fas fa-satellite-dish fa-lg', 'fas fa-satellite-dish fa-lg', onClickGPS) )\r\n            \r\n            //setMapCurrentLatLng({lat: map.getCenter().lat, lng: map.getCenter().lng})                        \r\n\r\n            let mapname_ = document.cookie\r\n\t\t\t.split(\"; \")\r\n\t\t\t.find((row) => row.startsWith(\"mapname=\"));\r\n\r\n\t\t    if (mapname_) {\r\n                dispatch(actMapBaseLayerName(mapname_.split(\"=\")[1]))\r\n\t\t    }            \r\n        }        \r\n\r\n        return () => { \r\n            buttonNewMarker && buttonNewMarker.remove()\r\n            buttonHeatmap && buttonHeatmap.remove()\r\n            buttonGPS && buttonGPS.remove()\r\n        }  \r\n\r\n\r\n      }, [map])  //<MapContainer whenCreated={setMap} ...\r\n\r\n\r\n    // load data for the city\r\n    useEffect(() => {\r\n\r\n        const fetchCity = async () => {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}cities/${currentCity}`);\r\n            const data = await res.json();\r\n            setCurrentCityInfo(data);          \r\n        }\r\n\r\n        fetchCity();\r\n        console.log('currentCity');\r\n           \r\n    }, [currentCity])  //[currentCity]\r\n   \r\n\r\n    //useEffect(() => {\r\n    //    if (currentCityInfo && map) {\r\n    //        //map.setZoom(currentCityInfo.zoom);\r\n    //        if (onZoomEnd) onZoomEnd(currentCityInfo.zoom);          \r\n    //    }    \r\n    //\r\n    //}, [currentCityInfo]);   \r\n    \r\n    \r\n\r\n\r\n      // apply states for buttons\r\n      \r\n      useEffect(() => {        \r\n        if (buttonNewMarker) {\r\n            if (rxCheckButtonNewMarker) {\r\n                buttonNewMarker.state('on');\r\n                buttonNewMarker.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonNewMarker.state('off');\r\n                buttonNewMarker.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonNewMarker]);\r\n\r\n      useEffect(() => {        \r\n        if (buttonHeatmap) {\r\n            if (rxCheckButtonHeatmap) {\r\n                buttonHeatmap.state('on');\r\n                buttonHeatmap.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonHeatmap.state('off');\r\n                buttonHeatmap.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonHeatmap])\r\n      useEffect(() => {        \r\n        if (buttonGPS) {\r\n            if (rxCheckButtonGPS) {\r\n                buttonGPS.state('on');\r\n                buttonGPS.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonGPS.state('off');\r\n                buttonGPS.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonGPS])      \r\n\r\n\r\n    \r\n    useEffect(()=>{\r\n        if (map && !rxIsMobileDevice) {\r\n            if (rxCheckButtonNewMarker) {\r\n                L.DomUtil.addClass(map._container,'crosshair-cursor-enabled');\r\n            } else {\r\n                L.DomUtil.removeClass(map._container,'crosshair-cursor-enabled');\r\n            }    \r\n        }\r\n    }, [rxCheckButtonNewMarker]); \r\n      \r\n\r\n\r\n    useEffect(()=>{\r\n        if (map) {\r\n            window.setTimeout(function(){map.invalidateSize({pan: false});}, 600)\r\n        }        \r\n    }, [rxShowSidebar])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n\r\n\tconst onClickNewMarker = (state: boolean) => {        \r\n        \r\n        dispatch(actCheckButtonNewMarker(state));\r\n        \r\n\r\n\t\tif (rxIsMobileDevice && state) {\t\t\t\t\t\t\r\n            dispatch(actMapMarkerState({ visible: true, position: {lat: 0, lng: 0} }));\r\n            dispatch(actShowOkCancelMobileMarker(true));\r\n\t\t}\r\n\t};\r\n\r\n\tconst onClickHeatmap = (state: boolean) => {\t\t\r\n        console.log(\"onClickHeatmap\", state);\r\n\r\n\t\tif (state) {\r\n            dispatch(actMapBaseLayerName('Dark'))\r\n\t\t} else {\r\n            dispatch(actMapBaseLayerName('Default'))\r\n\t\t}\r\n        dispatch(actCheckButtonHeatmap(state))\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n    function SetPanToMap() {        \r\n        const map = useMap();\r\n        if (currentCityInfo) {\r\n            // change map position when current city has been changed        \r\n            if (currentCitySysname !== currentCityInfo[\"sysname\"]) {\r\n                map.panTo( [parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])] );\r\n            }\r\n            currentCitySysname = currentCityInfo[\"sysname\"];\r\n\r\n        }\r\n        return null;\r\n    }    \r\n\r\n\r\n    function onClickGPS(state: boolean) {\r\n        if (map) {\r\n            if (state){\r\n                setView_nTimes_gps = 4;\r\n                map.locate({maxZoom: 20, enableHighAccuracy: true, watch:true, maximumAge: 20000});\r\n            } else {\r\n                map.stopLocate();\r\n                map.removeLayer(circle_geolocation);\r\n                setView_nTimes_gps = 4;\r\n            }\r\n\r\n        }\r\n        dispatch(actCheckButtonGPS(state))\r\n    }\r\n\r\n\r\n    //function markerOnClick(e: any)\r\n    //{\r\n    //    let marker: L.Marker = e.target;\r\n    //    let geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\r\n    //    onMarkerClick(geojson);\r\n    //    //console.log(geojson)        \r\n    //}\r\n\r\n\r\n    //function pointToLayer_roadaccident(feature: GeoJSON.Point|GeoJSON.Feature<GeoJSON.Point>, latlng: L.LatLng): any \r\n    //{\r\n    //    if (!rxCheckButtonHeatmap) {\r\n    //        return L.circleMarker(latlng, geojsonMarkerOptions).on('click', markerOnClick)        \r\n    //    }\r\n    //    //return null;\r\n    //}\r\n\r\n\r\n    \r\n    /*\r\n    function ZoomToRadius (zoom: number, crowndiameter: number) {\r\n        let r: number = Math.floor(crowndiameter / 2);\r\n\r\n        if (zoom > 17) {\r\n            r = Math.floor(crowndiameter / 2);\r\n        } else if (zoom == 17){\r\n            r = 7;\r\n        } else if (zoom == 16){\r\n            r = 10;\r\n        } else if (zoom == 15){\r\n            r = 14;\r\n        } else if (zoom == 14){\r\n            r = 19\r\n        } else if (zoom == 13){\r\n            r = 24\r\n        } else if (zoom == 12){\r\n            r = 30\r\n        } else if (zoom == 11){\r\n            r = 37\r\n        } else if (zoom < 11){\r\n            r = 45\r\n        }\r\n    \r\n        if (r < 2) { r = 2 }\r\n        return r;\r\n    }   \r\n    */ \r\n\r\n    //function pointToLayer_citytree(feature: any, latlng: L.LatLng): any {   \r\n    //    console.log('123') \r\n    //    return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)\r\n        /*\r\n        if (!rxCheckButtonHeatmap && currentZoom !== null) {\r\n            console.log('currentZoom', currentZoom)   \r\n            console.log('lastinsp_crowndiameter', feature.properties.lastinsp_crowndiameter)\r\n\r\n            geojsonMarkerOptions_citytree.radius = ZoomToRadius(currentZoom, feature.properties.lastinsp_crowndiameter);\r\n            if (geojsonMarkerOptions_citytree.radius < 2) {\r\n                geojsonMarkerOptions_citytree.radius = 2;\r\n            }\r\n\r\n            return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)        \r\n        }*/\r\n\r\n/*\r\n\r\n        pointToLayer: function (feature, latlng) {\r\n\r\n            geojsonMarkerOptions.radius = ZoomToRadius(zoom, feature.properties.lastinsp_crowndiameter);\r\n\r\n            if (geojsonMarkerOptions.radius < 2) {\r\n                geojsonMarkerOptions.radius = 2;\r\n            }\r\n\r\n            {% if status %}\r\n                {% for statusItem in status %}\r\n                    if (feature.properties.lastinsp_status == \"{{statusItem.id}}\")\r\n                    {\r\n                        geojsonMarkerOptions.fillColor = \"#{{statusItem.hexcolor}}\";\r\n                        geojsonMarkerOptions.color = \"#{{statusItem.hexcolor}}\";\r\n                    }\r\n                {% endfor %}\r\n            {% endif %}\r\n\r\n            return L.circle(latlng, geojsonMarkerOptions).on('click', markerOnClick);\r\n\r\n        },\r\n\r\n*/\r\n\r\n\r\n\r\n    //}\r\n\r\n\r\n\r\n    //function onEachFeaturePoint(feature, layer) {\r\n    function onEachFeaturePoint(feature: any, layer: L.Layer) {        \r\n        //console.log('feature: ', feature);\r\n        //console.log('layer: ', layer);\r\n        layer.on({\r\n          'click': function (e) {\r\n             console.log('e: ', e);\r\n             console.log('click');\r\n           }\r\n        })\r\n    }    \r\n\r\n\r\n\r\n\r\n\r\n    function NewMarker({mapMarkerState}: any) {  \r\n        const visible = mapMarkerState.visible;\r\n        const map = useMap();\r\n\r\n        const eventHandlers = useMemo(\r\n            () => ({\r\n                dragend() {\r\n                    \r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current;\r\n                        if (!rxIsMobileDevice && marker != null) {                                                    \r\n                            const LatLng = marker.getLatLng();\r\n                            const coord = { lat: '0', lng: '0' };\r\n                            coord.lat = LatLng.lat.toFixed(5);\r\n                            coord.lng = LatLng.lng.toFixed(5);\r\n                            \r\n                            //const cordFloat = {lat: parseFloat(coord.lat), lng: parseFloat(coord.lng)}\r\n                            //onDragEndNewMarker(cordFloat);\r\n                            //setNewMarkerState({ visible: true, position: coord }); \r\n                            //console.log('123', { visible: true, position: coord });\r\n                            \r\n                            // I don't know why, but that prevent the error for citytree app, when user try to move the marker\r\n                            sleep(0).then(() => {\r\n                                //console.log('onDragEndNewMarker timer', { visible: true, position: coord });\r\n                                    dispatch(actMapMarkerState({ visible: true, position: coord })); \r\n                            });\r\n\r\n                                                                        \r\n                        }\r\n                    }\r\n                }\r\n            }),\r\n            [],\r\n        );\r\n        function sleep (time: number) {\r\n            return new Promise((resolve) => setTimeout(resolve, time));\r\n        }          \r\n\r\n         \r\n\r\n        return (<>\r\n                    {visible && <> \r\n                        {(!rxIsMobileDevice) \r\n                        ?\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={true}\r\n                                position={mapMarkerState.position}                                                                \r\n                                ref={newMarkerRef}\r\n                                eventHandlers={eventHandlers}                    \r\n                            />                    \r\n                        :\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={false}\r\n                                //position={map.getCenter()}\r\n                                position={mapMarkerState.position.lat==0 ? map.getCenter() : mapMarkerState.position }\r\n                                ref={newMarkerRef}                 \r\n                            />\r\n                        } \r\n                </>}\r\n                                         \r\n        </>)\r\n    }\r\n    \r\n\r\n\r\n    function MapEvents() {        \r\n        const map = useMapEvents({\r\n            baselayerchange(e) {\r\n                document.cookie = 'mapname='+e.name\r\n            }, \r\n            //baselayerchange: onBaselayerchange,\r\n\r\n            move(e) {               \r\n                \r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        marker.setLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n                                        \r\n                        //let coord = { lat: 0, lng: 0 }\r\n                        //coord.lat = e.target.getCenter().lat.toFixed(5)\r\n                        //coord.lng = e.target.getCenter().lng.toFixed(5)\r\n                    }\r\n                }    \r\n            },\r\n\r\n            moveend(e) {\r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        const LatLng = marker.getLatLng()\r\n                        let coord = { lat: '0', lng: '0' };\r\n                        coord.lat = LatLng.lat.toFixed(5);\r\n                        coord.lng = LatLng.lng.toFixed(5);                   \r\n                        //setNewMarkerState({visible: true, position: coord})                        \r\n                        dispatch(actMapMarkerState({visible: true, position: coord}))\r\n                    }\r\n                }\r\n                //setMapCurrentLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n\r\n\r\n            },\r\n            \r\n            click(e) {\r\n                onClickMap(e)\r\n                /*\r\n                if (rxCheckButtonNewMarker && !rxIsMobileDevice) {\r\n                    //setCheckButtonNewMarker(false)\r\n                    dispatch(actCheckButtonNewMarker(false));\r\n        \r\n                    let coord = { lat: '0', lng: '0' };\r\n                    coord.lat = e.latlng.lat.toFixed(5);\r\n                    coord.lng = e.latlng.lng.toFixed(5);\r\n        \r\n                    //setNewMarkerState({ visible: true, position: coord })\r\n                    dispatch(actNewMarkerState({ visible: true, position: coord }));\r\n        \r\n                    //setShowAccidentTab(true)\r\n                    dispatch(actShowAccidentTab(true));\r\n                    //setActiveTabKey(\"accident\")\r\n                    dispatch(actActiveTabKey('accident'));\r\n                } \r\n                */               \r\n            }, \r\n\r\n            zoomend(e){                                \r\n                if (onZoomEnd) onZoomEnd(e);\r\n\r\n                setCurrentZoom(e.target._zoom)                 \r\n                //dispatch(actCurrentMapZoom(e.target._zoom));               \r\n            },\r\n\r\n            locationfound(e){\r\n                let radius = e.accuracy / 2;\r\n\r\n                if (setView_nTimes_gps > 0) {\r\n                    map.setView(e.latlng, 20);\r\n                    setView_nTimes_gps = setView_nTimes_gps - 1;\r\n                }\r\n    \r\n                if (map.hasLayer(circle_geolocation)) {\r\n                    circle_geolocation.setLatLng(e.latlng);\r\n                    circle_geolocation.setRadius(radius);\r\n                } else {\r\n                    circle_geolocation = L.circle(e.latlng, radius).addTo(map);\r\n                }                \r\n            },\r\n\r\n            locationerror(e){\r\n                //setCheckButtonGPS(false)\r\n                dispatch(actCheckButtonGPS(false))\r\n                alert(e.message)\r\n            }\r\n        })\r\n      \r\n        return null\r\n      }\r\n\r\n\r\n\r\n    function MarkersZoomAdjustment(){    \r\n        const map = useMap(); \r\n        const zoom = map.getZoom();\r\n                 \r\n        if (onEachLayer) {\r\n            map.eachLayer(function (layer) {\r\n                onEachLayer(layer, zoom);           \r\n            });\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n\r\n\r\n      function HeatmapFunction(){\r\n        const map = useMap();\r\n        //useEffect(() => {\r\n          //const points = addressPoints\r\n          //? addressPoints.map((p) => {\r\n          //  return [p[0], p[1], p[2]]; // lat lng intensity\r\n          //  })\r\n          //: [];\r\n     \r\n            const points = [\r\n                [43.207650, 27.958490, 1.0]\r\n            ]\r\n\r\n\r\n\r\n            if (heatMapLayer) { \r\n                map.removeLayer(heatMapLayer)\r\n            }\r\n\r\n            if (rxCheckButtonHeatmap) {                \r\n                if (dataHeatmapPoints) {\r\n                    // @ts-ignore\r\n                    heatMapLayer = L.heatLayer(dataHeatmapPoints, {\r\n                        gradient: {0.4: '#1E90FF', 0.8: 'white', 1: 'red'},                        \r\n                        //minOpacity: 0.1,\r\n                        max: 1.5,\r\n                        radius: 14,\r\n                        blur: 10,\r\n                        maxZoom: 6\r\n\r\n                    })//.addTo(map);\r\n                    map.addLayer(heatMapLayer)                \r\n                }\r\n            }\r\n\r\n\r\n            //heatMap.addLatLng([43.207650, 27.998590])\r\n            //heatMap.setLatLngs([])\r\n\r\n            //L.heatLayer(points).redraw()\r\n            //L.heatLayer(points).addLatLng([43.207650, 27.998590])\r\n\r\n        //}, [dataHeatmapPoints]);\r\n\r\n        return null\r\n     }\r\n\r\n\r\n\r\n\r\n\r\n    const createClusterCustomIcon  = function (cluster: L.MarkerCluster) {\r\n        // get the number of items in the cluster\r\n        let count = cluster.getChildCount();\r\n\r\n        // figure out how many digits long the number is\r\n        //var digits = (count + '').length;\r\n        let digits;\r\n        if (count == 2) { digits = '1'; }\r\n        if (count >= 3 && count <=5) { digits = '2'; }\r\n        if (count >= 6 && count <=9) { digits = '3'; }\r\n        if (count >= 10 && count <=14) { digits = '4'; }\r\n        if (count > 14) { digits = '5'; }\r\n\r\n        return L.divIcon({\r\n          html: count.toString(),\r\n          className: 'cluster digits-' + digits,\r\n          iconSize: undefined\r\n        });\r\n      }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>        \r\n        {/* The map rendered before useEffect called, so first we need to load currentCityInfo before to show the map */}\r\n        { currentCityInfo && currentCityInfo[\"longitude\"] !== \"0\" && currentCityInfo[\"latitude\"]!==\"0\" ? ( \r\n\r\n            <MapContainer whenCreated={setMap} center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} zoom={currentCityInfo.zoom} zoomControl={false} scrollWheelZoom={true} style={{ height: 'calc(100vh - 60px)', width: '100%' }} >                \r\n                <LayersControl position=\"topleft\">                    \r\n                    <MapTileLayers mapBaseLayerName={rxMapBaseLayerName} />                 \r\n                </LayersControl>    \r\n\r\n            \r\n                {/* To change center of the map when current city will change */}\r\n                {/*<SetViewMap center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} />*/} \r\n                <SetPanToMap />\r\n\r\n\r\n\r\n                {appname === 'roadaccident' && <> \r\n                    {currentZoom && currentZoom < 15 ? (\r\n                        <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                    ) : (\r\n                        /* @ts-ignore */\r\n                        <MarkerClusterGroup\r\n                        spiderfyOnMaxZoom={true}\r\n                        showCoverageOnHover={false}\r\n                        zoomToBoundsOnClick={true}\r\n                        maxClusterRadius={15}\r\n                        iconCreateFunction={createClusterCustomIcon}>                \r\n                            <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>                \r\n                        </MarkerClusterGroup>\r\n                    )}\r\n                </>}\r\n\r\n\r\n                {appname === 'citytree' && <>                     \r\n                    <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                </>}\r\n\r\n\r\n\r\n\r\n\r\n                <NewMarker mapMarkerState={rxMapMarkerState} onDragEndNewMarker={onDragEndNewMarker}/>\r\n                \r\n                <MapEvents />\r\n                \r\n                {!rxIsMobileDevice && <ZoomControl position='bottomright'/>}\r\n                \r\n   \r\n                {/* <ButtonsControl /> */}\r\n\r\n                <HeatmapFunction />\r\n                \r\n                {onEachLayer && <MarkersZoomAdjustment />}\r\n                \r\n            </MapContainer>\r\n        ) : (\r\n            <p>Loading...</p>\r\n        )}    \r\n            \r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Map\r\n\r\n\r\n//https://egghead.io/lessons/react-create-a-new-map-using-react-leaflet\r\n\r\n//https://codesandbox.io/s/63wqz?file=/src/LeafletControlGeocoder.jsx\r\n//https://www.npmjs.com/package/leaflet-control-geocoder\r\n\r\n//https://codesandbox.io/s/how-to-add-a-legend-to-the-map-using-react-leaflet-useleaflet-hook-75jnp?file=/src/index.js\r\n\r\n//https://newbedev.com/home-button-leaflet-map\r\n\r\n//пример без React-Leaflet\r\n//https://stackoverflow.com/questions/69697017/use-leaflet-map-object-outside-useeffect-in-react","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=\"","interface SidebarProps {\r\n\tchildren: JSX.Element\t\r\n}\r\n\r\nconst Sidebar = ({children}: SidebarProps) => {\r\n\treturn (\r\n\t\t<div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\r\n\t\t\t<div className=\"list-group list-group-flush\" style={{ marginTop: \"15px\" }}>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Sidebar\r\n","import { useState, useEffect } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, } from 'react-bootstrap';\r\nimport Select from \"react-select\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface FormFilterProps {\r\n\tonSubmitFilter: (filter: {}) => void;\r\n}\r\n\r\n\r\nconst FormFilter = ({onSubmitFilter}: FormFilterProps) => {\r\n    const rxDictManeuvers = useSelector((state: RootState) => state.dataReducer.dictManeuvers)\r\n    const rxDictTypeViolations = useSelector((state: RootState) => state.dataReducer.dictTypeViolations)\r\n    const rxDictViolators = useSelector((state: RootState) => state.dataReducer.dictViolators)\r\n\tconst rxMinMaxDateData = useSelector((state: RootState) => state.dataReducer.minMaxDateData)\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\t// used to set default values for dates control, because when it renders first time, minMaxDateData is still empty, after that I just can't change def values, so do it manually\r\n\tuseEffect(() => {\r\n\t\tsetDefaultsForDates();\r\n\t}, [rxMinMaxDateData]);\r\n\r\n\tfunction setDefaultsForDates() {\r\n\t\tsetValue(\"dateFromFilter\", rxMinMaxDateData.minDate);\r\n\t\tsetValue(\"dateToFilter\", rxMinMaxDateData.maxDate);\r\n\t}\r\n\r\n\tconst { control, handleSubmit, reset, setValue } = useForm({\r\n\t\treValidateMode: \"onChange\",\r\n\t\tdefaultValues: {\r\n\t\t\tdateFromFilter: \"\",\r\n\t\t\tdateToFilter: \"\",\r\n\t\t\tdescFilter: \"\",\r\n\t\t\tmaneuverFilter: \"\",\r\n\t\t\tviolationsTypeFilter: \"\",\r\n\t\t\tviolatorsFilter: \"\",\r\n\r\n\t\t\tdriverViolationFilter: false,\r\n\t\t\tmotorcyclistViolationFilter: false,\r\n\t\t\tcyclistViolationFilter: false,\r\n\t\t\tpedestrianViolationFilter: false,\r\n\t\t\t\r\n            driverInjuredFilter: false,\r\n            motorcyclistInjuredFilter: false,\r\n            cyclistInjuredFilter: false,\r\n            pedestrianInjuredFilter: false,           \r\n            kidsInjuredFilter: false,\r\n\t\t\tpubtrPassengersInjuredFilter: false,\r\n\r\n\t\t\tdriversKilledFilter: false,\r\n\t\t\tmotorcyclistsKilledFilter: false,\r\n\t\t\tcyclistsKilledFilter: false,\r\n\t\t\tpedestrianKilledFilter: false,\r\n\t\t\tkidsKilledFilter: false,\r\n\t\t\tpubtrPassengersKilledFilter: false,\r\n\r\n\t\t\tpublicTransportInvolvedFilter: false,\r\n\t\t\tshowOnlyMyAccidentsFilter: false,\r\n\r\n\t\t\tselect: {},\r\n\t\t},\r\n\t});\r\n\r\n\t//let optionsManeuverFilter = []\r\n\t//let arManeuvers = dictsContex?.dictManeuvers\r\n\t//if (Array.isArray(arManeuvers)) {\r\n\t//  optionsManeuverFilter = arManeuvers.map((x) => { return {value: x.id, label: x.maneuvername} })\r\n\t//}\r\n\r\n\t//let optionsTypeViolationsFilter = []\r\n\t//let arTypeViolations = dictsContex?.dictTypeViolations\r\n\t//if (Array.isArray(arTypeViolations)) {\r\n\t//    optionsTypeViolationsFilter = arTypeViolations.map((x) => { return {value: x.id, label: x.violationname} })\r\n\t//}\r\n\r\n\t//let optionsViolatorsFilter = []\r\n\t//let arViolators = dictsContex?.dictViolators\r\n\t//if (Array.isArray(arViolators)) {\r\n\t//    optionsViolatorsFilter = arViolators.map((x) => { return {value: x.id, label: x.violatorname} })\r\n\t//}\r\n\r\n\tlet optionsManeuverFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictManeuvers)) {\r\n\t\toptionsManeuverFilter = rxDictManeuvers.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tlet optionsTypeViolationsFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictTypeViolations)) {\r\n\t\toptionsTypeViolationsFilter = rxDictTypeViolations.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(\r\n\t\t\t\t\t`sidebar.filterTab.typeViolationsList.${x.violationname}`\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\r\n\tlet optionsViolatorsFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictViolators)) {\r\n\t\toptionsViolatorsFilter = rxDictViolators.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(`sidebar.filterTab.violatorsList.${x.violatorname}`),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tfunction onResetButton() {\r\n\t\treset();\r\n\t\tsetDefaultsForDates();\r\n\t\tonSubmitFilter({});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form className=\"m-1\" onSubmit={handleSubmit(onSubmitFilter)}>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>{t<string>(\"sidebar.filterTab.from\")}</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateToFilter\">\r\n\t\t\t\t\t\t<Form.Label>{t<string>(\"sidebar.filterTab.to\")}</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formManeuverFilter\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"250px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.vehicleManeuver\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"maneuverFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\toptions={optionsManeuverFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDescFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.description\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"descFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"text\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formViolationsTypeFilter\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.violationsType\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"violationsTypeFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsTypeViolationsFilter}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formviolatorsFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>{t<string>(\"sidebar.filterTab.violators\")}</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"violatorsFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsViolatorsFilter}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Card body className=\"mt-3\">\r\n\t\t\t\t\t<Card.Title>\r\n\t\t\t\t\t\t<h6>{t<string>(\"sidebar.filterTab.injured\")}</h6>\r\n\t\t\t\t\t</Card.Title>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"driverInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.driver\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idDriverInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"motorcyclistInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.motorcyclist\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idMotorcyclistInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"cyclistInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.cyclist\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idCyclistInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"pedestrianInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.pedestrian\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPedestrianInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"kidsInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.kid\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idKidsInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"pubtrPassengersInjuredFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.pubtrPassenger\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPubtrPassengersInjuredFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Card>\r\n\r\n\t\t\t\t<Card body className=\"mt-3\">\r\n\t\t\t\t\t<Card.Title>\r\n\t\t\t\t\t\t<h6>{t<string>(\"sidebar.filterTab.killed\")}</h6>\r\n\t\t\t\t\t</Card.Title>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"driversKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.driver\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idDriversKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"motorcyclistsKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.motorcyclist\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idMotorcyclistsKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"cyclistsKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.cyclist\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idCyclistsKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"pedestrianKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.pedestrian\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPedestrianKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"kidsKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.kid\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idKidsKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"pubtrPassengersKilledFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\"sidebar.filterTab.pubtrPassenger\")}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPubtrPassengersKilledFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Card>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formPublicTransportInvolvedFilter\"\r\n\t\t\t\t\tclassName=\"mt-3 ms-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"publicTransportInvolvedFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.filterTab.publicTransportInvolved\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPublicTransportInvolvedFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formShowOnlyMyAccidentsFilter\"\r\n\t\t\t\t\tclassName=\"mt-3 ms-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"showOnlyMyAccidentsFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.filterTab.showOnlyMyAccidents\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idShowOnlyMyAccidentsFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button variant=\"light\" onClick={onResetButton}>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.clear\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"150px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.search\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FormFilter\r\n\r\n\r\n\r\n","import { useState, useEffect, useRef } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap'\r\nimport Select from \"react-select\";\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\"\r\n\r\nimport Datetime from 'react-datetime'\r\nimport \"react-datetime/css/react-datetime.css\"\r\n\r\nimport moment from 'moment'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { RootState } from '../reducers/index'\r\nimport { AccidentItem } from '../interfaces'\r\n\r\n\r\n\r\n\r\n\r\ninterface FormAccidentProps {\r\n\tonSubmitAccident: (data: {}) => void;\r\n\tonDeleteAccident: (id: number) => void;\r\n\tonCloseAccident: () => void;\r\n\tonClickEditCoords: (coord: {lat: string; lng: string}) => void;\r\n\tdataAccidentForm: AccidentItem | null;\t\r\n}\r\n\r\n\r\nfunction FormAccident({\r\n\tonSubmitAccident,\r\n\tonDeleteAccident,\r\n\tonCloseAccident,\r\n\tonClickEditCoords,\r\n\tdataAccidentForm,\r\n}: FormAccidentProps) {\r\n\r\n\tconst rxMapMarkerState = useSelector((state: RootState) => state.uiReducer.mapMarkerState);\r\n\tconst rxNewAccidentCreation = useSelector((state: RootState) => state.uiReducer.newAccidentCreation);\r\n\tconst rxDictManeuvers = useSelector((state: RootState) => state.dataReducer.dictManeuvers);\r\n    const rxDictTypeViolations = useSelector((state: RootState) => state.dataReducer.dictTypeViolations);\r\n    const rxDictViolators = useSelector((state: RootState) => state.dataReducer.dictViolators);\r\n\r\n\tconst [showModalDelete, setShowModalDelete] = useState(false);\r\n\tconst dateTimeRef = useRef(null);\r\n\tconst { t } = useTranslation();\r\n\r\n\t//const handleShowModalDeleteClose = () => setShowModalDelete(false);\r\n\r\n\tuseEffect(() => {\r\n\t\t//if (rxMapMarkerState.visible) {\r\n\t\t\treset();\r\n\r\n\t\t\t// perhaps a bug of component, value is not reset, so reset it manually\r\n\t\t\t//@ts-ignore\r\n\t\t\tdateTimeRef.current.state.inputValue = \"\";\r\n\t\t\t//@ts-ignore\r\n\t\t\tdateTimeRef.current.state.selectedDate = undefined;\r\n\r\n\t\t\tsetValue(\"latAccidentForm\", rxMapMarkerState.position.lat);\r\n\t\t\tsetValue(\"lngAccidentForm\", rxMapMarkerState.position.lng);\r\n\t\t//}\r\n\t}, [rxNewAccidentCreation]);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (rxMapMarkerState.visible) {\r\n\t\t\t//reset();\r\n\r\n\t\t\t// perhaps a bug of component, value is not reset, so reset it manually\r\n\t\t\t//@ts-ignore\r\n\t\t\t//dateTimeRef.current.state.inputValue = \"\";\r\n\t\t\t//@ts-ignore\r\n\t\t\t//dateTimeRef.current.state.selectedDate = undefined;\r\n\r\n\t\t\tsetValue(\"latAccidentForm\", rxMapMarkerState.position.lat);\r\n\t\t\tsetValue(\"lngAccidentForm\", rxMapMarkerState.position.lng);\r\n\t\t}\r\n\t}, [rxMapMarkerState]);\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tlet formData: any = {};\r\n\r\n\t    \r\n\t\tformData.accidentId = dataAccidentForm?.properties?.id;\r\n\t\tformData.latAccidentForm = dataAccidentForm?.properties?.latitude;\r\n\t\tformData.lngAccidentForm = dataAccidentForm?.properties?.longitude;\r\n\t\tformData.descAccidentForm = dataAccidentForm?.properties?.description;\r\n\r\n\t\tif (dataAccidentForm?.properties?.datetime) {\r\n\t\t\tformData.dateTimeAccidentForm = moment(\r\n\t\t\t\tdataAccidentForm?.properties?.datetime\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet maneuver = dataAccidentForm?.properties?.maneuver;\r\n\t\tif (maneuver) {\r\n\t\t\tconsole.log('optionsManeuverFilter', optionsManeuverFilter)\r\n\t\t\tformData.maneuverAccidentForm = optionsManeuverFilter.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value == maneuver\t\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet violations_type = dataAccidentForm?.properties?.violations_type;\r\n\t\tif (violations_type) {\r\n\t\t\t//let violationsTypeValues = violations_type.map((item) => parseInt(item));\r\n\t\t\tlet violationsTypeValues = violations_type.map((item) => parseInt(item));\r\n\t\t\t\r\n\t\t\tformData.violationsTypeAccidentForm =\r\n\t\t\t\toptionsTypeViolationsFilter.filter((item) =>\r\n\t\t\t\t\tviolationsTypeValues.includes(item.value)\r\n\t\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet violators = dataAccidentForm?.properties?.violators;\r\n\t\tif (violators) {\r\n\t\t\tlet violatorsValues = violators.map((item) => parseInt(item));\r\n\t\t\tformData.violatorsAccidentForm = optionsViolatorsFilter.filter(\r\n\t\t\t\t(item) => violatorsValues.includes(item.value)\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tformData.driversInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.drivers_injured;\r\n\t\tformData.motorcyclistsInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.motorcyclists_injured;\r\n\t\tformData.cyclistsInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.cyclists_injured;\r\n\t\tformData.pedInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.ped_injured;\r\n\t\tformData.kidsInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.kids_injured;\r\n\t\tformData.pubtrPassengersInjuredAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.pubtr_passengers_injured;\r\n\r\n\t\tformData.driversKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.drivers_killed;\r\n\t\tformData.motorcyclistsKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.motorcyclists_killed;\r\n\t\tformData.cyclistsKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.cyclists_killed;\r\n\t\tformData.pedKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.ped_killed;\r\n\t\tformData.kidsKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.kids_killed;\r\n\t\tformData.pubtrPassengersKilledAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.pubtr_passengers_killed;\r\n\r\n\t\tformData.publicTransportInvolvedAccidentForm =\r\n\t\t\tdataAccidentForm?.properties?.public_transport_involved;\r\n\r\n\r\n\t\treset(formData, { keepDefaultValues: true });\r\n\t}, [dataAccidentForm]);\r\n\r\n\r\n\tlet optionsManeuverFilter: {value: number; label: string}[] = [];\r\n\tif (Array.isArray(rxDictManeuvers)) {\r\n\t\toptionsManeuverFilter = rxDictManeuvers.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tlet optionsTypeViolationsFilter: {value: number; label: string}[] = [];\r\n\tif (Array.isArray(rxDictTypeViolations)) {\r\n\t\toptionsTypeViolationsFilter = rxDictTypeViolations.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(\r\n\t\t\t\t\t`sidebar.filterTab.typeViolationsList.${x.violationname}`\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tlet optionsViolatorsFilter: {value: number; label: string}[] = [];\r\n\tif (Array.isArray(rxDictViolators)) {\r\n\t\toptionsViolatorsFilter = rxDictViolators.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\tlabel: t(`sidebar.filterTab.violatorsList.${x.violatorname}`),\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tsetValue,\r\n\t\tgetValues,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tlatAccidentForm: \"\",\r\n\t\t\tlngAccidentForm: \"\",\r\n\t\t\tdescAccidentForm: \"\",\r\n\t\t\tdateTimeAccidentForm: \"\",\r\n\t\t\tmaneuverAccidentForm: null,\r\n\t\t\tviolationsTypeAccidentForm: [],\r\n\t\t\tviolatorsAccidentForm: [],\r\n\r\n\t\t\tdriversInjuredAccidentForm: 0,\r\n\t\t\tmotorcyclistsInjuredAccidentForm: 0,\r\n\t\t\tcyclistsInjuredAccidentForm: 0,\r\n\t\t\tpedInjuredAccidentForm: 0,\r\n\t\t\tkidsInjuredAccidentForm: 0,\r\n\t\t\tpubtrPassengersInjuredAccidentForm: 0,\r\n\r\n\t\t\tdriversKilledAccidentForm: 0,\r\n\t\t\tmotorcyclistsKilledAccidentForm: 0,\r\n\t\t\tcyclistsKilledAccidentForm: 0,\r\n\t\t\tpedKilledAccidentForm: 0,\r\n\t\t\tkidsKilledAccidentForm: 0,\r\n\t\t\tpubtrPassengersKilledAccidentForm: 0,\r\n\r\n\t\t\tpublicTransportInvolvedAccidentForm: false,\r\n\r\n\t\t\taccidentId: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\tfunction prepareOnSubmitAccident(data: any) {\r\n\t\tlet dataRest: any = {};\r\n\r\n\t\tdataRest.id = parseInt(getValues(\"accidentId\")) || null;\r\n\t\t//dataRest.city = currentCity\r\n\t\tdataRest.latitude = getValues(\"latAccidentForm\");\r\n\t\tdataRest.longitude = getValues(\"lngAccidentForm\");\r\n\t\tdataRest.datetime = getValues<any>(\"dateTimeAccidentForm\").format(\"YYYY-MM-DDTHH:mm\");\r\n\r\n\t\tdataRest.maneuver = getValues<any>(\"maneuverAccidentForm\")?.value;\r\n\t\tif (dataRest.maneuver === undefined) {\r\n\t\t\tdataRest.maneuver = null;\r\n\t\t}\r\n\r\n\t\tdataRest.description = getValues(\"descAccidentForm\");\r\n\t\tdataRest.violations_type = getValues(\"violationsTypeAccidentForm\").map(\r\n\t\t\t(item: {value: number; label: string}) => item.value\r\n\t\t);\r\n\t\tdataRest.violators = getValues(\"violatorsAccidentForm\").map(\r\n\t\t\t(item: {value: number; label: string}) => item.value\r\n\t\t);\r\n\r\n\t\tdataRest.drivers_injured = parseInt(getValues(\"driversInjuredAccidentForm\").toString()) || 0;\r\n\t\tdataRest.motorcyclists_injured = parseInt(getValues(\"motorcyclistsInjuredAccidentForm\").toString()) || 0;\r\n\t\tdataRest.cyclists_injured = parseInt(getValues(\"cyclistsInjuredAccidentForm\").toString()) || 0;\r\n\t\tdataRest.ped_injured = parseInt(getValues(\"pedInjuredAccidentForm\").toString()) || 0;\r\n\t\tdataRest.kids_injured = parseInt(getValues(\"kidsInjuredAccidentForm\").toString()) || 0;\r\n\t\tdataRest.pubtr_passengers_injured = parseInt(getValues(\"pubtrPassengersInjuredAccidentForm\").toString()) || 0;\r\n\r\n\t\tdataRest.drivers_killed = parseInt(getValues(\"driversKilledAccidentForm\").toString()) || 0;\r\n\t\tdataRest.motorcyclists_killed = parseInt(getValues(\"motorcyclistsKilledAccidentForm\").toString()) || 0;\r\n\t\tdataRest.cyclists_killed = parseInt(getValues(\"cyclistsKilledAccidentForm\").toString()) || 0;\r\n\t\tdataRest.ped_killed = parseInt(getValues(\"pedKilledAccidentForm\").toString()) || 0;\r\n\t\tdataRest.kids_killed = parseInt(getValues(\"kidsKilledAccidentForm\").toString()) || 0;\r\n\t\tdataRest.pubtr_passengers_killed = parseInt(getValues(\"pubtrPassengersKilledAccidentForm\").toString()) || 0;\r\n\r\n\t\tdataRest.public_transport_involved = getValues(\r\n\t\t\t\"publicTransportInvolvedAccidentForm\"\r\n\t\t);\r\n\r\n\t\tonSubmitAccident(dataRest);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form\r\n\t\t\t\tclassName=\"m-1\"\r\n\t\t\t\tonSubmit={handleSubmit(prepareOnSubmitAccident)}\r\n\t\t\t>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.latLng\")}{\" \"}\r\n\t\t\t\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-edit align-middle\" onClick={() => onClickEditCoords({lat: getValues(\"latAccidentForm\"), lng: getValues(\"lngAccidentForm\")})}></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLatAccident\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"latAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.latAccidentForm}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLngAccident\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"lngAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.lngAccidentForm}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formDescriptionAccident\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.description\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"descAccidentForm\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formDateTimeAccident\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"250px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.datetime\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateTimeAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Datetime {...field} ref={dateTimeRef} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{errors.dateTimeAccidentForm ? (\r\n\t\t\t\t\t\t\t<p style={{ color: \"red\" }}>\r\n\t\t\t\t\t\t\t\t<small>Required field</small>\r\n\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formManeuverAccident\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.vehicleManeuver\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"maneuverAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\toptions={optionsManeuverFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formViolationsTypeAccident\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.violationsType\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"violationsTypeAccidentForm\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsTypeViolationsFilter}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formViolatorsAccident\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.violators\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"violatorsAccidentForm\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsViolatorsFilter}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formInjuredLabelAccident\">\r\n\t\t\t\t\t\t<Form.Label style={{ marginTop: \"32px\" }}>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.injured\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formDriversInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-car fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.accidentTab.driverAndPassengers\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"driversInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formMotorcyclistsInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-motorcycle fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"sidebar.accidentTab.motorcyclist\")}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"motorcyclistsInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCyclistsInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-bicycle fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"sidebar.accidentTab.cyclist\")}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"cyclistsInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPedInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-walking fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"sidebar.accidentTab.pedestrian\")}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"pedInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formKidsInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-baby fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\"sidebar.accidentTab.kid\")}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"kidsInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPubtrPassengersInjuredAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t<i\r\n\t\t\t\t\t\t\t\tclassName=\"fas fa-bus-alt fa-lg\"\r\n\t\t\t\t\t\t\t\ttitle={t(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.accidentTab.publicTransPassenger\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t></i>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"pubtrPassengersInjuredAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-0\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formKilledLabelAccident\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.killed\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formDriversKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"driversKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formMotorcyclistsKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"motorcyclistsKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCyclistsKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"cyclistsKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPedKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"pedKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formKidsKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"kidsKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPubtrPassengersKilledAccident\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"pubtrPassengersKilledAccidentForm\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formPublicTransportInvolvedAccident\"\r\n\t\t\t\t\tclassName=\"mt-3 ms-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"publicTransportInvolvedAccidentForm\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.accidentTab.publicTransInvolved\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idPublicTransportInvolvedAccident\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdAccident\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"accidentId\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(true)}\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.delete\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button onClick={onCloseAccident} variant=\"secondary\">\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.close\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"110px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.accidentTab.save\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showModalDelete}\r\n\t\t\t\tonHide={() => setShowModalDelete(false)}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{t<string>(\"words.deleting\")}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>{t<string>(\"words.confirmDeleting\")}</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowModalDelete(false);\r\n\t\t\t\t\t\t\tonDeleteAccident(parseInt(getValues(\"accidentId\").toString()));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.delete\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FormAccident\r\n","import { useState, useEffect } from 'react'\r\nimport { Form, Button, FloatingLabel, Modal } from \"react-bootstrap\";\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface Credentials {\r\n\tusername: string; \r\n\tpassword: string; \r\n\trememberme: boolean;\r\n} \r\n\r\n\r\ninterface LoginModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\nconst LoginModalForm = ({setAuthToken}: LoginModalFormProps) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxLoginModalShow = useSelector((state: RootState) => state.uiReducer.loginModalShow)\r\n\r\n\tconst [showWrongPassword, setShowWrongPassword] = useState(false);\r\n\tconst { t } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\r\n\t\tsetShowWrongPassword(false);\r\n\t}, [rxLoginModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trememberme: false,\r\n\t\t},\r\n\t});\r\n\r\n\tasync function loginUser(credentials: Credentials) {\r\n\t\t//console.log(credentials)\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}token/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\t\t}).then((data) => {\r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\t//data.rememberme = credentials.rememberme\r\n\t\t\t\t\tsetAuthToken(data);\r\n\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\tsetShowWrongPassword(false);\r\n\r\n\t\t\t\t\t//setLoginModalShow(false)\r\n\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t});\r\n\t\t\t} else if (data.status === 401) {\r\n\t\t\t\tsetShowWrongPassword(true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst OnSubmitForm = (data: Credentials) => {\r\n\t\tsetShowWrongPassword(false);\r\n\t\tlocalStorage.setItem(\"rememberme\", data.rememberme.toString());\r\n\t\tloginUser(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\tshow={rxLoginModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actLoginModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>(\"loginForm.title\")}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formLogin\">\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingInput\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.username\")}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.username\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.password\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.password\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"rememberme\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t/* @ts-ignore */\r\n\t\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.rememberMe\")}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{showWrongPassword && (\r\n\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.wrongUsernamePassword\")}\r\n\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"loginForm.login\")}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.dontHaveAccount\")}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(true));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"loginForm.signUp\")}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default LoginModalForm;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Form, Button, FloatingLabel, Modal, Col, Row } from \"react-bootstrap\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface RegisterModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\ninterface RegisterData {\r\n\tusername: string;\r\n\temail: string;\r\n\tpassword: string;\r\n\tpassword2: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n} \r\n\r\n\r\n\r\n\r\nconst RegisterModalForm = ({setAuthToken}: RegisterModalFormProps) => {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst rxRegisterModalShow = useSelector((state: RootState) => state.uiReducer.registerModalShow)\t\r\n\t\r\n\tconst { t } = useTranslation()\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\t\r\n\t}, [rxRegisterModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n        setError,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword2: \"\",\r\n\t\t\tfirst_name: \"\",\r\n\t\t\tlast_name: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\tconst OnSubmitForm = (data: RegisterData) => {\r\n\t\tregisterUser(data);\r\n\t};\r\n\r\n\tasync function registerUser(credentials: RegisterData) {\t\t\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}users/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\r\n\t\t}).then((data) => {            \r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\t\r\n                    console.log('ok', data)\t\t\t\t\r\n                    //setRegisterModalShow(false);\r\n\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n                    setAuthToken(data.token) // after register make login\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t} else if (data.status >= 400) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\tconsole.log(data)\r\n                \r\n                    for (const [key, value] of Object.entries(data)) {                \r\n                        //@ts-ignore\r\n\t\t\t\t\t\tsetError(key, {\r\n                            type: \"manual\",\r\n                            message: value,\r\n                        }); \r\n                    }                   \r\n\t\t\t\t});                \r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\t//show={show}\r\n\t\t\tshow={rxRegisterModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actRegisterModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>('registerForm.title')}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formRegister\">\r\n\t\t\t\t\t\t\r\n                \r\n                        {errors?.username?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.username.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                        \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingUsername\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.username')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.username')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n                        \r\n                        {errors?.email?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore  message is array, but declared as string */}\r\n\t\t\t\t\t\t\t\t{errors.email.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                          \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingEmail\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.email')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.email')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.email}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\r\n                        {errors?.password?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.password.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}  \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.password')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.password')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword2\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password2}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"first_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.firstNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.first_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"last_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.lastNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.last_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>('registerForm.register')}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t{t<string>('registerForm.alreadyHaveAccount')}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>('registerForm.login')}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RegisterModalForm;\r\n","import \"./App.css\";\nimport L from 'leaflet'\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport MenuGlobal from \"./components_hl/MenuGlobal\";\nimport Map from \"./components_hl/Map\";\nimport Sidebar from \"./components/Sidebar\";\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Button from \"react-bootstrap/Button\";\nimport FormFilter from './components/FormFilter';\nimport FormAccident from './components/FormAccident';\nimport LoginModalForm from \"./components/LoginModalForm\";\nimport RegisterModalForm from \"./components/RegisterModalForm\";\n\n\nimport useAuthToken from \"./useAuthToken\";\nimport { useTranslation } from 'react-i18next'\n\nimport { RootState, allReducers } from './reducers/index'\nimport { useSelector, useDispatch } from 'react-redux'\nimport {\n\tactMapMarkerState,\n\tactNewAccidentCreation,\n\tactIsMobileDevice,\n\tactShowSidebar,\n\tactCheckButtonNewMarker,\n\tactShowOkCancelMobileMarker,\n\tactShowAccidentTab,\n\tactActiveTabKey,\n\tactDictManeuvers,\n\tactDictTypeViolations,\n\tactDictViolators,\n\tactDataAccidents,\n\tactDataFilters,\n\tactMinMaxDateData\n} from \"./actions\";\nimport { AccidentItem } from './interfaces'\n\n\nlet geojsonMarkerOptions = {\n\t//renderer: myRenderer,\n\tradius: 6, //6\n\tfillColor: \"#402000\",//\"#ff7800\",\n\tcolor: \"#000\",\n\tweight: 0, //2  сильно тормозит на мобильной версии если weight > 0\n\topacity: 0.5,//0.7\n\tfillOpacity: 0.6//0.2\n};\n\n\n\n\nfunction App() {\n\tconst paramsRouter = useParams();\n\tconst csrftoken = getCookie(\"csrftoken\");\n\n\t// redux\n\tconst dispatch = useDispatch();\n\tconst rxDataAccidents = useSelector((state: RootState) => state.dataReducer.dataAccidents);\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\n\tconst rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\n\tconst rxDataFilters = useSelector((state: RootState) => state.dataReducer.dataFilters);\n\tconst rxActiveTabKey = useSelector((state: RootState) => state.uiReducer.activeTabKey);\n\tconst rxShowAccidentTab = useSelector((state: RootState) => state.uiReducer.showAccidentTab);\n\tconst rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\n\n\tconst rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\n\tconst rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\t\n\n\tconst { authToken, setAuthToken } = useAuthToken();\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth);\n\t//const [isMobileDevice, setIsMobileDevice] = useState(false)\n\tconst isMobileView = screenWidth <= 768; // show or hide sidebar at startup\n\t\n\tconst [dataAccidentForm, setDataAccidentForm] = useState<AccidentItem | null>(null);\n\tconst { t } = useTranslation()\n\n\t//let dataHeatmapPoints = [];\n\tlet dataHeatmapPoints: number[][] = []; // [[lat, lng, value],[lat, lng, value]...]\t\n\n\n\tuseEffect(() => {\n\t\t//setUserAuthToken(getAuthToken())\n\n\t\tconst fetchManeuvers = async () => {\n\t\t\t//const url = `http://127.0.0.1:8000/api/dictionary/roadaccident/maneuvers`;\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/maneuvers`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictManeuvers(data))\n\t\t};\n\n\t\tconst fetchTypeViolations = async () => {\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/typeviolations`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictTypeViolations(data))\n\t\t};\n\n\t\tconst fetchViolators = async () => {\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}dictionary/roadaccident/violators`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictViolators(data))\n\t\t};\n\n\t\tfetchManeuvers();\n\t\tfetchTypeViolations();\n\t\tfetchViolators();\n\n\t\tif (authToken) {\n            checkAuthToken()\n        }\n\n        \n\t\tdispatch(actIsMobileDevice(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)))\n\t\tdispatch(actShowSidebar(!isMobileView))\t\n\t\t\n\t\twindow.addEventListener('resize', handleWindowSizeChange);\n        return () => {\n            window.removeEventListener('resize', handleWindowSizeChange);\t\t\t\n        }\t\t\n\t\t\n\t}, []); /* useEffect triggers when route has been changed too */\n\n\n\tuseEffect(() => {\n\t\tfetchAccidents();\n\t}, [paramsRouter]); /* useEffect triggers when route has been changed too */\n\n    useEffect(() => {\n        let periodUpdate = 240000 //4 min\n        let interval = setInterval(() => {\n            if (authToken) {\n                refreshAuthToken(authToken.refresh)    \n            }\n        }, periodUpdate)\n\n        return ()=> clearInterval(interval)\n    }, [authToken])\n\n\n\n    function handleWindowSizeChange() {\n        setScreenWidth(window.innerWidth);\n    }\n\n\n\tconst fetchAccidents = async () => {\n\t\tconst url = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/`;\n\t\tconst res = await fetch(url);\n\t\tlet data = await res.json();\n\n\t\t// find min and max dates\n\t\tlet datefilter_Min = \"2100-01-01\";\n\t\tlet datefilter_Max = \"1970-01-01\";\n\t\tfor (let item of data.features) {\n\t\t\tconsole.log(item);\n\t\t\tif (item.properties.datetime > datefilter_Max) {\n\t\t\t\tdatefilter_Max = item.properties.datetime;\n\t\t\t}\n\t\t\tif (item.properties.datetime < datefilter_Min) {\n\t\t\t\tdatefilter_Min = item.properties.datetime;\n\t\t\t}\n\t\t}\n\n\t\tdispatch(actMinMaxDateData({\n\t\t\tminDate: datefilter_Min.slice(0, 10),\n\t\t\tmaxDate: datefilter_Max.slice(0, 10),\n\t\t}))\n\n\t\tdata.dateTimeGenerated = Date.now();\n\t\tdispatch(actDataAccidents(data))\n\t};\n\n\n\n\tconst onDragEndNewMarker = (LatLng: {lng: number; lat: number}) => {\n\t\t//let coord = { lat: 0, lng: 0 };\n\t\t//coord.lat = LatLng.lat.toFixed(5);\n\t\t//coord.lng = LatLng.lng.toFixed(5);\n\n\t\t//setNewMarkerState({ visible: true, position: coord });\n\t};\n\n\tconst onMarkerClick = (data: AccidentItem) => {\n\t\t//console.log('data', data)\n\t\tdispatch(actShowAccidentTab(true))\n\t\tdispatch(actActiveTabKey('accident'))\n\t\tsetDataAccidentForm(data);\n\t\tdispatch(actShowSidebar(true))\n\t};\n\n\n\tconst onClickMap = (e: any) => {\n\t\tif (rxCheckButtonNewMarker && !rxIsMobileDevice) {\n\t\t\t//setCheckButtonNewMarker(false)\n\t\t\tdispatch(actCheckButtonNewMarker(false));\n\n\t\t\tlet coord = { lat: '0', lng: '0' };\n\t\t\tcoord.lat = e.latlng.lat.toFixed(5);\n\t\t\tcoord.lng = e.latlng.lng.toFixed(5);\n\t\t\t\n\t\t\tdispatch(actMapMarkerState({ visible: true, position: coord }));\t\n\t\t\tdispatch(actNewAccidentCreation(true));\t\n\t\t\tdispatch(actShowAccidentTab(true));\n\t\t\tdispatch(actActiveTabKey('accident'));\n\t\t} \t\n\t}\n\n\n\n\tconst onSubmitFilter = (filter: {}) => {\n\t\tconsole.log(filter)\n\t\tdataHeatmapPoints = [];\n\t\tdispatch(actDataFilters(filter))\n\n\t\tif (isMobileView) {\n\t\t\tdispatch(actShowSidebar(false))\n\t\t}\n\t};\n\n\tconst onSubmitAccident = (data: any) => {\n\t\tconsole.log(\"onSubmitAccident\", data);\n\t\tlet method;\n\t\tlet url;\n\t\tif (data.id) {\n\t\t\turl = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/${data.id}/`;\n\t\t\tmethod = \"PUT\";\n\t\t} else {\n\t\t\turl = `${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/`;\n\t\t\tmethod = \"POST\";\n\t\t}\n\n\t\tfetchUrl(url, method, data);\n\t\t\n\t\tif (isMobileView) {\n\t\t\tdispatch(actShowSidebar(false))\n\t\t}\n\t};\n\n\tconst onDeleteAccident = (id: number) => {\n\t\tfetchUrl(\n\t\t\t`${process.env.REACT_APP_API_URL}roadaccident/${paramsRouter.cityName}/accidents/${id}/`,\n\t\t\t\"DELETE\"\n\t\t);\n\t};\n\n\tconst onCloseAccident = () => {\n\t\tdispatch(actMapMarkerState({ visible: false, position: {} }));\n\t\tdispatch(actNewAccidentCreation(false));\t\n\t\tdispatch(actActiveTabKey('filter'));\n\t\tdispatch(actShowAccidentTab(false));\n\t};\n\n\tconst onClickEditCoords = (coord: {lat: string; lng: string}) => {\t\t\n\t\tdispatch(actMapMarkerState({ visible: true, position: coord }));\n\t}\t\n\n\n\tfunction markerOnClick(e: any)\n\t{\n\t\t\tlet marker: L.Marker = e.target;\n\t\t\tlet geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\n\t\t\t\n\t\t\tdispatch(actShowAccidentTab(true))\n\t\t\tdispatch(actActiveTabKey('accident'))\n\t\t\tsetDataAccidentForm(geojson);\n\t\t\tdispatch(actShowSidebar(true))\t\t\t\n\t\t\t\n\t\t\t//onMarkerClick(geojson);\n\t\t\t//console.log(geojson)        \n\t}\t\n\n    const pointToLayerRoadaccident = (feature: GeoJSON.Point|GeoJSON.Feature<GeoJSON.Point>, latlng: L.LatLng): any => \n    {\n        if (!rxCheckButtonHeatmap) {\n            return L.circleMarker(latlng, geojsonMarkerOptions).on('click', markerOnClick)        \n        }\n    }\n\n\n\tconst filterMapCallback = (feature: any): boolean => {\n\t\tlet dateFrom_Filter = true;\n\t\tlet dateTo_Filter = true;\n\n\t\tlet maneuver_Filter = true;\n\t\tlet description_Filter = true;\n\t\tlet violations_type_Filter = true;\n\t\tlet violators_Filter = true;\n\n\t\tlet drivers_injured_Filter = true;\n\t\tlet motorcyclists_injured_Filter = true;\n\t\tlet cyclists_injured_Filter = true;\n\t\tlet ped_injured_Filter = true;\n\t\tlet kids_injured_Filter = true;\n\t\tlet pubtr_passengers_injured_Filter = true;\n\n\t\tlet drivers_killed_Filter = true;\n\t\tlet motorcyclists_killed_Filter = true;\n\t\tlet cyclists_killed_Filter = true;\n\t\tlet ped_killed_Filter = true;\n\t\tlet kids_killed_Filter = true;\n\t\tlet pubtr_passengers_killed_Filter = true;\n\n\t\tlet public_transport_involved_Filter = true;\n\t\tlet showOnlyMyAccidents_Filter = true;\n\n\t\tlet valueFilter;\n\n\t\tvalueFilter = rxDataFilters?.dateFromFilter;\n\t\tif (valueFilter) {\n\t\t\tdateFrom_Filter =\n\t\t\t\tfeature.properties.datetime.split(\"T\")[0] >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.dateToFilter;\n\t\tif (valueFilter) {\n\t\t\tdateTo_Filter =\n\t\t\t\tfeature.properties.datetime.split(\"T\")[0] <= valueFilter;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.maneuverFilter?.value;\n\t\tif (valueFilter) {\n\t\t\tmaneuver_Filter = valueFilter === feature.properties.maneuver;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.descFilter;\n\t\tif (valueFilter) {\n\t\t\tif (\n\t\t\t\tfeature.properties.description\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.indexOf(valueFilter.toLowerCase()) === -1\n\t\t\t) {\n\t\t\t\tdescription_Filter = false;\n\t\t\t}\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.violationsTypeFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.violations_type.includes(String(x.value))\n\t\t\t);\n\t\t\tviolations_type_Filter = intersection.length > 0;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.violatorsFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.violators.includes(String(x.value))\n\t\t\t);\n\t\t\tviolators_Filter = intersection.length > 0;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.driverInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tdrivers_injured_Filter = feature.properties.drivers_injured > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.motorcyclistInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tmotorcyclists_injured_Filter =\n\t\t\t\tfeature.properties.motorcyclists_injured > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.cyclistInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tcyclists_injured_Filter = feature.properties.cyclists_injured > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.pedestrianInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tped_injured_Filter = feature.properties.ped_injured > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.kidsInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tkids_injured_Filter = feature.properties.kids_injured > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.pubtrPassengersInjuredFilter;\n\t\tif (valueFilter) {\n\t\t\tpubtr_passengers_injured_Filter =\n\t\t\t\tfeature.properties.pubtr_passengers_injured > 0;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.driversKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tdrivers_killed_Filter = feature.properties.drivers_killed > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.motorcyclistsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tmotorcyclists_killed_Filter =\n\t\t\t\tfeature.properties.motorcyclists_killed > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.cyclistsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tcyclists_killed_Filter = feature.properties.cyclists_killed > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.pedestrianKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tped_killed_Filter = feature.properties.ped_killed > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.kidsKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tkids_killed_Filter = feature.properties.kids_killed > 0;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.pubtrPassengersKilledFilter;\n\t\tif (valueFilter) {\n\t\t\tpubtr_passengers_killed_Filter =\n\t\t\t\tfeature.properties.pubtr_passengers_killed > 0;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.publicTransportInvolvedFilter;\n\t\tif (valueFilter) {\n\t\t\tpublic_transport_involved_Filter =\n\t\t\t\tfeature.properties.public_transport_involved > 0;\n\t\t}\n\t\t//valueFilter = dataFilters?.showOnlyMyAccidentsFilter\n\n\t\tlet returnValue =\n\t\t\tdateFrom_Filter &&\n\t\t\tdateTo_Filter &&\n\t\t\tmaneuver_Filter &&\n\t\t\tdescription_Filter &&\n\t\t\tviolations_type_Filter &&\n\t\t\tviolators_Filter &&\n\t\t\tdrivers_injured_Filter &&\n\t\t\tmotorcyclists_injured_Filter &&\n\t\t\tcyclists_injured_Filter &&\n\t\t\tped_injured_Filter &&\n\t\t\tkids_injured_Filter &&\n\t\t\tpubtr_passengers_injured_Filter &&\n\t\t\tdrivers_killed_Filter &&\n\t\t\tmotorcyclists_killed_Filter &&\n\t\t\tcyclists_killed_Filter &&\n\t\t\tped_killed_Filter &&\n\t\t\tkids_killed_Filter &&\n\t\t\tpubtr_passengers_killed_Filter &&\n\t\t\tpublic_transport_involved_Filter &&\n\t\t\tshowOnlyMyAccidents_Filter;\n\n\t\tif (returnValue) {\n\t\t\tdataHeatmapPoints.push([\n\t\t\t\tfeature.properties.latitude,\n\t\t\t\tfeature.properties.longitude,\n\t\t\t\t0.1,\n\t\t\t]);\n\t\t}\n\n\t\treturn returnValue;\n\t};\n\n\tfunction fetchUrl(url: string, method: string, bodyObject?: any) {\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\t\tif (authToken?.access) {\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + authToken.access);\n\t\t}\n\n\t\tfetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(bodyObject),\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\talert(\n\t\t\t\t\t\tresponse.statusText +\n\t\t\t\t\t\t\t\" (\" +\n\t\t\t\t\t\t\tresponse.status +\n\t\t\t\t\t\t\t\")\\n\\n\" +\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t//closeTabAccident();\n\t\t\t\t//if (IS_MOBILE) {\n\t\t\t\t//    CloseSidebar()\n\t\t\t\t//}\n\n\t\t\t\t// select the new/edited accident marker\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(data);\n\t\t\t\t\tfetchAccidents();\n\t\t\t\t\tdispatch(actMapMarkerState({ visible: false, position: {} }));\n\t\t\t\t\tdispatch(actNewAccidentCreation(false));\n\t\t\t\t\tdispatch(actActiveTabKey('filter'));\n\t\t\t\t\tdispatch(actShowAccidentTab(false));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\n\n\n\n\n\n\treturn (\n\t\t<div className=\"main-wrapper\">\n\t\t{paramsRouter.cityName ? \t\n\t\t\t<div id=\"app\">\n\t\t\t\t<div className={`d-flex ${rxShowSidebar ? \"showed\" : \"hided\"}`} id=\"wrapper\">\n\t\t\t\t\t\n\t\t\t\t\t<Sidebar>\t\t\t\t\t\t\n\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\tid=\"controlled-tab-example\"\n\t\t\t\t\t\t\tactiveKey={rxActiveTabKey}\n\t\t\t\t\t\t\tonSelect={ (k) => dispatch(actActiveTabKey(k)) }\n\t\t\t\t\t\t\t//onSelect={(k) => setKey(k)}\n\t\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Tab eventKey=\"filter\" title={t<string>('sidebar.filterTab.title')}>\n\t\t\t\t\t\t\t\t<div style={{overflowY: 'auto', overflowX: 'hidden', width: '100%', height: 'calc(100vh - 130px)'}}>\n\t\t\t\t\t\t\t\t\t<FormFilter \n\t\t\t\t\t\t\t\t\t\tonSubmitFilter={onSubmitFilter}  \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t\t<Tab eventKey=\"accident\" title={t<string>('sidebar.accidentTab.title')} tabClassName={!rxShowAccidentTab ? 'd-none' : ''}>\n\t\t\t\t\t\t\t\t<div style={{overflowY: 'auto', overflowX: 'hidden', width: '100%', height: 'calc(100vh - 130px)'}}>\n\t\t\t\t\t\t\t\t\t<FormAccident \n\t\t\t\t\t\t\t\t\t\tonSubmitAccident={onSubmitAccident}\n\t\t\t\t\t\t\t\t\t\tonDeleteAccident={onDeleteAccident}\n\t\t\t\t\t\t\t\t\t\tonCloseAccident={onCloseAccident} \n\t\t\t\t\t\t\t\t\t\tonClickEditCoords={onClickEditCoords}\n\t\t\t\t\t\t\t\t\t\tdataAccidentForm={dataAccidentForm}\n\t\t\t\t\t\t\t\t\t\t//currentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tab>\n\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t</Sidebar>\n\n\t\t\t\t\t\n\n\t\t\t\t\t<div id=\"page-content-wrapper\">\n\t\t\t\t\t\t<MenuGlobal\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t//onClickShowMenu={ () => dispatch(actShowSidebar(!rxShowSidebar)) }\n\t\t\t\t\t\t\tauthToken={authToken}\n\t\t\t\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\t\t\t\tappname=\"roadaccident\"\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName=\"container-fluid\"\n\t\t\t\t\t\t\tstyle={{ paddingRight: \"0px\", paddingLeft: \"0px\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\tmainData={rxDataAccidents}\n\t\t\t\t\t\t\t\tappname=\"roadaccident\"\n\t\t\t\t\t\t\t\tdataHeatmapPoints={dataHeatmapPoints}\n\t\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t//onMarkerClick={onMarkerClick}\n\t\t\t\t\t\t\t\tonDragEndNewMarker={onDragEndNewMarker}\n\t\t\t\t\t\t\t\tonClickMap={onClickMap}\n\t\t\t\t\t\t\t\tpointToLayerCallback={pointToLayerRoadaccident}\n\t\t\t\t\t\t\t\tfilterMapCallback={filterMapCallback}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t{rxShowOkCancelMobileMarker && <> \n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\t\t\tid=\"doneEditMarkerMobile\"\n\t\t\t\t\t\t\t\t\tonClick={()=>{\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdispatch(actCheckButtonNewMarker(false))\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdispatch(actShowOkCancelMobileMarker(false))\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdispatch(actShowAccidentTab(true))\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdispatch(actActiveTabKey('accident'))\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tdispatch(actShowSidebar(true))\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{t<string>('words.done')}\n\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\tid=\"cancelMarkerMobile\"\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tdispatch(actMapMarkerState({ visible: false, position: {lat: 0, lng: 0} }));\n\t\t\t\t\t\t\t\t\t\tdispatch(actNewAccidentCreation(false));\n\t\t\t\t\t\t\t\t\t\tdispatch(actShowOkCancelMobileMarker(false));\n\t\t\t\t\t\t\t\t\t\tdispatch(actCheckButtonNewMarker(false));\n\t\t\t\t\t\t\t\t\t}}\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t&#x2715;\n\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t</>}\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\n\t\t\t: 'You must select a city.'}\n\n\t\t\t<LoginModalForm setAuthToken={setAuthToken}/>\n\t\t\t<RegisterModalForm setAuthToken={setAuthToken}/>\n\n\t\t</div>\n\t);\n\n\n\n\n\tfunction getCookie(name: string) {\n\t\tvar cookieValue = null;\n\t\tif (document.cookie && document.cookie !== \"\") {\n\t\t\tvar cookies = document.cookie.split(\";\");\n\t\t\tfor (var i = 0; i < cookies.length; i++) {\n\t\t\t\tvar cookie = cookies[i].trim();\n\t\t\t\t// Does this cookie string begin with the name we want?\n\t\t\t\tif (cookie.substring(0, name.length + 1) === name + \"=\") {\n\t\t\t\t\tcookieValue = decodeURIComponent(\n\t\t\t\t\t\tcookie.substring(name.length + 1)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cookieValue;\n\t}\n\n\n\n\n\n    function refreshAuthToken(refreshToken: string){\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\n        fetch(`${process.env.REACT_APP_API_URL}token/refresh/`, {\n            method: \"POST\",\n            headers: myHeaders,\n            body: JSON.stringify({ refresh: refreshToken }),\n\n        }).then(function (response) {\n            if (response.status == 200) {\n                response.json().then((data) => {    \n                    //setAuthToken({access: data.access, refresh: authToken.refresh})\n                    setAuthToken(data)\n                });\n            } else if (response.status >= 400) {\n                setAuthToken(null)    \n            }\n        });\n    }\n\n\n    function checkAuthToken() {\n\t\tlet body = { token: authToken.access }\n\t\tlet url = `${process.env.REACT_APP_API_URL}token/verify/`;\n\t\tlet myHeaders = new Headers();\n\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\n\t\tfetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(body),\n\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\">= 400\", data);\n\n                    refreshAuthToken(authToken.refresh)\n\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\"ok\", data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t}\n\n\n\n\t//function setAuthToken(userToken) {\n\t//    localStorage.setItem('token', JSON.stringify(userToken));\n\t//    setUserAuthToken(JSON.stringify(userToken))\n\t//}\n\n\t//function getAuthToken () {\n\t//    const tokenString = localStorage.getItem('token')\n\t//    return JSON.parse(tokenString)\n\t//}\n}\n\nexport default App;\n\n// Code Splitting in React Using Lazy and Suspense | Code Splitting Made Easy\n// https://www.youtube.com/watch?v=69Oj8JTYXZU\n","import { useState } from 'react';\r\n\r\nexport default function useAuthToken() {\r\n    \r\n    const getUsernameFromToken = (json: {access: string; refresh: string}) =>{\r\n        let token = json?.access \r\n\r\n        if (token) {\r\n            const arToken = token.split('.')\r\n            if (arToken.length > 1) {\r\n                //return JSON.parse(atob(arToken[1])).username\r\n                console.log(JSON.parse(atob(arToken[1])))\r\n                return {\r\n                    \"name\": JSON.parse(atob(arToken[1])).username,\r\n                    \"id\": JSON.parse(atob(arToken[1])).user_id\r\n                }                 \r\n            }\r\n        }\r\n    }\r\n    \r\n    const getToken = () => {\r\n        let tokenString\r\n        const rememberme = localStorage.getItem('rememberme')\r\n\r\n        if (rememberme==='true') {\r\n            tokenString = localStorage.getItem('token')\r\n        } else {\r\n            tokenString = sessionStorage.getItem('token')\r\n        }\r\n        \r\n\r\n        if (tokenString) {\r\n            let json = JSON.parse(tokenString)\r\n            const user = getUsernameFromToken(json)\r\n            if (user) {\r\n                json.user = user\r\n            }            \r\n            return json\r\n        } else {\r\n            return null\r\n        }\r\n      };\r\n\r\n    const [authToken, setAuthToken] = useState(getToken());\r\n\r\n\r\n    const saveToken = (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => {\r\n        if (userToken) {\r\n\r\n            const rememberme = localStorage.getItem('rememberme')\r\n\r\n            if (rememberme === 'true') {\r\n                localStorage.setItem('token', JSON.stringify(userToken));\r\n            } else {\r\n                sessionStorage.setItem('token', JSON.stringify(userToken));\r\n            }\r\n            \r\n            \r\n            const user = getUsernameFromToken(userToken)\r\n            if (user) {\r\n                userToken.user = user;\r\n            }            \r\n        } else {\r\n            localStorage.removeItem(\"token\")    \r\n            localStorage.removeItem(\"rememberme\") \r\n            sessionStorage.removeItem(\"token\")\r\n        }           \r\n        setAuthToken(userToken);\r\n    };    \r\n\r\n\r\n    return {\r\n        setAuthToken: saveToken,\r\n        authToken\r\n    }    \r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\nimport translationEN from './locales/en/translation.json';\r\nimport translationBG from './locales/bg/translation.json';\r\nconst availableLanguages = ['en', 'bg'];\r\n\r\n\r\ni18n\r\n    .use(LanguageDetector)\r\n    .use(initReactI18next) // passes i18n down to react-i18next\r\n    .init({\r\n        // the translations\r\n        // (tip move them in a JSON file and import them,\r\n        // or even better, manage them via a UI: https://react.i18next.com/guides/multiple-translation-files#manage-your-translations-with-a-management-gui)\r\n        resources: {\r\n            en: {\r\n                translation: translationEN\r\n            },\r\n\r\n            bg: {\r\n                translation: translationBG\r\n            }      \r\n        },\r\n        //lng: \"bg\", // if you're using a language detector, do not define the lng option\r\n        //lng: localStorage.getItem('lng') || 'en',\r\n        fallbackLng: \"en\",\r\n\r\n        interpolation: {\r\n        escapeValue: false // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\nexport default i18n;","const initialState = {\r\n    showSidebar: false,\r\n    showAccidentTab: false,\r\n    activeTabKey: 'filter',\r\n    loginModalShow: false,\r\n    registerModalShow: false,\r\n\r\n    mapBaseLayerName: 'Default',\r\n    mapMarkerState: {\r\n\t\tvisible: false,\r\n\t\tposition: {},\r\n\t\tisMobile: false\r\n\t},\r\n    newAccidentCreation: false,\r\n    showOkCancelMobileMarker: false,\r\n    checkButtonNewMarker: false,\r\n    checkButtonHeatmap: false,\r\n    checkButtonGPS: false,\r\n\r\n    isMobileDevice: false\r\n}\r\n\r\nconst uiReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'SHOWSIDEBAR':\r\n            return {\r\n                ...state,\r\n                showSidebar: action.payload\r\n            }\r\n        case 'SHOWACCIDENTTAB':\r\n            return {\r\n                ...state,\r\n                showAccidentTab: action.payload\r\n            }            \r\n        case 'ACTIVETABKEY':\r\n            return {\r\n                ...state,\r\n                activeTabKey: action.payload\r\n            }                                              \r\n        case 'LOGINMODALSHOW':\r\n            return {\r\n                ...state,\r\n                loginModalShow: action.payload\r\n            }\r\n\r\n        case 'REGISTERMODALSHOW':\r\n            return {\r\n                ...state,\r\n                registerModalShow: action.payload\r\n            }    \r\n        \r\n\r\n\r\n        case 'MAPBASELAYERNAME':\r\n            return {\r\n                ...state,\r\n                mapBaseLayerName: action.payload\r\n            } \r\n            \r\n        case 'MAPMARKERSTATE':\r\n            return {\r\n                ...state,\r\n                mapMarkerState: action.payload\r\n            } \r\n\r\n        case 'NEWACCIDENTCREATION':\r\n            return {\r\n                ...state,\r\n                newAccidentCreation: action.payload\r\n            }             \r\n\r\n        case 'SHOWOKCANCELMOBILEMARKER':\r\n            return {\r\n                ...state,\r\n                showOkCancelMobileMarker: action.payload\r\n            }              \r\n        \r\n        case 'CHECKBUTTONNEWMARKER':\r\n            return {\r\n                ...state,\r\n                checkButtonNewMarker: action.payload\r\n            }\r\n        case 'CHECKBUTTONHEATMAP':\r\n            return {\r\n                ...state,\r\n                checkButtonHeatmap: action.payload\r\n            }            \r\n        case 'CHECKBUTTONGPS':\r\n            return {\r\n                ...state,\r\n                checkButtonGPS: action.payload\r\n            }            \r\n\r\n\r\n\r\n        case 'ISMOBILEDEVICE':\r\n            return {\r\n                ...state,\r\n                isMobileDevice: action.payload\r\n            }\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default uiReducer","const initialState = {\r\n    dataAccidents: [],\r\n    dataFilters: {},\r\n    dictManeuvers: [],\r\n    dictTypeViolations: [],\r\n    dictViolators: [],\r\n    minMaxDateData: {\r\n        minDate: \"\",\r\n        maxDate: \"\"\r\n    }   \r\n}\r\n\r\nconst dataReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'DATAACCIDENTS':\r\n            return {\r\n                ...state,\r\n                dataAccidents: action.payload\r\n            }\r\n\r\n        case 'DICTMANEUVERS':\r\n            return {\r\n                ...state,\r\n                dictManeuvers: action.payload\r\n            }\r\n\r\n        case 'DICTTYPEVIOLATIONS':\r\n            return {\r\n                ...state,\r\n                dictTypeViolations: action.payload\r\n            }      \r\n\r\n        case 'DICTVIOLATORS':\r\n            return {\r\n                ...state,\r\n                dictViolators: action.payload\r\n            }  \r\n\r\n        case 'DATAFILTERS':\r\n            return {\r\n                ...state,\r\n                dataFilters: action.payload\r\n            }\r\n\r\n        case 'MINMAXDATEDATA':\r\n            return {\r\n                ...state,\r\n                minMaxDateData: action.payload\r\n            }\r\n\r\n\r\n\r\n        default:\r\n            return state            \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default dataReducer","import uiReducer from './userInterface'\r\nimport dataReducer from './dataApp'\r\nimport { combineReducers } from 'redux'\r\n\r\nexport const allReducers = combineReducers({\r\n    uiReducer,\r\n    dataReducer    \r\n});\r\n\r\n//export default allReducers\r\nexport type RootState = ReturnType<typeof allReducers>","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './index.css';\nimport './sidebar.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18nextConf';\nimport { createStore } from 'redux'\nimport { allReducers } from './reducers';\nimport { Provider } from 'react-redux'\n\n// Importing the Bootstrap CSS\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst store = createStore(\n  allReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n  {/*<React.StrictMode>*/}\n    <BrowserRouter basename=\"/roadaccident\">\n      <Routes>\n        <Route path=\"/\">\n          <Route path=\":cityName\" element={<App />} >\n            <Route path=\":accidentId\" element={<App />} />\n          </Route>               \n        </Route>\n      </Routes>\n    </BrowserRouter>\n  {/*</React.StrictMode>,*/}\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}