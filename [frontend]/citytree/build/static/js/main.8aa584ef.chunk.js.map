{"version":3,"sources":["actions/index.js","components_hl/MenuGlobal.tsx","components_hl/ButtonMap.js","components_hl/MapTileLayers.tsx","components_hl/Map.tsx","components/images/markers/marker-red.png","components/images/markers/marker-shadow.png","components/MainWrapper.tsx","components/Sidebar.tsx","components/ButtonOkCancelMobileMarker.tsx","components/FormFilter.tsx","components/TableList.tsx","components/ImageS3Upload/ImageS3Upload.tsx","components/ImageS3Upload/delete2.svg","components/ImageS3Upload/index.tsx","components/images/no-photo.png","components/UploadPhotos.tsx","components/FormTree.tsx","components/FormInspection.tsx","components/ImageSlider.tsx","components/TreePreviewModal.tsx","utils/misc.ts","useAuthToken.tsx","components/LoginModalForm.tsx","components/RegisterModalForm.tsx","utils/filterDataMap.ts","constants/urlsAPI.ts","utils/fetchAllDictionariesData.ts","App.tsx","reportWebVitals.js","i18nextConf.js","reducers/userInterface.tsx","reducers/dataApp.tsx","reducers/index.ts","index.js"],"names":["actNewTreeCreation","value","type","payload","actShowSidebar","actShowTreeTab","actShowInspTab","actActiveTabKey","actLoginModalShow","actRegisterModalShow","actMapBaseLayerName","actMapMarkerState","actShowOkCancelMobileMarker","actCheckButtonNewMarker","actCheckButtonGPS","actDataTrees","MenuGlobal","currentCity","appname","authToken","setAuthToken","dispatch","useDispatch","rxShowSidebar","useSelector","state","uiReducer","showSidebar","useState","cities","setCities","useTranslation","t","i18n","changeLanguage","useEffect","fetchCities","a","fetch","process","res","json","data","console","log","Navbar","bg","expand","Container","Button","className","variant","id","onClick","Toggle","Collapse","Nav","Link","href","NavDropdown","title","Item","active","map","city","as","to","sysname","cityname","language","user","name","ButtonMap_","iconTrue","iconFalse","L","easyButton","position","states","stateName","icon","control","button","style","backgroundColor","addTo","MapTileLayers","heatMapLayer","setView_nTimes_gps","circle_geolocation","mapBaseLayerName","LayersControl","BaseLayer","checked","TileLayer","attribution","url","accessToken","maxZoom","tileSize","zoomOffset","subdomains","bingkey","redIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","currentCitySysname","Map","mainData","dataHeatmapPoints","onDragEndNewMarker","onClickMap","onZoomEnd","onEachLayer","pointToLayerCallback","filterMapCallback","rxMapBaseLayerName","rxIsMobileDevice","isMobileDevice","rxMapMarkerState","mapMarkerState","rxShowOkCancelMobileMarker","showOkCancelMobileMarker","rxCheckButtonNewMarker","checkButtonNewMarker","rxCheckButtonHeatmap","checkButtonHeatmap","rxCheckButtonGPS","checkButtonGPS","currentCityInfo","setCurrentCityInfo","setMap","currentZoom","setCurrentZoom","buttonNewMarker","setButtonNewMarker","buttonHeatmap","setButtonHeatmap","buttonGPS","setButtonGPS","mapname_","document","cookie","split","find","row","startsWith","newMarkerRef","useRef","onClickNewMarker","onClickHeatmap","onClickGPS","remove","fetchCity","DomUtil","addClass","_container","removeClass","window","setTimeout","invalidateSize","pan","visible","lat","lng","SetPanToMap","useMap","panTo","parseFloat","locate","enableHighAccuracy","watch","maximumAge","stopLocate","removeLayer","onEachFeaturePoint","feature","layer","on","e","NewMarker","eventHandlers","useMemo","dragend","current","marker","LatLng","getLatLng","coord","toFixed","time","Promise","resolve","then","Marker","draggable","getCenter","ref","MapEvents","useMapEvents","baselayerchange","move","setLatLng","target","moveend","click","zoomend","_zoom","locationfound","radius","accuracy","setView","latlng","hasLayer","setRadius","circle","locationerror","alert","message","MarkersZoomAdjustment","zoom","getZoom","eachLayer","HeatmapFunction","heatLayer","gradient","max","blur","addLayer","MapContainer","whenCreated","center","zoomControl","scrollWheelZoom","height","width","GeoJSON","pointToLayer","filter","onEachFeature","dateTimeGenerated","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","maxClusterRadius","iconCreateFunction","cluster","digits","count","getChildCount","divIcon","html","toString","undefined","ZoomControl","MainWrapper","children","cityName","Sidebar","marginTop","ButtonOkCancelMobileMarker","FormFilter","onSubmitFilter","rxDictSpecieses","dataReducer","dictSpecieses","rxDictStatuses","dictStatuses","rxDictCareTypes","dictCareTypes","rxDictRemarks","dictRemarks","rxDictPlaceTypes","dictPlaceTypes","rxDictIrrigationMethods","dictIrrigationMethods","rxDictGroupSpecs","dictGroupSpec","useForm","reValidateMode","defaultValues","speciesFilter","statusFilter","careTypeFilter","remarkFilter","placeTypeFilter","irrigationMethodFilter","datePlantedFromFilter","datePlantedToFilter","dateAddedFromFilter","dateAddedToFilter","commentFilter","heightFromFilter","trunkGirthFromFilter","crownDiameterFromFilter","heightToFilter","trunkGirthToFilter","crownDiameterToFilter","showMyTreesFilter","handleSubmit","register","reset","optionsSpeciesesFilter","setValue","Array","isArray","itemGroup","label","groupname","options","spec","groupspec","localname","speciesname","typespec","optionsStatusesFilter","x","statusname","optionsCareTypesFilter","carename","optionsRemarksFilter","remarkname","optionsPlaceTypesFilter","placename","optionsIrrigationMethodsFilter","irrigationname","customStyles","option","styles","paddingLeft","Option","props","color","Form","onSubmit","Group","controlId","Label","render","field","placeholder","isMulti","isSearchable","getOptionLabel","components","maxMenuHeight","Row","Col","minWidth","isClearable","Control","maxWidth","size","min","Check","inline","TableList","stateComponent","columns","sortField","sortAsc","OnClickButtons","sortState","setSortState","dataTable","setDataTable","columnsHeader","item","index","cursor","sortable","float","textAlign","headerName","fontSize","DataTable","sortedData","sort","b","length","DataRow","indexRow","colSpan","getUniqKey","String","col","dateTimeOption","Date","toLocaleDateString","toLocaleTimeString","dateTime","buttons","buttonRow","forEach","text","iconFA","idButton","buttonText","iconFASize","push","Table","striped","bordered","hover","defaultResizingOptions","enabled","autoResize","maxHeight","compressFormat","quality","rotation","ImageS3Upload","forwardRef","signingUrl","autoUpload","emptyPhoto","serverPhoto","onChange","buttonCaption","resizer","onFinish","onProgress","onError","onSignedUrl","useImperativeHandle","uploadFile","inputFileEl","files","status","resizing","startUpload","none","setStatus","imagePhoto","setImagePhoto","compressedPhoto","setCompressedPhoto","buttonCaptionState","setButtonCaptionState","showSpinner","setShowSpinner","s3DataState","setS3DataState","notLoad","setNotLoad","fields","key","slice","resizeFile","file","Resizer","imageFileResizer","uri","onChangeFile","event","URL","createObjectURL","image","Blob","resized","error","fetchUrlSign","objectName","myHeaders","Headers","append","bodyObject","method","headers","body","JSON","stringify","parse","updateProgress","ev","lengthComputable","percentComplete","Math","round","loaded","total","s3Data","xhr","XMLHttpRequest","open","timeout","upload","onprogress","postData","FormData","onreadystatechange","readyState","onload","onerror","send","filename","replace","signedUrl","file_exists","rndStr","makeRandomStr","Image","src","fluid","rounded","deleteImage","top","right","Spinner","animation","role","accept","display","result","characters","charactersLength","i","charAt","floor","random","UploadPhotos","controlFromUseForm","signingS3Url","onCallbackDone","photo1Ref","photo2Ref","photo3Ref","uploadedPhoto1","setUploadedPhoto1","uploadedPhoto2","setUploadedPhoto2","uploadedPhoto3","setUploadedPhoto3","resizerOptions","uploadPhotos","p1","p2","p3","onFinishPhoto1","onFinishPhoto2","onFinishPhoto3","xs","noPhotoImage","FormTree","onSubmitTree","onDeleteTree","onCloseTree","onNewInsp","onEditInsp","onClickInspPhotos","onClickEditCoords","dataTreeForm","rxNewTreeCreation","newTreeCreation","showModalDelete","setShowModalDelete","uploadPhotosRef","inspections","setInspections","optionsIrrigationMethodsData","formData","latitude","longitude","species","species_id","isFound","optionsSpeciesesData","element","speciescomment","comment","placetype","optionsPlaceTypesData","irrigationmethod","dateplanted","googlestreeturl","keepDefaultValues","fetchInpections","photo1","photo2","photo3","typeData","optionsStatusesData","optionsCareTypesData","optionsRemarksData","crowndiameter","trunkgirth","remarks","recommendations","getValues","errors","formState","trigger","preventDefault","prepareOnSubmitTree","inspection","parseInt","isSelected","isFocused","isDisabled","rules","required","step","isInvalid","Feedback","rows","pattern","rowData","Modal","show","onHide","Header","closeButton","Title","Body","Footer","FormInspection","onSubmitInsp","onDeleteInsp","onCloseInsp","dataInspForm","treeId","isValid","tree","includes","prepareOnSubmitInsp","photoServer","ImageSlider","setVisible","images","dialogClassName","Carousel","interval","photo","RowTable","isValueIsLink","dateTimeToDate","dateTimeStr","arDateTime","toISOString","TreePreviewModal","setTreePreview","onButtonEditClick","handleClose","photos","lastinsp_photo1","lastinsp_photo2","lastinsp_photo3","lastinsp_status","lastinsp_height","lastinsp_trunkgirth","lastinsp_crowndiameter","lastinsp_remarks","lastinsp_recommendations","getCookie","cookieValue","cookies","trim","substring","decodeURIComponent","checkAuthToken","urlCheckingToken","token","csrftoken","getNewAccessRefreshAuthToken","urlRefreshingToken","refreshToken","refresh","response","responseJson","LoginModalForm","rxLoginModalShow","loginModalShow","showWrongPassword","setShowWrongPassword","username","password","rememberme","credentials","centered","localStorage","setItem","loginUser","FloatingLabel","Text","RegisterModalForm","rxRegisterModalShow","registerModalShow","email","password2","first_name","last_name","setError","Object","entries","registerUser","isFoundArrayInValue","array","isFoundArrayInArray","arraySearch","arrayTree","URL_REFRESH_TOKEN","URL_VERIFY_TOKEN","URL_GENERATE_S3_URLKEY","URL_GET_DICT_SPECIESES","URL_GET_DICT_CARETYPES","URL_GET_DICT_REMARKS","URL_GET_DICT_PLACETYPES","URL_GET_DICT_IRRIGATIONMETHODS","URL_GET_DICT_GROUPSPECS","URL_GET_DICT_TYPESPECS","URL_GET_DICT_STATUSES","urlTreesByCity","urlTreeByCityAndID","fetchAllDictionariesData","all","fetchData","speciesesResponse","caretypesResponse","remarksResponse","placetypesResponse","irrigationmethodsResponse","groupspecsResponse","typespecsResponse","specieses","caretypes","placetypes","irrigationmethods","groupspecs","typespecs","apiURL","geojsonMarkerOptions_citytree","fillColor","weight","opacity","fillOpacity","App","paramsRouter","useParams","rxDataTrees","dataTrees","rxDataFilters","dataFilters","rxActiveTabKey","activeTabKey","rxShowTreeTab","showTreeTab","rxShowInspTab","showInspTab","currentZoomMap","setCurrentZoomMap","getUserInfoFromToken","access","arToken","atob","user_id","tokenString","getItem","sessionStorage","getToken","userToken","removeItem","useAuthToken","innerWidth","screenWidth","setScreenWidth","isMobileView","setDataTreeForm","setDataInspForm","imageSlider","setImageSlider","treePreview","fetchAllDictionariesDataWrapper","userAuthentication","test","navigator","userAgent","addEventListener","handleWindowSizeChange","removeEventListener","actDictCareTypes","actDictRemarks","actDictPlaceTypes","actDictIrrigationMethods","actDictGroupSpecs","actDictTypeSpecs","catch","fetchTreesAndStatuses","now","isTokenValid","refreshTokens","accessRefreshToken","markerOnClick","geojson","toGeoJSON","properties","showTreePreview","setInterval","clearInterval","editTree","idTree","fetchTreeData","ZoomToRadius","r","Tabs","activeKey","onSelect","k","Tab","eventKey","tabClassName","fetchUrl","paddingRight","hexcolor","valueFilter","objectSearchResult","plantedDateFrom","plantedDateTo","addedDateFrom","addedDateTo","heightFrom","heightTo","trunkGirthFrom","trunkGirthTo","crownDiameterFrom","crownDiameterTo","showOnlyMyTrees","datetimeadded","toLowerCase","indexOf","useradded","el","filterDataMap","callBackSucceed","get","statusText","detail","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","use","LanguageDetector","initReactI18next","init","resources","en","translation","translationEN","translationBG","fallbackLng","interpolation","escapeValue","initialState","isMobile","action","dictTypeSpec","allReducers","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","StrictMode","basename","path","getElementById"],"mappings":"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","file":"static/js/main.8aa584ef.chunk.js","sourcesContent":["// userInterface actions ================================================\r\nexport const actNewTreeCreation= (value) => {\r\n    return {\r\n        type: 'NEWTREECREATION',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowSidebar = (value) => {\r\n    return {\r\n        type: 'SHOWSIDEBAR',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowTreeTab = (value) => {\r\n    return {\r\n        type: 'SHOWTREETAB',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowInspTab = (value) => {\r\n    return {\r\n        type: 'SHOWINSPTAB',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actActiveTabKey = (value) => {\r\n    return {\r\n        type: 'ACTIVETABKEY',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actLoginModalShow = (value) => {\r\n    return {\r\n        type: 'LOGINMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actRegisterModalShow = (value) => {\r\n    return {\r\n        type: 'REGISTERMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actMapBaseLayerName = (value) => {\r\n    return {\r\n        type: 'MAPBASELAYERNAME',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actMapMarkerState = (value) => {\r\n    return {\r\n        type: 'MAPMARKERSTATE',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowOkCancelMobileMarker = (value) => {\r\n    return {\r\n        type: 'SHOWOKCANCELMOBILEMARKER',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actCheckButtonNewMarker = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONNEWMARKER',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonHeatmap = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONHEATMAP',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonGPS = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONGPS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actIsMobileDevice = (value) => {\r\n    return {\r\n        type: 'ISMOBILEDEVICE',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// date actions ================================================\r\nexport const actDataTrees= (value) => {\r\n    return {\r\n        type: 'DATATREES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictStatuses = (value) => {\r\n    return {\r\n        type: 'DICTSTATUSES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictSpecieses = (value) => {\r\n    return {\r\n        type: 'DICTSPECIESES',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\nexport const actDictCareTypes = (value) => {\r\n    return {\r\n        type: 'DICTCARETYPES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictRemarks = (value) => {\r\n    return {\r\n        type: 'DICTREMARKS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictPlaceTypes = (value) => {\r\n    return {\r\n        type: 'DICTPLACETYPES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictIrrigationMethods = (value) => {\r\n    return {\r\n        type: 'DICTIRRIGATIONMETHODS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictGroupSpecs = (value) => {\r\n    return {\r\n        type: 'DICTGROUPSPECS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictTypeSpecs = (value) => {\r\n    return {\r\n        type: 'DICTTYPESPECS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actDataFilters = (value) => {\r\n    return {\r\n        type: 'DATAFILTERS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport Container from 'react-bootstrap/Container';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { actLoginModalShow, actShowSidebar } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface IStateCities {\r\n\tcities: {\r\n\t\tid: number\r\n\t\tsysname: string;\r\n\t\tcityname: string;\r\n\t\tlatitude: number;\r\n\t\tlongitude: number;\r\n\t\tpopulation: number;\r\n\t}[]\r\n}\r\n\r\ninterface MenuGlobalProps {\r\n\tcurrentCity: string;\r\n\tappname: string;\r\n\tauthToken: any;\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n  }\r\n\r\n\r\n\r\nfunction MenuGlobal({\r\n\tcurrentCity,\r\n\tappname,\r\n\tauthToken,\r\n\tsetAuthToken,\r\n}: MenuGlobalProps) {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar)\r\n\tconst [cities, setCities] = useState<IStateCities['cities']>([]);\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchCities = async () => {\r\n\t\t\tconst res = await fetch(`${process.env.REACT_APP_API_URL}cities/`);\r\n\t\t\tconst data = await res.json();\r\n\t\t\tsetCities(data);\r\n\t\t\tconsole.log(data);\r\n\t\t};\r\n\r\n\t\tfetchCities();\r\n\t}, []);\r\n\r\n\tfunction changeLanguage(value: string) {\r\n\t\ti18n.changeLanguage(value);\r\n\t\t//localStorage.setItem('lng', value)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Navbar bg=\"light\" expand=\"lg\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"start-0\"\r\n\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\tid=\"menu-toggle\"\r\n\t\t\t\t\t//onClick={onClickShowMenu}\r\n\t\t\t\t\tonClick={() => dispatch(actShowSidebar(!rxShowSidebar))}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t<string>(\"menu.menu\")}\r\n\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\r\n\t\t\t\t\t<Nav className=\"ms-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/\">{t<string>(\"menu.home\")}</Nav.Link>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.appMaps.title\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/roadaccident/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"roadaccident\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.roadaccident\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/citytree/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"citytree\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.citytree\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/urbanobject/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"urbanobject\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.urbanobject\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.city\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cities.map((city) => (\r\n\t\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\t\t\tkey={city.id}\r\n\t\t\t\t\t\t\t\t\tto={`/${city.sysname}`}\r\n\t\t\t\t\t\t\t\t\tactive={currentCity === city.sysname}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{city.cityname}\r\n\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown title=\"Lang\" id=\"basic-nav-dropdown\">\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={\r\n\t\t\t\t\t\t\t\t\t\"en\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-US\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-GB\" === i18n.language\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue=\"en\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"en\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tEnglish\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={\"bg\" === i18n.language}\r\n\t\t\t\t\t\t\t\tvalue=\"bg\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"bg\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tBulgarian\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t{authToken ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t{`${t(\"words.hello\")}, ${\r\n\t\t\t\t\t\t\t\t\t\tauthToken?.user?.name\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\r\n\t\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetAuthToken(null);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t<string>(\"menu.logout\")}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t//onClick={() => setLoginModalShow(true)}\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.signin\")}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default MenuGlobal\r\n","// don't work with TypeScript, error: TypeError: leaflet__WEBPACK_IMPORTED_MODULE_0___default.a.easyButton is not a function\r\nimport L from 'leaflet';\r\nimport easyButton from 'leaflet-easybutton'\r\nimport \"leaflet-easybutton/src/easy-button.css\"\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\" \r\n \r\n\r\nfunction ButtonMap_ (map, iconTrue, iconFalse, onClick) {\r\n    //const map = useMap()\r\n    \r\n            const buttonMap = L.easyButton({\r\n                position: 'topright',\r\n                states:[\r\n                    {\r\n                        title: '',\r\n                        stateName: 'off',\r\n                        icon: `<i class=\"${iconTrue}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('on');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'red';\r\n                            onClick(true)\r\n                        }\r\n                    },\r\n        \r\n                    {\r\n                        title: '',\r\n                        stateName: 'on',\r\n                        icon: `<i class=\"${iconFalse}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('off');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'white';\r\n                            onClick(false)\r\n                        }\r\n                    }]\r\n            }).addTo( map );\r\n\r\n\r\n\r\n            //if (checkButtonState) {\r\n            //    buttonMap.state('on');\r\n            //    buttonMap.button.style.backgroundColor = 'red';\r\n            //} else {\r\n            //    buttonMap.state('off');\r\n            //    buttonMap.button.style.backgroundColor = 'white';            \r\n            //}\r\n            \r\n            \r\n    \r\n    return buttonMap\r\n\r\n}\r\n\r\nexport default ButtonMap_\r\n","import React from \"react\"\r\nimport { LayersControl, TileLayer } from \"react-leaflet\"\r\n//@ts-ignore\r\nimport {BingLayer} from 'react-leaflet-bing-v2/src/index'\r\n\r\n\r\ninterface MapTileLayersProps {\r\n\tmapBaseLayerName: string;\r\n}\r\n\r\nfunction MapTileLayers({ mapBaseLayerName }: MapTileLayersProps) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Default\"}\r\n\t\t\t\tname=\"Default\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/streets-v11\"\r\n\t\t\t\t\tmaxZoom={21}\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Dark\"}\r\n\t\t\t\tname=\"Dark\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/dark-v10\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Google\"}\r\n\t\t\t\tname=\"Google\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat1\"}\r\n\t\t\t\tname=\"Sat1\"\r\n\t\t\t>\r\n                <BingLayer  bingkey={'AniAD3xsGTaSbK1pa0_UkWS1CldG0nGI7r55MlVZqHhyKil9rD9dFK8536u8hTj1'} type=\"Aerial\"/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n            \r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat2\"}\r\n\t\t\t\tname=\"Sat2\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat3\"}\r\n\t\t\t\tname=\"Sat3\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Tiles &copy; Esri'\r\n\t\t\t\t\turl=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n                    maxZoom={19}                    \r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat4\"}\r\n\t\t\t\tname=\"Sat4\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/satellite-v9\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tmaxZoom={21}\r\n                    zoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MapTileLayers;\r\n","import { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { MapContainer, LayersControl, TileLayer, ZoomControl, useMapEvents, GeoJSON, useMap, Marker, Popup } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport \"leaflet.heat\";\r\nimport \"./Map.css\";\r\n\r\n//import ButtonMap from './ButtonMap'\r\nimport ButtonMap_ from './ButtonMap';\r\nimport MapTileLayers from '../components_hl/MapTileLayers';\r\n\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport redIconFile from '../components/images/markers/marker-red.png';\r\nimport redIconShadowFile from '../components/images/markers/marker-shadow.png';\r\n\r\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\r\nimport 'react-leaflet-markercluster/dist/styles.min.css'; // sass\r\n//require('leaflet/dist/leaflet.css'); // inside .js file\r\n//require('react-leaflet-markercluster/dist/styles.min.css'); // inside .js file\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {\r\n\tactCheckButtonGPS,\r\n\tactCheckButtonHeatmap,\r\n\tactCheckButtonNewMarker,\r\n\tactMapBaseLayerName,\r\n\tactMapMarkerState,\r\n\tactShowOkCancelMobileMarker\r\n    //actShowAccidentTab,\r\n    //actActiveTabKey\r\n} from \"../actions\";\r\nimport { RootState } from '../reducers/index';\r\n\r\n// fix disapeared marker from map\r\n\r\n//import icon from 'leaflet/dist/images/marker-icon.png';\r\n//import iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n//let DefaultIcon = L.icon({\r\n//    iconAnchor: [12, 40],\r\n//    iconUrl: icon,\r\n//    shadowUrl: iconShadow\r\n//});\r\n//L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n\r\n\r\n\r\n\r\nlet redIcon = L.icon({ \r\n    iconUrl: redIconFile,\r\n    shadowUrl: redIconShadowFile,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//let buttonNewMarker = null\r\n//let buttonHeatmap = null\r\n//let buttonGPS = null\r\n\r\nlet currentCitySysname = ''\r\n\r\nlet heatMapLayer: any;\r\nlet markersLayer\r\n\r\nlet setView_nTimes_gps: number;\r\nlet circle_geolocation: L.Circle<any>;\r\n\r\n\r\n\r\n\r\n\r\ninterface IStateCurrentCity {\r\n    id: number\r\n\tsysname: string;\r\n\tcityname: string;\r\n\tlatitude: string;\r\n\tlongitude: string;\r\n\tpopulation: number;\t\r\n    zoom: number;\r\n}\r\n\r\ninterface MapProps {\r\n    mainData: any;\r\n    appname: string;\r\n    dataHeatmapPoints: number[][]; // [[lat, lng, value],[lat, lng, value]...]\r\n    currentCity: string;\r\n    onDragEndNewMarker: (LatLng: {lat: number; lng: number}) => void;\r\n    onClickMap: (e: any) => void;\r\n    onZoomEnd?: (e: any) => void;\r\n    onEachLayer?: (layer: L.Layer, zoom: number) => void;\r\n    //onMarkerClick: (data: any) => void;\r\n    pointToLayerCallback: (feature: any, latlng: L.LatLng) => any;\r\n    filterMapCallback: (feature: any) => boolean;\r\n}\r\n\r\nfunction Map ({\r\n                mainData,  \r\n                appname,          \r\n                dataHeatmapPoints, \r\n                currentCity,                 \r\n                onDragEndNewMarker, \r\n                onClickMap, \r\n                onZoomEnd,  \r\n                onEachLayer,                            \r\n                //onMarkerClick,                 \r\n                pointToLayerCallback,\r\n                filterMapCallback               \r\n            }: MapProps) {\r\n               \r\n\r\n    const dispatch = useDispatch()\r\n    //const defaultZoom = 13;\r\n    //const rxDataAccidents = useSelector((state: RootState) => state.dataReducer.dataAccidents)\r\n    \r\n    const rxMapBaseLayerName = useSelector((state: RootState) => state.uiReducer.mapBaseLayerName);\r\n    const rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\r\n    const rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\r\n    const rxMapMarkerState = useSelector((state: RootState) => state.uiReducer.mapMarkerState);\r\n    const rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\r\n    \r\n    const rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\r\n    const rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\r\n    const rxCheckButtonGPS = useSelector((state: RootState) => state.uiReducer.checkButtonGPS);\r\n\r\n    //const [currentCityInfo, setCurrentCityInfo] = useState({latitude: \"0\", longitude: \"0\"})\r\n    const [currentCityInfo, setCurrentCityInfo] = useState<IStateCurrentCity | null>(null);\r\n    const [map, setMap] = useState<any>(null);  \r\n    \r\n    const [currentZoom, setCurrentZoom] = useState(13); \r\n\r\n    const [buttonNewMarker, setButtonNewMarker] = useState<any>(null);\r\n    const [buttonHeatmap, setButtonHeatmap] = useState<any>(null);\r\n    const [buttonGPS, setButtonGPS] = useState<any>(null);\r\n\r\n\r\n    let mapname_ = document.cookie\r\n    .split('; ')\r\n    .find(row => row.startsWith('mapname='))\r\n\r\n    let mapname\r\n    if (mapname_) {\r\n        mapname = mapname_.split('=')[1]    \r\n    }\r\n\r\n\r\n    let newMarkerRef = useRef(null)   \r\n \r\n\r\n    // create buttons\r\n    useEffect(() => {        \r\n        if (map) {            \r\n            setButtonNewMarker( ButtonMap_(map, 'fas fa-map-marker-alt fa-lg', 'fas fa-map-marker-alt fa-lg', onClickNewMarker) )\r\n            setButtonHeatmap( ButtonMap_(map, 'fas fa-eye fa-lg', 'fas fa-eye-slash fa-lg', onClickHeatmap) )\r\n            setButtonGPS( ButtonMap_(map, 'fas fa-satellite-dish fa-lg', 'fas fa-satellite-dish fa-lg', onClickGPS) )\r\n            \r\n            //setMapCurrentLatLng({lat: map.getCenter().lat, lng: map.getCenter().lng})                        \r\n\r\n            let mapname_ = document.cookie\r\n\t\t\t.split(\"; \")\r\n\t\t\t.find((row) => row.startsWith(\"mapname=\"));\r\n\r\n\t\t    if (mapname_) {\r\n                dispatch(actMapBaseLayerName(mapname_.split(\"=\")[1]))\r\n\t\t    }            \r\n        }        \r\n\r\n        return () => { \r\n            buttonNewMarker && buttonNewMarker.remove()\r\n            buttonHeatmap && buttonHeatmap.remove()\r\n            buttonGPS && buttonGPS.remove()\r\n        }  \r\n\r\n\r\n      }, [map])  //<MapContainer whenCreated={setMap} ...\r\n\r\n\r\n    // load data for the city\r\n    useEffect(() => {\r\n\r\n        const fetchCity = async () => {\r\n            const res = await fetch(`${process.env.REACT_APP_API_URL}cities/${currentCity}`);\r\n            const data = await res.json();\r\n            setCurrentCityInfo(data);          \r\n        }\r\n\r\n        fetchCity();\r\n        console.log('currentCity');\r\n           \r\n    }, [currentCity])  //[currentCity]\r\n   \r\n\r\n    //useEffect(() => {\r\n    //    if (currentCityInfo && map) {\r\n    //        //map.setZoom(currentCityInfo.zoom);\r\n    //        if (onZoomEnd) onZoomEnd(currentCityInfo.zoom);          \r\n    //    }    \r\n    //\r\n    //}, [currentCityInfo]);   \r\n    \r\n    \r\n\r\n\r\n      // apply states for buttons\r\n      \r\n      useEffect(() => {        \r\n        if (buttonNewMarker) {\r\n            if (rxCheckButtonNewMarker) {\r\n                buttonNewMarker.state('on');\r\n                buttonNewMarker.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonNewMarker.state('off');\r\n                buttonNewMarker.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonNewMarker]);\r\n\r\n      useEffect(() => {        \r\n        if (buttonHeatmap) {\r\n            if (rxCheckButtonHeatmap) {\r\n                buttonHeatmap.state('on');\r\n                buttonHeatmap.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonHeatmap.state('off');\r\n                buttonHeatmap.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonHeatmap])\r\n      useEffect(() => {        \r\n        if (buttonGPS) {\r\n            if (rxCheckButtonGPS) {\r\n                buttonGPS.state('on');\r\n                buttonGPS.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonGPS.state('off');\r\n                buttonGPS.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonGPS])      \r\n\r\n\r\n    \r\n    useEffect(()=>{\r\n        if (map && !rxIsMobileDevice) {\r\n            if (rxCheckButtonNewMarker) {\r\n                L.DomUtil.addClass(map._container,'crosshair-cursor-enabled');\r\n            } else {\r\n                L.DomUtil.removeClass(map._container,'crosshair-cursor-enabled');\r\n            }    \r\n        }\r\n    }, [rxCheckButtonNewMarker]); \r\n      \r\n\r\n\r\n    useEffect(()=>{\r\n        if (map) {\r\n            window.setTimeout(function(){map.invalidateSize({pan: false});}, 600)\r\n        }        \r\n    }, [rxShowSidebar])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n\r\n\tconst onClickNewMarker = (state: boolean) => {        \r\n        \r\n        dispatch(actCheckButtonNewMarker(state));\r\n        \r\n\r\n\t\tif (rxIsMobileDevice && state) {\t\t\t\t\t\t\r\n            dispatch(actMapMarkerState({ visible: true, position: {lat: 0, lng: 0} }));\r\n            dispatch(actShowOkCancelMobileMarker(true));\r\n\t\t}\r\n\t};\r\n\r\n\tconst onClickHeatmap = (state: boolean) => {\t\t\r\n        console.log(\"onClickHeatmap\", state);\r\n\r\n\t\tif (state) {\r\n            dispatch(actMapBaseLayerName('Dark'))\r\n\t\t} else {\r\n            dispatch(actMapBaseLayerName('Default'))\r\n\t\t}\r\n        dispatch(actCheckButtonHeatmap(state))\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n    function SetPanToMap() {        \r\n        const map = useMap();\r\n        if (currentCityInfo) {\r\n            // change map position when current city has been changed        \r\n            if (currentCitySysname !== currentCityInfo[\"sysname\"]) {\r\n                map.panTo( [parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])] );\r\n            }\r\n            currentCitySysname = currentCityInfo[\"sysname\"];\r\n\r\n        }\r\n        return null;\r\n    }    \r\n\r\n\r\n    function onClickGPS(state: boolean) {\r\n        if (map) {\r\n            if (state){\r\n                setView_nTimes_gps = 4;\r\n                map.locate({maxZoom: 20, enableHighAccuracy: true, watch:true, maximumAge: 20000});\r\n            } else {\r\n                map.stopLocate();\r\n                map.removeLayer(circle_geolocation);\r\n                setView_nTimes_gps = 4;\r\n            }\r\n\r\n        }\r\n        dispatch(actCheckButtonGPS(state))\r\n    }\r\n\r\n\r\n    //function markerOnClick(e: any)\r\n    //{\r\n    //    let marker: L.Marker = e.target;\r\n    //    let geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\r\n    //    onMarkerClick(geojson);\r\n    //    //console.log(geojson)        \r\n    //}\r\n\r\n\r\n    //function pointToLayer_roadaccident(feature: GeoJSON.Point|GeoJSON.Feature<GeoJSON.Point>, latlng: L.LatLng): any \r\n    //{\r\n    //    if (!rxCheckButtonHeatmap) {\r\n    //        return L.circleMarker(latlng, geojsonMarkerOptions).on('click', markerOnClick)        \r\n    //    }\r\n    //    //return null;\r\n    //}\r\n\r\n\r\n    \r\n    /*\r\n    function ZoomToRadius (zoom: number, crowndiameter: number) {\r\n        let r: number = Math.floor(crowndiameter / 2);\r\n\r\n        if (zoom > 17) {\r\n            r = Math.floor(crowndiameter / 2);\r\n        } else if (zoom == 17){\r\n            r = 7;\r\n        } else if (zoom == 16){\r\n            r = 10;\r\n        } else if (zoom == 15){\r\n            r = 14;\r\n        } else if (zoom == 14){\r\n            r = 19\r\n        } else if (zoom == 13){\r\n            r = 24\r\n        } else if (zoom == 12){\r\n            r = 30\r\n        } else if (zoom == 11){\r\n            r = 37\r\n        } else if (zoom < 11){\r\n            r = 45\r\n        }\r\n    \r\n        if (r < 2) { r = 2 }\r\n        return r;\r\n    }   \r\n    */ \r\n\r\n    //function pointToLayer_citytree(feature: any, latlng: L.LatLng): any {   \r\n    //    console.log('123') \r\n    //    return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)\r\n        /*\r\n        if (!rxCheckButtonHeatmap && currentZoom !== null) {\r\n            console.log('currentZoom', currentZoom)   \r\n            console.log('lastinsp_crowndiameter', feature.properties.lastinsp_crowndiameter)\r\n\r\n            geojsonMarkerOptions_citytree.radius = ZoomToRadius(currentZoom, feature.properties.lastinsp_crowndiameter);\r\n            if (geojsonMarkerOptions_citytree.radius < 2) {\r\n                geojsonMarkerOptions_citytree.radius = 2;\r\n            }\r\n\r\n            return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)        \r\n        }*/\r\n\r\n/*\r\n\r\n        pointToLayer: function (feature, latlng) {\r\n\r\n            geojsonMarkerOptions.radius = ZoomToRadius(zoom, feature.properties.lastinsp_crowndiameter);\r\n\r\n            if (geojsonMarkerOptions.radius < 2) {\r\n                geojsonMarkerOptions.radius = 2;\r\n            }\r\n\r\n            {% if status %}\r\n                {% for statusItem in status %}\r\n                    if (feature.properties.lastinsp_status == \"{{statusItem.id}}\")\r\n                    {\r\n                        geojsonMarkerOptions.fillColor = \"#{{statusItem.hexcolor}}\";\r\n                        geojsonMarkerOptions.color = \"#{{statusItem.hexcolor}}\";\r\n                    }\r\n                {% endfor %}\r\n            {% endif %}\r\n\r\n            return L.circle(latlng, geojsonMarkerOptions).on('click', markerOnClick);\r\n\r\n        },\r\n\r\n*/\r\n\r\n\r\n\r\n    //}\r\n\r\n\r\n\r\n    //function onEachFeaturePoint(feature, layer) {\r\n    function onEachFeaturePoint(feature: any, layer: L.Layer) {        \r\n        //console.log('feature: ', feature);\r\n        //console.log('layer: ', layer);\r\n        layer.on({\r\n          'click': function (e) {\r\n             console.log('e: ', e);\r\n             console.log('click');\r\n           }\r\n        })\r\n    }    \r\n\r\n\r\n\r\n\r\n\r\n    function NewMarker({mapMarkerState}: any) {  \r\n        const visible = mapMarkerState.visible;\r\n        const map = useMap();\r\n\r\n        const eventHandlers = useMemo(\r\n            () => ({\r\n                dragend() {\r\n                    \r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current;\r\n                        if (!rxIsMobileDevice && marker != null) {                                                    \r\n                            const LatLng = marker.getLatLng();\r\n                            const coord = { lat: '0', lng: '0' };\r\n                            coord.lat = LatLng.lat.toFixed(5);\r\n                            coord.lng = LatLng.lng.toFixed(5);\r\n                            \r\n                            //const cordFloat = {lat: parseFloat(coord.lat), lng: parseFloat(coord.lng)}\r\n                            //onDragEndNewMarker(cordFloat);\r\n                            //setNewMarkerState({ visible: true, position: coord }); \r\n                            //console.log('123', { visible: true, position: coord });\r\n                            \r\n                            // I don't know why, but that prevent the error for citytree app, when user try to move the marker\r\n                            sleep(0).then(() => {\r\n                                //console.log('onDragEndNewMarker timer', { visible: true, position: coord });\r\n                                    dispatch(actMapMarkerState({ visible: true, position: coord })); \r\n                            });\r\n\r\n                                                                        \r\n                        }\r\n                    }\r\n                }\r\n            }),\r\n            [],\r\n        );\r\n        function sleep (time: number) {\r\n            return new Promise((resolve) => setTimeout(resolve, time));\r\n        }          \r\n\r\n         \r\n\r\n        return (<>\r\n                    {visible && <> \r\n                        {(!rxIsMobileDevice) \r\n                        ?\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={true}\r\n                                position={mapMarkerState.position}                                                                \r\n                                ref={newMarkerRef}\r\n                                eventHandlers={eventHandlers}                    \r\n                            />                    \r\n                        :\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={false}\r\n                                //position={map.getCenter()}\r\n                                position={mapMarkerState.position.lat==0 ? map.getCenter() : mapMarkerState.position }\r\n                                ref={newMarkerRef}                 \r\n                            />\r\n                        } \r\n                </>}\r\n                                         \r\n        </>)\r\n    }\r\n    \r\n\r\n\r\n    function MapEvents() {        \r\n        const map = useMapEvents({\r\n            baselayerchange(e) {\r\n                document.cookie = 'mapname='+e.name\r\n            }, \r\n            //baselayerchange: onBaselayerchange,\r\n\r\n            move(e) {               \r\n                \r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        marker.setLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n                                        \r\n                        //let coord = { lat: 0, lng: 0 }\r\n                        //coord.lat = e.target.getCenter().lat.toFixed(5)\r\n                        //coord.lng = e.target.getCenter().lng.toFixed(5)\r\n                    }\r\n                }    \r\n            },\r\n\r\n            moveend(e) {\r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        const LatLng = marker.getLatLng()\r\n                        let coord = { lat: '0', lng: '0' };\r\n                        coord.lat = LatLng.lat.toFixed(5);\r\n                        coord.lng = LatLng.lng.toFixed(5);                   \r\n                        //setNewMarkerState({visible: true, position: coord})                        \r\n                        dispatch(actMapMarkerState({visible: true, position: coord}))\r\n                    }\r\n                }\r\n                //setMapCurrentLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n\r\n\r\n            },\r\n            \r\n            click(e) {\r\n                onClickMap(e)\r\n                /*\r\n                if (rxCheckButtonNewMarker && !rxIsMobileDevice) {\r\n                    //setCheckButtonNewMarker(false)\r\n                    dispatch(actCheckButtonNewMarker(false));\r\n        \r\n                    let coord = { lat: '0', lng: '0' };\r\n                    coord.lat = e.latlng.lat.toFixed(5);\r\n                    coord.lng = e.latlng.lng.toFixed(5);\r\n        \r\n                    //setNewMarkerState({ visible: true, position: coord })\r\n                    dispatch(actNewMarkerState({ visible: true, position: coord }));\r\n        \r\n                    //setShowAccidentTab(true)\r\n                    dispatch(actShowAccidentTab(true));\r\n                    //setActiveTabKey(\"accident\")\r\n                    dispatch(actActiveTabKey('accident'));\r\n                } \r\n                */               \r\n            }, \r\n\r\n            zoomend(e){                                \r\n                if (onZoomEnd) onZoomEnd(e);\r\n\r\n                setCurrentZoom(e.target._zoom)                 \r\n                //dispatch(actCurrentMapZoom(e.target._zoom));               \r\n            },\r\n\r\n            locationfound(e){\r\n                let radius = e.accuracy / 2;\r\n\r\n                if (setView_nTimes_gps > 0) {\r\n                    map.setView(e.latlng, 20);\r\n                    setView_nTimes_gps = setView_nTimes_gps - 1;\r\n                }\r\n    \r\n                if (map.hasLayer(circle_geolocation)) {\r\n                    circle_geolocation.setLatLng(e.latlng);\r\n                    circle_geolocation.setRadius(radius);\r\n                } else {\r\n                    circle_geolocation = L.circle(e.latlng, radius).addTo(map);\r\n                }                \r\n            },\r\n\r\n            locationerror(e){\r\n                //setCheckButtonGPS(false)\r\n                dispatch(actCheckButtonGPS(false))\r\n                alert(e.message)\r\n            }\r\n        })\r\n      \r\n        return null\r\n      }\r\n\r\n\r\n\r\n    function MarkersZoomAdjustment(){    \r\n        const map = useMap(); \r\n        const zoom = map.getZoom();\r\n                 \r\n        if (onEachLayer) {\r\n            map.eachLayer(function (layer) {\r\n                onEachLayer(layer, zoom);           \r\n            });\r\n        }\r\n\r\n        return null\r\n    }\r\n\r\n\r\n\r\n      function HeatmapFunction(){\r\n        const map = useMap();\r\n        //useEffect(() => {\r\n          //const points = addressPoints\r\n          //? addressPoints.map((p) => {\r\n          //  return [p[0], p[1], p[2]]; // lat lng intensity\r\n          //  })\r\n          //: [];\r\n     \r\n            const points = [\r\n                [43.207650, 27.958490, 1.0]\r\n            ]\r\n\r\n\r\n\r\n            if (heatMapLayer) { \r\n                map.removeLayer(heatMapLayer)\r\n            }\r\n\r\n            if (rxCheckButtonHeatmap) {                \r\n                if (dataHeatmapPoints) {\r\n                    // @ts-ignore\r\n                    heatMapLayer = L.heatLayer(dataHeatmapPoints, {\r\n                        gradient: {0.4: '#1E90FF', 0.8: 'white', 1: 'red'},                        \r\n                        //minOpacity: 0.1,\r\n                        max: 1.5,\r\n                        radius: 14,\r\n                        blur: 10,\r\n                        maxZoom: 6\r\n\r\n                    })//.addTo(map);\r\n                    map.addLayer(heatMapLayer)                \r\n                }\r\n            }\r\n\r\n\r\n            //heatMap.addLatLng([43.207650, 27.998590])\r\n            //heatMap.setLatLngs([])\r\n\r\n            //L.heatLayer(points).redraw()\r\n            //L.heatLayer(points).addLatLng([43.207650, 27.998590])\r\n\r\n        //}, [dataHeatmapPoints]);\r\n\r\n        return null\r\n     }\r\n\r\n\r\n\r\n\r\n\r\n    const createClusterCustomIcon  = function (cluster: L.MarkerCluster) {\r\n        // get the number of items in the cluster\r\n        let count = cluster.getChildCount();\r\n\r\n        // figure out how many digits long the number is\r\n        //var digits = (count + '').length;\r\n        let digits;\r\n        if (count == 2) { digits = '1'; }\r\n        if (count >= 3 && count <=5) { digits = '2'; }\r\n        if (count >= 6 && count <=9) { digits = '3'; }\r\n        if (count >= 10 && count <=14) { digits = '4'; }\r\n        if (count > 14) { digits = '5'; }\r\n\r\n        return L.divIcon({\r\n          html: count.toString(),\r\n          className: 'cluster digits-' + digits,\r\n          iconSize: undefined\r\n        });\r\n      }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>        \r\n        {/* The map rendered before useEffect called, so first we need to load currentCityInfo before to show the map */}\r\n        { currentCityInfo && currentCityInfo[\"longitude\"] !== \"0\" && currentCityInfo[\"latitude\"]!==\"0\" ? ( \r\n\r\n            <MapContainer whenCreated={setMap} center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} zoom={currentCityInfo.zoom} zoomControl={false} scrollWheelZoom={true} style={{ height: 'calc(100vh - 60px)', width: '100%' }} >                \r\n                <LayersControl position=\"topleft\">                    \r\n                    <MapTileLayers mapBaseLayerName={rxMapBaseLayerName} />                 \r\n                </LayersControl>    \r\n\r\n            \r\n                {/* To change center of the map when current city will change */}\r\n                {/*<SetViewMap center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} />*/} \r\n                <SetPanToMap />\r\n\r\n\r\n\r\n                {appname === 'roadaccident' && <> \r\n                    {currentZoom && currentZoom < 15 ? (\r\n                        <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                    ) : (\r\n                        /* @ts-ignore */\r\n                        <MarkerClusterGroup\r\n                        spiderfyOnMaxZoom={true}\r\n                        showCoverageOnHover={false}\r\n                        zoomToBoundsOnClick={true}\r\n                        maxClusterRadius={15}\r\n                        iconCreateFunction={createClusterCustomIcon}>                \r\n                            <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>                \r\n                        </MarkerClusterGroup>\r\n                    )}\r\n                </>}\r\n\r\n\r\n                {appname === 'citytree' && <>                     \r\n                    <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                </>}\r\n\r\n\r\n\r\n\r\n\r\n                <NewMarker mapMarkerState={rxMapMarkerState} onDragEndNewMarker={onDragEndNewMarker}/>\r\n                \r\n                <MapEvents />\r\n                \r\n                {!rxIsMobileDevice && <ZoomControl position='bottomright'/>}\r\n                \r\n   \r\n                {/* <ButtonsControl /> */}\r\n\r\n                <HeatmapFunction />\r\n                \r\n                {onEachLayer && <MarkersZoomAdjustment />}\r\n                \r\n            </MapContainer>\r\n        ) : (\r\n            <p>Loading...</p>\r\n        )}    \r\n            \r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Map\r\n\r\n\r\n//https://egghead.io/lessons/react-create-a-new-map-using-react-leaflet\r\n\r\n//https://codesandbox.io/s/63wqz?file=/src/LeafletControlGeocoder.jsx\r\n//https://www.npmjs.com/package/leaflet-control-geocoder\r\n\r\n//https://codesandbox.io/s/how-to-add-a-legend-to-the-map-using-react-leaflet-useleaflet-hook-75jnp?file=/src/index.js\r\n\r\n//https://newbedev.com/home-button-leaflet-map\r\n\r\n//пример без React-Leaflet\r\n//https://stackoverflow.com/questions/69697017/use-leaflet-map-object-outside-useeffect-in-react","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=\"","import { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../reducers/index\";\r\n\r\ninterface MainWrapperProps {\r\n    children: JSX.Element;\r\n    cityName: string | undefined;\r\n}\r\n\r\nconst MainWrapper = ({children, cityName}: MainWrapperProps) => {\r\n    const rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\r\n\r\n    return (\r\n        <div className=\"main-wrapper\">            \r\n            {cityName ? (                \r\n                <div id=\"app\">\r\n                    <div className={`d-flex ${rxShowSidebar ? \"showed\" : \"hided\"}`} id=\"wrapper\">\r\n                        {children}\r\n                    </div>\r\n                </div>\r\n            ) : (\r\n                    \"You must select a city.\"\r\n            )}     \t\t                           \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default MainWrapper","interface SidebarProps {\r\n\tchildren: JSX.Element\t\r\n}\r\n\r\nconst Sidebar = ({children}: SidebarProps) => {\r\n\treturn (\r\n\t\t<div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\r\n\t\t\t<div className=\"list-group list-group-flush\" style={{ marginTop: \"15px\" }}>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Sidebar\r\n","import Button from \"react-bootstrap/Button\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport {\r\n\tactMapMarkerState,\r\n\tactShowSidebar,\r\n\tactCheckButtonNewMarker,\r\n\tactShowOkCancelMobileMarker,\r\n\tactShowTreeTab,\r\n\tactActiveTabKey,\r\n} from \"../actions\";\r\n\r\n\r\nconst ButtonOkCancelMobileMarker = () => {\r\n\r\n    const dispatch = useDispatch();\r\n    const { t } = useTranslation();\r\n\r\n\r\n    return (\r\n    <>\r\n        <Button\r\n            variant=\"success\"\r\n            id=\"doneEditMarkerMobile\"\r\n            onClick={() => {\r\n                dispatch(\r\n                    actCheckButtonNewMarker(\r\n                        false\r\n                    )\r\n                );\r\n                dispatch(\r\n                    actShowOkCancelMobileMarker(\r\n                        false\r\n                    )\r\n                );\r\n                dispatch(\r\n                    actShowTreeTab(true)\r\n                );\r\n                dispatch(\r\n                    actActiveTabKey(\"tree\")\r\n                );\r\n                dispatch(actShowSidebar(true));\r\n            }}\r\n        >\r\n            {t<string>(\"words.done\")}\r\n        </Button>{\" \"}\r\n        \r\n        <Button\r\n            variant=\"secondary\"\r\n            id=\"cancelMarkerMobile\"\r\n            onClick={() => {\r\n                dispatch(\r\n                    actMapMarkerState({\r\n                        visible: false,\r\n                        position: {\r\n                            lat: 0,\r\n                            lng: 0,\r\n                        },\r\n                    })\r\n                );\r\n                dispatch(\r\n                    actShowOkCancelMobileMarker(\r\n                        false\r\n                    )\r\n                );\r\n                dispatch(\r\n                    actCheckButtonNewMarker(\r\n                        false\r\n                    )\r\n                );\r\n            }}\r\n        >\r\n            &#x2715;\r\n        </Button>{\" \"}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ButtonOkCancelMobileMarker","import { useState, useEffect } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, } from 'react-bootstrap';\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface FormFilterProps {\r\n\tonSubmitFilter: (filter: {}) => void;\r\n}\r\n\r\n\r\nconst FormFilter = ({onSubmitFilter}: FormFilterProps) => {\r\n    const rxDictSpecieses = useSelector((state: RootState) => state.dataReducer.dictSpecieses);\r\n    const rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);\r\n\tconst rxDictPlaceTypes = useSelector((state: RootState) => state.dataReducer.dictPlaceTypes);\r\n\tconst rxDictIrrigationMethods = useSelector((state: RootState) => state.dataReducer.dictIrrigationMethods);\r\n\tconst rxDictGroupSpecs = useSelector((state: RootState) => state.dataReducer.dictGroupSpec);\r\n\r\n\tconst rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\r\n\t//const rxDictTypeSpecs = useSelector((state: RootState) => state.dataReducer.dictTypeSpec);\r\n\t\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\r\n\r\n\tconst { control, register, handleSubmit, reset, setValue } = useForm({\r\n\t\treValidateMode: \"onChange\",\r\n\t\tdefaultValues: {\r\n\t\t\tspeciesFilter: \"\",\r\n\t\t\tstatusFilter: \"\",\r\n\t\t\tcareTypeFilter: \"\",\r\n\t\t\tremarkFilter: \"\",\r\n\t\t\tplaceTypeFilter: \"\",\r\n\t\t\tirrigationMethodFilter: \"\",\r\n\t\t\tdatePlantedFromFilter: \"\",\r\n\t\t\tdatePlantedToFilter: \"\",\r\n\t\t\tdateAddedFromFilter: \"\",\r\n\t\t\tdateAddedToFilter: \"\",\r\n\t\t\tcommentFilter: \"\",\r\n\t\t\theightFromFilter: \"\",\r\n\t\t\ttrunkGirthFromFilter: \"\",\r\n\t\t\tcrownDiameterFromFilter: \"\",\r\n\t\t\theightToFilter: \"\",\r\n\t\t\ttrunkGirthToFilter: \"\",\r\n\t\t\tcrownDiameterToFilter: \"\",\t\t\t\r\n\t\t\tshowMyTreesFilter: \"\",\r\n\r\n\t\t\t//select: {},\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\t\r\n\t//let optionsSpeciesesFilter: {label: string; options: {value: number; label: string}[] | undefined}[] = [];\r\n\tlet optionsSpeciesesFilter: any = [];\r\n\tif (Array.isArray(rxDictSpecieses) && Array.isArray(rxDictGroupSpecs)) {\r\n\r\n\t\toptionsSpeciesesFilter = rxDictGroupSpecs.map(itemGroup => {\r\n\t\t\treturn {\r\n\t\t\t\tlabel: itemGroup.groupname,\r\n\t\t\t\toptions: rxDictSpecieses.map(spec => {\r\n\t\t\t\t\tif (itemGroup.id === spec.groupspec) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: spec.id,\r\n\t\t\t\t\t\t\tlabel: spec.localname,\r\n\t\t\t\t\t\t\tspeciesname: spec.speciesname,\r\n\t\t\t\t\t\t\ttypespec: spec.typespec\r\n\t\t\t\t\t\t\t//color: '#FF8B00'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).filter(e => e) // removes all undefined items in result array\t\t\t \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tlet optionsStatusesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictStatuses)) {\r\n\t\toptionsStatusesFilter = rxDictStatuses.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.statusname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tlet optionsCareTypesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictCareTypes)) {\r\n\t\toptionsCareTypesFilter = rxDictCareTypes.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.carename,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\r\n\tlet optionsRemarksFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictRemarks)) {\r\n\t\toptionsRemarksFilter = rxDictRemarks.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.remarkname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tlet optionsPlaceTypesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictPlaceTypes)) {\r\n\t\toptionsPlaceTypesFilter = rxDictPlaceTypes.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.placename,\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\t\r\n\tlet optionsIrrigationMethodsFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictIrrigationMethods)) {\r\n\t\toptionsIrrigationMethodsFilter = rxDictIrrigationMethods.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.irrigationname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\r\n\r\n\t  const customStyles = {\r\n\t\t//@ts-ignore\r\n\t\toption: (styles, { data }) => {\r\n\t\t\t//const color = chroma(data.color);\r\n\t\t\treturn {\r\n\t\t\t  ...styles,\r\n\t\t\t  paddingLeft: 20,\r\n\t\t\t  backgroundColor: data.typespec === 2 ? '#EEFFEE' : undefined,\r\n\r\n\t\t\t};\r\n\t\t  },\r\n\t  } \r\n\r\n\r\n\r\n\t  const Option = (props: any) => {\r\n\t\tconst { label, speciesname } = props.data;\r\n\t\treturn (\r\n\t\t  <components.Option {...props}>\r\n\t\t\t<span>{label}</span> <span style={{ color: \"darkgray\" }}>{speciesname}</span>\r\n\t\t  </components.Option>\r\n\t\t);\r\n\t  };\t  \r\n\r\n\r\n\r\n\tfunction onResetButton() {\r\n\t\treset();\r\n\t\tonSubmitFilter({});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form className=\"m-1\" onSubmit={handleSubmit(onSubmitFilter)}>\r\n\t\t\t\t<Form.Group controlId=\"formSpeciesFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.species\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"speciesFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={true}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsSpeciesesFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option) =>`${option.label} - ${option.speciesname}`}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formStatusFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.status\")}\r\n\t\t\t\t\t</Form.Label>\r\n\r\n\t\t\t\t\t{/*{!rxIsMobileDevice ? ( */}\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"statusFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\toptions={optionsStatusesFilter}\r\n\t\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t\t\t\tmaxMenuHeight={400}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t{/*):(\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<select {...register(\"statusFilter\")} \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tstyle={{width: '100%', minHeight: '38px', borderRadius: '4px', borderColor: 'rgb(204, 204, 204)', backgroundColor: 'rgb(255, 255, 255)'}}\r\n\t\t\t\t\t\t\tmultiple={true}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<option disabled selected>{t<string>(\"words.select\")}</option>\r\n\t\t\t\t\t\t\t{optionsStatusesFilter.map((item) => <option key={item.value} value={item.value}>{item.label}</option>)}\r\n\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}*/}\t\t\t\t\t\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formCareTypeFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.careType\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"careTypeFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsCareTypesFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formRemarkFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.remark\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"remarkFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsRemarksFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPlaceTypeFilter\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"230px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.placeType\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"placeTypeFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\toptions={optionsPlaceTypesFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formIrrigationMethodFilter\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"230px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.irrigationMethod\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"irrigationMethodFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t<string>(\r\n\t\t\t\t\t\t\t\t\t\t\"words.select\"\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\toptions={optionsIrrigationMethodsFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDatePlantedFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.plantedFrom\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"datePlantedFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDatePlantedToFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.plantedTo\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"datePlantedToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateAddedFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.dateAddedFrom\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateAddedFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateAddedToFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.dateAddedTo\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateAddedToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group className=\"mt-3\" controlId=\"formCommentFilter\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.comment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"commentFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control type=\"text\" {...field} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formFromParamsTreeFilter\" style={{maxWidth: \"50px\"}}>\r\n\t\t\t\t\t\t<Form.Label style={{ marginTop: \"32px\"}}>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.from\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formHeightFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.height\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"heightFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formTrunkGirthFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.trunkGirth\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkGirthFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCrownDiameterFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.crownDiameter\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crownDiameterFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-0\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formToParamsTreeFilter\" style={{maxWidth: \"50px\"}}>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.to\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formHeightToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"heightToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formTrunkGirthToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkGirthToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCrownDiameterToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crownDiameterToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formShowMyTreesFilter\"\r\n\t\t\t\t\tclassName=\"mt-3 ms-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"showMyTreesFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.filterTab.showMyTrees\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idShowMyTreesFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button variant=\"light\" onClick={onResetButton}>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.clear\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"150px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.search\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FormFilter\r\n\r\n\r\n\r\n","import Table from \"react-bootstrap/Table\";\r\nimport {useState, useEffect} from 'react';\r\n\r\n\r\ninterface TableListProps {\r\n\t// columns in the table\r\n\tcolumns: {\r\n\t\tfield: string;\r\n\t\theaderName: string;\r\n\t\twidth?: string;\r\n\t\tsortable?: boolean;\r\n\t\tdateTimeOption?: 'onlyDate' | 'onlyTime' | 'dateTime'; // for Date fields you can choose format\r\n\t}[];\r\n\r\n\tsortField?: string;\r\n\tsortAsc?: boolean;\r\n\r\n\tdata: {\r\n\t\tid: number;\r\n\t\t[key: string]: any | {iconFA?: string; iconFASize?: string; text?: string; idButton: string}[]; // array of buttons, where key is field name of a column\r\n\t}[] | undefined;\r\n\r\n\tsize?: string; // sm\r\n\tvariant?: string; // dark\r\n\r\n  \tOnClickButtons?: (rowData: any, idButton: string) => void;\r\n}\r\n\r\n\r\n\r\nfunction TableList({columns, data, sortField, sortAsc=true, size, variant, OnClickButtons}: TableListProps) {\r\n\r\n\tconst [sortState, setSortState] = useState({sortField: sortField, sortAsc: sortAsc});\r\n\tconst [dataTable, setDataTable] = useState(data);\r\n\t\r\n\tuseEffect(()=>{\r\n\t\tsetDataTable(data);\r\n\t}, [data]);\r\n\r\n\r\n\tconst columnsHeader = columns.map((item, index) => ( \r\n\t\t<th \r\n\t\t\tstyle={{ width: item.width ? item.width: \"\", cursor: item.sortable ? \"pointer\" : \"default\" }} \r\n\t\t\tkey={index} \r\n\t\t\tonClick={() => {\r\n\t\t\t\tif (item.sortable) {\r\n\t\t\t\t\tsetSortState({sortField: item.field, sortAsc: sortState.sortField === item.field ? !sortState.sortAsc : true}); // inverse sortAsc, only when sortField has not changed, otherwise sortAsc=true \r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t\r\n\t\t\t{ // for current sorted column draws icon\r\n\t\t\tsortState?.sortField === item.field ? \r\n\t\t\t<>\r\n\t\t\t\t<div style={{float: \"left\", textAlign: \"left\"}}>{item.headerName}</div>\r\n\t\t\t\t<div style={{float: \"right\", textAlign: \"right\"}}>\r\n\t\t\t\t\t<span style={{fontSize: \"8pt\", color: \"gray\"}}> {sortState.sortAsc ? '▼' : '▲'}</span>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t</>: item.headerName\r\n\t\t\t}\r\n\t\t</th>\r\n\t));\r\n\r\n\r\n\r\n\tfunction DataTable() {\r\n\t\tfunction compare( a:{}, b:{} ) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tif ( a[sortState.sortField] < b[sortState.sortField] ){\r\n\t\t\t\tif (sortState.sortAsc) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 1;\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//@ts-ignore\r\n\t\t\tif ( a[sortState.sortField] > b[sortState.sortField] ){\r\n\t\t\t\tif (sortState.sortAsc) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn -1;\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\t// sorting of data\r\n\t\tlet sortedData:any[] | undefined = [];\r\n\t\tif (sortState.sortField) {\t\t\r\n\t\t\t//setDataTable(dataTable?.sort(compare));\t\t\t\r\n\t\t\tsortedData = dataTable?.sort(compare);\t\t\t\r\n\t\t} else {\r\n\t\t\tsortedData = dataTable;\r\n\t\t}\r\n\r\n\t\t// fill out\r\n\t\tif (sortedData && sortedData.length > 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t{sortedData.map((row: any, index) => {\t\t\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<tr key={row.id}>\r\n\t\t\t\t\t\t\t<DataRow row={row} indexRow={index}/>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (<tr><td style={{textAlign: \"center\"}} colSpan={columns.length}>no data</td></tr>)\r\n\t}\t\r\n\r\n\r\n\tinterface DataRowProps {\r\n\t\trow: any;\r\n\t\tindexRow: number;\r\n\t}\t\r\n\tfunction DataRow({row, indexRow}: DataRowProps): any {\t\r\n\t\tconst getUniqKey = (row: any, index: number): string => (`${String(row.id)}.${String(index)}`);\r\n\t\t\r\n\t\t\r\n\t\tconst result = columns.map((col, index) => {\r\n\r\n\t\t\t\r\n\t\t\tif (typeof row[col.field] !== \"object\") { //if it's not object, then it's just value of field, else it's button\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tif (col?.dateTimeOption) {\t\t\t\t\r\n\t\t\t\t\tif (col.dateTimeOption === \"onlyDate\") {\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{new Date(row[col.field]).toLocaleDateString()}</td>)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (col.dateTimeOption === \"onlyTime\") {\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{new Date(row[col.field]).toLocaleTimeString()}</td>)\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\r\n\t\t\t\t\tif (col.dateTimeOption === \"dateTime\") {\r\n\t\t\t\t\t\tlet dateTime = new Date(row[col.field]).toLocaleDateString() + ' ' + new Date(row[col.field]).toLocaleTimeString();\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{dateTime}</td>)\r\n\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{row[col.field]}</td>)\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (col.field===\"#\") {\r\n\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{indexRow+1}</td>)\t\r\n\t\t\t\t}\r\n\t\t\t\treturn (<td key={getUniqKey(row, index)}>{row[col.field]}</td>)\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// buttons\r\n\t\t\tconst buttons = row[col.field];\r\n\t\t\t\r\n\t\t\tif (Array.isArray(buttons)) {\r\n\t\t\t\tlet buttonRow:any[] = [];\r\n\t\t\t\tbuttons.forEach(button => {\r\n\t\t\t\t\tif ((button?.text || button?.iconFA)  && button?.idButton) {\r\n\t\t\t\t\t\tlet buttonText = [];\r\n\t\r\n\t\t\t\t\t\tif (button?.iconFA) {\r\n\t\t\t\t\t\t\tif (button?.iconFASize) {\r\n\t\t\t\t\t\t\t\tbuttonText.push(<i key={getUniqKey(row, index)+button.idButton} className={button.iconFA} style={{fontSize: button.iconFASize}}></i>);\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbuttonText.push(<i key={getUniqKey(row, index)+button.idButton} className={button.iconFA}></i>);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif (button?.text) {\r\n\t\t\t\t\t\t\tbuttonText.push(<span key={getUniqKey(row, index)+button.idButton}>{button.text}</span>);\t\r\n\t\t\t\t\t\t}\t\t\t\t\r\n\t\r\n\t\t\t\t\t\tif (OnClickButtons) {\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbuttonRow.push(<span key={getUniqKey(row, index)+button.idButton}><a href='#' onClick={()=>OnClickButtons(row, button.idButton)}>{buttonText}</a> </span>);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbuttonRow.push(<span key={getUniqKey(row, index)+button.idButton}>{buttonText}</span>);\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn (<td key={getUniqKey(row, index)}>{buttonRow}</td>);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n  \treturn (\r\n\t\t<Table striped bordered hover size={size} variant={variant}>\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\t\t\t\t\r\n\t\t\t\t\t{columnsHeader}\t\t\t\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<DataTable/>\r\n\t\t\t</tbody>\r\n\t\t</Table>\r\n  \t)\r\n}\r\n\r\nexport default TableList","import {useState, useEffect, forwardRef, useRef, useImperativeHandle} from 'react';\r\nimport { Form, Button, Spinner , Row, Col, Modal } from \"react-bootstrap\";\r\nimport Image from 'react-bootstrap/Image';\r\nimport Resizer from \"react-image-file-resizer\";\r\nimport deleteImage from \"./delete2.svg\";\r\n\r\ninterface ImageS3UploadProps {\r\n    signingUrl: string;\r\n    autoUpload: boolean;\r\n    //startUploadState?: boolean;\r\n    value: string | undefined;\r\n    onChange: (val: string) => void;    \r\n    emptyPhoto?: string; \r\n    serverPhoto?: string | undefined | null; \r\n    buttonCaption?: string;\r\n\r\n    resizer?: {\r\n        enabled: boolean;\r\n        autoResize: boolean;\r\n        maxWidth: number;\r\n        maxHeight: number;\r\n        compressFormat: string;\r\n        quality: number;\r\n        rotation: number;\r\n    };\r\n\r\n    onFinish?: () => void;\r\n    onProgress?: (percent: number) => void;\r\n    onError?: (status: number, filename: string) => void;\r\n    onSignedUrl?: (data: any)  => void;\r\n}\r\n\r\ninterface RefObject {\r\n    uploadFile: () => boolean\r\n}\r\n\r\n\r\nenum stateComponent {\r\n    none,\r\n    resizing,\r\n    resized,\r\n    uploading,\r\n    uploaded,\r\n    error\r\n}\r\n\r\nconst defaultResizingOptions = {\r\n    enabled: false,\r\n    autoResize: true, // otherwise resizing will be preform before uploading\r\n    maxWidth: 1280,\r\n    maxHeight: 1280,\r\n    compressFormat: \"JPEG\",\r\n    quality: 70,\r\n    rotation: 0\r\n}\r\n\r\nconst ImageS3Upload = forwardRef<RefObject | undefined, ImageS3UploadProps>(({\r\n    signingUrl,\r\n    autoUpload,\r\n    //startUploadState,\r\n    emptyPhoto,\r\n    serverPhoto,\r\n    value,\r\n    onChange,\r\n    buttonCaption = 'Browse...',\r\n    resizer = defaultResizingOptions,\r\n    onFinish,\r\n    onProgress,\r\n    onError,\r\n    onSignedUrl\r\n}, ref) => {\r\n\r\n\r\n    // to be able to call method uploadFile\r\n    useImperativeHandle(ref, () => ({\r\n        uploadFile: () => {\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {                \r\n                if (status !== stateComponent.resizing) {\r\n                    //@ts-ignore\r\n                    startUpload(inputFileEl?.current?.files[0].name);\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            return false;             \r\n        }\r\n    }));\r\n\r\n\r\n    const inputFileEl = useRef(null);\r\n    \r\n    const [status, setStatus] = useState<stateComponent>(stateComponent.none);\r\n    const [imagePhoto, setImagePhoto] = useState<string | undefined>(undefined);\r\n    const [compressedPhoto, setCompressedPhoto] = useState<any>(undefined);\r\n    const [buttonCaptionState, setButtonCaptionState] = useState(buttonCaption);\r\n    //const [stateUploading, setStateUploading] = useState(false);\r\n    const [showSpinner, setShowSpinner] = useState<boolean>(false);    \r\n    const [s3DataState, setS3DataState] = useState<any>(undefined);\r\n    const [notLoad, setNotLoad] = useState(false); // to prevent loading photo from S3 when we have this photo in blob input element\r\n   \r\n\r\n    useEffect(()=>{\r\n        if (emptyPhoto) {\r\n            setImagePhoto(emptyPhoto);    \r\n        }  \r\n    }, []);\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n        console.log('s3DataState', s3DataState); \r\n        if (s3DataState?.data?.fields?.key) {\r\n            setNotLoad(true);\r\n            onChange(s3DataState.data.fields.key);\r\n        } \r\n    }, [s3DataState]);  \r\n\r\n    useEffect(()=>{                \r\n        \r\n        if (value) {\r\n            \r\n            if (serverPhoto == null) {\r\n                serverPhoto = '';    \r\n            }\r\n\r\n            if (serverPhoto.slice(-1) != '/' && value.slice(0, 1) != '/') { // if there is no symbol / between serverPhoto and value, just add it.\r\n                serverPhoto = serverPhoto + '/';\r\n            }\r\n\r\n            if (!notLoad) { // to prevent loading photo from S3 when we have this photo in blob input element\r\n                setButtonCaptionState(buttonCaption);\r\n                setShowSpinner(false);\r\n                if (inputFileEl?.current) {\r\n                    //@ts-ignore\r\n                    inputFileEl.current.value='';\r\n                }\r\n                                \r\n                setImagePhoto(`${serverPhoto}${value}`);\r\n                //console.log('serverPhotoValue', `${serverPhoto}${value}`); \r\n            }\r\n                    \r\n          \r\n        } else {\r\n            setImagePhoto(emptyPhoto);\r\n            setButtonCaptionState(buttonCaption);\r\n        }\r\n               \r\n        setNotLoad(false);\r\n        \r\n    }, [value]);   \r\n    \r\n    \r\n\r\n\r\n    //useEffect(() => {\r\n        //if (status === stateComponent.resizing) {\r\n        //    setButtonCaptionState(\"Resizing...\");\r\n        //} else {\r\n        //    setButtonCaptionState(buttonCaption);            \r\n        //}   \r\n    //}, [status])\r\n\r\n\r\n        \r\n{/*\r\n    useEffect(()=>{\r\n        if (startUploadState === true && stateUploading === false) {\r\n            setStateUploading(true);\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {\r\n                //@ts-ignore\r\n                startUpload(inputFileEl?.current?.files[0].name);\r\n            }    \r\n        }\r\n    }, [startUploadState]);\r\n*/}\r\n\r\n\r\n    const resizeFile = (file: any) =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tResizer.imageFileResizer(\r\n\t\t\t\tfile,\r\n\t\t\t\tresizer.maxWidth,\r\n\t\t\t\tresizer.maxHeight,\r\n\t\t\t\tresizer.compressFormat,\r\n\t\t\t\tresizer.quality,\r\n\t\t\t\tresizer.rotation,\r\n\t\t\t\t(uri) => {\r\n\t\t\t\t\tresolve(uri);\r\n\t\t\t\t},\r\n\t\t\t\t\"blob\"\r\n\t\t\t);\r\n\t\t});\r\n\r\n\r\n    const onChangeFile = async (event: any) => {\r\n        \r\n        if (event.target.files && event.target.files.length > 0) {\r\n            const file = event.target.files[0];\r\n            //onChange(file.name);\r\n            //setFilename(file.name);\r\n            setImagePhoto(URL.createObjectURL(file)); \r\n            \r\n            if (resizer.enabled && resizer.autoResize) {\r\n                try {                \r\n                    setStatus(stateComponent.resizing);\r\n                    setButtonCaptionState(\"Resizing...\")\r\n                    const image = await resizeFile(file);\r\n\r\n                    if (image instanceof Blob) {\r\n                        setCompressedPhoto(image);\r\n                        setStatus(stateComponent.resized);\r\n                        setButtonCaptionState(\"Resized \");\r\n    \r\n                        if (autoUpload) {\r\n                            startUpload(file.name);     \r\n                        }\r\n                        //console.log('image.size', humanFileSize(image.size));\r\n                    } else {\r\n                        setButtonCaptionState(\"Error\");    \r\n                    } \r\n                    \r\n\r\n\r\n                } catch (err) {\r\n                    console.log(err);\r\n                    setStatus(stateComponent.error);\r\n                    setButtonCaptionState(\"Error\")\r\n                }\r\n            } else {\r\n                if (autoUpload) {\r\n                    startUpload(file.name);     \r\n                }                \r\n            }            \r\n\r\n        }                \r\n    };\r\n\r\n\r\n\r\n\r\n\tconst fetchUrlSign = async (objectName: string) => {\t\t\t\r\n\r\n\t\tlet myHeaders = new Headers();\r\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");  \r\n\r\n        const bodyObject = {objectName: objectName};\r\n        \r\n        let res = await fetch(signingUrl, {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: JSON.stringify(bodyObject)\r\n        });\r\n\r\n\t\tconst json = await res.json();\r\n\r\n        return JSON.parse(json);\t\t\t\t\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n    const updateProgress = (ev: any) => {\r\n        if (ev.lengthComputable) {\r\n            let percentComplete = Math.round((ev.loaded / ev.total) * 100);\r\n            setButtonCaptionState(String(percentComplete)+'%');\r\n            if (onProgress) {\r\n                onProgress(percentComplete);\r\n            }\r\n            console.log('percentComplete', percentComplete);\r\n            //$('#'+idElement+'_browse_button').html(percentComplete+'%');\r\n        }\r\n    } \r\n\r\n    const uploadFile = (file: any, s3Data: any) => {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", s3Data.url);\r\n        xhr.timeout = 30000;\r\n        xhr.upload.onprogress = updateProgress;\r\n\r\n        let postData = new FormData();\r\n\t\tfor (let key in s3Data.fields) {\t\t\t\r\n            if (key != 'file') { // in field \"file\" must be blob of file.\r\n                postData.append(key, s3Data.fields[key]);\r\n                //console.log('append', key, s3Data.fields[key]);\r\n            }                    \r\n\t\t}\r\n\t\tpostData.append(\"file\", file); // blob\r\n\r\n\t\txhr.onreadystatechange = () => {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t// done\r\n\t\t\t\tif (xhr.status === 200 || xhr.status === 204) {\r\n                    setShowSpinner(false);\r\n                    setButtonCaptionState('Done');\r\n                    if (onFinish) {\r\n                        onFinish();\r\n                    }\r\n\r\n                    \r\n\t\t\t\t\t//ok || 204 No Content\r\n                } else {\r\n\t\t\t\t\t//SetStateSaveButton('saveButton', true, 'Запази');\r\n\t\t\t\t\t//SetStateSaveButton('saveInspButton', true, 'Запази');\r\n\t\t\t\t\t//$('#'+idElement+'_loading').hide();\r\n\t\t\t\t\t//$('#'+idElement+'_browse_button').html('Browse...');\r\n\t\t\t\t\t\r\n                    if (onError) {\r\n                        setShowSpinner(false);\r\n                        setButtonCaptionState(`Error ${xhr.status}`);\r\n                        onError(xhr.status, file.name);\r\n                    }                    \r\n                    \r\n                    alert(\r\n\t\t\t\t\t\t\"Error during file upload (status: \" +\r\n\t\t\t\t\t\t\txhr.status +\r\n\t\t\t\t\t\t\t\"): \" +\r\n\t\t\t\t\t\t\tfile.name\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}  \r\n\t\t};\r\n\r\n\r\n\t\txhr.onload = () => {\r\n\t\t\t// transaction completes successfully.\r\n\t\t\tconsole.log(\"transaction completes successfully.\");\r\n            //if (s3DataState?.data?.fields?.key) {\r\n            //    onChange(s3DataState.data.fields.key);\r\n            //}             \r\n\t\t};  \r\n\r\n\r\n        xhr.onerror = () => {\r\n            //SetStateSaveButton('saveButton', true, 'Запази');\r\n            //SetStateSaveButton('saveInspButton', true, 'Запази');\r\n            //$('#'+idElement+'_loading').hide();\r\n            //$('#'+idElement+'_browse_button').html('Browse...');\r\n            alert('Error during file upload: ' + file.name);\r\n        };  \r\n          \r\n        \r\n        console.log('postData', postData);\r\n        xhr.send(postData);  \r\n\r\n    \r\n    //    {\"data\": {\"url\": \"https://urbangis.s3.amazonaws.com/\", \"fields\": {\"acl\": \"public-read\", \"Content-Type\": \"image/jpeg\", \"key\": \"media/citytree/images_tree/user_None/None\", \"x-amz-algorithm\": \"AWS4-HMAC-SHA256\", \"x-amz-credential\": \"***REMOVED***/20220524/eu-central-1/s3/aws4_request\", \"x-amz-date\": \"20220524T105522Z\", \"policy\": \"eyJleHBpcmF0aW9uIjogIjIwMjItMDUtMjRUMTE6NTU6MjJaIiwgImNvbmRpdGlvbnMiOiBbeyJhY2wiOiAicHVibGljLXJlYWQifSwgeyJDb250ZW50LVR5cGUiOiAiaW1hZ2UvanBlZyJ9LCB7ImJ1Y2tldCI6ICJ1cmJhbmdpcyJ9LCB7ImtleSI6ICJtZWRpYS9jaXR5dHJlZS9pbWFnZXNfdHJlZS91c2VyX05vbmUvTm9uZSJ9LCB7IngtYW16LWFsZ29yaXRobSI6ICJBV1M0LUhNQUMtU0hBMjU2In0sIHsieC1hbXotY3JlZGVudGlhbCI6ICJBS0lBMllTTzdGRTVKQllPWEU1Qy8yMDIyMDUyNC9ldS1jZW50cmFsLTEvczMvYXdzNF9yZXF1ZXN0In0sIHsieC1hbXotZGF0ZSI6ICIyMDIyMDUyNFQxMDU1MjJaIn1dfQ==\", \"x-amz-signature\": \"75a181348c86194678752f6c726582a833408925226259efc0ad6858060d56bb\", \"file\": null}}, \"url\": \"https://urbangis.s3.amazonaws.com/media/citytree/images_tree/user_None/None\", \"file_exists\": false}\r\n    }\r\n\r\n\r\n\r\n\r\n    const startUpload = async (filename: string) => {\r\n        filename = filename.replace(/\\s/g, ''); // remove spaces, because there is some problem with restAPI, which return url filename with %20 instead space, after that when we savind data again, %20 will be convert to %2520 (% = %25)\r\n\r\n        setShowSpinner(true);\r\n        setButtonCaptionState('Starting... ');\r\n        setS3DataState(undefined);\r\n        const signedUrl = await fetchUrlSign(filename);\r\n        setS3DataState(signedUrl);  \r\n        if (onSignedUrl) {\r\n            onSignedUrl(signedUrl);\r\n        }\r\n        \r\n        console.log('signedUrl', signedUrl);\r\n        \r\n\r\n        if (signedUrl.file_exists === false) {\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {\r\n                //@ts-ignore\r\n                const file = inputFileEl.current.files[0];\r\n\r\n                if (resizer.enabled) {\r\n                   \r\n                    if (resizer.autoResize) { // photo already resized and stored in compressedPhoto\r\n                        if (compressedPhoto) {\r\n                            //@ts-ignore\r\n                            uploadFile(compressedPhoto, signedUrl.data);\r\n                        }\r\n                    } else {\r\n                        try {                \r\n\r\n                            setStatus(stateComponent.resizing);\r\n                            setButtonCaptionState(\"Resizing...\")\r\n                            const image = await resizeFile(file);\r\n                            setStatus(stateComponent.resized);\r\n                            setButtonCaptionState(\"Resized\");\r\n                            //@ts-ignore\r\n                            uploadFile(image, signedUrl.data);                            \r\n                        } catch (err) {\r\n                            console.log(err);\r\n                            setStatus(stateComponent.error);\r\n                            setButtonCaptionState(\"Error\")\r\n                        }                        \r\n                    }\r\n\r\n                    \r\n                } else {\r\n                    //@ts-ignore\r\n                    uploadFile(file, signedUrl.data);\r\n                }                \r\n            }\r\n        } else {\r\n            let rndStr = makeRandomStr(5);\r\n            startUpload(rndStr + '_' + filename);            \r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div style={{position: \"relative\"}}>\r\n            <Form.Group>\r\n                <Image src={imagePhoto} fluid={true} rounded key={imagePhoto} /> {/* key to prevent showing previous loaded photos */}\r\n                <a href=\"#\">\r\n                    {/*\r\n                    <i className=\"far fa-times-circle fa-lg\" \r\n                        style={{color: \"#BB0000\", position: \"absolute\", top: \"-3px\", right: \"8px\", textShadow: \"0 0 3px white\"}}\r\n                        onClick={() => { \r\n                            //onChange(\"*will_be_deleted*\"); \r\n                            //setFilename(\"*will_be_deleted*\");\r\n                            onChange(\"\"); \r\n                            setImagePhoto(emptyPhoto);\r\n                            if (inputFileEl?.current) {\r\n                                //@ts-ignore\r\n                                inputFileEl.current.value='';\r\n                            }                             \r\n                        }} \r\n                    />\r\n                    */}   \r\n\r\n                    <Image \r\n                        src={deleteImage} \r\n                        style={{width: \"46px\", height: \"46px\", position: \"absolute\", top: \"-9px\", right: \"-8px\"}} \r\n                        onClick={() => { \r\n                            onChange(\"\"); \r\n                            setImagePhoto(emptyPhoto);\r\n                            if (inputFileEl?.current) {\r\n                                //@ts-ignore\r\n                                inputFileEl.current.value='';\r\n                            }                             \r\n                        }}                     \r\n                    />\r\n\r\n                </a>\r\n                \r\n                <Button variant=\"outline-secondary\" style={{width: \"100%\"}} className=\"mt-3\"\r\n                    onClick={()=>{\r\n                        //onChange(\"Helloooo\")\r\n                        setShowSpinner(false);\r\n                        setButtonCaptionState(buttonCaption);\r\n                        //@ts-ignore                        \r\n                        inputFileEl.current.click();\r\n                    }}>\r\n                    {showSpinner && <Spinner\r\n                        as=\"span\"\r\n                        animation=\"border\"\r\n                        size=\"sm\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                    />}                \r\n                    {buttonCaptionState}\r\n                </Button>{' '}\r\n                \r\n                \r\n                <input ref={inputFileEl} type=\"file\" accept=\"image/*\" style={{display: \"none\"}} \r\n                    onChange={onChangeFile}\r\n                    /*\r\n                    onChange={(e)=>{\r\n                        if (e.target.files && e.target.files.length > 0) {\r\n                            const file = e.target.files[0];\r\n                            //onChange(file.name);\r\n                            //setFilename(file.name);\r\n                            setImagePhoto(URL.createObjectURL(file)); \r\n                            if (autoUpload) {\r\n                                startUpload(file.name);     \r\n                            }\r\n                        }     \r\n                    }}\r\n                    */\r\n                />\r\n\r\n                \r\n                {/* \r\n                <input ref={inputTextEl} style={{width: \"100%\"}}\r\n                    //value={filename}\r\n                    //onChange={({ target: { value } }) => onChange(value)}\r\n                /> \r\n\r\n\r\n                \r\n\r\n              \r\n\r\n                    \r\n                <img src=\"{% static 'images/no-photo.png' %}\" class=\"img-fluid rounded\" id=\"id_insp_img_photo1\">\r\n                            <a href=\"#\"><i class=\"far fa-times-circle fa-2x iconDeletePhoto\" onclick=\"document.getElementById('id_insp_photo1_new_name').value='*will_be_deleted*'; $('#id_insp_img_photo1').attr('src', '{% static 'images/no-photo.png' %}');\"></i></a>\r\n\r\n                */}\r\n            </Form.Group>        \r\n        </div>\r\n  )\r\n\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction makeRandomStr(length: number) {\r\n    let result           = '';\r\n    const characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    const charactersLength = characters.length;\r\n    for ( var i = 0; i < length; i++ ) {\r\n      result += characters.charAt(Math.floor(Math.random() *\r\n charactersLength));\r\n   }\r\n   return result;\r\n}\r\n\r\n\r\n\r\n\r\nfunction humanFileSize(size: number) {\r\n    const i = Math.floor( Math.log(size) / Math.log(1024) );\r\n    const sSize = ( size / Math.pow(1024, i) ).toFixed(2);\r\n    return `${sSize} ${['B', 'kB', 'MB', 'GB', 'TB'][i]}`;\r\n    //return ( size / Math.pow(1024, i) ).toFixed(2) * 1 + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\r\n    \r\n};\r\n\r\nexport default ImageS3Upload","export default __webpack_public_path__ + \"static/media/delete2.5b09b7b5.svg\";","import ImageS3Upload from './ImageS3Upload';\r\n\r\nexport default ImageS3Upload;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMzMzRGRjBCRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMzMzRGRjBDRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzMzNEZGMDlENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzMzNEZGMEFENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4+BmGWAAAYBklEQVR42uxd2VcUxxce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\"","import { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap';\r\nimport {useState, useEffect, forwardRef, useRef, useImperativeHandle} from 'react'\r\nimport { Controller } from \"react-hook-form\";\r\nimport ImageS3Upload from \"./ImageS3Upload\";\r\nimport noPhotoImage from \"./images/no-photo.png\";\r\n\r\ninterface UploadPhotosProps {\r\n    controlFromUseForm: any;\r\n    signingS3Url: string;\r\n    serverPhoto?: string | undefined | null;\r\n    onCallbackDone: () => void;\r\n} \r\n\r\ninterface RefObject {\r\n    uploadPhotos: () => void\r\n}\r\n\r\nconst UploadPhotos = forwardRef<RefObject | undefined, UploadPhotosProps>(({\r\n    controlFromUseForm,\r\n    signingS3Url,\r\n    serverPhoto,\r\n    onCallbackDone\r\n}, ref) => {\r\n\r\n\tconst photo1Ref = useRef(); // to be able to call method uploadFile\r\n\tconst photo2Ref = useRef();\r\n\tconst photo3Ref = useRef();   \r\n    \r\n\tconst [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\tconst [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\tconst [uploadedPhoto3, setUploadedPhoto3] = useState(false);   \r\n\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\t\t\t\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\t\t\t\t\t\t\r\n\t\t\tonCallbackDone();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\r\n\r\n\r\n\r\n    const autoUpload = false;\r\n\r\n    const resizerOptions = {\r\n        enabled: true,\r\n        autoResize: true, // otherwise resizing will be preform before uploading\r\n        maxWidth: 1280,\r\n        maxHeight: 1280,\r\n        compressFormat: \"JPEG\",\r\n        quality: 70,\r\n        rotation: 0            \r\n    }\r\n\r\n\r\n    // to be able to call method uploadFile\r\n    useImperativeHandle(ref, () => ({\r\n        uploadPhotos: () => {\r\n\r\n            let p1 = false;\r\n            let p2 = false;\r\n            let p3 = false;\r\n            //@ts-ignore\r\n            if (photo1Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p1=photo1Ref.current.uploadFile();\r\n            }\t\r\n    \r\n            //@ts-ignore\r\n            if (photo2Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p2=photo2Ref.current.uploadFile();\r\n            }\r\n            \r\n            //@ts-ignore\r\n            if (photo3Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p3=photo3Ref.current.uploadFile();\r\n            }\t\t\r\n    \r\n    \r\n            console.log('p', p1, p2, p3);\r\n            if (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n                onCallbackDone();\r\n            } else {\r\n                //e.preventDefault();\r\n                setUploadedPhoto1(!p1);\r\n                setUploadedPhoto2(!p2);\r\n                setUploadedPhoto3(!p3);\r\n                //console.log('cons', {photo1: !p1, photo2: !p2, photo3: !p3, data: data})\r\n                //setPhotosUploaded({photo1: !p1, photo2: !p2, photo3: !p3, data: data});\r\n            }\t            \r\n\r\n        }\r\n    }));\r\n\r\n\r\n\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n\r\n        <Row className=\"mt-3\" xs={3}>\r\n            <Form.Group as={Col} controlId=\"formIdInsp1\" className=\"mt-3 align-self-end\">\r\n                <Controller\r\n                    name=\"photo1\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\r\n                            //startUploadState={photo1StateUpload.start}\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\t\r\n                            onFinish={onFinishPhoto1}\r\n                            resizer={resizerOptions}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                            {...field}\r\n                            ref={photo1Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Col} controlId=\"formIdInsp2\" className=\"mt-3 align-self-end\">\r\n                <Controller\r\n                    name=\"photo2\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\t\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\r\n                            onFinish={onFinishPhoto2}\r\n                            resizer={resizerOptions}\r\n                            {...field}\r\n                            ref={photo2Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Col} controlId=\"formIdInsp3\" className=\"mt-3 align-self-end\">\r\n                <Controller\r\n                    name=\"photo3\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\r\n                            onFinish={onFinishPhoto3}\r\n                            resizer={resizerOptions}\r\n                            {...field}\r\n                            ref={photo3Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\t\r\n        </Row>\r\n\r\n\r\n\r\n  )\r\n})\r\n\r\nexport default UploadPhotos","import { useState, useEffect, useRef } from 'react';\r\nimport { useForm, Controller  } from 'react-hook-form';\r\nimport { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap';\r\nimport Datetime from 'react-datetime';\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../reducers/index'\r\nimport { TreeItem } from \"../interfaces\";\r\nimport moment from 'moment';\r\nimport TableList from './TableList'\r\nimport UploadPhotos from \"./UploadPhotos\"\r\n//import ImageS3Upload from \"./ImageS3Upload\";\r\n//import noPhotoImage from \"./images/no-photo.png\";\r\n\r\ninterface FormTreeProps {\r\n\tonSubmitTree: (data: {}) => void;\r\n\tonDeleteTree: (id: number) => void;\r\n\tonCloseTree: () => void;\r\n    \r\n    onNewInsp:(idTree: number) => void;\r\n    onEditInsp: (data: {}) => void;\r\n    onClickInspPhotos: (data: {}) => void;\r\n    onClickEditCoords: (coord: {lat: string; lng: string}) => void;\r\n        \t\r\n    dataTreeForm: TreeItem | null;\r\n    city: string;\r\n    signingS3Url: string;\r\n}\r\n\r\n\r\nconst FormTree = ({\r\n\tonSubmitTree,\r\n\tonDeleteTree,\r\n\tonCloseTree,\r\n    onNewInsp,\r\n    onEditInsp,\r\n    onClickInspPhotos,\r\n    onClickEditCoords,\r\n\tdataTreeForm,\r\n    city,\r\n    signingS3Url\r\n}: FormTreeProps) => {\r\n\r\n    const rxMapMarkerState = useSelector((state: RootState) => state.uiReducer.mapMarkerState);\r\n    const rxNewTreeCreation = useSelector((state: RootState) => state.uiReducer.newTreeCreation);\r\n    const [showModalDelete, setShowModalDelete] = useState(false);\r\n\r\n    const rxDictSpecieses = useSelector((state: RootState) => state.dataReducer.dictSpecieses);\r\n    const rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);\r\n\tconst rxDictPlaceTypes = useSelector((state: RootState) => state.dataReducer.dictPlaceTypes);\r\n\tconst rxDictIrrigationMethods = useSelector((state: RootState) => state.dataReducer.dictIrrigationMethods);\r\n    const rxDictGroupSpecs = useSelector((state: RootState) => state.dataReducer.dictGroupSpec);\r\n\r\n\r\n\t//const [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\t//const [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\t//const [uploadedPhoto3, setUploadedPhoto3] = useState(false); \r\n    \r\n\t//const photo1Ref = useRef(); // to be able to call method uploadFile\r\n\t//const photo2Ref = useRef();\r\n\t//const photo3Ref = useRef();\r\n\r\n    const uploadPhotosRef = useRef();\r\n\r\n\r\n    interface IInspections {\r\n\t\tid: number;\r\n\t\t[key: string]: any | {iconFA?: string; iconFASize?: string; text?: string; idButton: string};\r\n\t};\r\n\r\n    const [inspections, setInspections] = useState<IInspections[] | undefined>(undefined);\r\n\r\n\r\n    const dateTimeRef = useRef(null);\r\n    const { t } = useTranslation();\r\n\r\n\r\n\tuseEffect(() => {\r\n        reset();\r\n        //@ts-ignore\r\n        setValue(\"irrigationmethod\", optionsIrrigationMethodsData[0]);                 \r\n        setValue(\"latitude\", rxMapMarkerState.position.lat);\r\n        setValue(\"longitude\", rxMapMarkerState.position.lng);                  \r\n\t}, [rxNewTreeCreation]);  \r\n    \r\n\tuseEffect(() => {\r\n\t\tif (rxMapMarkerState.visible) {\r\n\t\t\tsetValue(\"latitude\", rxMapMarkerState.position.lat);\r\n\t\t\tsetValue(\"longitude\", rxMapMarkerState.position.lng);                       \r\n\t\t}\r\n\t}, [rxMapMarkerState]);    \r\n\r\n\r\n\r\n\r\n    // when provide data to show it\r\n\tuseEffect(() => {\r\n\t\tlet formData: any = {};\r\n\r\n        formData.id = dataTreeForm?.id;\r\n        formData.latitude = dataTreeForm?.latitude;\r\n        formData.longitude = dataTreeForm?.longitude;\r\n        \r\n\t\tlet species = dataTreeForm?.species_id;\r\n\t\tif (species) {\r\n\t\t\tlet isFound = false; // to stop loop\r\n            optionsSpeciesesData.forEach((element:any) => { // loop for categories (The most common, The medium common and so on...)\r\n                if (element?.options && Array.isArray(element.options)) { // in every categories trying to find id of species \r\n                    \r\n                    if (!isFound) {\r\n                        formData.species = element.options.find(                \t\t\t\r\n                            (item: any) => {\r\n                                isFound = item.value === species; \r\n                                return isFound;\t}\r\n                        );             \r\n                    }       \r\n                }        \r\n            });\r\n            \r\n\t\t}        \r\n        \r\n        formData.speciescomment = dataTreeForm?.speciescomment;\r\n        formData.comment = dataTreeForm?.comment;\r\n\r\n        \r\n\t\tlet placetype = dataTreeForm?.placetype;\r\n\t\tif (placetype) {\r\n\t\t\tconsole.log('optionsPlaceTypesData', optionsPlaceTypesData)\r\n\t\t\tformData.placetype = optionsPlaceTypesData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === placetype\t\r\n\t\t\t);\r\n\t\t}    \r\n        \r\n\t\tlet irrigationmethod = dataTreeForm?.irrigationmethod;\r\n\t\tif (irrigationmethod) {\r\n\t\t\t//console.log('optionsPlaceTypesData', optionsPlaceTypesData)\r\n\t\t\tformData.irrigationmethod = optionsIrrigationMethodsData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === irrigationmethod\t\r\n\t\t\t);\r\n\t\t}          \r\n        \r\n\r\n\t\tif (dataTreeForm?.dateplanted) {\r\n            console.log('dataTreeForm?.properties?.dateplanted', dataTreeForm?.dateplanted);\r\n\t\t\tformData.dateplanted = dataTreeForm.dateplanted;\r\n\t\t}\r\n\r\n        formData.googlestreeturl = dataTreeForm?.googlestreeturl;\r\n\r\n\r\n        reset(formData, { keepDefaultValues: true });\r\n\r\n        const fetchInpections = async () => {\r\n\t\t    //@ts-ignore\r\n            let url = `${process.env.REACT_APP_API_URL}citytree/${city}/trees/${dataTreeForm.id}/inspections/`;\r\n    \t\tlet res = await fetch(url);\r\n\t\t    let data = await res.json(); \r\n            \r\n            // adding buttons\r\n            data = data.map((element: any) => {\r\n                element.buttons = [];\r\n                element.buttons.push({iconFA: 'fas fa-edit', iconFASize: '15pt', idButton: 'edit'});\r\n                \r\n                if (element?.photo1 || element?.photo2 || element?.photo3) {\r\n                    element.buttons.push({iconFA: 'fa fa-camera', iconFASize: '15pt', idButton: 'photo'});                       \r\n                    \r\n                }\r\n                element.typeData = 'Inspection';\r\n                return element;\r\n                    \r\n            });\r\n            \r\n            console.log('inspections',data);\r\n            setInspections(data);       \r\n        };\r\n\r\n        if (dataTreeForm?.id) {\r\n            fetchInpections();    \r\n        }\r\n\r\n\r\n\t}, [dataTreeForm]);\r\n\r\n\r\n\r\n    /*\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\r\n\t\t\thandleSubmit(prepareOnSubmitTree)();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\r\n    */\r\n\r\n\r\n\r\n\r\n    let optionsSpeciesesData: any = [];\r\n    if (Array.isArray(rxDictSpecieses) && Array.isArray(rxDictGroupSpecs)) {\r\n\r\n        optionsSpeciesesData = rxDictGroupSpecs.map(itemGroup => {\r\n            return {\r\n                label: itemGroup.groupname,\r\n                options: rxDictSpecieses.map(spec => {\r\n                    if (itemGroup.id === spec.groupspec) {\r\n                        return {\r\n                            value: spec.id,\r\n                            label: spec.localname,\r\n                            speciesname: spec.speciesname,\r\n                            typespec: spec.typespec\r\n                            //color: '#FF8B00'\r\n                        }\r\n                    }\r\n                }).filter(e => e) // removes all undefined items in result array\t\t\t \r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    let optionsStatusesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictStatuses)) {\r\n        optionsStatusesData = rxDictStatuses.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.statusname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsCareTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictCareTypes)) {\r\n        optionsCareTypesData = rxDictCareTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.carename,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsRemarksData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictRemarks)) {\r\n        optionsRemarksData = rxDictRemarks.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.remarkname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsPlaceTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictPlaceTypes)) {\r\n        //console.log('rxDictPlaceTypes', rxDictPlaceTypes)\r\n        optionsPlaceTypesData = rxDictPlaceTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.placename,\r\n            };\r\n        });\r\n    }\r\n\r\n    let optionsIrrigationMethodsData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictIrrigationMethods)) {\r\n        optionsIrrigationMethodsData = rxDictIrrigationMethods.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.irrigationname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tsetValue,\r\n\t\tgetValues,\r\n\t\tformState: { errors },\r\n        trigger\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\t\t\t\r\n            id: \"\",\r\n            latitude: \"\",\r\n            longitude: \"\",\r\n            species: \"\",\r\n            speciescomment: \"\",\r\n            comment: \"\",\r\n            placetype: \"\",\r\n            irrigationmethod: \"\",            \r\n            dateplanted: \"\",\r\n            googlestreeturl: \"\",\r\n            \r\n            height: \"\",\r\n            crowndiameter: \"\",\r\n            trunkgirth: \"\",\r\n            status: \"\",\r\n            remarks: \"\",\r\n            recommendations: \"\",\r\n            photo1: \"\",\r\n            photo2: \"\",\r\n            photo3: \"\"\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n\tasync function onSubmitBefore(e: any) {\r\n\t\te.preventDefault();\t\t\t\t\r\n\t\t\r\n        const result = await trigger(); // programmaticaly run validation\r\n        if (result) {\r\n            //@ts-ignore\r\n            uploadPhotosRef.current.uploadPhotos(); // component uploadPhotos has a callback to start a submit of the form, when uploading has been finished.\r\n        }\r\n\r\n\r\n\r\n        /*\r\n        //setPhoto1StateUpload({...photo1StateUpload, start: true})\r\n\r\n\t\tlet p1 = false;\r\n\t\tlet p2 = false;\r\n\t\tlet p3 = false;\r\n\t\t//@ts-ignore\r\n\t\tif (photo1Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp1=photo1Ref.current.uploadFile();\r\n\t\t}\t\r\n\r\n\t\t//@ts-ignore\r\n\t\tif (photo2Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp2=photo2Ref.current.uploadFile();\r\n\t\t}\r\n\t\t\r\n\t\t//@ts-ignore\r\n\t\tif (photo3Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp3=photo3Ref.current.uploadFile();\r\n\t\t}\t\t\r\n\r\n\r\n\t\tconsole.log('p', p1, p2, p3);\r\n\t\tif (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n\t\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t} else {\r\n\t\t\te.preventDefault();\r\n\t\t\tsetUploadedPhoto1(!p1);\r\n\t\t\tsetUploadedPhoto2(!p2);\r\n\t\t\tsetUploadedPhoto3(!p3);\r\n\t\t\t//console.log('cons', {photo1: !p1, photo2: !p2, photo3: !p3, data: data})\r\n\t\t\t//setPhotosUploaded({photo1: !p1, photo2: !p2, photo3: !p3, data: data});\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n        */\r\n\t}\r\n\r\n\tconst onCallbackDone = () => {\r\n\t\tconsole.log('DONE');\r\n\t\thandleSubmit(prepareOnSubmitTree)();\t\r\n\t}    \r\n\r\n\r\n\r\n\tfunction prepareOnSubmitTree(data: {\r\n        id: any;\r\n        latitude: string;\r\n        longitude: string;\r\n        species: any;\r\n        speciescomment: string;\r\n        comment: string;\r\n        placetype: any;\r\n        irrigationmethod: any;\r\n        dateplanted: any;\r\n        googlestreeturl: string | null;\r\n\r\n        inspection?: any;\r\n        height: any;\r\n        crowndiameter: any;\r\n        trunkgirth: any;\r\n        status: any;\r\n        remarks: any;\r\n        recommendations: any;\r\n        photo1: string | null; \r\n        photo2: string | null;\r\n        photo3: string | null;\r\n    }) {\r\n\t\t//let dataResult: any = {};\r\n        //console.log('data', data);\r\n\r\n\r\n        if (!data.dateplanted) {\r\n            data.dateplanted = null;    \r\n        }\r\n\r\n        if (rxNewTreeCreation === true) {\r\n            // new record                \r\n            data.species = data.species.value;\r\n            data.placetype = data.placetype.value;\r\n            data.irrigationmethod = data?.irrigationmethod?.value;            \r\n\r\n            // make inspection\r\n            if (data?.height && data?.crowndiameter && data?.trunkgirth && data?.status) {\r\n                data.inspection = {\r\n                    height: parseInt(data.height),\r\n                    crowndiameter: parseFloat(data.crowndiameter),\r\n                    trunkgirth: parseInt(data.trunkgirth),\r\n                    status: data.status.value,  \r\n                    \r\n                    photo1: data.photo1,          \r\n                    photo2: data.photo2, \r\n                    photo3: data.photo3, \r\n                };\r\n\r\n                if (data?.remarks && Array.isArray(data.remarks)) {\r\n                    data.inspection.remarks = [];\r\n                    data.remarks.forEach(element => {\r\n                        data.inspection.remarks.push(element.value);     \r\n                    });                                           \r\n                }\r\n                \r\n                if (data?.recommendations && Array.isArray(data.recommendations)) {\r\n                    data.inspection.recommendations = [];\r\n                    data.recommendations.forEach(element => {\r\n                        data.inspection.recommendations.push(element.value);     \r\n                    });                                           \r\n                }                             \r\n            }   \r\n\r\n            delete data.id;\r\n            delete data.height;\r\n            delete data.crowndiameter;\r\n            delete data.trunkgirth;\r\n            delete data.status; \r\n            delete data.remarks;\r\n            delete data.recommendations; \r\n\r\n            console.log('onSubmitTree', data);\r\n            onSubmitTree(data);\r\n\r\n        } else {\r\n            // edit\r\n            data.species = data.species.value;\r\n            data.placetype = data.placetype.value;\r\n            data.irrigationmethod = data?.irrigationmethod?.value; \r\n            \r\n            console.log('dataedit', data);\r\n            onSubmitTree(data);\r\n        }\r\n\r\n        \r\n    }        \r\n\r\n\r\n    const customStyles = {\r\n\t\t//@ts-ignore\r\n\t\toption: (styles, { data, isSelected, isFocused, isDisabled  }) => {\r\n\t\t\t//const color = chroma(data.color);\r\n\t\t\treturn {\r\n\t\t\t  ...styles,\r\n\t\t\t  paddingLeft: 20,\r\n\t\t\t  //backgroundColor: data.typespec === 2 ? '#EEFFEE' : undefined,\r\n              backgroundColor: isDisabled\r\n              ? undefined\r\n              : isSelected\r\n              ? \"#606060\"\r\n              : isFocused\r\n              ? \"#EEEEEE\"\r\n              : data.typespec === 2 ? '#EEFFEE' : undefined,\r\n\t\t\t};\r\n\t\t  },\r\n\t  } \r\n\r\n\r\n\r\n\t  const Option = (props: any) => {\r\n\t\tconst { label, speciesname } = props.data;\r\n\t\treturn (\r\n\t\t  <components.Option {...props}>\r\n\t\t\t<span>{label}</span> <span style={{ color: \"darkgray\" }}>{speciesname}</span>\r\n\t\t  </components.Option>\r\n\t\t);\r\n\t  };\r\n\r\n\r\n\r\n\r\n    function OnButtonTableClick (rowData: any, idButton: string) {    \r\n        console.log(idButton, rowData);\r\n        if (idButton==='edit') {\r\n            onEditInsp(rowData);\r\n        } else if (idButton==='photo') {\r\n            onClickInspPhotos(rowData);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    /*\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\t    \r\n    */\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form\r\n\t\t\t\tclassName=\"m-1\"\r\n\t\t\t\tonSubmit={handleSubmit(prepareOnSubmitTree)}\r\n\t\t\t>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formCoordEditButton\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.latLng\")}{\" \"}\r\n\t\t\t\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-edit align-middle\" onClick={() => onClickEditCoords({lat:getValues(\"latitude\"), lng:getValues(\"longitude\")})}></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLatTree\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"latitude\"\r\n                            rules={{ required: true }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.latitude}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLngTree\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"longitude\"\r\n                            rules={{ required: true }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.longitude}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formSpecies\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.species\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"species\"\r\n                        rules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisSearchable={true}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsSpeciesesData}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option) =>`${option.label} - ${option.speciesname}`}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n                    <p className=\"requiredField\">{errors.species?.message}</p>\r\n\t\t\t\t</Form.Group>\r\n\r\n                \r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formSpeciesCommentTree\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.speciescomment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"speciescomment\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n                \r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formCommentTree\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.comment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formPlaceTypeTree\" style={{ minWidth: \"230px\" }}>\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.placetype\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"placetype\"\r\n                            rules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n                                    options={optionsPlaceTypesData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n                        <p className=\"requiredField\">{errors.placetype?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIrrigationmethodTree\" style={{ minWidth: \"230px\" }}>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.irrigationmethod\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"irrigationmethod\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n                                    options={optionsIrrigationMethodsData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n                    <Form.Group as={Col} controlId=\"formDatePlantedTree\" style={{ minWidth: \"230px\" }}>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.dateplanted\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateplanted\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formGoogleStreetUrlTree\" style={{ minWidth: \"230px\" }}>\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.googlestreeturl\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"googlestreeturl\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    {...field}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n                {rxNewTreeCreation ? \r\n                <>\r\n                    <Form.Group className=\"mt-4\" controlId=\"formFirstInspectionTree\">\r\n                        <Form.Label>\r\n                            <b>{t<string>(\"sidebar.treeTab.firstInspection\")}</b>\r\n                        </Form.Label>\r\n\r\n                    </Form.Group>   \r\n                    \r\n                    <Row className=\"mt-3\">\r\n                        <Form.Group as={Col} controlId=\"formHeightTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.heightTree\")}\r\n                            </Form.Label>\r\n                            <Controller\r\n                                name=\"height\"\r\n                                rules={{ required: t<string>(\"words.requiredField\") }}                               \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"\r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n                            <p className=\"requiredField\">{errors.height?.message}</p>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formDiameterTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.diameterTree\")}\r\n                            </Form.Label>\r\n                            <Controller\r\n                                name=\"crowndiameter\"\r\n                                rules={{ required: t<string>(\"words.requiredField\"), max: 99, pattern: /^\\d+([.]\\d)?$/ }}                              \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"\r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n\t\t\t\t\t\t{errors.crowndiameter?.message && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">{errors.crowndiameter?.message}</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"max\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Maximum value is 99</p>\r\n\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"pattern\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Allow only one decimal point</p>\r\n\t\t\t\t\t\t}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formGirthTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.girthTree\")}\r\n                            </Form.Label>\r\n                            <div style={{height: \"100%\"}}>\r\n                            <Controller\r\n                                name=\"trunkgirth\"\r\n                                rules={{ required: t<string>(\"words.requiredField\") }}                                \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"    \r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n                            <p className=\"requiredField\">{errors.trunkgirth?.message}</p>\r\n                            </div>\r\n                        </Form.Group>                        \r\n\t\t\t\t    </Row>  \r\n\r\n\r\n\r\n\r\n\r\n\r\n                    <Form.Group controlId=\"formStatusTree\" className=\"mt-3\">\r\n                        <Form.Label className=\"required\">\r\n                            {t<string>(\"sidebar.treeTab.status\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"status\"\r\n                            rules={{ required: t<string>(\"words.requiredField\") }} \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    isSearchable={false}\r\n                                    //@ts-ignore\r\n                                    options={optionsStatusesData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n                        <p className=\"requiredField\">{errors.status?.message}</p>\r\n\t\t\t\t    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formRemarksTree\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.remarks\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"remarks\"                            \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    isMulti\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    isSearchable={false}\r\n                                    //@ts-ignore\r\n                                    options={optionsRemarksData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n\t\t\t\t    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formCareTypesTree\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.careTypes\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"recommendations\"                            \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    isMulti\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    isSearchable={false}\r\n                                    //@ts-ignore\r\n                                    options={optionsCareTypesData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n\t\t\t\t    </Form.Group>    \r\n\r\n\r\n                    <UploadPhotos \r\n                        controlFromUseForm={control}\r\n                        signingS3Url={signingS3Url}\r\n                        onCallbackDone={onCallbackDone}\t\r\n                        ref={uploadPhotosRef}\r\n\t\t\t\t    />\r\n                </>\r\n\r\n                \r\n                : <>\r\n                    <Form.Group controlId=\"formInspActTable\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.inspActionsTable\")}\r\n                        </Form.Label>\r\n                        \r\n                        <TableList columns={\r\n                            [\r\n                                {\r\n                                    field: \"#\",\r\n                                    headerName: \"\",\r\n                                },                            \r\n                                {\r\n                                    field: \"datetime\",\r\n                                    headerName: \"Дата\",\r\n                                    width: \"40%\",\r\n                                    sortable: true,\r\n                                    dateTimeOption: \"onlyDate\",\r\n                                },\r\n                                {\r\n                                    field: \"typeData\",\r\n                                    headerName: \"Тип\",\r\n                                    width: \"35%\"\r\n                                },    \r\n                                {\r\n                                    field: \"buttons\",\r\n                                    headerName: \"Actions\",\r\n                                    width: \"25%\"\r\n                                },             \r\n                            ]\r\n                        } data={inspections} sortField={\"datetime\"} sortAsc={false} size={\"sm\"} OnClickButtons={OnButtonTableClick}/>\r\n\r\n                    </Form.Group>\r\n\r\n\r\n                    <Row className=\"mt-3\">\r\n                        <Form.Group as={Col} controlId=\"formNewInspButton\">\r\n                            <Button\r\n                                style={{width: \"100%\"}}\r\n                                onClick={() => dataTreeForm?.id && onNewInsp(dataTreeForm.id)}\r\n                                variant=\"light\"\r\n                            >\r\n                                {t<string>(\"sidebar.treeTab.newInspButton\")}\r\n                            </Button>{\" \"}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formNewActButton\">\r\n                            <Button\r\n                                style={{width: \"100%\"}}\r\n                                //onClick={}\r\n                                variant=\"light\"\r\n                            >\r\n                                {t<string>(\"sidebar.treeTab.newActButton\")}\r\n                            </Button>{\" \"}\r\n                        </Form.Group>\r\n                    </Row>\r\n                </>}\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"id\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(true)}\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.delete\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button \r\n                        onClick={onCloseTree} \r\n                        variant=\"secondary\"\r\n                    >\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.close\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button                        \r\n\t\t\t\t\t\ttype=\"submit\"\r\n                        onClick={ rxNewTreeCreation ? onSubmitBefore : undefined }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"110px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.save\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showModalDelete}\r\n\t\t\t\tonHide={() => setShowModalDelete(false)}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{t<string>(\"words.deleting\")}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>{t<string>(\"sidebar.treeTab.confirmDeleting\")}</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowModalDelete(false);\r\n\t\t\t\t\t\t\tonDeleteTree(parseInt(getValues(\"id\").toString()));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.delete\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\n\r\nexport default FormTree","import { useState, useEffect, useRef } from \"react\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { Form, Button, Card, Row, Col, Modal } from \"react-bootstrap\";\r\nimport Datetime from \"react-datetime\";\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../reducers/index\";\r\nimport { InspItem } from \"../interfaces\";\r\nimport UploadPhotos from \"./UploadPhotos\"\r\n//import ImageS3Upload from \"./ImageS3Upload\";\r\n//import noPhotoImage from \"./images/no-photo.png\";\r\n\r\n\r\n\r\n\r\ninterface FormInspProps {\r\n\tonSubmitInsp: (data: {}) => void;\r\n\tonDeleteInsp: (data: InspItem | null) => void;\r\n\tonCloseInsp: () => void;\r\n\tdataInspForm: InspItem | null;\r\n\tcity: string;\r\n\tsigningS3Url: string;\r\n}\r\n\r\n\r\nlet test = 1;\r\n\r\nconst FormInspection = ({\r\n\tonSubmitInsp,\r\n\tonDeleteInsp,\r\n\tonCloseInsp,\r\n\tdataInspForm,\r\n\tcity,\r\n\tsigningS3Url\r\n}: FormInspProps) => {\r\n\r\n    \t\r\n\tconst [showModalDelete, setShowModalDelete] = useState(false);\r\n\r\n\tconst rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);    \r\n    const { t } = useTranslation();\r\n\r\n\t//const [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\t//const [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\t//const [uploadedPhoto3, setUploadedPhoto3] = useState(false);\t\r\n\t\r\n\t//const photo1Ref = useRef(); // to be able to call method uploadFile\r\n\t//const photo2Ref = useRef();\r\n\t//const photo3Ref = useRef();\r\n\r\n\tconst uploadPhotosRef = useRef();\r\n\r\n\tconst {\t\t\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tsetValue,\r\n\t\tgetValues,\r\n\t\tformState: { errors, isValid },\r\n\t\ttrigger \r\n\t} = useForm({ \r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\t\t\t\r\n            id: \"\",  \r\n            treeId: \"\",          \r\n            height: \"\",\r\n            crowndiameter: \"\",\r\n            trunkgirth: \"\",\r\n            status: \"\",\r\n            remarks: [],\r\n            recommendations: [],\r\n\t\t\tphoto1: \"\",\r\n\t\t\tphoto2: \"\",\r\n\t\t\tphoto3: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n\t\tlet formData: any = {};\r\n\r\n        formData.id = dataInspForm?.id;  \r\n        formData.treeId = dataInspForm?.tree; \r\n        formData.height = dataInspForm?.height; \r\n        formData.crowndiameter = dataInspForm?.crowndiameter; \r\n        formData.trunkgirth = dataInspForm?.trunkgirth; \r\n        \r\n\t\tlet status = dataInspForm?.status;\r\n\t\tif (status) {\r\n\t\t\tformData.status = optionsStatusesData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === status\t\r\n\t\t\t);\r\n\t\t}   \r\n  \r\n        \r\n\t\tlet remarks = dataInspForm?.remarks;\r\n\t\tif (remarks) {\r\n\t\t\t//let remarksValues = remarks.map((item) => item);\r\n\t\t\tformData.remarks = optionsRemarksData.filter(\r\n\t\t\t\t//@ts-ignore\r\n                (item) => remarks.includes(item.value)\r\n\t\t\t);\r\n\t\t}  \r\n        \r\n\t\tlet recommendations = dataInspForm?.recommendations;\r\n\t\tif (recommendations) {\r\n\t\t\t//let remarksValues = remarks.map((item) => item);\r\n\t\t\tformData.recommendations = optionsCareTypesData.filter(\r\n\t\t\t\t//@ts-ignore\r\n                (item) => recommendations.includes(item.value)\r\n\t\t\t);\r\n\t\t}        \r\n\r\n\r\n\t\tif (dataInspForm?.photo1) {\r\n\t\t\tformData.photo1 = dataInspForm.photo1;\r\n\t\t} else {\r\n\t\t\tformData.photo1 = '';\r\n\t\t}\r\n\t\tif (dataInspForm?.photo2) {\r\n\t\t\tformData.photo2 = dataInspForm.photo2;\r\n\t\t} else {\r\n\t\t\tformData.photo2 = '';\r\n\t\t}\r\n\t\tif (dataInspForm?.photo3) {\r\n\t\t\tformData.photo3 = dataInspForm.photo3;\r\n\t\t} else {\r\n\t\t\tformData.photo3 = '';\r\n\t\t}\t\t\r\n\t\t\r\n        \r\n        reset(formData, { keepDefaultValues: true });\r\n\t\tconsole.log('dataInspForm');\r\n\r\n    }, [dataInspForm]);\r\n\r\n\r\n\t/*\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\t\t\t\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\r\n\t\t\thandleSubmit(prepareOnSubmitInsp)();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\t\r\n\t*/\r\n\r\n\r\n\r\n\r\n    let optionsStatusesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictStatuses)) {\r\n        optionsStatusesData = rxDictStatuses.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.statusname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsCareTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictCareTypes)) {\r\n        optionsCareTypesData = rxDictCareTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.carename,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsRemarksData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictRemarks)) {\r\n        optionsRemarksData = rxDictRemarks.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.remarkname,\r\n            };\r\n        });\r\n    }    \r\n\r\n\r\n\r\n\r\n\tasync function onSubmitBefore(e: any) {\r\n\t\te.preventDefault();\t\t\t\t\r\n\t\tconst result = await trigger(); // programmaticaly run validation\r\n\t\tif (result) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tuploadPhotosRef.current.uploadPhotos(); // component uploadPhotos has a callback to start a submit of the form, when uploading has been finished.\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\tlet p1 = false;\r\n\t\tlet p2 = false;\r\n\t\tlet p3 = false;\r\n\t\t//@ts-ignore\r\n\t\tif (photo1Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp1=photo1Ref.current.uploadFile();\r\n\t\t}\t\r\n\r\n\t\t//@ts-ignore\r\n\t\tif (photo2Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp2=photo2Ref.current.uploadFile();\r\n\t\t}\r\n\t\t\r\n\t\t//@ts-ignore\r\n\t\tif (photo3Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp3=photo3Ref.current.uploadFile();\r\n\t\t}\t\t\r\n\r\n\r\n\t\tconsole.log('p', p1, p2, p3);\r\n\t\tif (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n\t\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t} else {\r\n\t\t\te.preventDefault();\r\n\t\t\tsetUploadedPhoto1(!p1);\r\n\t\t\tsetUploadedPhoto2(!p2);\r\n\t\t\tsetUploadedPhoto3(!p3);\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t*/\r\n\t}\r\n\r\n\tfunction prepareOnSubmitInsp(data: {\r\n        id: any;  \r\n        treeId: any;      \r\n        height: any;\r\n        crowndiameter: any;\r\n        trunkgirth: any;\r\n        status: any;\r\n        remarks: any;\r\n        recommendations: any;\r\n        //photo1: any;\r\n        //photo2: any;\r\n        //photo3: any;\r\n    }) {\r\n\r\n\t\tconsole.log('submit', data);\r\n\r\n        data.height = parseInt(data.height);\r\n        data.crowndiameter = parseFloat(data.crowndiameter);\r\n        data.trunkgirth = parseInt(data.trunkgirth);\r\n        data.status = data.status.value;\r\n\r\n        if (data?.remarks && Array.isArray(data.remarks)) {\r\n            let remarks: number[] = [];\r\n            data.remarks.forEach((element:{value: number; label: string}) => {\r\n                remarks.push(element.value);     \r\n            }); \r\n            data.remarks = remarks;                                          \r\n        }\r\n\r\n        if (data?.recommendations && Array.isArray(data.recommendations)) {\r\n            let recommendations: number[] = [];\r\n            data.recommendations.forEach((element:{value: number; label: string}) => {\r\n                recommendations.push(element.value);     \r\n            }); \r\n            data.recommendations = recommendations;                                          \r\n        }  \t\t\r\n\r\n\t\tonSubmitInsp(data);\r\n\r\n    };\r\n\r\n\r\n\t/*\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\t\r\n\t*/\r\n\r\n\r\n\tconst onUploadError = (e: any) => {\r\n\t\tconsole.log('onUploadError', e);\r\n\t}\r\n\r\n\r\n\tconst onCallbackDone = () => {\r\n\t\tconsole.log('DONE');\r\n\t\thandleSubmit(prepareOnSubmitInsp)();\t\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form className=\"m-1\" onSubmit={handleSubmit(prepareOnSubmitInsp)}>\t\t\t\t\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formHeightTreeInsp\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.heightTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"height\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"requiredField\">{errors.height?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDiameterTreeInsp\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.diameterTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crowndiameter\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\"), max: 99, pattern: /^\\d+([.]\\d)?$/ }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{errors.crowndiameter?.message && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">{errors.crowndiameter?.message}</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"max\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Maximum value is 99</p>\r\n\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"pattern\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Allow only one decimal point</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formGirthTreeInsp\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.girthTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkgirth\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"requiredField\">{errors.trunkgirth?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formStatusTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.status\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsStatusesData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p className=\"requiredField\">{errors.status?.message}</p>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formRemarksTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.remarks\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"remarks\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsRemarksData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formCareTypesTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.careTypes\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"recommendations\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsCareTypesData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdInsp\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"id\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\t\t\t\t\r\n\r\n\r\n\t\t\t\t<UploadPhotos \r\n\t\t\t\t\tcontrolFromUseForm={control}\r\n\t\t\t\t\tsigningS3Url={signingS3Url}\r\n\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\tonCallbackDone={onCallbackDone}\t\r\n\t\t\t\t\tref={uploadPhotosRef}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{/*\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp1\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo1\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\r\n\t\t\t\t\t\t\t\t\t//startUploadState={photo1StateUpload.start}\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\t\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto1}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo1Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp2\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo2\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\t\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto2}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo2Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp3\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo3\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto3}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo3Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t</Row>\r\n\t\t\t\t*/}\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdTreeInsp\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"treeId\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>      \r\n\r\n\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(true)}\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t> \r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.delete\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button \r\n                        onClick={onCloseInsp} \t\t\t\t\t\r\n                        variant=\"secondary\"\r\n                    >\r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.close\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button                        \r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tonClick={onSubmitBefore}\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"110px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.save\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\t\t\t</Form>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showModalDelete}\r\n\t\t\t\tonHide={() => setShowModalDelete(false)}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{t<string>(\"words.deleting\")}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>{t<string>(\"sidebar.inspTab.confirmDeleting\")}</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowModalDelete(false);\r\n\t\t\t\t\t\t\t//onDeleteInsp(parseInt(getValues(\"id\").toString()));\r\n                            onDeleteInsp(dataInspForm);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.delete\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FormInspection;\r\n","import Carousel from \"react-bootstrap/Carousel\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport \"./ImageSlider.css\";\r\n\r\n\r\ninterface ImageSliderProps {\r\n    visible: boolean;\r\n    setVisible: any;\r\n    images: string[];\r\n} \r\n\r\nfunction ImageSlider({\r\n    visible,\r\n    setVisible,\r\n    images\r\n}: ImageSliderProps) {\r\n  return (\r\n    \r\n    \r\n    <Modal\r\n        show={visible}\r\n        onHide={() => setVisible({visible: false, images:[]})}\r\n        //size=\"lg\"\r\n        //@ts-ignore\r\n        dialogClassName=\"modal-90w\"       \r\n        aria-labelledby=\"example-custom-modal-styling-title\"\r\n    >\r\n        <Modal.Body>\r\n            <Carousel interval={null}>\r\n                {                \r\n                    images.map((photo) => \r\n                        <Carousel.Item key={photo} >\r\n                            <img\r\n                                className=\"d-block w-100\"\r\n                                src={photo}                                               \r\n                            />\r\n                        </Carousel.Item>                    \r\n                    )                \r\n                }                \r\n            </Carousel>\r\n        </Modal.Body>\r\n    </Modal>\r\n\r\n  )\r\n}\r\n\r\nexport default ImageSlider","import { Form, Button, Card, Row, Col, } from 'react-bootstrap';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Carousel from \"react-bootstrap/Carousel\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport \"./TreePreviewModal.css\";\r\n\r\ninterface TreePreviewModalProps {\r\n    visible: boolean;\r\n    data: any;\r\n    setTreePreview: any; \r\n    onButtonEditClick: (idTree: number) => void;\r\n} \r\n\r\nfunction TreePreviewModal({\r\n    visible,\r\n    data,\r\n    setTreePreview,\r\n    onButtonEditClick,\r\n}: TreePreviewModalProps) {\r\n\r\n    const { t } = useTranslation();    \r\n    const handleClose = () => setTreePreview({visible: false, data: {photos:[]}});    \r\n    const handleEditTree = () => {\r\n        setTreePreview({visible: false, data: {photos:[]}}); \r\n        onButtonEditClick(data.id)   \r\n    }\r\n\r\n    return (    \r\n    \r\n        <Modal\r\n            show={visible}\r\n            onHide={handleClose}\r\n            //size=\"lg\"\r\n            //@ts-ignore\r\n            dialogClassName=\"modal-90w\"       \r\n            aria-labelledby=\"example-custom-modal-styling-title\"\r\n        >\r\n\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>{data.localname} - {data.species} </Modal.Title>\r\n            </Modal.Header>\r\n\r\n            <Modal.Body>\r\n                <Row className=\"mt-1\">\r\n                    <Form.Group\r\n                            as={Col}\r\n                            controlId=\"formTreePreviewLeftSide\"\r\n                            style={{ minWidth: \"230px\" }}\r\n                    >\r\n                        <Carousel interval={null}>\r\n                            {data?.lastinsp_photo1 && data.lastinsp_photo1 && (\r\n                                <Carousel.Item key={data.lastinsp_photo1} >\r\n                                    <img\r\n                                        className=\"d-block w-100\"\r\n                                        src={data.photoServer+data.lastinsp_photo1}                                               \r\n                                    />\r\n                                </Carousel.Item>                     \r\n                            )}\r\n\r\n                            {data?.lastinsp_photo2 && data.lastinsp_photo2 && (\r\n                                <Carousel.Item key={data.lastinsp_photo2} >\r\n                                    <img\r\n                                        className=\"d-block w-100\"\r\n                                        src={data.photoServer+data.lastinsp_photo2}                                               \r\n                                    />\r\n                                </Carousel.Item>                     \r\n                            )}   \r\n\r\n                            {data?.lastinsp_photo3 && data.lastinsp_photo3 && (\r\n                                <Carousel.Item key={data.lastinsp_photo3} >\r\n                                    <img\r\n                                        className=\"d-block w-100\"\r\n                                        src={data.photoServer+data.lastinsp_photo3}                                               \r\n                                    />\r\n                                </Carousel.Item>                     \r\n                            )}                              \r\n                        </Carousel>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group\r\n                            as={Col}\r\n                            controlId=\"formTreePreviewRightSide\"\r\n                            style={{ minWidth: \"230px\" }}\r\n                    >\r\n                        <Table striped>\r\n                            <tbody>\r\n                                <RowTable title={t<string>(\"TreePreviewModal.status\")} value={data.lastinsp_status} />\r\n                                <RowTable title={t<string>(\"TreePreviewModal.parameters\")} value={`${t<string>(\"TreePreviewModal.heightTree\")}: ${data.lastinsp_height} \\u00A0\\u00A0 ${t<string>(\"TreePreviewModal.girthTree\")}: ${data.lastinsp_trunkgirth} \\u00A0\\u00A0 ${t<string>(\"TreePreviewModal.diameterTree\")}: ${data.lastinsp_crowndiameter}`} />\r\n                                <RowTable title={t<string>(\"TreePreviewModal.dateplanted\")} value={dateTimeToDate(data.dateplanted)} />\r\n                                <RowTable title={t<string>(\"TreePreviewModal.googlestreeturl\")} value={data.googlestreeturl} isValueIsLink/>\r\n                                <RowTable title={t<string>(\"TreePreviewModal.remarks\")} value={data.lastinsp_remarks} />\r\n                                <RowTable title={t<string>(\"TreePreviewModal.careTypes\")} value={data.lastinsp_recommendations} />\r\n                                <RowTable title={t<string>(\"TreePreviewModal.comment\")} value={data.comment} />                                \r\n                            </tbody>\r\n                        </Table>\r\n\r\n                    </Form.Group>                \r\n                </Row>\r\n            </Modal.Body>\r\n\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={handleEditTree}>\r\n                    {t<string>(\"TreePreviewModal.edit\")}\r\n                </Button>\r\n                <Button variant=\"primary\" style={{ minWidth: \"180px\" }} onClick={handleClose}>\r\n                    {t<string>(\"TreePreviewModal.close\")}\r\n                </Button>\r\n            </Modal.Footer>\r\n\r\n        </Modal>\r\n\r\n    )\r\n}\r\n\r\n\r\ninterface RowTableProps {\r\n    title: string;\r\n    value: string | null;\r\n    isValueIsLink?: boolean;   \r\n} \r\n\r\nconst RowTable = ({title, value, isValueIsLink}: RowTableProps) => {\r\n    if (value) {\r\n        return (\r\n            <tr>\r\n                <td>{title}</td>\r\n                { isValueIsLink ? \r\n                    <td><a href={value} target=\"_blank\">Link</a></td>\r\n                : <td>{value}</td>\r\n                }\r\n          </tr>                \r\n        );\r\n    } else {\r\n        return null;\r\n    }\r\n}\r\n\r\nfunction dateTimeToDate(dateTimeStr: string) {\r\n    if (dateTimeStr) {\r\n        const dateTime = new Date(dateTimeStr);\r\n        if (dateTime) {\r\n            const arDateTime = dateTime.toISOString().split(\"T\");\r\n            if (arDateTime.length==2) {\r\n                return arDateTime[0];\r\n            } \r\n            return dateTimeStr;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n\r\nexport default TreePreviewModal","export function getCookie(name: string) {\r\n    var cookieValue = null;\r\n    if (document.cookie && document.cookie !== \"\") {\r\n        var cookies = document.cookie.split(\";\");\r\n        for (var i = 0; i < cookies.length; i++) {\r\n            var cookie = cookies[i].trim();\r\n            // Does this cookie string begin with the name we want?\r\n            if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n                cookieValue = decodeURIComponent(\r\n                    cookie.substring(name.length + 1)\r\n                );\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    return cookieValue;\r\n}","import { useState } from 'react';\r\nimport { getCookie } from \"./utils/misc\"\r\n\r\n\r\nexport const useAuthToken = () => {\r\n    \r\n    const getUserInfoFromToken = (json: {access: string; refresh: string}) =>{\r\n        let token = json?.access; \r\n\r\n        if (token) {\r\n            const arToken = token.split('.');\r\n            if (arToken.length > 1) {\r\n                return {\r\n                    \"name\": JSON.parse(atob(arToken[1])).username,\r\n                    \"id\": JSON.parse(atob(arToken[1])).user_id\r\n                }    \r\n            }\r\n        }\r\n    }\r\n    \r\n    const getToken = () => {\r\n        let tokenString;\r\n        const rememberme = localStorage.getItem('rememberme');\r\n\r\n        if (rememberme==='true') {\r\n            tokenString = localStorage.getItem('token');\r\n        } else {\r\n            tokenString = sessionStorage.getItem('token');\r\n        }\r\n        \r\n        if (tokenString) {\r\n            let json = JSON.parse(tokenString);\r\n            const user = getUserInfoFromToken(json);\r\n            if (user) {\r\n                json.user = user;\r\n            }            \r\n            return json;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const [authToken, setAuthToken] = useState(getToken());\r\n\r\n\r\n    const saveToken = (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => {\r\n        if (userToken) {\r\n\r\n            const rememberme = localStorage.getItem('rememberme');\r\n\r\n            if (rememberme === 'true') {\r\n                localStorage.setItem('token', JSON.stringify(userToken));\r\n            } else {\r\n                sessionStorage.setItem('token', JSON.stringify(userToken));\r\n            }\r\n                        \r\n            const user = getUserInfoFromToken(userToken);\r\n            if (user) {\r\n                userToken.user = user;\r\n            }            \r\n        } else {\r\n            localStorage.removeItem(\"token\");\r\n            localStorage.removeItem(\"rememberme\"); \r\n            sessionStorage.removeItem(\"token\");\r\n        }           \r\n        setAuthToken(userToken);\r\n    };    \r\n\r\n\r\n    return {\r\n        setAuthToken: saveToken,\r\n        authToken\r\n    }    \r\n}\r\n\r\n\r\nexport async function checkAuthToken(urlCheckingToken: string, accessToken: string) {\r\n    const body = { token: accessToken }\t\t\r\n    const myHeaders = new Headers();\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n\r\n    myHeaders.append(\"Content-type\", \"application/json\");\r\n    if (csrftoken) {\r\n        myHeaders.append(\"X-CSRFToken\", csrftoken);\r\n    }\t\r\n\r\n    const response = await fetch(urlCheckingToken, {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: JSON.stringify(body),\r\n    });\r\n\r\n    //const responseJson = await response.json();\r\n    \r\n    if (response.status >= 400) {\r\n        //console.log(\">= 400\", responseJson);\t\t\t\t\t\r\n        return false;\r\n    } else {\r\n        //console.log(\"ok\", responseJson);\r\n        return true;\r\n    }\t\t\t\r\n};\t\r\n\r\nexport async function getNewAccessRefreshAuthToken(urlRefreshingToken: string, refreshToken: string){\r\n    const csrftoken = getCookie(\"csrftoken\");\r\n    let myHeaders = new Headers();\r\n    myHeaders.append(\"Content-type\", \"application/json\");\r\n    if (csrftoken) {\r\n        myHeaders.append(\"X-CSRFToken\", csrftoken);\r\n    }\t\r\n\r\n    const response = await fetch(urlRefreshingToken, {\r\n        method: \"POST\",\r\n        headers: myHeaders,\r\n        body: JSON.stringify({ refresh: refreshToken }),\r\n    });\r\n    \r\n    if (response.status >= 400) {\r\n        return null;\r\n    } else {\r\n        const responseJson = await response.json();\r\n        return responseJson;\t\r\n    }\t\t\r\n};","import { useState, useEffect } from 'react'\r\nimport { Form, Button, FloatingLabel, Modal } from \"react-bootstrap\";\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface Credentials {\r\n\tusername: string; \r\n\tpassword: string; \r\n\trememberme: boolean;\r\n} \r\n\r\n\r\ninterface LoginModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\nconst LoginModalForm = ({setAuthToken}:LoginModalFormProps) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxLoginModalShow = useSelector((state: RootState) => state.uiReducer.loginModalShow)\r\n\r\n\tconst [showWrongPassword, setShowWrongPassword] = useState(false);\r\n\tconst { t } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\r\n\t\tsetShowWrongPassword(false);\r\n\t}, [rxLoginModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trememberme: false,\r\n\t\t},\r\n\t});\r\n\r\n\tasync function loginUser(credentials: Credentials) {\r\n\t\tconsole.log(credentials)\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}token/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\t\t}).then((data) => {\r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\t//data.rememberme = credentials.rememberme\r\n\t\t\t\t\tsetAuthToken(data);\r\n\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\tsetShowWrongPassword(false);\r\n\r\n\t\t\t\t\t//setLoginModalShow(false)\r\n\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t});\r\n\t\t\t} else if (data.status === 401) {\r\n\t\t\t\tsetShowWrongPassword(true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst OnSubmitForm = (data: Credentials) => {\r\n\t\tsetShowWrongPassword(false);\r\n\t\tlocalStorage.setItem(\"rememberme\", data.rememberme.toString());\r\n\t\tloginUser(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\t//show={show}\r\n\t\t\tshow={rxLoginModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actLoginModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>(\"loginForm.title\")}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formLogin\">\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingInput\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.username\")}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.username\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.password\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.password\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"rememberme\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t/* @ts-ignore */\r\n\t\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.rememberMe\")}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{showWrongPassword && (\r\n\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.wrongUsernamePassword\")}\r\n\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"loginForm.login\")}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t{/* {t('loginForm.dontHaveAccount')} <a href=\"#\" onClick={()=> { setLoginModalShow(false); setRegisterModalShow(true) } }>{t('loginForm.signUp')}</a> */}\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.dontHaveAccount\")}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(true));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"loginForm.signUp\")}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default LoginModalForm;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Form, Button, FloatingLabel, Modal, Col, Row } from \"react-bootstrap\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface RegisterModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\ninterface RegisterData {\r\n\tusername: string;\r\n\temail: string;\r\n\tpassword: string;\r\n\tpassword2: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n} \r\n\r\n\r\n\r\n\r\nconst RegisterModalForm = ({setAuthToken}: RegisterModalFormProps) => {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst rxRegisterModalShow = useSelector((state: RootState) => state.uiReducer.registerModalShow)\t\r\n\t\r\n\tconst { t } = useTranslation()\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\t\r\n\t}, [rxRegisterModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n        setError,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword2: \"\",\r\n\t\t\tfirst_name: \"\",\r\n\t\t\tlast_name: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\tconst OnSubmitForm = (data: RegisterData) => {\r\n\t\tregisterUser(data);\r\n\t};\r\n\r\n\tasync function registerUser(credentials: RegisterData) {\t\t\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}users/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\r\n\t\t}).then((data) => {            \r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\t\r\n                    console.log('ok', data)\t\t\t\t\r\n                    //setRegisterModalShow(false);\r\n\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n                    setAuthToken(data.token) // after register make login\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t} else if (data.status >= 400) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\tconsole.log(data)\r\n                \r\n                    for (const [key, value] of Object.entries(data)) {                \r\n                        //@ts-ignore\r\n\t\t\t\t\t\tsetError(key, {\r\n                            type: \"manual\",\r\n                            message: value,\r\n                        }); \r\n                    }                   \r\n\t\t\t\t});                \r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\t//show={show}\r\n\t\t\tshow={rxRegisterModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actRegisterModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>('registerForm.title')}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formRegister\">\r\n\t\t\t\t\t\t\r\n                \r\n                        {errors?.username?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.username.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                        \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingUsername\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.username')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.username')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n                        \r\n                        {errors?.email?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore  message is array, but declared as string */}\r\n\t\t\t\t\t\t\t\t{errors.email.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                          \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingEmail\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.email')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.email')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.email}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\r\n                        {errors?.password?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.password.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}  \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.password')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.password')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword2\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password2}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"first_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.firstNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.first_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"last_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.lastNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.last_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>('registerForm.register')}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t{t<string>('registerForm.alreadyHaveAccount')}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>('registerForm.login')}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RegisterModalForm;\r\n","export const filterDataMap = (feature: any, dataFilters: any, authToken: any): boolean => {\r\n\t\t\r\n    const objectSearchResult = {\r\n        species: true,\r\n        status: true,\r\n        recommendations: true,\r\n        remarks: true,\r\n        placetype: true,\r\n        irrigationmethod: true,\r\n\r\n        plantedDateFrom: true,\r\n        plantedDateTo: true,\r\n        addedDateFrom: true,\r\n        addedDateTo: true,\r\n        comment: true,\r\n\r\n        heightFrom: true,\r\n        heightTo: true,\r\n        trunkGirthFrom: true,\r\n        trunkGirthTo: true,\r\n        crownDiameterFrom: true,\r\n        crownDiameterTo: true,\r\n\r\n        showOnlyMyTrees: true\t\t\t\r\n    }\r\n\r\n    let valueFilter;\r\n\r\n            \r\n    valueFilter = dataFilters?.speciesFilter;\r\n    if (Array.isArray(valueFilter)) {\r\n        objectSearchResult.species = isFoundArrayInValue(valueFilter, feature.properties.species);\t\t\t\r\n    }\r\n\r\n    valueFilter = dataFilters?.statusFilter;\r\n    if (Array.isArray(valueFilter)) {\r\n        objectSearchResult.status = isFoundArrayInValue(valueFilter, feature.properties.lastinsp_status);\t\t\t\r\n    }\r\n\r\n\r\n    valueFilter = dataFilters?.careTypeFilter;\r\n    if (Array.isArray(valueFilter)) {\r\n        objectSearchResult.recommendations = isFoundArrayInArray(valueFilter, feature.properties.recommendations);\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.remarkFilter;\r\n    if (Array.isArray(valueFilter)) {\r\n        objectSearchResult.remarks = isFoundArrayInArray(valueFilter, feature.properties.remarks);\r\n    }\t\t\r\n\r\n\r\n\r\n    valueFilter = dataFilters?.placeTypeFilter?.value;\r\n    if (valueFilter) {\r\n        objectSearchResult.placetype = valueFilter === feature.properties.placetype;\r\n    }\r\n\r\n    valueFilter = dataFilters?.irrigationMethodFilter?.value;\r\n    if (valueFilter) {\r\n        objectSearchResult.irrigationmethod = valueFilter === feature.properties.irrigationmethod;\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.datePlantedFromFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.plantedDateFrom =\r\n            feature.properties.dateplanted >= valueFilter;\r\n    }\r\n    valueFilter = dataFilters?.datePlantedToFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.plantedDateTo =\r\n            feature.properties.dateplanted <= valueFilter;\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.dateAddedFromFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.addedDateFrom =\r\n            feature.properties.datetimeadded >= valueFilter;\r\n    }\r\n    valueFilter = dataFilters?.dateAddedToFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.addedDateTo =\r\n            feature.properties.datetimeadded <= valueFilter;\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.commentFilter;\r\n    if (valueFilter) {\r\n        if (\r\n            feature.properties.comment\r\n                .toLowerCase()\r\n                .indexOf(valueFilter.toLowerCase()) === -1\r\n        ) {\r\n            objectSearchResult.comment = false;\r\n        }\r\n    }\t\t\r\n\r\n\r\n    \r\n    valueFilter = dataFilters?.heightFromFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.heightFrom = feature.properties.lastinsp_height >= valueFilter;\r\n    }\r\n    valueFilter = dataFilters?.heightToFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.heightTo = feature.properties.lastinsp_height <= valueFilter;\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.trunkGirthFromFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.trunkGirthFrom = feature.properties.lastinsp_trunkgirth >= valueFilter;\r\n    }\r\n    valueFilter = dataFilters?.trunkGirthToFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.trunkGirthTo = feature.properties.lastinsp_trunkgirth <= valueFilter;\r\n    }\t\r\n    \r\n    valueFilter = dataFilters?.crownDiameterFromFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.crownDiameterFrom = feature.properties.lastinsp_crowndiameter >= valueFilter;\r\n    }\r\n    valueFilter = dataFilters?.crownDiameterToFilter;\r\n    if (valueFilter) {\r\n        objectSearchResult.crownDiameterTo = feature.properties.lastinsp_crowndiameter <= valueFilter;\r\n    }\t\t\r\n\r\n\r\n\r\n    valueFilter = dataFilters?.showMyTreesFilter;\r\n    if (valueFilter && authToken?.user) {\r\n        objectSearchResult.showOnlyMyTrees = authToken.user.id === feature.properties.useradded;\t\r\n    }\r\n\r\n\r\n    let result = true;\r\n    for (const el in objectSearchResult) {\r\n        //@ts-ignore\r\n        if (objectSearchResult[el] === false) {\r\n            result = false;\r\n            break;\r\n        }\t\t\t\r\n    }\r\n                 \r\n    //rxDataTrees.dateTimeGenerated = Date.now(); // dateTimeGenerated is used like key parameter to update data on map, when it changed\r\n    return result;\r\n};\r\n\r\nfunction isFoundArrayInValue(array: {value: number}[], value: number) {\r\n    for (let el of array) {\r\n        if (el.value === value) {\r\n            return true;\t\t\t\t\r\n        }\t\t\t\t\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction isFoundArrayInArray(arraySearch: {value: number}[], arrayTree: string[]){\r\n    const intersection = arraySearch.filter((x) => {\r\n        return arrayTree.includes(String(x.value));\r\n    });\r\n    return intersection.length > 0;\r\n}\t","export const URL_REFRESH_TOKEN = `${process.env.REACT_APP_API_URL}token/refresh/`;\r\nexport const URL_VERIFY_TOKEN = `${process.env.REACT_APP_API_URL}token/verify/`;\r\n\r\nexport const URL_GENERATE_S3_URLKEY = `${process.env.REACT_APP_API_URL}citytree/s3/generate_signed_url/`\r\n\r\nexport const URL_GET_DICT_SPECIESES = `${process.env.REACT_APP_API_URL}citytree/dictionary/specieses/`;\r\nexport const URL_GET_DICT_CARETYPES = `${process.env.REACT_APP_API_URL}citytree/dictionary/caretypes/`;\r\nexport const URL_GET_DICT_REMARKS = `${process.env.REACT_APP_API_URL}citytree/dictionary/remarks/`;\r\nexport const URL_GET_DICT_PLACETYPES = `${process.env.REACT_APP_API_URL}citytree/dictionary/placetypes/`;\r\nexport const URL_GET_DICT_IRRIGATIONMETHODS = `${process.env.REACT_APP_API_URL}citytree/dictionary/irrigationmethods/`;\r\nexport const URL_GET_DICT_GROUPSPECS = `${process.env.REACT_APP_API_URL}citytree/dictionary/groupspecs/`;\r\nexport const URL_GET_DICT_TYPESPECS = `${process.env.REACT_APP_API_URL}citytree/dictionary/typespecs/`;\r\nexport const URL_GET_DICT_STATUSES = `${process.env.REACT_APP_API_URL}citytree/dictionary/statuses`;\r\n\r\nexport const urlTreesByCity = (cityName: string) => `${process.env.REACT_APP_API_URL}citytree/${cityName}/trees/`;\r\nexport const urlTreeByCityAndID = (cityName: string, id: number) => `${process.env.REACT_APP_API_URL}citytree/${cityName}/trees/${id}/`;\r\n\r\n\r\n\r\n","import { \r\n    URL_GET_DICT_SPECIESES, \r\n    URL_GET_DICT_CARETYPES,\r\n    URL_GET_DICT_REMARKS,\r\n    URL_GET_DICT_PLACETYPES,\r\n    URL_GET_DICT_IRRIGATIONMETHODS,\r\n    URL_GET_DICT_GROUPSPECS,\r\n    URL_GET_DICT_TYPESPECS \r\n} from '../constants/urlsAPI';\r\n\r\n\r\nexport const fetchAllDictionariesData = async() => {\t\t\r\n    \r\n\r\n    const [\r\n        speciesesResponse, \r\n        caretypesResponse, \r\n        remarksResponse, \r\n        placetypesResponse, \r\n        irrigationmethodsResponse, \r\n        groupspecsResponse, \r\n        typespecsResponse\r\n    ] = await Promise.all([\r\n        \r\n        fetchData(URL_GET_DICT_SPECIESES),\r\n        fetchData(URL_GET_DICT_CARETYPES),\r\n        fetchData(URL_GET_DICT_REMARKS),\r\n        fetchData(URL_GET_DICT_PLACETYPES),\r\n        fetchData(URL_GET_DICT_IRRIGATIONMETHODS),\r\n        fetchData(URL_GET_DICT_GROUPSPECS),\r\n        fetchData(URL_GET_DICT_TYPESPECS)\r\n    ]);\r\n\r\n\r\n    const specieses = await speciesesResponse;\r\n    const caretypes = await caretypesResponse;\r\n    const remarks = await remarksResponse;\r\n    const placetypes = await placetypesResponse;\r\n    const irrigationmethods = await irrigationmethodsResponse;\r\n    const groupspecs = await groupspecsResponse;\r\n    const typespecs = await typespecsResponse;\r\n\r\n    return [\r\n        specieses,\r\n        caretypes,\r\n        remarks,\r\n        placetypes,\r\n        irrigationmethods,\r\n        groupspecs,\r\n        typespecs    \r\n    ];\t\r\n}\r\n\r\nconst fetchData = async (apiURL: string) => {\t\t\t\r\n    const res = await fetch(apiURL);\r\n    const data = await res.json();\r\n    return data; \t\t\t\r\n} ","import \"./App.css\";\nimport L from 'leaflet'\n\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport MenuGlobal from \"./components_hl/MenuGlobal\";\nimport Map from \"./components_hl/Map\";\nimport MainWrapper from \"./components/MainWrapper\";\nimport Sidebar from \"./components/Sidebar\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport ButtonOkCancelMobileMarker from \"./components/ButtonOkCancelMobileMarker\";\n\nimport FormFilter from './components/FormFilter';\nimport FormTree from './components/FormTree';\nimport FormInspection from './components/FormInspection';\nimport ImageSlider from './components/ImageSlider';\nimport TreePreviewModal from \"./components/TreePreviewModal\";\n\nimport { useAuthToken, checkAuthToken, getNewAccessRefreshAuthToken } from \"./useAuthToken\";\nimport LoginModalForm from \"./components/LoginModalForm\";\nimport RegisterModalForm from \"./components/RegisterModalForm\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { RootState, allReducers } from \"./reducers/index\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n\tactMapMarkerState,\n\tactNewTreeCreation,\n\tactIsMobileDevice,\n\tactShowSidebar,\n\tactCheckButtonNewMarker,\n\tactShowOkCancelMobileMarker,\n\tactShowTreeTab,\n\tactActiveTabKey,\n\tactDictStatuses,\n\tactDictSpecieses,\n\tactDictCareTypes,\n\tactDictRemarks,\n\tactDictPlaceTypes,\n\tactDictIrrigationMethods,\n\tactDictGroupSpecs, \n\tactDictTypeSpecs,\n\tactDataTrees,\n\tactDataFilters,\n\tactShowInspTab,\n} from \"./actions\";\nimport { TreeItem, InspItem } from \"./interfaces\";\n\nimport { filterDataMap } from \"./utils/filterDataMap\"\nimport { getCookie } from \"./utils/misc\"\nimport { fetchAllDictionariesData } from \"./utils/fetchAllDictionariesData\"\nimport { \n\tURL_REFRESH_TOKEN, \n\tURL_VERIFY_TOKEN, \n\tURL_GET_DICT_STATUSES, \n\tURL_GENERATE_S3_URLKEY, \n\turlTreesByCity, \n\turlTreeByCityAndID \n} from './constants/urlsAPI';\n\n\nlet geojsonMarkerOptions_citytree = {\n    //renderer: myRenderer,\n    radius: 5,\n    fillColor: \"#008000\",\n    color: \"#008000\",\n    weight: 0,\n    opacity: 1,\n    fillOpacity: 0.5\n\t};\n\n\n\n\nfunction App() {\n\tconst paramsRouter = useParams();\n\tconst csrftoken = getCookie(\"csrftoken\");\n\n\t// redux\n\tconst dispatch = useDispatch();\n\tconst rxDataTrees = useSelector((state: RootState) => state.dataReducer.dataTrees);\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\n\tconst rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\n\tconst rxDataFilters = useSelector((state: RootState) => state.dataReducer.dataFilters);\n\tconst rxActiveTabKey = useSelector((state: RootState) => state.uiReducer.activeTabKey);\n\tconst rxShowTreeTab = useSelector((state: RootState) => state.uiReducer.showTreeTab);\n\tconst rxShowInspTab = useSelector((state: RootState) => state.uiReducer.showInspTab);\n\tconst rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\n\tconst rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\n\n\tconst rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\n\tconst rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\n\n\tconst [currentZoomMap, setCurrentZoomMap] = useState(13);\n\n\tconst { authToken, setAuthToken } = useAuthToken();\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth);\n\t//const [isMobileDevice, setIsMobileDevice] = useState(false)\n\tconst isMobileView = screenWidth <= 768; // show or hide sidebar at startup\n\n\n\tconst [dataTreeForm, setDataTreeForm] = useState<TreeItem | null>(null);\n\tconst [dataInspForm, setDataInspForm] = useState<InspItem | {tree: number} | null>(null);\n\tconst [imageSlider, setImageSlider] = useState<{visible: boolean; images: string[]}> ({visible: false, images: []});\n\tconst [treePreview, setTreePreview] = useState<{visible: boolean; data: {}}>({visible: false, data:{}});\n\tconst { t } = useTranslation();\n\n\tlet dataHeatmapPoints: number[][] = []; // [[lat, lng, value],[lat, lng, value]...]\t\n\n\n\n\tuseEffect(() => {\n\t\tfetchAllDictionariesDataWrapper();\n\t\tuserAuthentication();\n\t\tdispatch(actIsMobileDevice(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)));\n\t\tdispatch(actShowSidebar(!isMobileView));\t\n\t\t\n\t\twindow.addEventListener('resize', handleWindowSizeChange);\n        return () => {\n            window.removeEventListener('resize', handleWindowSizeChange);\t\t\t\n        }\t\t\n\t}, []); /* useEffect triggers when route has been changed too */\n\n\tconst fetchAllDictionariesDataWrapper = () => {\n\t\tfetchAllDictionariesData().then(([specieses, caretypes, remarks, placetypes, irrigationmethods, groupspecs, typespecs]) => {\n\t\t\tdispatch(actDictSpecieses(specieses));\n\t\t\tdispatch(actDictCareTypes(caretypes));\n\t\t\tdispatch(actDictRemarks(remarks));\n\t\t\tdispatch(actDictPlaceTypes(placetypes));\n\t\t\tdispatch(actDictIrrigationMethods(irrigationmethods));\n\t\t\tdispatch(actDictGroupSpecs(groupspecs));\n\t\t\tdispatch(actDictTypeSpecs(typespecs));\n\t\t}).catch(error => {\t\t\t\n\t\t\tconsole.log('fetchAllDictionariesData error: ', error);\n\t\t});\t\n\t}\n\n    function handleWindowSizeChange() {\n        setScreenWidth(window.innerWidth);\n    }\n\n\n\n\n\tuseEffect(() => {\n\t\tfetchTreesAndStatuses();\n\t}, [paramsRouter]); /* useEffect triggers when route has been changed too */\n\n\tconst fetchTreesAndStatuses = async () => {\n\t\t//first of all, we must fetch dictionary with statuse, otherwise we can't draw points of trees in diferent color depends of them statuses.\n\t\tlet res = await fetch(URL_GET_DICT_STATUSES);\n\t\tlet data = await res.json();\n\t\tdispatch(actDictStatuses(data));\n\t\t\t\t\t\t\n\t\tif (paramsRouter.cityName) {\n\t\t\tconst URL = urlTreesByCity(paramsRouter.cityName);//`${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/`;\n\t\t\tres = await fetch(URL);\n\t\t\tdata = await res.json();\n\t\t\tdata.dateTimeGenerated = Date.now();\n\t\t\t\n\t\t\tdispatch(actDataTrees(data));\n\t\t}\n\t};\n\n\n    useEffect(() => {\n        let periodUpdate = 240000 //4 min\n        let interval = setInterval(() => {\n            if (authToken) {    \n\t\t\t\trefreshTokens();\n            }\n        }, periodUpdate)\n\n        return () => clearInterval(interval)\n    }, [authToken]);\n\n\tasync function userAuthentication() {\n\t\tif (authToken) {\n\t\t\tconst isTokenValid = await checkAuthToken(URL_VERIFY_TOKEN, authToken.access);\n\t\t\tconsole.log('isTokenValid', isTokenValid);\n\t\t\tif (!isTokenValid) {\n\t\t\t\trefreshTokens();\n\t\t\t}\n\n\t\t}\n\t}\t\n\n\tasync function refreshTokens() {\n\t\tconst accessRefreshToken = await getNewAccessRefreshAuthToken(URL_REFRESH_TOKEN, authToken.refresh);\n\t\tsetAuthToken(accessRefreshToken);\t\t\n\t}\n\n\n\n\n\tfunction markerOnClick(e: any) {\n\t\t// const fetchTreeData = async (idTree: number) => {\n\t\t// \tif (paramsRouter.cityName) {\t\t\t\t\t\n\t\t// \t\tconst url = urlTreeByCityAndID(paramsRouter.cityName, idTree);\n\t\t// \t\tlet res = await fetch(url);\n\t\t// \t\tlet data = await res.json();\n\t\n\t\t// \t\tconsole.log('markerOnClick',data);\n\t\t// \t\t//setTreePreview({visible: true, data: data});\n\n\t\t// \t\tsetDataTreeForm(data);\n\t\t// \t\tdispatch(actShowTreeTab(true));\n\t\t// \t\tdispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t\t// \t\tdispatch(actShowSidebar(true));\t\t\t\n\t\t// \t}\n\t\t// }\n\n\n\t\tlet marker: L.Marker = e.target;\n\t\tlet geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\n\n\t\tif (geojson?.properties?.id) {\n\t\t\t//fetchTreeData(geojson?.properties?.id);\t\t\t\n\t\t\tshowTreePreview(geojson?.properties?.id);\n\t\t}   \n\t}\t\n\n\t// async function fetchTreeData (idTree: number) {\n\t// \tif (paramsRouter.cityName) {\t\t\t\t\t\n\t// \t\tconst url = urlTreeByCityAndID(paramsRouter.cityName, idTree);\n\t// \t\tlet res = await fetch(url);\n\t// \t\tlet data = await res.json();\n\n\t// \t\tconsole.log('markerOnClick',data);\n\t// \t\tsetTreePreview({visible: true, data: data});\n\n\t// \t\t//setDataTreeForm(data);\n\t// \t\t//dispatch(actShowTreeTab(true));\n\t// \t\t//dispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t// \t\t//dispatch(actShowSidebar(true));\t\t\t\n\t// \t}\n\t// }\n\t\n\tconst onButtonEditClick = (idTree: number) => {\n\t\teditTree(idTree);\n\t}\n\n\tconst editTree = (idTree: number) => {\n\t\tfetchTreeData(idTree).then((data) => setDataTreeForm(data));\t\t\n\t\tdispatch(actShowTreeTab(true));\n\t\tdispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t\tdispatch(actShowSidebar(true));\t\n\t}\n\n\tconst showTreePreview = (idTree: number) => {\n\t\tfetchTreeData(idTree).then((data) =>\n\t\t\tsetTreePreview({ visible: true, data: data })\n\t\t);\n\t};\n\t\n\tconst onSubmitTree = (data: any) => {\n\t\tif (paramsRouter.cityName) {\n\t\t\tlet method;\n\t\t\tlet url;\n\t\t\tif (data.id) {\n\t\t\t\t//url = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.id}/`;\n\t\t\t\turl = urlTreeByCityAndID(paramsRouter.cityName, data.id);\n\t\t\t\tmethod = \"PUT\";\n\t\t\t} else {\n\t\t\t\t//url = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/`;\n\t\t\t\turl = urlTreesByCity(paramsRouter.cityName);\n\t\t\t\tmethod = \"POST\";\n\t\t\t}\n\n\t\t\tconst succeedCallBack = () => {\n\t\t\t\tfetchTreesAndStatuses();\n\t\t\t\tdispatch(actMapMarkerState({ visible: false, position: {} }));\n\t\t\t\tdispatch(actNewTreeCreation(false));\n\t\t\t\tdispatch(actActiveTabKey('filter'));\n\t\t\t\tdispatch(actShowTreeTab(false));\n\n\t\t\t\tif (isMobileView) {\n\t\t\t\t\tdispatch(actShowSidebar(false))\n\t\t\t\t}\t\t\t\n\t\t\t}\t\t\n\t\t\tfetchUrl(url, method, data, succeedCallBack);\n\t\t}\n\t\t\n\t};\n\n\n\n\tconst onDeleteTree = (id: number) => {\n\t\tconst succeedCallBack = () => {\t\t\t\t\t\n\t\t\tdispatch(actActiveTabKey('filter'));\n\t\t\tdispatch(actShowTreeTab(false));\t\t\t\t\t\t\n\t\t\tfetchTreesAndStatuses();\t\t\t\t\n\t\t}\n\n\t\t//fetchUrl(`${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${id}`, \"DELETE\", {}, succeedCallBack);\n\t\tif (paramsRouter.cityName) {\n\t\t\tfetchUrl(urlTreeByCityAndID(paramsRouter.cityName, id), \"DELETE\", {}, succeedCallBack);\n\t\t}\n\t};\n\n\n\tconst onCloseTree = () => {\t\n\t\tdispatch(actMapMarkerState({ visible: false, position: {} }));\n\t\tdispatch(actNewTreeCreation(false));\n\t\tdispatch(actActiveTabKey('filter'));\n\t\tdispatch(actShowTreeTab(false));\n\t};\n\n\n\n\n\n\tconst fetchTreeData = async (idTree: number) => {\t\t\t\n\t\tlet url = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${idTree}/`;\n\t\tlet res = await fetch(url);\n\t\tlet data = await res.json();\n\t\treturn data;\n\t\t//setDataTreeForm(data);\t\t\n\t}\n\n\tconst onSubmitInsp = (data: any) => {\n\t\tlet method;\n\t\tlet url;\n\t\tif (data.id) {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.treeId}/inspections/${data.id}/`;\n\t\t\tmethod = \"PUT\";\n\t\t} else {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.treeId}/inspections/`;\n\t\t\tmethod = \"POST\";\n\t\t}\n\n\t\tconst succeedCallBack = () => {\n\t\t\tfetchTreeData(data.treeId).then(data => setDataTreeForm(data));\t\t\n\t\t\tfetchTreesAndStatuses();\n\t\t\tdispatch(actActiveTabKey('tree'));\n\t\t\tdispatch(actShowInspTab(false));\t\t\t\n\t\t}\n\n\t\tconsole.log('insp', data, url);\n\t\tfetchUrl(url, method, data, succeedCallBack);\n\t\t\t\n\t};\n\n\tconst onDeleteInsp = (data: InspItem | null) => {\n\t\tconst succeedCallBack = () => {\n\t\t\tif (data) {\n\t\t\t\tfetchTreeData(data.tree).then(data => setDataTreeForm(data));\t;\n\t\t\t\tdispatch(actActiveTabKey('tree'));\n\t\t\t\tdispatch(actShowInspTab(false));\t\t\t\t\t\t\n\t\t\t\tfetchTreesAndStatuses();\n\t\t\t}\t\t\n\t\t}\n\n\t\tif (data?.id) {\n\t\t\tconsole.log('DELETE', data)\n\t\t\t//path('citytree/<str:city>/trees/<str:treeid>/inspections/<str:inspid>/', views.citytreeInspectionItem, name=\"citytree-restapi-inspection-item\"),\n\t\t\tfetchUrl(`${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/0/inspections/${data.id}`, \"DELETE\", {}, succeedCallBack);\n\t\t}\t\n\t};\t\n\n\tconst onCloseInsp = () => {\t\t\n\t\tdispatch(actShowInspTab(false));\n\t\tdispatch(actActiveTabKey('tree'));\t\t\n\t};\t\n\n\tconst onNewInsp = (idTree: number) => {\n\t\tsetDataInspForm({tree: idTree});\n\t\tdispatch(actShowInspTab(true));\n\t\tdispatch(actActiveTabKey('insp'));\t\t\t\t\t\t\t\t\t\n\t\tdispatch(actShowSidebar(true));\t\t\t\t\n\n\t}\n\n\tconst onEditInsp = (data: any) => {\n\t\tconsole.log('onEditInsp', data);\t\t\n\t\tsetDataInspForm({...data}); //таким образом передается копия объекта, которая указывает на другой участок памяти, иначе useEffect не срабатывает у формы, а значит форма не перезаполняется, когда например чтото поменяли на форме, затем ее закрыли без сохранения и снова открыли, видим вместо актуальных данных, старые, которые не сохранялись\n\t\tdispatch(actShowInspTab(true));\n\t\tdispatch(actActiveTabKey('insp'));\t\t\t\t\t\t\t\t\t\n\t\tdispatch(actShowSidebar(true));\t\t\t\n\t}\t\n\n\tconst onClickInspPhotos = (data: any) => {\n\t\tconsole.log('onClickPhotos', data);\t\t\n\t\t\n\t\tconst images: string[] = [];\n\t\tif (data?.photo1) {\n\t\t\timages.push(`${data.photoServer}${data?.photo1}`);\n\t\t}\n\t\tif (data?.photo2) {\n\t\t\timages.push(`${data.photoServer}${data?.photo2}`);\n\t\t}\n\t\tif (data?.photo3) {\n\t\t\timages.push(`${data.photoServer}${data?.photo3}`);\n\t\t}\t\t\t\t\n\n\t\tif (images.length > 0) {\n\t\t\tsetImageSlider({visible: true, images: images});\n\t\t}\t\t\t\t\t\n\t}\t\t\n\n\tconst onClickEditCoords = (coord: {lat: string; lng: string}) => {\t\t\n\t\tdispatch(actMapMarkerState({ visible: true, position: coord }));\n\t}\n\t\t\n\n\n\tconst onClickMap = (e: any) => {\n\t\tif (rxCheckButtonNewMarker && !rxIsMobileDevice) {\n\t\t\tdispatch(actCheckButtonNewMarker(false));\n\n\t\t\tlet coord = { lat: '0', lng: '0' };\n\t\t\tcoord.lat = e.latlng.lat.toFixed(5);\n\t\t\tcoord.lng = e.latlng.lng.toFixed(5);\n\t\t\t\n\t\t\tdispatch(actMapMarkerState({ visible: true, position: coord }));\n\t\t\tdispatch(actNewTreeCreation(true));\n\n\t\t\tdispatch(actShowTreeTab(true));\n\t\t\tdispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t\t\tdispatch(actShowSidebar(true));\t\n\t\t}\t\t\n\t}\n\n\tconst onZoomEnd = (e: any) => {\n\t\tconsole.log('zoom', e.target._zoom);\n\t\tsetCurrentZoomMap(e.target._zoom);\n\t}\n\t\n\tconst onEachLayer = (layer: L.Layer, zoom: number) => {\n\t\t//@ts-ignore\n\t\tconst crowndiameter = layer?.feature?.properties?.lastinsp_crowndiameter;\n\t\tif (crowndiameter) {\n\t\t\t//@ts-ignore\n\t\t    layer.setRadius(ZoomToRadius(zoom, crowndiameter));                    \n\t\t\t\n\t\t} \t\t\n\t}\t\n\t\n\n\tconst onDragEndNewMarker = (LatLng: { lat: number; lng: number }) => {\n\t\t//console.log('onDragEndNewMarker',LatLng);\n\t\t//let coord = { lat: '0', lng: '0' };\n\t\t//coord.lat = LatLng.lat.toFixed(5);\n\t\t//coord.lng = LatLng.lng.toFixed(5);\n\t\t//setNewMarkerState({ visible: true, position: coord });\n\t\tdispatch(actMapMarkerState({ visible: true, position: LatLng }));\n\n\t};\n\n\tconst filterMapCallback = (feature: any): boolean => {\n\t\treturn filterDataMap(feature, rxDataFilters, authToken);\n\t};\n\n\n\tconst onSubmitFilter = (filter: {}) => {\n\t\tconsole.log(filter);\n\t\tdataHeatmapPoints = [];\n\t\t\n\t\trxDataTrees.dateTimeGenerated = Date.now(); // dateTimeGenerated is used like key parameter to update data on map, when it changed. <GeoJSON key={mainData.dateTimeGenerated}...\n\t\tdispatch(actDataFilters(filter));\t\n\n\t\tif (isMobileView) {\n\t\t\tdispatch(actShowSidebar(false))\n\t\t}\n\t};\n\n\n\n\tfunction pointToLayerTrees(feature: any, latlng: L.LatLng): any {   \n\t\tif (!rxCheckButtonHeatmap) {\n\t\t\t// change color of point depends on them status\n\t\t\tif (feature.properties.lastinsp_status) {\n\t\t\t\tif (Array.isArray(rxDictStatuses)) {\n\t\t\t\t\trxDictStatuses.forEach(element => {\n\t\t\t\t\tif (element.id === feature.properties.lastinsp_status) {\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.fillColor = `#${element.hexcolor}`;\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.color = `#${element.hexcolor}`;\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.radius = ZoomToRadius(currentZoomMap, feature.properties.lastinsp_crowndiameter);\n\t\t\t\t\t}\t\n\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t \n\t\t\treturn L.circle(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick);\n\t\t}\n\t\t\treturn null;\n\t};\n\n\tfunction ZoomToRadius (zoom: number, crowndiameter: number) {\n\t\t// + 21...13 -\n\t\tlet r = Math.floor(crowndiameter / 2);\n\t\tif (zoom < 19) r = r + (18-zoom)*5;\n\t\tif (r < 2) r=2;\n\t\treturn r; \t\t\n\t}\t\n\n\n\n\treturn (\t\t\n\t\t<MainWrapper cityName={paramsRouter.cityName}>\n\t\t\t<>\t\t\t\t\t\t\t\t\t\n\t\t\t\t<Sidebar>\n\t\t\t\t\t<Tabs\n\t\t\t\t\t\tid=\"controlled-tab-example\"\n\t\t\t\t\t\tactiveKey={rxActiveTabKey}\n\t\t\t\t\t\tonSelect={(k) => dispatch(actActiveTabKey(k))}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\teventKey=\"filter\"\n\t\t\t\t\t\t\ttitle={t<string>(\"sidebar.filterTab.title\")}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"form-wrapper\">\n\t\t\t\t\t\t\t\t<FormFilter onSubmitFilter={onSubmitFilter}  \n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\teventKey=\"tree\"\n\t\t\t\t\t\t\ttitle={t<string>(\n\t\t\t\t\t\t\t\t\"sidebar.treeTab.title\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\ttabClassName={\n\t\t\t\t\t\t\t\t!rxShowTreeTab ? \"d-none\" : \"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"form-wrapper\">\n\t\t\t\t\t\t\t\t<FormTree \n\t\t\t\t\t\t\t\t\tonSubmitTree={onSubmitTree}\n\t\t\t\t\t\t\t\t\tonDeleteTree={onDeleteTree}\n\t\t\t\t\t\t\t\t\tonCloseTree={onCloseTree} \n\t\t\t\t\t\t\t\t\tonNewInsp={onNewInsp}\n\t\t\t\t\t\t\t\t\tonEditInsp={onEditInsp}\n\t\t\t\t\t\t\t\t\tonClickInspPhotos={onClickInspPhotos}\n\t\t\t\t\t\t\t\t\tonClickEditCoords={onClickEditCoords}\n\t\t\t\t\t\t\t\t\tdataTreeForm={dataTreeForm}\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tcity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\tsigningS3Url={URL_GENERATE_S3_URLKEY}\n\t\t\t\t\t\t\t\t\t//currentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\teventKey=\"insp\"\n\t\t\t\t\t\t\ttitle={t<string>(\n\t\t\t\t\t\t\t\t\"sidebar.inspTab.title\"\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\ttabClassName={\n\t\t\t\t\t\t\t\t!rxShowInspTab ? \"d-none\" : \"\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"form-wrapper\">\n\t\t\t\t\t\t\t\t<FormInspection \n\t\t\t\t\t\t\t\t\tonSubmitInsp={onSubmitInsp}\n\t\t\t\t\t\t\t\t\tonDeleteInsp={onDeleteInsp}\n\t\t\t\t\t\t\t\t\tonCloseInsp={onCloseInsp} \n\t\t\t\t\t\t\t\t\tdataInspForm={dataInspForm}\n\t\t\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\t\t\tcity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\tsigningS3Url={URL_GENERATE_S3_URLKEY}\n\t\t\t\t\t\t\t\t\t//currentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Tab>\t\t\t\t\t\t\t\t\n\t\t\t\t\t</Tabs>\n\t\t\t\t</Sidebar>\n\n\t\t\t\t<div id=\"page-content-wrapper\">\n\t\t\t\t\t<MenuGlobal\n\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t//onClickShowMenu={ () => dispatch(actShowSidebar(!rxShowSidebar)) }\n\t\t\t\t\t\tauthToken={authToken}\n\t\t\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\t\t\tappname=\"citytree\"\n\t\t\t\t\t/>\n\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"container-fluid\"\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tpaddingRight: \"0px\",\n\t\t\t\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\tmainData={rxDataTrees}\n\t\t\t\t\t\t\tappname=\"citytree\"\n\t\t\t\t\t\t\tdataHeatmapPoints={dataHeatmapPoints}\n\t\t\t\t\t\t\t//@ts-ignore\n\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\tonClickMap={onClickMap}\n\t\t\t\t\t\t\tonZoomEnd={onZoomEnd}\n\t\t\t\t\t\t\tonEachLayer={onEachLayer}\n\t\t\t\t\t\t\t//={onMarkerClick}\n\t\t\t\t\t\t\tonDragEndNewMarker={onDragEndNewMarker}\n\t\t\t\t\t\t\tpointToLayerCallback={pointToLayerTrees}\n\t\t\t\t\t\t\tfilterMapCallback={filterMapCallback}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\n\t\t\t\t{rxShowOkCancelMobileMarker && (\n\t\t\t\t\t<ButtonOkCancelMobileMarker/>\n\t\t\t\t)}\n\n\t\t\t\t<ImageSlider \n\t\t\t\t\tvisible={imageSlider.visible} \n\t\t\t\t\tsetVisible={setImageSlider} \n\t\t\t\t\timages={imageSlider.images}\n\t\t\t\t/>\n\n\t\t\t\t<TreePreviewModal \n\t\t\t\t\tvisible={treePreview.visible} \n\t\t\t\t\tdata={treePreview.data}\n\t\t\t\t\tsetTreePreview={setTreePreview}\n\t\t\t\t\tonButtonEditClick={onButtonEditClick} \t\t\t\t\t\n\t\t\t\t/>\t\t\t\t\n\n\t\t\t\t<LoginModalForm setAuthToken={setAuthToken}/>\n\t\t\t\t<RegisterModalForm setAuthToken={setAuthToken}/> \t\t\t\n\t\t\t</>\n\t\t</MainWrapper>\n\n\t);\n\n\n\n\n\n\n\n\n\n\tfunction fetchUrl(url: string, method: string, bodyObject?: any, callBackSucceed?: () => void) {\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\t\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\t\tif (authToken?.access) {\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + authToken.access);\n\t\t}\n\n\n\t\tconsole.log('myHeaders',myHeaders.get('Authorization'));\n\n\t\tfetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(bodyObject),\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\talert(\n\t\t\t\t\t\tresponse.statusText +\n\t\t\t\t\t\t\t\" (\" +\n\t\t\t\t\t\t\tresponse.status +\n\t\t\t\t\t\t\t\")\\n\\n\" +\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tif (callBackSucceed) {\n\t\t\t\t\tcallBackSucceed();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n}\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\nimport translationEN from './locales/en/translation.json';\r\nimport translationBG from './locales/bg/translation.json';\r\nconst availableLanguages = ['en', 'bg'];\r\n\r\n\r\ni18n\r\n    .use(LanguageDetector)\r\n    .use(initReactI18next) // passes i18n down to react-i18next\r\n    .init({\r\n        // the translations\r\n        // (tip move them in a JSON file and import them,\r\n        // or even better, manage them via a UI: https://react.i18next.com/guides/multiple-translation-files#manage-your-translations-with-a-management-gui)\r\n        resources: {\r\n            en: {\r\n                translation: translationEN\r\n            },\r\n\r\n            bg: {\r\n                translation: translationBG\r\n            }      \r\n        },\r\n        //lng: \"bg\", // if you're using a language detector, do not define the lng option\r\n        //lng: localStorage.getItem('lng') || 'en',\r\n        fallbackLng: \"en\",\r\n\r\n        interpolation: {\r\n        escapeValue: false // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\nexport default i18n;","const initialState = {\r\n    showSidebar: false,\r\n    showTreeTab: false,\r\n    showInspTab: false,\r\n    activeTabKey: 'filter',\r\n    loginModalShow: false,\r\n    registerModalShow: false,\r\n\r\n    mapBaseLayerName: 'Default',\r\n    mapMarkerState: {\r\n\t\tvisible: false,\r\n\t\tposition: {},\r\n\t\tisMobile: false\r\n\t},\r\n    newTreeCreation: false,\r\n    showOkCancelMobileMarker: false,\r\n    checkButtonNewMarker: false,\r\n    checkButtonHeatmap: false,\r\n    checkButtonGPS: false,\r\n\r\n    isMobileDevice: false\r\n}\r\n\r\nconst uiReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'SHOWSIDEBAR':\r\n            return {\r\n                ...state,\r\n                showSidebar: action.payload\r\n            }\r\n        case 'SHOWTREETAB':\r\n            return {\r\n                ...state,\r\n                showTreeTab: action.payload\r\n            }   \r\n        case 'SHOWINSPTAB':\r\n            return {\r\n                ...state,\r\n                showInspTab: action.payload\r\n            }                      \r\n        case 'ACTIVETABKEY':\r\n            return {\r\n                ...state,\r\n                activeTabKey: action.payload\r\n            }                                              \r\n        case 'LOGINMODALSHOW':\r\n            return {\r\n                ...state,\r\n                loginModalShow: action.payload\r\n            }\r\n\r\n        case 'REGISTERMODALSHOW':\r\n            return {\r\n                ...state,\r\n                registerModalShow: action.payload\r\n            }    \r\n        \r\n\r\n\r\n        case 'MAPBASELAYERNAME':\r\n            return {\r\n                ...state,\r\n                mapBaseLayerName: action.payload\r\n            } \r\n            \r\n        case 'MAPMARKERSTATE':\r\n            return {\r\n                ...state,\r\n                mapMarkerState: action.payload\r\n            } \r\n\r\n        case 'NEWTREECREATION':\r\n            return {\r\n                ...state,\r\n                newTreeCreation: action.payload\r\n            }             \r\n\r\n        case 'SHOWOKCANCELMOBILEMARKER':\r\n            return {\r\n                ...state,\r\n                showOkCancelMobileMarker: action.payload\r\n            }              \r\n        \r\n        case 'CHECKBUTTONNEWMARKER':\r\n            return {\r\n                ...state,\r\n                checkButtonNewMarker: action.payload\r\n            }\r\n        case 'CHECKBUTTONHEATMAP':\r\n            return {\r\n                ...state,\r\n                checkButtonHeatmap: action.payload\r\n            }            \r\n        case 'CHECKBUTTONGPS':\r\n            return {\r\n                ...state,\r\n                checkButtonGPS: action.payload\r\n            }            \r\n                        \r\n\r\n\r\n        case 'ISMOBILEDEVICE':\r\n            return {\r\n                ...state,\r\n                isMobileDevice: action.payload\r\n            }\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default uiReducer","const initialState = {\r\n    dataTrees: [],\r\n    dataFilters: {},\r\n    dictStatuses: [],\r\n    dictSpecieses: [],\r\n    dictCareTypes: [],\r\n    dictRemarks: [], \r\n    dictPlaceTypes: [],\r\n    dictIrrigationMethods: [], \r\n    dictGroupSpec: [],\r\n    dictTypeSpec: [] \r\n}\r\n\r\nconst dataReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'DATATREES':\r\n            return {\r\n                ...state,\r\n                dataTrees: action.payload\r\n            }\r\n\r\n        case 'DICTSTATUSES':\r\n            return {\r\n                ...state,\r\n                dictStatuses: action.payload\r\n            }\r\n\r\n        case 'DICTSPECIESES':\r\n            return {\r\n                ...state,\r\n                dictSpecieses: action.payload\r\n            }      \r\n\r\n        case 'DICTCARETYPES':\r\n            return {\r\n                ...state,\r\n                dictCareTypes: action.payload\r\n            }  \r\n\r\n        case 'DICTREMARKS':\r\n            return {\r\n                ...state,\r\n                dictRemarks: action.payload\r\n            }  \r\n\r\n        case 'DICTPLACETYPES':\r\n            return {\r\n                ...state,\r\n                dictPlaceTypes: action.payload\r\n            }    \r\n            \r\n        case 'DICTIRRIGATIONMETHODS':\r\n            return {\r\n                ...state,\r\n                dictIrrigationMethods: action.payload\r\n            }   \r\n            \r\n        case 'DICTGROUPSPECS':\r\n            return {\r\n                ...state,\r\n                dictGroupSpec: action.payload\r\n            }             \r\n            \r\n        case 'DICTTYPESPECS':\r\n            return {\r\n                ...state,\r\n                dictTypeSpec: action.payload\r\n            }             \r\n\r\n        case 'DATAFILTERS':\r\n            return {\r\n                ...state,\r\n                dataFilters: action.payload\r\n            }\r\n\r\n\r\n        default:\r\n            return state            \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default dataReducer","import uiReducer from './userInterface'\r\nimport dataReducer from './dataApp'\r\nimport { combineReducers } from 'redux'\r\n\r\nexport const allReducers = combineReducers({\r\n    uiReducer,\r\n    dataReducer    \r\n});\r\n\r\n//export default allReducers\r\nexport type RootState = ReturnType<typeof allReducers>","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './sidebar.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18nextConf';\nimport { createStore } from 'redux';\nimport { allReducers } from './reducers/index.ts';\nimport { Provider } from 'react-redux';\n\n// Importing the Bootstrap CSS\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst store = createStore(\n  allReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n  <React.StrictMode>\n    <BrowserRouter basename=\"/citytree\">\n      <Routes>\n        <Route path=\"/\" element={<App />}>\n          <Route path=\":cityName\" element={<App />} >\n            <Route path=\":treeId\" element={<App />} />\n          </Route>               \n        </Route>\n      </Routes>\n    </BrowserRouter>\n  </React.StrictMode>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}