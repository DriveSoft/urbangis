(this.webpackJsonpcitytree=this.webpackJsonpcitytree||[]).push([[0],{141:function(e){e.exports=JSON.parse('{"menu":{"menu":"Menu","home":"Home","appMaps":{"title":"Maps","roadaccident":"Road traffic accidents","citytree":"City trees","urbanobject":"Urban objects"},"city":"City","signin":"Signin","logout":"Logout"},"sidebar":{"filterTab":{"title":"Filters","species":"Species","status":"Status","careType":"Recommendations","remark":"Remarks","placeType":"Location","irrigationMethod":"Irrigation method","plantedFrom":"Planted from","plantedTo":"To","dateAddedFrom":"Added from","dateAddedTo":"To","height":"Height (m)","trunkGirth":"Girth (cm)","crownDiameter":"Crown (m)","comment":"Comment","from":"From","to":"To","showMyTrees":"Show only my trees","clear":"Clear","search":"Search","maneuversList":{"idLngForward":"Forward","idLngRightTurn":"Right turn","idLngLeftTurn":"Left turn","idLngBackward":"Backward"},"typeViolationsList":{"idLngRunningRedLight":"Running red light","idLngPriorityViolation":"Priority violation","idLngSelfCrashed":"Self-crashed","idLngDrunkDriving":"Drunk driving"},"violatorsList":{"idLngDriver":"Driver","idLngMotorcyclist":"Motorcyclist","idLngCyclist":"Cyclist","idLngPedestrian":"Pedestrian"}},"treeTab":{"title":"Tree","latLng":"Lat/Lng","species":"Species","speciescomment":"Comment on species (if you can\'t find the species in the list above)","comment":"Comment about the tree","placetype":"Location","irrigationmethod":"Irrigation method","dateplanted":"Tree planted","googlestreeturl":"Link to Google Street View","inspActionsTable":"Inspections and Actions","newInspButton":"New inspection","newActButton":"New action","firstInspection":"Make the first tree inspection","heightTree":"Height (m)","diameterTree":"Crown diameter (m)","girthTree":"Trunk girth (cm)","status":"Status","remarks":"Remarks","careTypes":"Recommendations","delete":"Delete","close":"Close","save":"Save","confirmDeleting":"Are you sure you want to delete this tree?"},"inspTab":{"title":"Inspection","delete":"Delete","close":"Close","save":"Save","confirmDeleting":"Are you sure you want to delete this inspection?"}},"TreePreviewModal":{"status":"Status","parameters":"Parameters","dateplanted":"Tree planted","googlestreeturl":"Google Street View","remarks":"Remarks","careTypes":"Recommendations","comment":"Comment","heightTree":"Height (m)","girthTree":"Trunk girth (cm)","diameterTree":"Crown D.(m)","edit":"Edit","close":"Close"},"loginForm":{"title":"SIGN IN","username":"Username","password":"Password","rememberMe":"Remember me","wrongUsernamePassword.":"Wrong username or password.","login":"LOGIN","dontHaveAccount":"Don\'t have account?","signUp":"Sign up"},"registerForm":{"title":"SIGN UP","username":"Username","password":"Password","confirmPassword":"Confirm password","email":"E-mail","firstNameOptional":"Firstname (optional)","lastNameOptional":"Lastname (optional)","register":"Register","alreadyHaveAccount":"Already have an account?","login":"Login"},"permsMessages":{"tree":{"view_tree":"You do not have access to tree information.","add_tree":"You do not have access to add new trees.","change_tree":"You do not have access to modify tree information.","can_change_not_own_tree_record":"You do not have access to modify tree information if the tree was added by another user.","delete_tree":"You do not have access to delete tree information.","can_delete_not_own_tree_record":"You do not have access to delete tree information if the tree was added by another user."},"inspection":{"view_inspection":"You do not have access to inspection information.","add_inspection":"You do not have access to add new inspections.","change_inspection":"You do not have access to modify inspections.","can_change_not_own_insp_record":"You do not have access to modify inspection information if the inspection was added by another user.","delete_inspection":"You do not have access to delete inspection information.","can_delete_not_own_insp_record":"You do not have access to delete inspection information if the inspection was added by another user."}},"words":{"hello":"Hello","requiredField":"Required field","deleting":"Deleting","confirmDeleting":"Are you sure you want to delete this accident?","delete":"Delete","cancel":"Cancel","done":"Done","select":"Select..."}}')},142:function(e){e.exports=JSON.parse('{"menu":{"menu":"\u041c\u0435\u043d\u044e","home":"\u041d\u0430\u0447\u0430\u043b\u043e","appMaps":{"title":"\u041a\u0430\u0440\u0442\u0438","roadaccident":"\u041f\u044a\u0442\u043d\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u0438 \u043f\u0440\u043e\u0438\u0437\u0448\u0435\u0441\u0442\u0432\u0438\u044f","citytree":"\u0413\u0440\u0430\u0434\u0441\u043a\u0430 \u0440\u0430\u0441\u0442\u0438\u0442\u0435\u043b\u043d\u043e\u0441\u0442","urbanobject":"\u0413\u0440\u0430\u0434\u0441\u043a\u0438 \u043e\u0431\u0435\u043a\u0442\u0438"},"city":"\u0413\u0440\u0430\u0434","signin":"\u0412\u0445\u043e\u0434","logout":"\u0418\u0437\u0445\u043e\u0434"},"sidebar":{"filterTab":{"title":"\u0422\u044a\u0440\u0441\u0435\u043d\u0435","species":"\u0412\u0438\u0434","status":"\u041e\u0446\u0435\u043d\u043a\u0430","careType":"\u041f\u0440\u0435\u043f\u043e\u0440\u044a\u043a\u0438","remark":"\u0411\u0435\u043b\u0435\u0436\u043a\u0438","placeType":"\u0420\u0430\u0437\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435","irrigationMethod":"\u041c\u0435\u0442\u043e\u0434 \u043d\u0430 \u043f\u043e\u043b\u0438\u0432\u0430\u043d\u0435","plantedFrom":"\u0417\u0430\u0441\u0430\u0434\u0435\u043d\u043e \u043e\u0442","plantedTo":"\u0414\u043e","dateAddedFrom":"\u0414\u043e\u0431\u0430\u0432\u0435\u043d\u043e \u043e\u0442","dateAddedTo":"\u0414\u043e","comment":"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440","from":"\u041e\u0442","to":"\u0414\u043e","height":"\u0412\u0438\u0441\u043e\u0447\u0438\u043d\u0430 (\u043c)","trunkGirth":"\u0421\u0442\u0432\u043e\u043b (\u0441\u043c)","crownDiameter":"\u041a\u043e\u0440\u043e\u043d\u0430 (\u043c)","showMyTrees":"\u041f\u043e\u043a\u0430\u0436\u0438 \u0441\u0430\u043c\u043e \u043c\u043e\u0438\u0442\u0435 \u0434\u044a\u0440\u0432\u0435\u0442\u0430","clear":"\u0418\u0437\u0447\u0438\u0441\u0442\u0438","search":"\u0422\u044a\u0440\u0441\u0438","maneuversList":{"idLngForward":"\u041f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u043f\u0440\u0435\u0434","idLngRightTurn":"\u041f\u0440\u0438 \u0437\u0430\u0432\u043e\u0439 \u043d\u0430\u0434\u044f\u0441\u043d\u043e","idLngLeftTurn":"\u041f\u0440\u0438 \u0437\u0430\u0432\u043e\u0439 \u043d\u0430\u043b\u044f\u0432\u043e","idLngBackward":"\u041f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0437\u0430\u0434"},"typeViolationsList":{"idLngRunningRedLight":"\u041f\u0440\u0435\u043c\u0438\u043d\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0447\u0435\u0440\u0432\u0435\u043d\u043e","idLngPriorityViolation":"\u041e\u0442\u043d\u0435\u043c\u0430\u043d\u043e \u043d\u0430 \u043f\u0440\u0435\u0434\u0438\u043c\u0441\u0442\u0432\u043e","idLngSelfCrashed":"\u0421\u0430\u043c\u043e\u043a\u0430\u0442\u0430\u0441\u0442\u0440\u043e\u0444\u0438\u0440\u0430\u043b","idLngDrunkDriving":"\u0423\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u043d\u0430 \u0430\u043b\u043a\u043e\u0445\u043e\u043b/\u043d\u0430\u0440\u043a\u043e\u0442\u0438\u0446\u0438"},"violatorsList":{"idLngDriver":"\u0412\u043e\u0434\u0430\u0447","idLngMotorcyclist":"\u041c\u043e\u0442\u043e\u0446\u0438\u043a\u043b\u0438\u0441\u0442","idLngCyclist":"\u0412\u0435\u043b\u043e\u0441\u0438\u043f\u0435\u0434\u0438\u0441\u0442","idLngPedestrian":"\u041f\u0435\u0448\u0435\u0445\u043e\u0434\u0435\u0446"}},"treeTab":{"title":"\u0414\u044a\u0440\u0432\u043e","latLng":"Lat/Lng","species":"\u0412\u0438\u0434","speciescomment":"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u043e\u0442\u043d\u043e\u0441\u043d\u043e \u0432\u0438\u0434 (\u0430\u043a\u043e \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u0434\u0430 \u043d\u0430\u043c\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434\u0430 \u0432 \u0441\u043f\u0438\u0441\u044a\u043a\u0430 \u043f\u043e-\u0433\u043e\u0440\u0435)","comment":"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u043e","placetype":"\u0420\u0430\u0437\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435","irrigationmethod":"\u041c\u0435\u0442\u043e\u0434 \u043d\u0430 \u043f\u043e\u043b\u0438\u0432\u0430\u043d\u0435","dateplanted":"\u0417\u0430\u0441\u0430\u0434\u0435\u043d\u043e","googlestreeturl":"\u041b\u0438\u043d\u043a \u043a\u044a\u043c Google Street View","inspActionsTable":"\u041f\u0440\u0435\u0433\u043b\u0435\u0434\u0438 \u0438 \u0434\u0435\u0439\u043d\u043e\u0441\u0442\u0438","newInspButton":"\u041d\u043e\u0432 \u043f\u0440\u0435\u0433\u043b\u0435\u0434","newActButton":"\u041d\u043e\u0432\u0430 \u0434\u0435\u0439\u043d\u043e\u0441\u0442","firstInspection":"\u041d\u0430\u043f\u0440\u0430\u0432\u0435\u0442\u0435 \u043f\u044a\u0440\u0432 \u043f\u0440\u0435\u0433\u043b\u0435\u0434 \u0437\u0430 \u0442\u043e\u0432\u0430 \u0434\u044a\u0440\u0432\u043e","heightTree":"\u0412\u0438\u0441\u043e\u0447\u0438\u043d\u0430 (\u043c)","diameterTree":"\u0414\u0438\u0430\u043c\u0435\u0442\u044a\u0440 \u043d\u0430 \u043a\u043e\u0440\u043e\u043d\u0430\u0442\u0430 (\u043c)","girthTree":"\u041e\u0431\u0438\u043a\u043e\u043b\u043a\u0430 \u043d\u0430 \u0441\u0442\u0432\u043e\u043b\u0430 (\u0441\u043c)","status":"\u041e\u0446\u0435\u043d\u043a\u0430","remarks":"\u0411\u0435\u043b\u0435\u0436\u043a\u0438","careTypes":"\u041f\u0440\u0435\u043f\u043e\u0440\u044a\u043a\u0438","delete":"\u0418\u0437\u0442\u0440\u0438\u0439","close":"\u0418\u0437\u0445\u043e\u0434","save":"\u0417\u0430\u043f\u0430\u0437\u0438","confirmDeleting":"\u041d\u0430\u0438\u0441\u0442\u0438\u043d\u0430 \u043b\u0438 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0442\u043e\u0432\u0430 \u0434\u044a\u0440\u0432\u043e?"},"inspTab":{"title":"\u041f\u0440\u0435\u0433\u043b\u0435\u0434","delete":"\u0418\u0437\u0442\u0440\u0438\u0439","close":"\u0418\u0437\u0445\u043e\u0434","save":"\u0417\u0430\u043f\u0430\u0437\u0438","confirmDeleting":"\u041d\u0430\u0438\u0441\u0442\u0438\u043d\u0430 \u043b\u0438 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0442\u043e\u0437\u0438 \u043f\u0440\u0435\u0433\u043b\u0435\u0434?"}},"TreePreviewModal":{"status":"\u041e\u0446\u0435\u043d\u043a\u0430","parameters":"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0438","dateplanted":"\u0417\u0430\u0441\u0430\u0434\u0435\u043d\u043e","googlestreeturl":"Google Street View","remarks":"\u0411\u0435\u043b\u0435\u0436\u043a\u0438","careTypes":"\u041f\u0440\u0435\u043f\u043e\u0440\u044a\u043a\u0438","comment":"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440","heightTree":"\u0412\u0438\u0441\u043e\u0447\u0438\u043d\u0430 (\u043c)","girthTree":"\u0421\u0442\u0432\u043e\u043b\u044a\u0442 (\u0441\u043c)","diameterTree":"\u041a\u043e\u0440\u043e\u043d\u0430\u0442\u0430 (\u043c)","edit":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u0430\u043d\u0435","close":"\u0418\u0437\u0445\u043e\u0434"},"loginForm":{"title":"\u0412\u0445\u043e\u0434","username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","password":"\u041f\u0430\u0440\u043e\u043b\u0430","rememberMe":"\u0417\u0430\u043f\u043e\u043c\u043d\u0438 \u043c\u0435","wrongUsernamePassword":"\u0413\u0440\u0435\u0448\u043d\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435 \u0438/\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430.","login":"\u0412\u0425\u041e\u0414","dontHaveAccount":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0430\u043a\u0430\u0443\u043d\u0442?","signUp":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u0441\u0435"},"registerForm":{"title":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","password":"\u041f\u0430\u0440\u043e\u043b\u0430","confirmPassword":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438 \u043f\u0430\u0440\u043e\u043b\u0430","email":"\u0418\u043c\u0435\u0439\u043b","firstNameOptional":"\u0418\u043c\u0435 (\u043d\u0435\u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e)","lastNameOptional":"\u0424\u0430\u043c\u0438\u043b\u0438\u044f (\u043d\u0435\u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e)","register":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u043c\u0435","alreadyHaveAccount":"\u0412\u0435\u0447\u0435 \u0438\u043c\u0430\u0442\u0435 \u0430\u043a\u0430\u0443\u043d\u0442?","login":"\u0412\u0445\u043e\u0434"},"permsMessages":{"tree":{"view_tree":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u043a\u044a\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\u0442\u0430 \u0437\u0430 \u0434\u044a\u0440\u0432\u043e.","add_tree":"\u041d\u044f\u043c\u0430 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u0434\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430.","change_tree":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430.","can_change_not_own_tree_record":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430\u0442\u0430, \u043a\u043e\u0439\u0442\u043e \u0441\u0430 \u0431\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043e\u0442 \u0434\u0440\u0443\u0433 \u043f\u043e\u043b\u0437\u043e\u0432\u0430\u0442\u0435\u043b.","delete_tree":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u0435\u043c\u0430\u0445\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430\u0442\u0430.","can_delete_not_own_tree_record":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u0435\u043c\u0430\u0445\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430\u0442\u0430, \u043a\u043e\u0439\u0442\u043e \u0441\u0430 \u0431\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043e\u0442 \u0434\u0440\u0443\u0433 \u043f\u043e\u043b\u0437\u043e\u0432\u0430\u0442\u0435\u043b."},"inspection":{"view_inspection":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u043a\u044a\u043c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f\u0442\u0430 \u0437\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434 \u043d\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430\u0442\u0430.","add_inspection":"\u041d\u044f\u043c\u0430 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u0434\u043e\u0431\u0430\u0432\u044f\u043d\u0435 \u043d\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0438 \u0437\u0430 \u0434\u044a\u0440\u0432\u0435\u0442\u0430\u0442\u0430.","change_inspection":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0438.","can_change_not_own_insp_record":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u043e\u043c\u044f\u043d\u0430 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0438, \u043a\u043e\u0439\u0442\u043e \u0441\u0430 \u0431\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043e\u0442 \u0434\u0440\u0443\u0433 \u043f\u043e\u043b\u0437\u043e\u0432\u0430\u0442\u0435\u043b.","delete_inspection":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u0435\u043c\u0430\u0445\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0438.","can_delete_not_own_insp_record":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0434\u043e\u0441\u0442\u044a\u043f \u0437\u0430 \u043f\u0440\u0435\u043c\u0430\u0445\u0432\u0430\u043d\u0435 \u043d\u0430 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0437\u0430 \u043f\u0440\u0435\u0433\u043b\u0435\u0434\u0438, \u043a\u043e\u0439\u0442\u043e \u0441\u0430 \u0431\u0438\u043b\u0438 \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043e\u0442 \u0434\u0440\u0443\u0433 \u043f\u043e\u043b\u0437\u043e\u0432\u0430\u0442\u0435\u043b."}},"words":{"hello":"\u0417\u0434\u0440\u0430\u0432\u0435\u0439","requiredField":"\u041f\u043e\u043b\u0435\u0442\u043e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e","deleting":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435","delete":"\u0418\u0437\u0442\u0440\u0438\u0439","cancel":"\u041e\u0442\u043c\u0435\u043d\u0438","done":"\u0413\u043e\u0442\u043e\u0432\u043e","select":"\u0418\u0437\u0431\u0435\u0440\u0438..."}}')},152:function(e,t,r){},154:function(e,t,r){},166:function(e,t,r){},183:function(e,t,r){},184:function(e,t,r){},186:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(27),o=r.n(i),c=r(91),s=r(15),l=(r(152),r(14)),d=r(3),u=r(6),b=r.n(u),p=(r(154),r(17)),m=r.n(p),j=r(135),h=r(121),f=r(68),O=r(51),v=r(70),g=r(202),x=r(11),y=function(e){return{type:"NEWTREECREATION",payload:e}},w=function(e){return{type:"SHOWSIDEBAR",payload:e}},T=function(e){return{type:"SHOWTREETAB",payload:e}},k=function(e){return{type:"SHOWINSPTAB",payload:e}},A=function(e){return{type:"ACTIVETABKEY",payload:e}},I=function(e){return{type:"LOGINMODALSHOW",payload:e}},S=function(e){return{type:"REGISTERMODALSHOW",payload:e}},F=function(e){return{type:"MAPBASELAYERNAME",payload:e}},C=function(e){return{type:"MAPMARKERSTATE",payload:e}},E=function(e){return{type:"SHOWOKCANCELMOBILEMARKER",payload:e}},M=function(e){return{type:"CHECKBUTTONNEWMARKER",payload:e}},N=function(e){return{type:"CHECKBUTTONGPS",payload:e}},L=function(e){return{type:"DATAPERMISSIONS",payload:e}},R=function(e){return{type:"DATATREES",payload:e}},D=r(1);var B=function(e){var t,r=e.currentCity,a=e.appname,i=e.authToken,o=e.setAuthToken,s=Object(x.b)(),u=Object(x.c)((function(e){return e.uiReducer.showSidebar})),p=Object(n.useState)(!1),m=Object(d.a)(p,2),y=m[0],T=m[1],k=Object(n.useState)([]),A=Object(d.a)(k,2),S=A[0],F=A[1],C=Object(g.a)(),E=C.t,M=C.i18n;function N(e){M.changeLanguage(e)}return Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://127.0.0.1:8000/api/","cities/"));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,F(r),console.log(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(D.jsx)(h.a,{bg:"light",expand:"lg",expanded:y,collapseOnSelect:!0,children:Object(D.jsxs)(j.a,{children:[Object(D.jsx)(v.a,{className:"start-0",variant:"outline-primary",id:"menu-toggle",onClick:function(){return s(w(!u))},children:E("menu.menu")})," ",Object(D.jsx)(h.a.Toggle,{"aria-controls":"basic-navbar-nav",onClick:function(){return T(!y)}}),Object(D.jsx)(h.a.Collapse,{id:"basic-navbar-nav",children:Object(D.jsxs)(f.a,{className:"ms-auto",children:[Object(D.jsx)(f.a.Link,{href:"/",children:E("menu.home")}),Object(D.jsxs)(O.a,{title:E("menu.appMaps.title"),id:"basic-nav-dropdown",children:[Object(D.jsx)(O.a.Item,{href:"/roadaccident/".concat(r),active:"roadaccident"===a,children:E("menu.appMaps.roadaccident")},"1"),Object(D.jsx)(O.a.Item,{href:"/citytree/".concat(r),active:"citytree"===a,children:E("menu.appMaps.citytree")},"2"),Object(D.jsx)(O.a.Item,{href:"/urbanobject/".concat(r),active:"urbanobject"===a,children:E("menu.appMaps.urbanobject")},"3")]}),Object(D.jsx)(O.a,{title:E("menu.city"),id:"basic-nav-dropdown",children:S.map((function(e){return Object(D.jsx)(O.a.Item,{as:c.b,to:"/".concat(e.sysname),active:r===e.sysname,children:e.cityname},e.id)}))}),Object(D.jsxs)(O.a,{title:"Lang",id:"basic-nav-dropdown",children:[Object(D.jsx)(O.a.Item,{active:"en"===M.language||"en-US"===M.language||"en-GB"===M.language,value:"en",onClick:function(){return N("en")},children:"English"},"1"),Object(D.jsx)(O.a.Item,{active:"bg"===M.language,value:"bg",onClick:function(){return N("bg")},children:"Bulgarian"},"2")]}),i?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(f.a.Link,{children:"".concat(E("words.hello"),", ").concat(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.name)}),Object(D.jsx)(f.a.Link,{href:"#",onClick:function(){o(null)},children:E("menu.logout")})]}):Object(D.jsx)(f.a.Link,{href:"#",onClick:function(){return s(I(!0))},children:E("menu.signin")})]})})]})})},G=r(194),P=r(195),z=r(196),W=r(192),H=r(197),Y=r(198);r(165),r(166),r(167),r(168),r(169);var V=function(e,t,r,n){return m.a.easyButton({position:"topright",states:[{title:"",stateName:"off",icon:'<i class="'.concat(t,'"></i>'),onClick:function(e){e.state("on"),e.button.style.backgroundColor="red",n(!0)}},{title:"",stateName:"on",icon:'<i class="'.concat(r,'"></i>'),onClick:function(e){e.state("off"),e.button.style.backgroundColor="white",n(!1)}}]}).addTo(e)},U=r(193),K=r(144);var q,J,Z,Q=function(e){var t=e.mapBaseLayerName;return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(W.a.BaseLayer,{checked:"Default"===t,name:"Default",children:Object(D.jsx)(U.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/streets-v11",maxZoom:21,tileSize:512,zoomOffset:-1})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Dark"===t,name:"Dark",children:Object(D.jsx)(U.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/dark-v10",tileSize:512,zoomOffset:-1})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Google"===t,name:"Google",children:Object(D.jsx)(U.a,{attribution:"Google",url:"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Sat1"===t,name:"Sat1",children:Object(D.jsx)(K.a,{bingkey:"AniAD3xsGTaSbK1pa0_UkWS1CldG0nGI7r55MlVZqHhyKil9rD9dFK8536u8hTj1",type:"Aerial"})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Sat2"===t,name:"Sat2",children:Object(D.jsx)(U.a,{attribution:"Google",url:"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Sat3"===t,name:"Sat3",children:Object(D.jsx)(U.a,{attribution:"Tiles \xa9 Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),Object(D.jsx)(W.a.BaseLayer,{checked:"Sat4"===t,name:"Sat4",children:Object(D.jsx)(U.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/satellite-v9",tileSize:512,maxZoom:21,zoomOffset:-1})})]})},X=(r(171),r(136)),_=r.n(X),$=(r(173),m.a.icon({iconUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAABSCAYAAAAWy4frAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QwKDigoqk+DbgAAEBNJREFUeNrdm2mQHdV1x3/39vL6LbM+iQEhBLIxEMfgoiybEFIkkKqYRTEm2E5S/mA7hSXZjp1Uxc6HmM2OtxgvZcAJFFm8JBVskii4WA1okEFAQFgSsiNH2EZoRqPRaPa39evue08+dL8ngTSrZkScrrol1Zvue+//nnvO+Z//7VYiwv+Hy13qDn+47vdPkxyrRfRqJXKGiKzW4AGDotSAUmqQxAxMrf3Nofd+76/MUo2rTtgi+hvq4Xf0XyTKvkfDdcBZ83xyDNgsIvcGBbvld7Y8kLwuQB77ratXxcb5JPAe4IxXdaoUjuPg+h6u64FWmDjBxDFJkmCtfW1348BmtPrildvu+8VJAXL/uvUFx3E+Jcr+JVBo/Z4vFih2dFAolXB9b9Y+jLE0KhVqlSqNWu1oYBFwe9yUz12z4/7JZQPywEXrP6CU+gKwCsDxXHrKZYodHTiOc8z9IgKtSWqNUuqYe6y11KtVJsbGiJtR6+dR4JbamRffOV8/mheQf3vLVX5Q0ncCH0rnpOlZuZKunm6U0kcmFUXYsIkYC0nCa/tWSqWAPBft+2jfA33k+enJScZHRjCmPfcHrVv6o3c9dU/lhIFsvui6sqea/wFcCtDZ3U3vihVtC4gxmEaINKMUwIIChUL7Pk4xj8r6s9YyMTbG5Ph4667dJKxfv/3+/YsGcv+69ecph/stvBHglFP76Ozubm8bW61jGiFw4rlIB8GrANWrVYaHDrb8Z1hbe83Vzz/43IKB3Hfxu8/S1j4HdqXjOJy66jTy+Xy6amETU6sv3ALzsJBTLODkAwCazSYHDwyRJAmga+KYi9/19AO75w3k3sveW/Lr9W3ABb7rcfqZa/CylUqqdWy9saxZWgc53M5SOl6ScGBgkGYcAbxsMW+/9r8eHjvmmWN6+YRWfr3+XeACtOa001fhOQ4iQjwxtewgWhaPJ6YQY3Fdl9NOX9XyybXg3PvE5Ve7cwL5z2evuEVE3i0inNbXh+/7KYixSWwUIyInpdkoTsGI4HkefX19iAhK5LKJGl+edWttvuiKc0T0TwF3ZblMuVxOzTs5jQ2bC8+2nps6r9ZIHCNxsrht1t2Zpv/xcUZGRwGMcjj/2mce3HNc0iiivwS4uVyO3t5esIKp1RcEwikWUgCed5wEKEicYBODrTcQY+a1zcxUBaejRG93D9VqlXoYOiT6VmD9MVtr89t/7xIRuVZEOGXFCpSAmAhTq89v5Xwfb2UZp1hA+34bRJTENOMIUQAK5Xk4+QC3txsd5ObVt2mE2CjN+itWrEi3HubqzW975+XHWMQo9ytKhFKhQDGfAwxmqnKEYsyIQOOWAnQhD1jiOGaiUiMMQ8IwbGdprTVBEBAEAV0dHQS+i9tZwPo+pjKFzGEcU6mhyw6FwKejGFCphVitv8In9Nu4zYoSEf79oqvWWWufBzh7zVnkPA8bRSST03OullfuaSexiVqV4ZFRrI2PoiUapXgV41VKs7JcZkV3J0o0IkIyPjnnVnM7C+igQJSEvPTKQKuvS97z3INPuykb5Q+UUhSCgJynM2tUwc7unG53D8qBxFoOHB6hWq0CUFqzmjOvvJzet5xH75vPwcn5TOzZy9hPX+JA/1OM7fpvRkZHma5WWX1KHzlP43Z2EI+NzmGVEB3k8F2PYr5ArdHAWnMt8LQSEb6/7or/Ac7pK5dZ0d2DjWKSyal5JK0OAPYNH6RWqyHK4dw/fhfnf+yDOLmZ9//ee+5j9+3fwjQbeF6Os9esRqMwtfqcPul2d6F9j/HpKQ4ePgzw8/dtf/hN6p51V71FidkNcM6aM/E8TTLdwNars6Dw8MrdKAcmKtMMjYyBVlx6xxc49R0XzsuBp/cN8PiH/py4UqO3u5vTyj0AxGMTs4ZpXSjhduaJTcLefen2EuWcr0WSd1qEXM7H89IgJo1aRgSP35yij3Igji3DoxNYhHM/8L55gwDoPOsMLvzUR7EIo5MT1BpRO3zPNnY6N/AclyAIsAgWc5UGzgTIez5YmyYuY8DKjE27LljL6PQUiTV0rF3D+R9+/4KT3VlX/S6rLv0NAA5NjIO1aDc369hiDNKMwFrynteqzt6gRWS1iOBkP86H0Sovjdq1Rh0R4Q3vvgLt+4viVee+/zpEhHqYcTht21FwpqvFRhzPa/1/lbaw2gK+zgqlOWhEaxARoR5FWKD86+cumiD2nnc2olwSa2nG8asWakYg2Rw9pbGAhdM1OKsBXJc0+VmT/Xv8phwN1hJGUZobtKb3vDctGohXLFA8fWVaTIVxNoYz6xxIErA2nXN6rdJgSilXUYikW2s2VorWiKS5A8AtBLjzpBozXbmerpSc2ggRsjHmYsjpnLOrqEVkQESIEgtIuuKzmjUGhMDNpfS+UqMyMLRoECLC5N5fIiLkvXwamZrNOWkRpHPOgA1qi+yzCFHSPOqmWdhoktIIVwu+72MRDu/es2gg0/sGiMIQUYrAzwSIZC4/1RkhbWbhV/ZrUK+AIo4tWMn258zhj8SkzmaFgu8CiqFnX1g0kAPbngMUvu/hCGmIzfqfqSmlwApxHKeMWun92iKvWIRGK2I4Dmg1e1LK7u3KF7AIv3jgUYa371owiOrQMDvv/A4WoScTHCSOM8Y90/igslTRiC0WwYjdry08IyJMNRtHKLfrzroitpryoZ58gd5CHmst2z7zFZIFVpFP3nwrzVqNwPc5tTN1eFtvzJ6MMznWWstUs5HVJrygB7rWPg1MiQiVZtgmhLP6SRS3RYgzenpxtWZ6cIiHN/wFkxn/me0KxyfZ8slbGN6+E6UUa8vlNGo2I0ytMSdZBZgOG61kWHe6Tul3+l9+we6489vrlFJvdrWiK5/q0nOxUBtF6FwOx3UJfI/JRkjt0GH2bn4Q7bl0rVmNm22X1hXXGrz82FYe/7MbGNuzF4DV3V305ItgLfHYJDJHIed2lkBrRipT1KIY4JEPPvOD76YpRctDVtR1k/WQNd1p0lOe2/aF4yMRzNQ0bm833X7Ar/X1sW98lEoz4vlv3M3z37ib0qo+TrngzbhBwOHde5h6eX+7wApcj7XlXjoyjmemKohJ5iyn0WlCHq83sIBS9oF2qRtZ72GXRBomUdUwpBQEOPmA5Ig6PqMwkExO43aWyDsu563oY7g6zdB0hcRaKgeGqRwYfk0K0KwsFjijqwcnLR3nVYekFD5VOiuNBs3Un61O1AOvkoPuvvDyB5VwZTkfcHbvijROj4yi5iOLaovTU247IkBoLbVmSDVKY32Hl6MQBOQdF5WNKXFCMjkO81GJtMXrOxWAl8YOMx42EWV/8OEdT1zzGjlIfdNirxxrhJwpgqcUTj6PrdbmIQ1qzNgEUsrhFDtBKwKtCfIFyvnCa1N5W0yYV98tHKVU24qsZTxMF0crdfsxKsrQTv+hUy9o7DPIWYcr06zq7EIHLqYSz3swU4kxlSrKcVC5XHoO4rqgPSQOsZFF4nB23zteJlcaJ59ae2R6CiMWjdpz/Y/7HztG17pZHrJKuBPgUC2tM5Tjo3I+SpwFNRKQWhM7WSMZnSIZGcVMVJFaHSK74P5ULg+4iIkZrtczwybfnFn79eN/ANVsmISJrGjSQemk6b0zNV1I9eexRkhkLSIynVi+PSOQDdu3jQLfBzhYqwMGHbigLWBen+brjJIYDmSRTSn9rY/+5MnqrGq8Rf8twFQzpGEkc7Ti62aNVIyAapRQS89IBK3umPNY4SO7Hn8W+DHAcHU6VU3yeZRSqFTWP2lNu25GSYSDlanWQj+ycceWl+Y+6EmLna8CHGo0aMZpHnE6Tr6v6FIn2FQbGE3pCBp763HD8/F+PLQ7fw/wExE4UKtkWTWYU91Y0uM330/9ExiotNzB9G/c1b9l3kBuloesKG5KrRISJnHbKidrWzkdRUCoRk3GM2ug3RtnBD7THzbt7N8MbAcYrNYQAZUPkOw8cTkbvge+jwjsr7Zp/UMbd2zZtmAgqabKDQCHmxH1qAnWnhRfcYopra80Q6bSSIWIunHWrTjbHzft7H/Eop8CGMhiuA5yaNdFCcvStJ+yCThiDRG7edOLW15YNBAAR8ynASbidhzH6epcNid3OtLz9almSCWtT6xS7k1zBoe5btjw4hM/UiI/BNhfr6dKoOemhZfYJW0q56dyqbXsr7fr/+9t3PX4T04YCIBxUl+Zig3VqHlUBFvabdWyxmTUpJZawzjK3jKvcD2fmz6y44nngfsA9mdKicr54HtLZg2CXFu8bllDKb5z/c6te5cMSFZK3gjIdGKYbFllCX2ldYw3HjaoWwMQi3I/O+8EOt8bN7z4xG7gHoCBRirFKM9F5XKp+H0CTQcBuGl+Gmi088bfb9zx6L4lBwKQ7VdTM8JUM8wycGkJsniAEmE0bNBI3ywIRcWfXxClWcjN1+/culfEfjv1lbB9DKeD3OKTXz5AOTmstQyGUSsR/92mnU8dWDYgANZ1PwsS1S2MxU0gWbSvKKXQnXkg4XAzpikCSE1J/KUFk8yFPvDRHz/+ilLqboDBMETEQTk6XdmFbql8gHJ8rNUMZgHEwm0bdz01suxA0hDjfh5oNEQxGoWpw3Z2LOx9LEB1lBCBkSgkTmWiKSXm1kXR/sU8tGH7owfB3AEwGBmsNShl0AUPkXhezckHKGWwNuJAbLKtZr+26cUnJ04aEIAkkr8BKk2xjEQJ4GaZ2Z1bLsJFd6b3jkRJyxpjbuh9fdGF2GIf/NieJ8dE1NcBhpIYi6CcHE7RJ9VAZ25O0UdrByMxg4ltMdwv/8nPHqucdCAAScH7KjAeizByFAcDd2b/UAqdZfHhKMak1hjWfnLHCZXGJ/Lwnz77yLSIfBlgMLEY00y/VCjmZiSGbqGABhJrOHjk9awvbti+rf66AUlFgvh24JAR4VDmtLpURBTHkkOV/i21RtiyxkBUt3ed8DxOtINsJb8AMGQhFkEcnZarr43apRLiaGKRtjVE5HMff2lr83UHApCt6EBqlSQV10pFRKlX+YYqFlAiDEUx2anLLw+V3/SPSyIfLUUnH39pa1NE/TXAQQOxMSil8IrFI75RKqKUIkpguH12JJ+5uf/u5P8MEIBD5Tf+kyh+boGhJJNoS8X0zF6rbKsJB42B9B2Sn/Wu7/uXpRpfLeXne3decPn7lZJ/BuFCJ3sNKTuV0qUisVh2GACFKP5w087+7y+ZMrmUCsih3bl/BfkpKAatbgNoRaoDxrZA7Np06dZ7l1RiXcrObpaHrFLqJoDDYgmtOepw1DBC+6W1m7jNLumXnGo5vgy9662XbQfetgJYm+nevzDpN3rAcxt39V+05KL38shs5gZIP10LraFuDe0vpqy9YTlGVMv1re5db73sKeCS7uyNnsk0Uv1o467+316WY4jlkj5F1KdbADIQLUmJXykgm17cslUUjx5l+h9uePGJH/3KAcmutj9YrW5czoHUcn/PftdbL7sPYOOu/muWcxx3mS2CMtzESbj+Fy0W3HxXeVWbAAAAAElFTkSuQmCC",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})),ee="";var te=function(e){var t=e.mainData,r=e.appname,a=e.dataHeatmapPoints,i=e.currentCity,o=e.onDragEndNewMarker,c=e.onClickMap,s=(e.onClickCreateNewMarker,e.onZoomEnd),u=e.onEachLayer,p=e.pointToLayerCallback,j=e.filterMapCallback,h=Object(x.b)(),f=Object(x.c)((function(e){return e.uiReducer.mapBaseLayerName})),O=Object(x.c)((function(e){return e.uiReducer.isMobileDevice})),v=Object(x.c)((function(e){return e.uiReducer.showSidebar})),g=Object(x.c)((function(e){return e.uiReducer.mapMarkerState})),y=Object(x.c)((function(e){return e.uiReducer.showOkCancelMobileMarker})),w=Object(x.c)((function(e){return e.uiReducer.checkButtonNewMarker})),T=Object(x.c)((function(e){return e.uiReducer.checkButtonHeatmap})),k=Object(x.c)((function(e){return e.uiReducer.checkButtonGPS})),A=Object(n.useState)(null),I=Object(d.a)(A,2),S=I[0],L=I[1],R=Object(n.useState)(null),B=Object(d.a)(R,2),U=B[0],K=B[1],X=Object(n.useState)(13),te=Object(d.a)(X,2),re=te[0],ne=te[1],ae=Object(n.useState)(null),ie=Object(d.a)(ae,2),oe=ie[0],ce=ie[1],se=Object(n.useState)(null),le=Object(d.a)(se,2),de=le[0],ue=le[1],be=Object(n.useState)(null),pe=Object(d.a)(be,2),me=pe[0],je=pe[1],he=document.cookie.split("; ").find((function(e){return e.startsWith("mapname=")}));he&&he.split("=")[1];var fe=Object(n.useRef)(null);Object(n.useEffect)((function(){if(U){ce(V(U,"fas fa-map-marker-alt fa-lg","fas fa-map-marker-alt fa-lg",Oe)),ue(V(U,"fas fa-eye fa-lg","fas fa-eye-slash fa-lg",ve)),je(V(U,"fas fa-satellite-dish fa-lg","fas fa-satellite-dish fa-lg",xe));var e=document.cookie.split("; ").find((function(e){return e.startsWith("mapname=")}));e&&h(F(e.split("=")[1]))}return function(){oe&&oe.remove(),de&&de.remove(),me&&me.remove()}}),[U]),Object(n.useEffect)((function(){var e=function(){var e=Object(l.a)(b.a.mark((function e(){var t,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("http://127.0.0.1:8000/api/","cities/").concat(i));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,L(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),console.log("currentCity")}),[i]),Object(n.useEffect)((function(){oe&&(w?(oe.state("on"),oe.button.style.backgroundColor="red"):(oe.state("off"),oe.button.style.backgroundColor="white"))}),[w]),Object(n.useEffect)((function(){de&&(T?(de.state("on"),de.button.style.backgroundColor="red"):(de.state("off"),de.button.style.backgroundColor="white"))}),[T]),Object(n.useEffect)((function(){me&&(k?(me.state("on"),me.button.style.backgroundColor="red"):(me.state("off"),me.button.style.backgroundColor="white"))}),[k]),Object(n.useEffect)((function(){U&&!O&&(w?m.a.DomUtil.addClass(U._container,"crosshair-cursor-enabled"):m.a.DomUtil.removeClass(U._container,"crosshair-cursor-enabled"))}),[w]),Object(n.useEffect)((function(){U&&window.setTimeout((function(){U.invalidateSize({pan:!1})}),600)}),[v]);var Oe=function(e){O&&e&&(h(C({visible:!0,position:{lat:0,lng:0}})),h(E(!0))),h(M(e))},ve=function(e){h({type:"CHECKBUTTONHEATMAP",payload:e}),h(F(e?"Dark":"Default"))};function ge(){var e=Object(G.a)();return S&&(ee!==S.sysname&&e.panTo([parseFloat(S.latitude),parseFloat(S.longitude)]),ee=S.sysname),null}function xe(e){U&&(e?(J=4,U.locate({maxZoom:20,enableHighAccuracy:!0,watch:!0,maximumAge:2e4})):(U.stopLocate(),Z&&U.hasLayer(Z)&&U.removeLayer(Z),J=4)),h(N(e))}function ye(e){var t=e.mapMarkerState,r=t.visible,a=Object(G.a)(),i=Object(n.useMemo)((function(){return{dragend:function(){if(fe.current){var e=fe.current;if(!O&&null!=e){var t=e.getLatLng(),r={lat:"0",lng:"0"};r.lat=t.lat.toFixed(5),r.lng=t.lng.toFixed(5),(n=0,new Promise((function(e){return setTimeout(e,n)}))).then((function(){h(C({visible:!0,position:r}))}))}}var n}}}),[]);return Object(D.jsx)(D.Fragment,{children:r&&Object(D.jsx)(D.Fragment,{children:O?Object(D.jsx)(P.a,{icon:$,draggable:!1,position:0==t.position.lat?a.getCenter():t.position,ref:fe},"newMarker"):Object(D.jsx)(P.a,{icon:$,draggable:!0,position:t.position,ref:fe,eventHandlers:i},"newMarker")})})}function we(){var e=Object(G.b)({baselayerchange:function(e){document.cookie="mapname="+e.name},move:function(e){y&&(fe.current&&fe.current.setLatLng({lat:e.target.getCenter().lat,lng:e.target.getCenter().lng}))},moveend:function(e){if(y&&fe.current){var t=fe.current.getLatLng(),r={lat:"0",lng:"0"};r.lat=t.lat.toFixed(5),r.lng=t.lng.toFixed(5),h(C({visible:!0,position:r}))}J=0},click:function(e){c(e)},zoomend:function(e){s&&s(e),ne(e.target._zoom)},locationfound:function(t){var r=t.accuracy/2;J>0&&(e.setView(t.latlng,20),J-=1),Z&&e.hasLayer(Z)?(Z.setLatLng(t.latlng),Z.setRadius(r)):Z=m.a.circle(t.latlng,r).addTo(e)},locationerror:function(e){h(N(!1)),alert(e.message)}});return null}function Te(){var e=Object(G.a)(),t=e.getZoom();return u&&e.eachLayer((function(e){u(e,t)})),null}function ke(e,t){t.myTag="myGeoJSON"}function Ae(){var e=Object(G.a)();return q&&e.removeLayer(q),T&&a&&(q=m.a.heatLayer(a,{gradient:{.4:"#1E90FF",.8:"white",1:"red"},max:1.5,radius:14,blur:10,maxZoom:6}),e.addLayer(q)),null}return Object(D.jsx)(D.Fragment,{children:S&&"0"!==S.longitude&&"0"!==S.latitude?Object(D.jsxs)(z.a,{whenCreated:K,center:[parseFloat(S.latitude),parseFloat(S.longitude)],zoom:S.zoom,zoomControl:!1,scrollWheelZoom:!0,style:{height:"calc(100vh - 60px)",width:"100%"},children:[Object(D.jsx)(W.a,{position:"topleft",children:Object(D.jsx)(Q,{mapBaseLayerName:f})}),Object(D.jsx)(ge,{}),"roadaccident"===r&&Object(D.jsx)(D.Fragment,{children:re&&re<15?Object(D.jsx)(H.a,{data:t,pointToLayer:p,filter:j,onEachFeature:ke},t.dateTimeGenerated):Object(D.jsx)(_.a,{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:15,iconCreateFunction:function(e){var t,r=e.getChildCount();return 2==r&&(t="1"),r>=3&&r<=5&&(t="2"),r>=6&&r<=9&&(t="3"),r>=10&&r<=14&&(t="4"),r>14&&(t="5"),m.a.divIcon({html:r.toString(),className:"cluster digits-"+t,iconSize:void 0})},children:Object(D.jsx)(H.a,{data:t,pointToLayer:p,filter:j,onEachFeature:ke},t.dateTimeGenerated)})}),"citytree"===r&&Object(D.jsx)(D.Fragment,{children:Object(D.jsx)(H.a,{data:t,pointToLayer:p,filter:j,onEachFeature:ke},t.dateTimeGenerated)}),Object(D.jsx)(ye,{mapMarkerState:g,onDragEndNewMarker:o}),Object(D.jsx)(we,{}),!O&&Object(D.jsx)(Y.a,{position:"bottomright"}),Object(D.jsx)(Ae,{}),u&&Object(D.jsx)(Te,{})]}):Object(D.jsx)("p",{children:"Loading..."})})},re=function(e){var t=e.children,r=e.cityName,n=Object(x.c)((function(e){return e.uiReducer.showSidebar}));return Object(D.jsx)("div",{className:"main-wrapper",children:r?Object(D.jsx)("div",{id:"app",children:Object(D.jsx)("div",{className:"d-flex ".concat(n?"showed":"hided"),id:"wrapper",children:t})}):"You must select a city."})},ne=function(e){var t=e.children;return Object(D.jsx)("div",{className:"bg-light border-right",id:"sidebar-wrapper",children:Object(D.jsx)("div",{className:"list-group list-group-flush",style:{marginTop:"15px"},children:t})})},ae=r(143),ie=r(122),oe=function(){var e=Object(x.b)(),t=Object(g.a)().t,r=Object(x.c)((function(e){return e.uiReducer.checkButtonNewMarker}));return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(v.a,{variant:"success",id:"doneEditMarkerMobile",onClick:function(){r&&e(y(!0)),e(M(!1)),e(E(!1)),e(T(!0)),e(A("tree")),e(w(!0))},children:t("words.done")})," ",Object(D.jsx)(v.a,{variant:"secondary",id:"cancelMarkerMobile",onClick:function(){e(C({visible:!1,position:{lat:0,lng:0}})),e(E(!1)),e(M(!1))},children:"\u2715"})," "]})},ce=r(2),se=r(10),le=r(201),de=r(199),ue=r(137),be=r(9),pe=r(26),me=function(e){var t=e.onSubmitFilter,r=Object(x.c)((function(e){return e.dataReducer.dictSpecieses})),n=Object(x.c)((function(e){return e.dataReducer.dictStatuses})),a=Object(x.c)((function(e){return e.dataReducer.dictCareTypes})),i=Object(x.c)((function(e){return e.dataReducer.dictRemarks})),o=Object(x.c)((function(e){return e.dataReducer.dictPlaceTypes})),c=Object(x.c)((function(e){return e.dataReducer.dictIrrigationMethods})),s=Object(x.c)((function(e){return e.dataReducer.dictGroupSpec})),l=Object(g.a)().t,d=Object(se.b)({reValidateMode:"onChange",defaultValues:{speciesFilter:"",statusFilter:"",careTypeFilter:"",remarkFilter:"",placeTypeFilter:"",irrigationMethodFilter:"",datePlantedFromFilter:"",datePlantedToFilter:"",dateAddedFromFilter:"",dateAddedToFilter:"",commentFilter:"",heightFromFilter:"",trunkGirthFromFilter:"",crownDiameterFromFilter:"",heightToFilter:"",trunkGirthToFilter:"",crownDiameterToFilter:"",showMyTreesFilter:""}}),u=d.control,b=d.handleSubmit,p=d.reset,m=[];if(Array.isArray(r)&&Array.isArray(s)){var j=null;m=s.map((function(e){return{label:e.groupname,options:r.map((function(t){return e.id===t.groupspec?1!==t.id?{value:t.id,label:t.localname,speciesname:t.speciesname,typespec:t.typespec}:(j={value:t.id,label:t.localname},null):null})).filter((function(e){return e}))}})),j&&m.unshift(j)}var h=[];Array.isArray(n)&&(h=n.map((function(e){return{value:e.id,label:e.statusname}})));var f=[];Array.isArray(a)&&(f=a.map((function(e){return{value:e.id,label:e.carename}})));var O=[];Array.isArray(i)&&(O=i.map((function(e){return{value:e.id,label:e.remarkname}})));var y=[];Array.isArray(o)&&(y=o.map((function(e){return{value:e.id,label:e.placename}})));var w=[];Array.isArray(c)&&(w=c.map((function(e){return{value:e.id,label:e.irrigationname}})));var T={option:function(e,t){var r=t.data;return Object(ce.a)(Object(ce.a)({},e),{},{paddingLeft:20,backgroundColor:2===r.typespec?"#EEFFEE":void 0})}},k=function(e){var t=e.data,r=t.label,n=t.speciesname;return Object(D.jsxs)(be.q.Option,Object(ce.a)(Object(ce.a)({},e),{},{children:[Object(D.jsx)("span",{children:r})," ",Object(D.jsx)("span",{style:{color:"darkgray"},children:n})]}))};return Object(D.jsx)("div",{children:Object(D.jsxs)(le.a,{className:"m-1",onSubmit:b(t),children:[Object(D.jsxs)(le.a.Group,{controlId:"formSpeciesFilter",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.species")}),Object(D.jsx)(se.a,{name:"speciesFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isMulti:!0,isSearchable:!0,options:m,styles:T,getOptionLabel:function(e){return"".concat(e.label," - ").concat(e.speciesname)},components:{Option:k}}))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formStatusFilter",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.status")}),Object(D.jsx)(se.a,{name:"statusFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isMulti:!0,isSearchable:!1,options:h,styles:T,components:{Option:k},maxMenuHeight:400}))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formCareTypeFilter",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.careType")}),Object(D.jsx)(se.a,{name:"careTypeFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isMulti:!0,isSearchable:!1,options:f,styles:T,components:{Option:k}}))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formRemarkFilter",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.remark")}),Object(D.jsx)(se.a,{name:"remarkFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isMulti:!0,isSearchable:!1,options:O,styles:T,components:{Option:k}}))}})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formPlaceTypeFilter",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.placeType")}),Object(D.jsx)(se.a,{name:"placeTypeFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isClearable:!0,isSearchable:!1,options:y}))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formIrrigationMethodFilter",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.irrigationMethod")}),Object(D.jsx)(se.a,{name:"irrigationMethodFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:l("words.select"),isClearable:!0,isSearchable:!1,options:w}))}})]})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDatePlantedFromFilter",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.plantedFrom")}),Object(D.jsx)(se.a,{name:"datePlantedFromFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"date"},t))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDatePlantedToFilter",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.plantedTo")}),Object(D.jsx)(se.a,{name:"datePlantedToFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"date"},t))}})]})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDateAddedFromFilter",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.dateAddedFrom")}),Object(D.jsx)(se.a,{name:"dateAddedFromFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"date"},t))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDateAddedToFilter",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.dateAddedTo")}),Object(D.jsx)(se.a,{name:"dateAddedToFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"date"},t))}})]})]}),Object(D.jsxs)(le.a.Group,{className:"mt-3",controlId:"formCommentFilter",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.comment")}),Object(D.jsx)(se.a,{name:"commentFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text"},t))}})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formFromParamsTreeFilter",style:{maxWidth:"50px"},children:Object(D.jsx)(le.a.Label,{style:{marginTop:"32px"},children:l("sidebar.filterTab.from")})}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formHeightFromFilter",className:"ps-1 pe-0",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.height")}),Object(D.jsx)(se.a,{name:"heightFromFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formTrunkGirthFromFilter",className:"ps-1 pe-0",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.trunkGirth")}),Object(D.jsx)(se.a,{name:"trunkGirthFromFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"999"},t))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formCrownDiameterFromFilter",className:"ps-1 pe-0",children:[Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.crownDiameter")}),Object(D.jsx)(se.a,{name:"crownDiameterFromFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]})]}),Object(D.jsxs)(de.a,{className:"mt-0",children:[Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formToParamsTreeFilter",style:{maxWidth:"50px"},children:Object(D.jsx)(le.a.Label,{children:l("sidebar.filterTab.to")})}),Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formHeightToFormFilter",className:"ps-1 pe-0",children:Object(D.jsx)(se.a,{name:"heightToFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formTrunkGirthToFormFilter",className:"ps-1 pe-0",children:Object(D.jsx)(se.a,{name:"trunkGirthToFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"999"},t))}})}),Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formCrownDiameterToFormFilter",className:"ps-1 pe-0",children:Object(D.jsx)(se.a,{name:"crownDiameterToFilter",control:u,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})})]}),Object(D.jsx)(le.a.Group,{controlId:"formShowMyTreesFilter",className:"mt-3 ms-1",children:Object(D.jsx)(se.a,{name:"showMyTreesFilter",control:u,render:function(e){var t,r=e.field;return Object(D.jsx)(le.a.Check,Object(ce.a)(Object(ce.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:l("sidebar.filterTab.showMyTrees"),type:"checkbox",id:"idShowMyTreesFilter"}))}})}),Object(D.jsxs)("div",{className:"mt-4 me-2 float-end",children:[Object(D.jsx)(v.a,{variant:"light",onClick:function(){p(),t({})},children:l("sidebar.filterTab.clear")})," ",Object(D.jsx)(v.a,{type:"submit",variant:"primary",style:{minWidth:"150px"},children:l("sidebar.filterTab.search")})," "]})]})})},je=r(58),he=r(112);var fe,Oe=function(e){var t=e.columns,r=e.data,a=e.sortField,i=e.sortAsc,o=void 0===i||i,c=e.size,s=e.variant,l=e.OnClickButtons,u=Object(n.useState)({sortField:a,sortAsc:o}),b=Object(d.a)(u,2),p=b[0],m=b[1],j=Object(n.useState)(r),h=Object(d.a)(j,2),f=h[0],O=h[1];Object(n.useEffect)((function(){O(r)}),[r]);var v=t.map((function(e,t){return Object(D.jsx)("th",{style:{width:e.width?e.width:"",cursor:e.sortable?"pointer":"default"},onClick:function(){e.sortable&&m({sortField:e.field,sortAsc:p.sortField!==e.field||!p.sortAsc})},children:(null===p||void 0===p?void 0:p.sortField)===e.field?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{style:{float:"left",textAlign:"left"},children:e.headerName}),Object(D.jsx)("div",{style:{float:"right",textAlign:"right"},children:Object(D.jsxs)("span",{style:{fontSize:"8pt",color:"gray"},children:[" ",p.sortAsc?"\u25bc":"\u25b2"]})})]}):e.headerName},t)}));function g(){var e=[];return(e=p.sortField?null===f||void 0===f?void 0:f.sort((function(e,t){return e[p.sortField]<t[p.sortField]?p.sortAsc?-1:1:e[p.sortField]>t[p.sortField]?p.sortAsc?1:-1:0})):f)&&e.length>0?Object(D.jsx)(D.Fragment,{children:e.map((function(e,t){return Object(D.jsx)("tr",{children:Object(D.jsx)(x,{row:e,indexRow:t})},e.id)}))}):Object(D.jsx)("tr",{children:Object(D.jsx)("td",{style:{textAlign:"center"},colSpan:t.length,children:"no data"})})}function x(e){var r=e.row,n=e.indexRow,a=function(e,t){return"".concat(String(e.id),".").concat(String(t))};return t.map((function(e,t){if("object"!==typeof r[e.field]){if(null!==e&&void 0!==e&&e.dateTimeOption){if("onlyDate"===e.dateTimeOption)return Object(D.jsx)("td",{children:new Date(r[e.field]).toLocaleDateString()},a(r,t));if("onlyTime"===e.dateTimeOption)return Object(D.jsx)("td",{children:new Date(r[e.field]).toLocaleTimeString()},a(r,t));if("dateTime"===e.dateTimeOption){var i=new Date(r[e.field]).toLocaleDateString()+" "+new Date(r[e.field]).toLocaleTimeString();return Object(D.jsx)("td",{children:i},a(r,t))}return Object(D.jsx)("td",{children:r[e.field]},a(r,t))}return"#"===e.field?Object(D.jsx)("td",{children:n+1},a(r,t)):Object(D.jsx)("td",{children:r[e.field]},a(r,t))}var o=r[e.field];if(Array.isArray(o)){var c=[];return o.forEach((function(e){if((null!==e&&void 0!==e&&e.text||null!==e&&void 0!==e&&e.iconFA)&&null!==e&&void 0!==e&&e.idButton){var n=[];null!==e&&void 0!==e&&e.iconFA&&(null!==e&&void 0!==e&&e.iconFASize?n.push(Object(D.jsx)("i",{className:e.iconFA,style:{fontSize:e.iconFASize}},a(r,t)+e.idButton)):n.push(Object(D.jsx)("i",{className:e.iconFA},a(r,t)+e.idButton))),null!==e&&void 0!==e&&e.text&&n.push(Object(D.jsx)("span",{children:e.text},a(r,t)+e.idButton)),l?c.push(Object(D.jsxs)("span",{children:[Object(D.jsx)("a",{href:"#",onClick:function(){return l(r,e.idButton)},children:n})," "]},a(r,t)+e.idButton)):c.push(Object(D.jsx)("span",{children:n},a(r,t)+e.idButton))}})),Object(D.jsx)("td",{children:c},a(r,t))}}))}return Object(D.jsxs)(he.a,{striped:!0,bordered:!0,hover:!0,size:c,variant:s,children:[Object(D.jsx)("thead",{children:Object(D.jsx)("tr",{children:v})}),Object(D.jsx)("tbody",{children:Object(D.jsx)(g,{})})]})},ve=function(e){var t=Object(n.useState)(void 0),r=Object(d.a)(t,2),a=r[0],i=r[1],o=Object(x.c)((function(e){return e.dataReducer.dataLastEditedTreeId})),c=function(){var t=Object(l.a)(b.a.mark((function t(){var r,n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat("http://127.0.0.1:8000/api/","citytree/cityfoo/trees/").concat(e.idTree,"/inspections/"),t.next=3,fetch(r);case 3:return n=t.sent,t.next=6,n.json();case 6:a=(a=t.sent).map((function(e){return e.buttons=[],e.buttons.push({iconFA:"fas fa-edit",iconFASize:"15pt",idButton:"edit"}),(null!==e&&void 0!==e&&e.photo1||null!==e&&void 0!==e&&e.photo2||null!==e&&void 0!==e&&e.photo3)&&e.buttons.push({iconFA:"fa fa-camera",iconFASize:"15pt",idButton:"photo"}),e.typeData="Inspection",e})),i(a);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){e.idTree&&c()}),[e.idTree]),Object(n.useEffect)((function(){e.idTree&&e.idTree===o.treeId&&(c(),console.log("rxDataLastEditetTreeId"))}),[o]);return Object(D.jsx)(Oe,{data:a,OnClickButtons:function(t,r){"edit"===r&&e.onClickButtonEditInsp(t),"photo"===r&&e.onClickButtonPhotosInsp(t)},sortField:"datetime",sortAsc:!1,size:"sm",columns:[{field:"#",headerName:""},{field:"datetime",headerName:"\u0414\u0430\u0442\u0430",width:"40%",sortable:!0,dateTimeOption:"onlyDate"},{field:"typeData",headerName:"\u0422\u0438\u043f",width:"35%"},{field:"buttons",headerName:"Actions",width:"25%"}]})},ge=r(200),xe=r(129),ye=r(139),we=r.n(ye),Te=r.p+"static/media/delete2.5b09b7b5.svg";!function(e){e[e.none=0]="none",e[e.resizing=1]="resizing",e[e.resized=2]="resized",e[e.uploading=3]="uploading",e[e.uploaded=4]="uploaded",e[e.error=5]="error"}(fe||(fe={}));var ke={enabled:!1,autoResize:!0,maxWidth:1280,maxHeight:1280,compressFormat:"JPEG",quality:70,rotation:0},Ae=Object(n.forwardRef)((function(e,t){var r=e.signingUrl,a=e.autoUpload,i=e.emptyPhoto,o=e.serverPhoto,c=e.value,s=e.onChange,u=e.buttonCaption,p=void 0===u?"Browse...":u,m=e.resizer,j=void 0===m?ke:m,h=e.onFinish,f=e.onProgress,O=e.onError,g=e.onSignedUrl;Object(n.useImperativeHandle)(t,(function(){return{uploadFile:function(){var e,t;return!(null===x||void 0===x||null===(e=x.current)||void 0===e||!e.files||1!==x.current.files.length)&&(T!==fe.resizing&&(re(null===x||void 0===x||null===(t=x.current)||void 0===t?void 0:t.files[0].name),!0))}}}));var x=Object(n.useRef)(null),y=Object(n.useState)(fe.none),w=Object(d.a)(y,2),T=w[0],k=w[1],A=Object(n.useState)(void 0),I=Object(d.a)(A,2),S=I[0],F=I[1],C=Object(n.useState)(void 0),E=Object(d.a)(C,2),M=E[0],N=E[1],L=Object(n.useState)(p),R=Object(d.a)(L,2),B=R[0],G=R[1],P=Object(n.useState)(!1),z=Object(d.a)(P,2),W=z[0],H=z[1],Y=Object(n.useState)(void 0),V=Object(d.a)(Y,2),U=V[0],K=V[1],q=Object(n.useState)(!1),J=Object(d.a)(q,2),Z=J[0],Q=J[1];Object(n.useEffect)((function(){i&&F(i)}),[]),Object(n.useEffect)((function(){var e,t;console.log("s3DataState",U),null!==U&&void 0!==U&&null!==(e=U.data)&&void 0!==e&&null!==(t=e.fields)&&void 0!==t&&t.key&&(Q(!0),s(U.data.fields.key))}),[U]),Object(n.useEffect)((function(){c?(null==o&&(o=""),"/"!=o.slice(-1)&&"/"!=c.slice(0,1)&&(o+="/"),Z||(G(p),H(!1),null!==x&&void 0!==x&&x.current&&(x.current.value=""),F("".concat(o).concat(c)))):(F(i),G(p)),Q(!1)}),[c]);var X=function(e){return new Promise((function(t){we.a.imageFileResizer(e,j.maxWidth,j.maxHeight,j.compressFormat,j.quality,j.rotation,(function(e){t(e)}),"blob")}))},_=function(){var e=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.target.files&&t.target.files.length>0)){e.next=21;break}if(r=t.target.files[0],F(URL.createObjectURL(r)),!j.enabled||!j.autoResize){e.next=20;break}return e.prev=4,k(fe.resizing),G("Resizing..."),e.next=9,X(r);case 9:(n=e.sent)instanceof Blob?(N(n),k(fe.resized),G("Resized "),a&&re(r.name)):G("Error"),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(4),console.log(e.t0),k(fe.error),G("Error");case 18:e.next=21;break;case 20:a&&re(r.name);case 21:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(b.a.mark((function e(t){var n,a,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Headers).append("Content-type","application/json"),a={objectName:t},e.next=5,fetch(r,{method:"POST",headers:n,body:JSON.stringify(a)});case 5:return i=e.sent,e.next=8,i.json();case 8:return o=e.sent,e.abrupt("return",JSON.parse(o));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){if(e.lengthComputable){var t=Math.round(e.loaded/e.total*100);G(String(t)+"%"),f&&f(t),console.log("percentComplete",t)}},te=function(e,t){var r=new XMLHttpRequest;r.open("POST",t.url),r.timeout=3e4,r.upload.onprogress=ee;var n=new FormData;for(var a in t.fields)"file"!=a&&n.append(a,t.fields[a]);n.append("file",e),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||204===r.status?(H(!1),G("Done"),h&&h()):(O&&(H(!1),G("Error ".concat(r.status)),O(r.status,e.name)),alert("Error during file upload (status: "+r.status+"): "+e.name)))},r.onload=function(){console.log("transaction completes successfully.")},r.onerror=function(){alert("Error during file upload: "+e.name)},console.log("postData",n),r.send(n)},re=function(){var e=Object(l.a)(b.a.mark((function e(t){var r,n,a,i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.replace(/\s/g,""),H(!0),G("Starting... "),K(void 0),e.next=6,$(t);case 6:if(r=e.sent,K(r),g&&g(r),console.log("signedUrl",r),!1!==r.file_exists){e.next=39;break}if(null===x||void 0===x||null===(n=x.current)||void 0===n||!n.files||1!==x.current.files.length){e.next=37;break}if(a=x.current.files[0],!j.enabled){e.next=36;break}if(!j.autoResize){e.next=18;break}M&&te(M,r.data),e.next=34;break;case 18:return e.prev=18,k(fe.resizing),G("Resizing..."),e.next=23,X(a);case 23:i=e.sent,k(fe.resized),G("Resized"),te(i,r.data),e.next=34;break;case 29:e.prev=29,e.t0=e.catch(18),console.log(e.t0),k(fe.error),G("Error");case 34:e.next=37;break;case 36:te(a,r.data);case 37:e.next=41;break;case 39:o=Ie(5),re(o+"_"+t);case 41:case"end":return e.stop()}}),e,null,[[18,29]])})));return function(t){return e.apply(this,arguments)}}();return Object(D.jsx)("div",{style:{position:"relative"},children:Object(D.jsxs)(le.a.Group,{children:[Object(D.jsx)(xe.a,{src:S,fluid:!0,rounded:!0},S)," ",Object(D.jsx)("a",{href:"#",children:Object(D.jsx)(xe.a,{src:Te,style:{width:"46px",height:"46px",position:"absolute",top:"-9px",right:"-8px"},onClick:function(){s(""),F(i),null!==x&&void 0!==x&&x.current&&(x.current.value="")}})}),Object(D.jsxs)(v.a,{variant:"outline-secondary",style:{width:"100%"},className:"mt-3",onClick:function(){H(!1),G(p),x.current.click()},children:[W&&Object(D.jsx)(ge.a,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"}),B]})," ",Object(D.jsx)("input",{ref:x,type:"file",accept:"image/*",style:{display:"none"},onChange:_})]})})}));function Ie(e){for(var t="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,a=0;a<e;a++)t+=r.charAt(Math.floor(Math.random()*n));return t}var Se=Ae,Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMzMzRGRjBCRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMzMzRGRjBDRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzMzNEZGMDlENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzMzNEZGMEFENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4+BmGWAAAYBklEQVR42uxd2VcUxxce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",Ce=Object(n.forwardRef)((function(e,t){var r=e.controlFromUseForm,a=e.signingS3Url,i=e.serverPhoto,o=e.onCallbackDone,c=Object(n.useRef)(),s=Object(n.useRef)(),l=Object(n.useRef)(),u=Object(n.useState)(!1),b=Object(d.a)(u,2),p=b[0],m=b[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),f=h[0],O=h[1],v=Object(n.useState)(!1),g=Object(d.a)(v,2),x=g[0],y=g[1];Object(n.useEffect)((function(){p&&f&&x&&(m(!1),O(!1),y(!1),o())}),[p,f,x]);var w=!1,T={enabled:!0,autoResize:!0,maxWidth:1280,maxHeight:1280,compressFormat:"JPEG",quality:70,rotation:0};Object(n.useImperativeHandle)(t,(function(){return{uploadPhotos:function(){var e,t,r,n=!1,a=!1,i=!1;null!==c&&void 0!==c&&null!==(e=c.current)&&void 0!==e&&e.uploadFile&&(n=c.current.uploadFile()),null!==s&&void 0!==s&&null!==(t=s.current)&&void 0!==t&&t.uploadFile&&(a=s.current.uploadFile()),null!==l&&void 0!==l&&null!==(r=l.current)&&void 0!==r&&r.uploadFile&&(i=l.current.uploadFile()),console.log("p",n,a,i),n||a||i?(m(!n),O(!a),y(!i)):o()}}}));var k=function(){console.log("onFinishPhoto1"),m(!0)},A=function(){console.log("onFinishPhoto2"),O(!0)},I=function(){console.log("onFinishPhoto3"),y(!0)};return Object(D.jsxs)(de.a,{className:"mt-3",xs:3,children:[Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formIdInsp1",className:"mt-3 align-self-end",children:Object(D.jsx)(se.a,{name:"photo1",control:r,render:function(e){var t=e.field;return Object(D.jsx)(Se,Object(ce.a)(Object(ce.a)({signingUrl:a,autoUpload:w,emptyPhoto:Fe,serverPhoto:i,onFinish:k,resizer:T},t),{},{ref:c}))}})}),Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formIdInsp2",className:"mt-3 align-self-end",children:Object(D.jsx)(se.a,{name:"photo2",control:r,render:function(e){var t=e.field;return Object(D.jsx)(Se,Object(ce.a)(Object(ce.a)({signingUrl:a,autoUpload:w,emptyPhoto:Fe,serverPhoto:i,onFinish:A,resizer:T},t),{},{ref:s}))}})}),Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formIdInsp3",className:"mt-3 align-self-end",children:Object(D.jsx)(se.a,{name:"photo3",control:r,render:function(e){var t=e.field;return Object(D.jsx)(Se,Object(ce.a)(Object(ce.a)({signingUrl:a,autoUpload:w,emptyPhoto:Fe,serverPhoto:i,onFinish:I,resizer:T},t),{},{ref:l}))}})})]})})),Ee=function(e){var t,r,a,i,o,c,s,u,p,m=e.onSubmitTree,j=e.onDeleteTree,h=e.onCloseTree,f=e.onNewInsp,O=e.onClickInspEdit,y=e.onClickInspPhotos,w=e.onClickEditCoords,T=e.dataTreeForm,k=(e.city,e.signingS3Url),A=Object(x.c)((function(e){return e.uiReducer.mapMarkerState})),I=Object(x.c)((function(e){return e.uiReducer.newTreeCreation})),S=Object(n.useState)(!1),F=Object(d.a)(S,2),C=F[0],E=F[1],M=Object(x.c)((function(e){return e.dataReducer.dictSpecieses})),N=Object(x.c)((function(e){return e.dataReducer.dictStatuses})),L=Object(x.c)((function(e){return e.dataReducer.dictCareTypes})),R=Object(x.c)((function(e){return e.dataReducer.dictRemarks})),B=Object(x.c)((function(e){return e.dataReducer.dictPlaceTypes})),G=Object(x.c)((function(e){return e.dataReducer.dictIrrigationMethods})),P=Object(x.c)((function(e){return e.dataReducer.dictGroupSpec})),z=Object(n.useRef)(),W=Object(g.a)().t;Object(n.useEffect)((function(){_(),$("irrigationmethod",J[0]),$("latitude",A.position.lat),$("longitude",A.position.lng)}),[I]),Object(n.useEffect)((function(){A.visible&&($("latitude",A.position.lat),$("longitude",A.position.lng))}),[A]),Object(n.useEffect)((function(){var e={};e.id=null===T||void 0===T?void 0:T.id,e.latitude=null===T||void 0===T?void 0:T.latitude,e.longitude=null===T||void 0===T?void 0:T.longitude;var t=null===T||void 0===T?void 0:T.species_id;if(t){var r=!1;H.forEach((function(n){null!==n&&void 0!==n&&n.options&&Array.isArray(n.options)?r||(e.species=n.options.find((function(e){return r=e.value===t}))):null!==n&&void 0!==n&&n.value&&n.value===t&&(e.species=n,r=!0)}))}e.speciescomment=null===T||void 0===T?void 0:T.speciescomment,e.comment=null===T||void 0===T?void 0:T.comment;var n=null===T||void 0===T?void 0:T.placetype;n&&(console.log("optionsPlaceTypesData",q),e.placetype=q.find((function(e){return e.value===n})));var a=null===T||void 0===T?void 0:T.irrigationmethod;a&&(e.irrigationmethod=J.find((function(e){return e.value===a}))),null!==T&&void 0!==T&&T.dateplanted&&(console.log("dataTreeForm?.properties?.dateplanted",null===T||void 0===T?void 0:T.dateplanted),e.dateplanted=T.dateplanted),e.googlestreeturl=null===T||void 0===T?void 0:T.googlestreeturl,_(e,{keepDefaultValues:!0})}),[T]);var H=[];if(Array.isArray(M)&&Array.isArray(P)){var Y=null;H=P.map((function(e){return{label:e.groupname,options:M.map((function(t){return e.id===t.groupspec?1!==t.id?{value:t.id,label:t.localname,speciesname:t.speciesname,typespec:t.typespec}:(Y={value:t.id,label:t.localname},null):null})).filter((function(e){return e}))}})),Y&&H.unshift(Y)}var V=[];Array.isArray(N)&&(V=N.map((function(e){return{value:e.id,label:e.statusname}})));var U=[];Array.isArray(L)&&(U=L.map((function(e){return{value:e.id,label:e.carename}})));var K=[];Array.isArray(R)&&(K=R.map((function(e){return{value:e.id,label:e.remarkname}})));var q=[];Array.isArray(B)&&(q=B.map((function(e){return{value:e.id,label:e.placename}})));var J=[];Array.isArray(G)&&(J=G.map((function(e){return{value:e.id,label:e.irrigationname}})));var Z=Object(se.b)({defaultValues:{id:"",latitude:"",longitude:"",species:"",speciescomment:"",comment:"",placetype:"",irrigationmethod:"",dateplanted:"",googlestreeturl:"",height:"",crowndiameter:"",trunkgirth:"",status:"",remarks:"",recommendations:"",photo1:"",photo2:"",photo3:"",useradded:0}}),Q=Z.control,X=Z.handleSubmit,_=Z.reset,$=Z.setValue,ee=Z.getValues,te=Z.formState.errors,re=Z.trigger;function ne(){return(ne=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,re();case 3:e.sent&&z.current.uploadPhotos();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(e){var t,r;(e.dateplanted||(e.dateplanted=null),!0===I)?(e.species=e.species.value,e.placetype=e.placetype.value,e.irrigationmethod=null===e||void 0===e||null===(t=e.irrigationmethod)||void 0===t?void 0:t.value,null!==e&&void 0!==e&&e.height&&null!==e&&void 0!==e&&e.crowndiameter&&null!==e&&void 0!==e&&e.trunkgirth&&null!==e&&void 0!==e&&e.status&&(e.inspection={height:parseInt(e.height),crowndiameter:parseFloat(e.crowndiameter),trunkgirth:parseInt(e.trunkgirth),status:e.status.value,photo1:e.photo1,photo2:e.photo2,photo3:e.photo3},null!==e&&void 0!==e&&e.remarks&&Array.isArray(e.remarks)&&(e.inspection.remarks=[],e.remarks.forEach((function(t){e.inspection.remarks.push(t.value)}))),null!==e&&void 0!==e&&e.recommendations&&Array.isArray(e.recommendations)&&(e.inspection.recommendations=[],e.recommendations.forEach((function(t){e.inspection.recommendations.push(t.value)})))),delete e.id,delete e.height,delete e.crowndiameter,delete e.trunkgirth,delete e.status,delete e.remarks,delete e.recommendations,console.log("onSubmitTree",e),m(e)):(e.species=e.species.value,e.placetype=e.placetype.value,e.irrigationmethod=null===e||void 0===e||null===(r=e.irrigationmethod)||void 0===r?void 0:r.value,T&&(e.useradded=T.useradded),console.log("dataedit",e),m(e))}var ie={option:function(e,t){var r=t.data,n=t.isSelected,a=t.isFocused,i=t.isDisabled;return Object(ce.a)(Object(ce.a)({},e),{},{paddingLeft:20,backgroundColor:i?void 0:n?"#606060":a?"#EEEEEE":2===r.typespec?"#EEFFEE":void 0})}},oe=function(e){var t=e.data,r=t.label,n=t.speciesname;return Object(D.jsxs)(be.q.Option,Object(ce.a)(Object(ce.a)({},e),{},{children:[Object(D.jsx)("span",{children:r})," ",Object(D.jsx)("span",{style:{color:"darkgray"},children:n})]}))};return Object(D.jsxs)("div",{children:[Object(D.jsxs)(le.a,{className:"m-1",onSubmit:X(ae),children:[Object(D.jsxs)(de.a,{children:[Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formCoordEditButton",children:Object(D.jsxs)(le.a.Label,{children:[W("sidebar.treeTab.latLng")," ",Object(D.jsx)("a",{href:"#",children:Object(D.jsx)("i",{className:"fas fa-edit align-middle",onClick:function(){return w({lat:ee("latitude"),lng:ee("longitude")})}})})]})}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formLatTree",children:[Object(D.jsx)(se.a,{name:"latitude",rules:{required:!0},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",step:"any",size:"sm",isInvalid:!!te.latitude},t))}}),Object(D.jsx)(le.a.Control.Feedback,{type:"invalid",children:W("words.requiredField")})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formLngTree",children:[Object(D.jsx)(se.a,{name:"longitude",rules:{required:!0},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",step:"any",size:"sm",isInvalid:!!te.longitude},t))}}),Object(D.jsx)(le.a.Control.Feedback,{type:"invalid",children:W("words.requiredField")})]})]}),Object(D.jsxs)(le.a.Group,{controlId:"formSpecies",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.species")}),Object(D.jsx)(se.a,{name:"species",rules:{required:W("words.requiredField")},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:W("words.select"),isSearchable:!0,options:H,styles:ie,getOptionLabel:function(e){return"".concat(e.label," - ").concat(e.speciesname)},components:{Option:oe}}))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(t=te.species)||void 0===t?void 0:t.message})]}),Object(D.jsxs)(le.a.Group,{controlId:"formSpeciesCommentTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.speciescomment")}),Object(D.jsx)(se.a,{name:"speciescomment",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text"},t))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formCommentTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.comment")}),Object(D.jsx)(se.a,{name:"comment",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",as:"textarea",rows:3},t))}})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formPlaceTypeTree",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.placetype")}),Object(D.jsx)(se.a,{name:"placetype",rules:{required:W("words.requiredField")},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:W("words.select"),isClearable:!0,isSearchable:!1,options:q}))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(r=te.placetype)||void 0===r?void 0:r.message})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formIrrigationmethodTree",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.irrigationmethod")}),Object(D.jsx)(se.a,{name:"irrigationmethod",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:W("words.select"),isClearable:!0,isSearchable:!1,options:J}))}})]})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDatePlantedTree",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.dateplanted")}),Object(D.jsx)(se.a,{name:"dateplanted",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"date"},t))}})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formGoogleStreetUrlTree",style:{minWidth:"230px"},children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.googlestreeturl")}),Object(D.jsx)(se.a,{name:"googlestreeturl",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text"},t))}})]})]}),I?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(le.a.Group,{className:"mt-4",controlId:"formFirstInspectionTree",children:Object(D.jsx)(le.a.Label,{children:Object(D.jsx)("b",{children:W("sidebar.treeTab.firstInspection")})})}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formHeightTree",children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.heightTree")}),Object(D.jsx)(se.a,{name:"height",rules:{required:W("words.requiredField")},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm"},t))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(a=te.height)||void 0===a?void 0:a.message})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDiameterTree",children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.diameterTree")}),Object(D.jsx)(se.a,{name:"crowndiameter",rules:{required:W("words.requiredField"),max:99,pattern:/^\d+([.]\d)?$/},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm"},t))}}),(null===(i=te.crowndiameter)||void 0===i?void 0:i.message)&&Object(D.jsx)("p",{className:"requiredField",children:null===(o=te.crowndiameter)||void 0===o?void 0:o.message}),"max"===(null===(c=te.crowndiameter)||void 0===c?void 0:c.type)&&Object(D.jsx)("p",{className:"requiredField",children:"Maximum value is 99"}),"pattern"===(null===(s=te.crowndiameter)||void 0===s?void 0:s.type)&&Object(D.jsx)("p",{className:"requiredField",children:"Allow only one decimal point"})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formGirthTree",children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.girthTree")}),Object(D.jsxs)("div",{style:{height:"100%"},children:[Object(D.jsx)(se.a,{name:"trunkgirth",rules:{required:W("words.requiredField")},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm"},t))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(u=te.trunkgirth)||void 0===u?void 0:u.message})]})]})]}),Object(D.jsxs)(le.a.Group,{controlId:"formStatusTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{className:"required",children:W("sidebar.treeTab.status")}),Object(D.jsx)(se.a,{name:"status",rules:{required:W("words.requiredField")},control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:W("words.select"),isSearchable:!1,options:V}))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(p=te.status)||void 0===p?void 0:p.message})]}),Object(D.jsxs)(le.a.Group,{controlId:"formRemarksTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.remarks")}),Object(D.jsx)(se.a,{name:"remarks",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{isMulti:!0,placeholder:W("words.select"),isSearchable:!1,options:K}))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formCareTypesTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.careTypes")}),Object(D.jsx)(se.a,{name:"recommendations",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{isMulti:!0,placeholder:W("words.select"),isSearchable:!1,options:U}))}})]}),Object(D.jsx)(Ce,{controlFromUseForm:Q,signingS3Url:k,onCallbackDone:function(){console.log("DONE"),X(ae)()},ref:z})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(le.a.Group,{controlId:"formInspActTable",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:W("sidebar.treeTab.inspActionsTable")}),Object(D.jsx)(ve,{idTree:null===T||void 0===T?void 0:T.id,onClickButtonEditInsp:O,onClickButtonPhotosInsp:y})]}),Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formNewInspButton",children:[Object(D.jsx)(v.a,{style:{width:"100%"},onClick:function(){return(null===T||void 0===T?void 0:T.id)&&f(T.id)},variant:"light",children:W("sidebar.treeTab.newInspButton")})," "]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formNewActButton",children:[Object(D.jsx)(v.a,{style:{width:"100%"},variant:"light",children:W("sidebar.treeTab.newActButton")})," "]})]})]}),Object(D.jsx)(le.a.Group,{controlId:"formIdTree",className:"mt-3",children:Object(D.jsx)(se.a,{name:"id",control:Q,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",style:{display:"none"}},t))}})}),Object(D.jsxs)("div",{className:"mt-4 me-2 float-end",children:[Object(D.jsx)(v.a,{onClick:function(){return E(!0)},variant:"light",children:W("sidebar.treeTab.delete")})," ",Object(D.jsx)(v.a,{onClick:h,variant:"secondary",children:W("sidebar.treeTab.close")})," ",Object(D.jsx)(v.a,{type:"submit",onClick:I?function(e){return ne.apply(this,arguments)}:void 0,variant:"primary",style:{minWidth:"110px"},children:W("sidebar.treeTab.save")})]})]}),Object(D.jsxs)(je.a,{show:C,onHide:function(){return E(!1)},children:[Object(D.jsx)(je.a.Header,{closeButton:!0,children:Object(D.jsx)(je.a.Title,{children:W("words.deleting")})}),Object(D.jsx)(je.a.Body,{children:W("sidebar.treeTab.confirmDeleting")}),Object(D.jsxs)(je.a.Footer,{children:[Object(D.jsx)(v.a,{variant:"light",onClick:function(){E(!1),j(T)},children:W("words.delete")}),Object(D.jsx)(v.a,{variant:"secondary",onClick:function(){return E(!1)},children:W("words.cancel")})]})]})]})},Me=function(e){var t,r,a,i,o,c,s,u=e.onSubmitInsp,p=e.onDeleteInsp,m=e.onCloseInsp,j=e.dataInspForm,h=(e.city,e.signingS3Url),f=Object(n.useState)(!1),O=Object(d.a)(f,2),y=O[0],w=O[1],T=Object(x.c)((function(e){return e.dataReducer.dictStatuses})),k=Object(x.c)((function(e){return e.dataReducer.dictCareTypes})),A=Object(x.c)((function(e){return e.dataReducer.dictRemarks})),I=Object(g.a)().t,S=Object(n.useRef)(),F=Object(se.b)({defaultValues:{id:"",treeId:"",height:"",crowndiameter:"",trunkgirth:"",status:"",remarks:[],recommendations:[],photo1:"",photo2:"",photo3:""}}),C=F.control,E=F.handleSubmit,M=F.reset,N=(F.setValue,F.getValues,F.formState),L=N.errors,R=(N.isValid,F.trigger);Object(n.useEffect)((function(){var e={};e.id=null===j||void 0===j?void 0:j.id,e.treeId=null===j||void 0===j?void 0:j.tree,e.height=null===j||void 0===j?void 0:j.height,e.crowndiameter=null===j||void 0===j?void 0:j.crowndiameter,e.trunkgirth=null===j||void 0===j?void 0:j.trunkgirth;var t=null===j||void 0===j?void 0:j.status;t&&(e.status=B.find((function(e){return e.value===t})));var r=null===j||void 0===j?void 0:j.remarks;r&&(e.remarks=P.filter((function(e){return r.includes(e.value)})));var n=null===j||void 0===j?void 0:j.recommendations;n&&(e.recommendations=G.filter((function(e){return n.includes(e.value)}))),null!==j&&void 0!==j&&j.photo1?e.photo1=j.photo1:e.photo1="",null!==j&&void 0!==j&&j.photo2?e.photo2=j.photo2:e.photo2="",null!==j&&void 0!==j&&j.photo3?e.photo3=j.photo3:e.photo3="",M(e,{keepDefaultValues:!0}),console.log("dataInspForm")}),[j]);var B=[];Array.isArray(T)&&(B=T.map((function(e){return{value:e.id,label:e.statusname}})));var G=[];Array.isArray(k)&&(G=k.map((function(e){return{value:e.id,label:e.carename}})));var P=[];function z(){return(z=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,R();case 3:e.sent&&S.current.uploadPhotos();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){if(console.log("submit",e),e.height=parseInt(e.height),e.crowndiameter=parseFloat(e.crowndiameter),e.trunkgirth=parseInt(e.trunkgirth),e.status=e.status.value,null!==e&&void 0!==e&&e.remarks&&Array.isArray(e.remarks)){var t=[];e.remarks.forEach((function(e){t.push(e.value)})),e.remarks=t}if(null!==e&&void 0!==e&&e.recommendations&&Array.isArray(e.recommendations)){var r=[];e.recommendations.forEach((function(e){r.push(e.value)})),e.recommendations=r}u(Object(ce.a)(Object(ce.a)({},e),{},{user:null===j||void 0===j?void 0:j.user}))}Array.isArray(A)&&(P=A.map((function(e){return{value:e.id,label:e.remarkname}})));return Object(D.jsxs)("div",{children:[Object(D.jsxs)(le.a,{className:"m-1",onSubmit:E(W),children:[Object(D.jsxs)(de.a,{className:"mt-3",children:[Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formHeightTreeInsp",children:[Object(D.jsx)(le.a.Label,{className:"required",children:I("sidebar.treeTab.heightTree")}),Object(D.jsx)(se.a,{name:"height",rules:{required:I("words.requiredField")},control:C,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({size:"sm",type:"number"},t))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(t=L.height)||void 0===t?void 0:t.message})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formDiameterTreeInsp",children:[Object(D.jsx)(le.a.Label,{className:"required",children:I("sidebar.treeTab.diameterTree")}),Object(D.jsx)(se.a,{name:"crowndiameter",rules:{required:I("words.requiredField"),max:99,pattern:/^\d+([.]\d)?$/},control:C,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({size:"sm",type:"number"},t))}}),(null===(r=L.crowndiameter)||void 0===r?void 0:r.message)&&Object(D.jsx)("p",{className:"requiredField",children:null===(a=L.crowndiameter)||void 0===a?void 0:a.message}),"max"===(null===(i=L.crowndiameter)||void 0===i?void 0:i.type)&&Object(D.jsx)("p",{className:"requiredField",children:"Maximum value is 99"}),"pattern"===(null===(o=L.crowndiameter)||void 0===o?void 0:o.type)&&Object(D.jsx)("p",{className:"requiredField",children:"Allow only one decimal point"})]}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formGirthTreeInsp",children:[Object(D.jsx)(le.a.Label,{className:"required",children:I("sidebar.treeTab.girthTree")}),Object(D.jsx)(se.a,{name:"trunkgirth",rules:{required:I("words.requiredField")},control:C,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({size:"sm",type:"number"},t))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(c=L.trunkgirth)||void 0===c?void 0:c.message})]})]}),Object(D.jsxs)(le.a.Group,{controlId:"formStatusTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{className:"required",children:I("sidebar.treeTab.status")}),Object(D.jsx)(se.a,{name:"status",rules:{required:I("words.requiredField")},control:C,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{placeholder:I("words.select"),isSearchable:!1,options:B}))}}),Object(D.jsx)("p",{className:"requiredField",children:null===(s=L.status)||void 0===s?void 0:s.message})]}),Object(D.jsxs)(le.a.Group,{controlId:"formRemarksTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:I("sidebar.treeTab.remarks")}),Object(D.jsx)(se.a,{name:"remarks",control:C,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{isMulti:!0,placeholder:I("words.select"),isSearchable:!1,options:P}))}})]}),Object(D.jsxs)(le.a.Group,{controlId:"formCareTypesTree",className:"mt-3",children:[Object(D.jsx)(le.a.Label,{children:I("sidebar.treeTab.careTypes")}),Object(D.jsx)(se.a,{name:"recommendations",control:C,render:function(e){var t=e.field;return Object(D.jsx)(pe.a,Object(ce.a)(Object(ce.a)({},t),{},{isMulti:!0,placeholder:I("words.select"),isSearchable:!1,options:G}))}})]}),Object(D.jsx)(le.a.Group,{controlId:"formIdInsp",className:"mt-3",children:Object(D.jsx)(se.a,{name:"id",control:C,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",style:{display:"none"}},t))}})}),Object(D.jsx)(Ce,{controlFromUseForm:C,signingS3Url:h,serverPhoto:null===j||void 0===j?void 0:j.photoServer,onCallbackDone:function(){console.log("DONE"),E(W)()},ref:S}),Object(D.jsx)(le.a.Group,{controlId:"formIdTreeInsp",className:"mt-3",children:Object(D.jsx)(se.a,{name:"treeId",control:C,render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"number",size:"sm",min:"0",style:{display:"none"}},t))}})}),Object(D.jsxs)("div",{className:"mt-4 me-2 float-end",children:[Object(D.jsx)(v.a,{onClick:function(){return w(!0)},variant:"light",children:I("sidebar.inspTab.delete")})," ",Object(D.jsx)(v.a,{onClick:m,variant:"secondary",children:I("sidebar.inspTab.close")})," ",Object(D.jsx)(v.a,{type:"submit",onClick:function(e){return z.apply(this,arguments)},variant:"primary",style:{minWidth:"110px"},children:I("sidebar.inspTab.save")})]})]}),Object(D.jsxs)(je.a,{show:y,onHide:function(){return w(!1)},children:[Object(D.jsx)(je.a.Header,{closeButton:!0,children:Object(D.jsx)(je.a.Title,{children:I("words.deleting")})}),Object(D.jsx)(je.a.Body,{children:I("sidebar.inspTab.confirmDeleting")}),Object(D.jsxs)(je.a.Footer,{children:[Object(D.jsx)(v.a,{variant:"light",onClick:function(){w(!1),p(j)},children:I("words.delete")}),Object(D.jsx)(v.a,{variant:"secondary",onClick:function(){return w(!1)},children:I("words.cancel")})]})]})]})},Ne=r(67);r(183);var Le=function(e){var t=e.visible,r=e.setVisible,n=e.images;return Object(D.jsx)(je.a,{show:t,onHide:function(){return r({visible:!1,images:[]})},dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",children:Object(D.jsx)(je.a.Body,{children:Object(D.jsx)(Ne.a,{interval:null,children:n.map((function(e){return Object(D.jsx)(Ne.a.Item,{children:Object(D.jsx)("img",{className:"d-block w-100",src:e})},e)}))})})})};r(184);var Re=function(e){var t=e.title,r=e.value,n=e.isValueIsLink;return r?Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:t}),n?Object(D.jsx)("td",{children:Object(D.jsx)("a",{href:r,target:"_blank",children:"Link"})}):Object(D.jsx)("td",{children:r})]}):null};function De(e){if(e){var t=new Date(e);if(t){var r=t.toISOString().split("T");return 2===r.length?r[0]:e}}return null}var Be=function(e){var t=e.visible,r=e.data,n=e.setTreePreview,a=e.onButtonEditTreeClick,i=e.onClickButtonEditInsp,o=e.onClickButtonPhotosInsp,c=Object(g.a)().t,s=function(){return n({visible:!1,data:{photos:[]}})},l=function(){return d()>1};function d(){var e=0;return null!==r&&void 0!==r&&r.lastinsp_photo1&&r.lastinsp_photo1&&e++,null!==r&&void 0!==r&&r.lastinsp_photo2&&r.lastinsp_photo2&&e++,null!==r&&void 0!==r&&r.lastinsp_photo3&&r.lastinsp_photo3&&e++,e}function u(e){var t="lastinsp_photo"+e;return r.hasOwnProperty(t)&&r[t]&&Object(D.jsx)(Ne.a.Item,{className:"carouselItem",children:Object(D.jsx)("img",{className:"d-block w-100 imgItem",alt:"photo"+e,src:r.photoServer+r[t]})},r[t])}return Object(D.jsxs)(je.a,{show:t,onHide:s,dialogClassName:"modal-90w","aria-labelledby":"example-custom-modal-styling-title",children:[Object(D.jsx)(je.a.Header,{closeButton:!0,children:Object(D.jsxs)(je.a.Title,{children:[r.localname," - ",r.species," "]})}),Object(D.jsx)(je.a.Body,{children:Object(D.jsxs)(de.a,{className:"mt-1",children:[Object(D.jsx)(le.a.Group,{as:ue.a,controlId:"formTreePreviewLeftSide",style:{minWidth:"300px"},children:d()>0?Object(D.jsxs)(Ne.a,{interval:null,controls:l(),children:[u("1"),u("2"),u("3")]}):Object(D.jsx)(Ne.a,{interval:null,controls:l(),children:Object(D.jsx)(Ne.a.Item,{className:"carouselItem",children:Object(D.jsx)("img",{className:"d-block w-100 imgItem",alt:"",src:Fe})})})}),Object(D.jsxs)(le.a.Group,{as:ue.a,controlId:"formTreePreviewRightSide",children:[Object(D.jsx)(he.a,{striped:!0,children:Object(D.jsxs)("tbody",{children:[Object(D.jsx)(Re,{title:c("TreePreviewModal.status"),value:r.lastinsp_status}),Object(D.jsx)(Re,{title:c("TreePreviewModal.parameters"),value:"".concat(c("TreePreviewModal.heightTree"),": ").concat(r.lastinsp_height," \xa0\xa0 ").concat(c("TreePreviewModal.girthTree"),": ").concat(r.lastinsp_trunkgirth," \xa0\xa0 ").concat(c("TreePreviewModal.diameterTree"),": ").concat(r.lastinsp_crowndiameter)}),Object(D.jsx)(Re,{title:c("TreePreviewModal.dateplanted"),value:De(r.dateplanted)}),Object(D.jsx)(Re,{title:c("TreePreviewModal.googlestreeturl"),value:r.googlestreeturl,isValueIsLink:!0}),Object(D.jsx)(Re,{title:c("TreePreviewModal.remarks"),value:r.lastinsp_remarks}),Object(D.jsx)(Re,{title:c("TreePreviewModal.careTypes"),value:r.lastinsp_recommendations}),Object(D.jsx)(Re,{title:c("TreePreviewModal.comment"),value:r.comment})]})}),Object(D.jsx)("p",{className:"mt-5",id:"captionInspectsActions",children:"\u041f\u0440\u0435\u0433\u043b\u0435\u0434\u0438 \u0438 \u0414\u0435\u0439\u043d\u043e\u0441\u0442\u0438"}),Object(D.jsx)(ve,{idTree:null===r||void 0===r?void 0:r.id,onClickButtonEditInsp:function(e){n({visible:!1,data:{photos:[]}}),i(e)},onClickButtonPhotosInsp:o})]})]})}),Object(D.jsxs)(je.a.Footer,{children:[Object(D.jsx)(v.a,{variant:"light",onClick:function(){n({visible:!1,data:{photos:[]}}),a(r.id)},children:c("TreePreviewModal.edit")}),Object(D.jsx)(v.a,{variant:"primary",style:{minWidth:"160px"},onClick:s,children:c("TreePreviewModal.close")})]})]})},Ge=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken");function Pe(e,t,r,n){return ze.apply(this,arguments)}function ze(){return(ze=Object(l.a)(b.a.mark((function e(t,r,n,a){var i,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=He(Ge,a),e.next=3,fetch(t,{method:r,headers:i,body:JSON.stringify(n)});case 3:return o=e.sent,e.next=6,o.json();case 6:if(c=e.sent,!o.ok){e.next=9;break}return e.abrupt("return",c);case 9:throw new We(o.status,o.statusText,c.detail);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e,t,r){this.message=t,this.status=e,this.detail=r}function He(e,t){var r=new Headers;return r.append("Content-type","application/json"),e&&(r.append("X-CSRFToken",e),console.log("csrftoken",e)),t&&r.append("Authorization","Bearer "+t),r}var Ye="".concat("http://127.0.0.1:8000/api/","token/"),Ve="".concat("http://127.0.0.1:8000/api/","token/refresh/"),Ue="".concat("http://127.0.0.1:8000/api/","token/verify/"),Ke="".concat("http://127.0.0.1:8000/api/","currentusers/permissions/citytree"),qe="".concat("http://127.0.0.1:8000/api/","citytree/s3/generate_signed_url/"),Je="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/specieses/"),Ze="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/caretypes/"),Qe="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/remarks/"),Xe="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/placetypes/"),_e="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/irrigationmethods/"),$e="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/groupspecs/"),et="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/typespecs/"),tt="".concat("http://127.0.0.1:8000/api/","citytree/dictionary/statuses"),rt=function(e){return"".concat("http://127.0.0.1:8000/api/","citytree/").concat(e,"/trees/")},nt=function(e,t){return"".concat("http://127.0.0.1:8000/api/","citytree/").concat(e,"/trees/").concat(t,"/")};function at(){return(at=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return e.next=3,it(Ue,t.access);case 3:if(n=e.sent,console.log("isTokenValid",n),!n){e.next=7;break}return e.abrupt("return",!0);case 7:if(n){e.next=11;break}return e.next=10,ct(r,t.refresh);case 10:return e.abrupt("return",e.sent);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t){return ot.apply(this,arguments)}function ot(){return(ot=Object(l.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe(t,"POST",{token:r},r);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.log("checkAuthToken",e.t0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ct(e,t){return st.apply(this,arguments)}function st(){return(st=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lt(Ve,r);case 2:if(n=e.sent,t(n),!n){e.next=6;break}return e.abrupt("return",!0);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e,t){return dt.apply(this,arguments)}function dt(){return(dt=Object(l.a)(b.a.mark((function e(t,r){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe(t,"POST",{refresh:r});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.log("getNewAccessRefreshAuthToken",e.t0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var ut=r(138),bt=function(e){var t=e.setAuthToken,r=Object(x.b)(),a=Object(x.c)((function(e){return e.uiReducer.loginModalShow})),i=Object(n.useState)(!1),o=Object(d.a)(i,2),c=o[0],s=o[1],u=Object(g.a)().t;Object(n.useEffect)((function(){h(),s(!1)}),[a]);var p=Object(se.b)({defaultValues:{username:"",password:"",rememberme:!1}}),m=p.control,j=p.handleSubmit,h=p.reset,f=p.formState.errors;function O(){return(O=Object(l.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.abrupt("return",fetch(Ye,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){200===e.status?e.json().then((function(e){console.log("setAuthToken",e),t(e),s(!1),r(I(!1))})):401===e.status&&s(!0)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)(je.a,{show:a,onHide:function(){return r(I(!1))},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(D.jsx)(je.a.Header,{closeButton:!0,children:Object(D.jsx)(je.a.Title,{id:"contained-modal-title-vcenter",children:u("loginForm.title")})}),Object(D.jsx)(je.a.Body,{children:Object(D.jsxs)(le.a,{onSubmit:j((function(e){s(!1),localStorage.setItem("rememberme",e.rememberme.toString()),function(e){O.apply(this,arguments)}(e)})),children:[Object(D.jsxs)(le.a.Group,{className:"mb-3",controlId:"formLogin",children:[Object(D.jsx)(ut.a,{controlId:"floatingInput",label:u("loginForm.username"),className:"mb-3",children:Object(D.jsx)(se.a,{name:"username",control:m,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",placeholder:u("loginForm.username"),isInvalid:!!f.username},t))}})}),Object(D.jsx)(ut.a,{controlId:"floatingPassword",label:u("loginForm.password"),children:Object(D.jsx)(se.a,{name:"password",control:m,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"password",placeholder:u("loginForm.password"),isInvalid:!!f.password},t))}})})]}),Object(D.jsx)(le.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(D.jsx)(se.a,{name:"rememberme",control:m,rules:{required:!1},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Check,Object(ce.a)({type:"checkbox",label:u("loginForm.rememberMe")},t))}})}),c&&Object(D.jsx)(le.a.Text,{className:"text-danger",children:u("loginForm.wrongUsernamePassword")}),Object(D.jsx)(v.a,{className:"mb-3",variant:"primary",type:"submit",style:{display:"block",width:"100%"},children:u("loginForm.login")}),Object(D.jsx)(le.a.Text,{className:"text-muted mb-0",children:Object(D.jsxs)("p",{className:"text-center",children:[u("loginForm.dontHaveAccount")," ",Object(D.jsx)("a",{href:"#",onClick:function(){r(I(!1)),r(S(!0))},children:u("loginForm.signUp")})]})})]})})]})},pt=function(e){var t,r,a,i=e.setAuthToken,o=Object(x.b)(),c=Object(x.c)((function(e){return e.uiReducer.registerModalShow})),s=Object(g.a)().t;Object(n.useEffect)((function(){j()}),[c]);var u=Object(se.b)({defaultValues:{username:"",email:"",password:"",password2:"",first_name:"",last_name:""}}),p=u.control,m=u.handleSubmit,j=u.reset,h=u.setError,f=u.formState.errors;function O(){return(O=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("http://127.0.0.1:8000/api/","users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){console.log("ok",e),o(S(!1)),i(e.token)})):e.status>=400&&e.json().then((function(e){console.log(e);for(var t=0,r=Object.entries(e);t<r.length;t++){var n=Object(d.a)(r[t],2),a=n[0],i=n[1];h(a,{type:"manual",message:i})}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)(je.a,{show:c,onHide:function(){return o(S(!1))},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(D.jsx)(je.a.Header,{closeButton:!0,children:Object(D.jsx)(je.a.Title,{id:"contained-modal-title-vcenter",children:s("registerForm.title")})}),Object(D.jsx)(je.a.Body,{children:Object(D.jsxs)(le.a,{onSubmit:m((function(e){!function(e){O.apply(this,arguments)}(e)})),children:[Object(D.jsxs)(le.a.Group,{className:"mb-3",controlId:"formRegister",children:[(null===f||void 0===f||null===(t=f.username)||void 0===t?void 0:t.message)&&Object(D.jsx)(le.a.Text,{className:"text-danger",children:f.username.message.map((function(e){return Object(D.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(D.jsx)(ut.a,{controlId:"floatingUsername",label:s("registerForm.username"),className:"mb-3",children:Object(D.jsx)(se.a,{name:"username",control:p,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",placeholder:s("registerForm.username"),isInvalid:!!f.username},t))}})}),(null===f||void 0===f||null===(r=f.email)||void 0===r?void 0:r.message)&&Object(D.jsx)(le.a.Text,{className:"text-danger",children:f.email.message.map((function(e){return Object(D.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(D.jsx)(ut.a,{controlId:"floatingEmail",label:s("registerForm.email"),className:"mb-3",children:Object(D.jsx)(se.a,{name:"email",control:p,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",placeholder:s("registerForm.email"),isInvalid:!!f.email},t))}})}),(null===f||void 0===f||null===(a=f.password)||void 0===a?void 0:a.message)&&Object(D.jsx)(le.a.Text,{className:"text-danger",children:f.password.message.map((function(e){return Object(D.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(D.jsx)(ut.a,{controlId:"floatingPassword",label:s("registerForm.password"),className:"mb-3",children:Object(D.jsx)(se.a,{name:"password",control:p,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"password",placeholder:s("registerForm.password"),isInvalid:!!f.password},t))}})}),Object(D.jsx)(ut.a,{controlId:"floatingPassword2",label:s("registerForm.confirmPassword"),className:"mb-3",children:Object(D.jsx)(se.a,{name:"password2",control:p,rules:{required:!0},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"password",placeholder:s("registerForm.confirmPassword"),isInvalid:!!f.password2},t))}})}),Object(D.jsxs)(de.a,{children:[Object(D.jsx)(ue.a,{children:Object(D.jsx)(se.a,{name:"first_name",control:p,rules:{required:!1},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",size:"sm",placeholder:s("registerForm.firstNameOptional"),isInvalid:!!f.first_name},t))}})}),Object(D.jsx)(ue.a,{children:Object(D.jsx)(se.a,{name:"last_name",control:p,rules:{required:!1},render:function(e){var t=e.field;return Object(D.jsx)(le.a.Control,Object(ce.a)({type:"text",size:"sm",placeholder:s("registerForm.lastNameOptional"),isInvalid:!!f.last_name},t))}})})]})]}),Object(D.jsx)(v.a,{className:"mb-3",variant:"primary",type:"submit",style:{display:"block",width:"100%"},children:s("registerForm.register")}),Object(D.jsx)(le.a.Text,{className:"text-muted mb-0",children:Object(D.jsxs)("p",{className:"text-center",children:[s("registerForm.alreadyHaveAccount")," ",Object(D.jsx)("a",{href:"#",onClick:function(){o(S(!1)),o(I(!0))},children:s("registerForm.login")})]})})]})})]})},mt=r(31);function jt(e,t){var r,n=Object(mt.a)(e);try{for(n.s();!(r=n.n()).done;){if(r.value.value===t)return!0}}catch(a){n.e(a)}finally{n.f()}return!1}function ht(e,t){return e.filter((function(e){return t.includes(String(e.value))})).length>0}var ft=function(){var e=Object(l.a)(b.a.mark((function e(){var t,r,n,a,i,o,c,s,l,u,p,m,j,h,f,O;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Ot(Je),Ot(Ze),Ot(Qe),Ot(Xe),Ot(_e),Ot($e),Ot(et)]);case 2:return t=e.sent,r=Object(d.a)(t,7),n=r[0],a=r[1],i=r[2],o=r[3],c=r[4],s=r[5],l=r[6],e.next=13,n;case 13:return u=e.sent,e.next=16,a;case 16:return p=e.sent,e.next=19,i;case 19:return m=e.sent,e.next=22,o;case 22:return j=e.sent,e.next=25,c;case 25:return h=e.sent,e.next=28,s;case 28:return f=e.sent,e.next=31,l;case 31:return O=e.sent,e.abrupt("return",[u,p,m,j,h,f,O]);case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vt=r(130),gt=r(99),xt=r(140),yt=r(141),wt=r(142);vt.a.use(xt.a).use(gt.e).init({resources:{en:{translation:yt},bg:{translation:wt}},fallbackLng:"en",interpolation:{escapeValue:!1}});var Tt=vt.a,kt=function(){return{is_superuser:!1,tree:{view_tree:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.view_tree")},add_tree:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.add_tree")},change_tree:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.change_tree")},can_change_not_own_tree_record:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.can_change_not_own_tree_record")},can_delete_not_own_tree_record:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.can_delete_not_own_tree_record")},delete_tree:{granted:!1,deniedMessage:Tt.t("permsMessages.tree.delete_tree")}},inspection:{view_inspection:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.view_inspection")},add_inspection:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.add_inspection")},change_inspection:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.change_inspection")},can_change_not_own_insp_record:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.can_change_not_own_insp_record")},can_delete_not_own_insp_record:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.can_delete_not_own_insp_record")},delete_inspection:{granted:!1,deniedMessage:Tt.t("permsMessages.inspection.delete_inspection")}},careactivity:{view_careactivity:{granted:!1,deniedMessage:""}}}},At=function(e,t,r,n){if(!n)return alert("Authorization required"),!1;if(!0===(null===e||void 0===e?void 0:e.is_superuser))return!0;if(console.log("has_perm value",e),e){if(e.hasOwnProperty(t)&&e[t].hasOwnProperty(r)){var a;if(!0===(null===(a=e[t][r])||void 0===a?void 0:a.granted))return!0;var i,o=null===(i=e[t][r])||void 0===i?void 0:i.deniedMessage;o&&alert(o)}return!1}return console.log("has_perm","permObject is not exists"),console.log("has_perm value",e),!1};function It(e){return St.apply(this,arguments)}function St(){return(St=Object(l.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Pe(Ke,"GET",void 0,t.access);case 3:if(!(r=e.sent)||null===t||void 0===t||!t.user){e.next=8;break}if("object"!==typeof(n=function(){console.log("getCurrentUserPermissions",r);var e=kt(),t=Object(ce.a)({},e);if(t.is_superuser=r.is_superuser,null!==r&&void 0!==r&&r.citytree){var n=function(e){var n=r.citytree[e];Array.isArray(n)&&n.forEach((function(r){t[e][r]=Object(ce.a)(Object(ce.a)({},t[e][r]),{},{granted:!0})}))};for(var a in r.citytree)n(a)}return console.log("currentPermissions",t),{v:t}}())){e.next=8;break}return e.abrupt("return",n.v);case 8:return console.log("URL_GET_PERMISSIONS",r),e.abrupt("return",null);case 12:e.prev=12,e.t0=e.catch(0),console.log("getCurrentUserPermissions",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var Ft={radius:5,fillColor:"#008000",color:"#008000",weight:0,opacity:1,fillOpacity:.5};var Ct=function(){var e,t=Object(s.g)(),r=Object(x.b)(),a=Object(x.c)((function(e){return e.dataReducer.dataPermissions})),i=Object(x.c)((function(e){return e.dataReducer.dataTrees})),o=Object(x.c)((function(e){return e.uiReducer.showOkCancelMobileMarker})),c=Object(x.c)((function(e){return e.dataReducer.dataFilters})),u=Object(x.c)((function(e){return e.uiReducer.activeTabKey})),p=Object(x.c)((function(e){return e.uiReducer.showTreeTab})),j=Object(x.c)((function(e){return e.uiReducer.showInspTab})),h=Object(x.c)((function(e){return e.dataReducer.dictStatuses})),f=Object(x.c)((function(e){return e.uiReducer.checkButtonHeatmap})),O=Object(x.c)((function(e){return e.uiReducer.checkButtonNewMarker})),v=Object(x.c)((function(e){return e.uiReducer.isMobileDevice})),I=Object(n.useState)(13),S=Object(d.a)(I,2),F=S[0],N=S[1],G=function(){var e=Object(n.useState)(function(){var e;if(e="true"===localStorage.getItem("rememberme")?localStorage.getItem("token"):sessionStorage.getItem("token")){var t=JSON.parse(e),r=i(t);return r&&(t.user=r),t}return null}()),t=Object(d.a)(e,2),r=t[0],a=t[1];function i(e){var t=null===e||void 0===e?void 0:e.access;if(t){var r=t.split(".");if(r.length>1)return console.log("getUserInfoFromToken",JSON.parse(atob(r[1]))),{name:JSON.parse(atob(r[1])).username,id:JSON.parse(atob(r[1])).user_id}}}return[r,function(e){if(console.log("saveToken",e),e){"true"===localStorage.getItem("rememberme")?localStorage.setItem("token",JSON.stringify(e)):sessionStorage.setItem("token",JSON.stringify(e));var t=i(e);t&&(null!==e&&void 0!==e&&e.user?e.user=Object(ce.a)(Object(ce.a)({},e.user),{},{id:t.id,name:t.name}):e.user=t)}else localStorage.removeItem("token"),localStorage.removeItem("rememberme"),sessionStorage.removeItem("token");console.log("saveToken",e),a(e)}]}(),P=Object(d.a)(G,2),z=P[0],W=P[1],H=Object(n.useState)(window.innerWidth),Y=Object(d.a)(H,2),V=Y[0],U=Y[1],K=V<=768,q=Object(n.useState)(null),J=Object(d.a)(q,2),Z=J[0],Q=J[1],X=Object(n.useState)(null),_=Object(d.a)(X,2),$=_[0],ee=_[1],se=Object(n.useState)({visible:!1,images:[]}),le=Object(d.a)(se,2),de=le[0],ue=le[1],be=Object(n.useState)({visible:!1,data:{},idTree:null}),pe=Object(d.a)(be,2),je=pe[0],he=pe[1],fe=Object(g.a)(),Oe=fe.t,ve=fe.i18n,ge=[];Object(n.useEffect)((function(){return xe(),function(e,t){at.apply(this,arguments)}(z,W),r({type:"ISMOBILEDEVICE",payload:/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}),r(w(!K)),window.addEventListener("resize",ye),function(){window.removeEventListener("resize",ye)}}),[]);var xe=function(){ft().then((function(e){var t=Object(d.a)(e,7),n=t[0],a=t[1],i=t[2],o=t[3],c=t[4],s=t[5],l=t[6];r({type:"DICTSPECIESES",payload:n}),r(function(e){return{type:"DICTCARETYPES",payload:e}}(a)),r(function(e){return{type:"DICTREMARKS",payload:e}}(i)),r(function(e){return{type:"DICTPLACETYPES",payload:e}}(o)),r(function(e){return{type:"DICTIRRIGATIONMETHODS",payload:e}}(c)),r(function(e){return{type:"DICTGROUPSPECS",payload:e}}(s)),r(function(e){return{type:"DICTTYPESPECS",payload:e}}(l))})).catch((function(e){console.log("fetchAllDictionariesData error: ",e)}))};function ye(){U(window.innerWidth)}Object(n.useEffect)((function(){we()}),[t]);var we=function(){var e=Object(l.a)(b.a.mark((function e(){var n,a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(tt);case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,r({type:"DICTSTATUSES",payload:a}),!t.cityName){e.next=17;break}return i=rt(t.cityName),e.next=11,fetch(i);case 11:return n=e.sent,e.next=14,n.json();case 14:(a=e.sent).dateTimeGenerated=Date.now(),r(R(a));case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Te(e){var t,r,n=e.target.toGeoJSON();null!==n&&void 0!==n&&null!==(t=n.properties)&&void 0!==t&&t.id&&ke(null===n||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.id)}Object(n.useEffect)((function(){var e,t=setInterval((function(){z&&ct(W,z.refresh).then((function(e){return console.log("refreshTokens",e)}))}),24e4);return 0===Object.keys(a).length&&null!==z&&void 0!==z&&null!==(e=z.user)&&void 0!==e&&e.id&&It(z).then((function(e){e&&(console.log("permResult useEffect authToken",e),r(L(e)))})),function(){return clearInterval(t)}}),[z]),Object(n.useEffect)((function(){var e;null!==z&&void 0!==z&&null!==(e=z.user)&&void 0!==e&&e.id&&It(z).then((function(e){e&&r(L(e))}))}),[null===z||void 0===z||null===(e=z.user)||void 0===e?void 0:e.id]),Object(n.useEffect)((function(){var e;null!==z&&void 0!==z&&null!==(e=z.user)&&void 0!==e&&e.id&&It(z).then((function(e){e&&r(L(e))}))}),[ve.language]);var ke=function(e){he({visible:!0,data:{},idTree:e})};Object(n.useEffect)((function(){if(!0===(null===je||void 0===je?void 0:je.visible)&&null!==je&&void 0!==je&&je.idTree){if(!At(a,"tree","view_tree",z))return void he({visible:!1,data:{},idTree:null});Fe(je.idTree).then((function(e){return he({visible:!0,data:e,idTree:null})}))}}),[je]);var Ae=function(e){Fe(e).then((function(e){return Q(e)})),r(T(!0)),r(A("tree")),r(w(!0))},Ie=function(){var e=Object(l.a)(b.a.mark((function e(n){var i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At(a,"tree","change_tree",z)){e.next=2;break}return e.abrupt("return");case 2:if(!t.cityName){e.next=28;break}if(!n.id){e.next=11;break}if(console.log(n,z.user.id),n.useradded===z.user.id||At(a,"tree","can_change_not_own_tree_record",z)){e.next=7;break}return e.abrupt("return");case 7:o=nt(t.cityName,n.id),i="PUT",e.next=13;break;case 11:o=rt(t.cityName),i="POST";case 13:return e.prev=13,e.next=16,Pe(o,i,n,z.access);case 16:we(),r(C({visible:!1,position:{}})),r(y(!1)),r(A("filter")),r(T(!1)),K&&r(w(!1)),e.next=28;break;case 24:e.prev=24,e.t0=e.catch(13),console.log("onSubmitTree",e.t0),alert(e.t0.detail);case 28:case"end":return e.stop()}}),e,null,[[13,24]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(l.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At(a,"tree","delete_tree",z)){e.next=2;break}return e.abrupt("return");case 2:if(At(a,"tree","can_delete_not_own_tree_record",z)||(null===n||void 0===n?void 0:n.useradded)===z.user.id){e.next=4;break}return e.abrupt("return");case 4:if(null===n||void 0===n||!n.id||!t.cityName){e.next=10;break}return e.next=7,Pe(nt(t.cityName,n.id),"DELETE",{},z.access);case 7:r(A("filter")),r(T(!1)),we();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(l.a)(b.a.mark((function e(r){var n,a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat("http://127.0.0.1:8000/api/","citytree/").concat(t.cityName,"/trees/").concat(r,"/"),e.next=3,fetch(n);case 3:return a=e.sent,e.next=6,a.json();case 6:return i=e.sent,console.log(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(l.a)(b.a.mark((function e(n){var i,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.id){e.next=9;break}if(At(a,"inspection","change_inspection",z)){e.next=3;break}return e.abrupt("return");case 3:if((null===n||void 0===n?void 0:n.user)===z.user.id||At(a,"inspection","can_change_not_own_insp_record",z)){e.next=5;break}return e.abrupt("return");case 5:o="".concat("http://127.0.0.1:8000/api/","citytree/").concat(t.cityName,"/trees/").concat(n.treeId,"/inspections/").concat(n.id,"/"),i="PUT",e.next=11;break;case 9:o="".concat("http://127.0.0.1:8000/api/","citytree/").concat(t.cityName,"/trees/").concat(n.treeId,"/inspections/"),i="POST";case 11:return console.log("insp",n,o),e.next=14,Pe(o,i,n,z.access);case 14:Fe(n.treeId).then((function(e){return Q(e)})),we(),r(A(!0===p?"tree":"filter")),r(k(!1)),Re(n.treeId);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(l.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At(a,"inspection","delete_inspection",z)){e.next=2;break}return e.abrupt("return");case 2:if((null===n||void 0===n?void 0:n.user)===z.user.id||At(a,"inspection","can_delete_not_own_insp_record",z)){e.next=4;break}return e.abrupt("return");case 4:if(null===n||void 0===n||!n.id){e.next=9;break}return console.log("DELETE",n),e.next=8,Pe("".concat("http://127.0.0.1:8000/api/","citytree/").concat(t.cityName,"/trees/0/inspections/").concat(n.id),"DELETE",{},z.access);case 8:n&&(Fe(n.tree).then((function(e){return Q(e)})),r(A(!0===p?"tree":"filter")),r(k(!1)),we(),Re(n.tree));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Re(e){r({type:"DATALASTEDITEDTREEID",payload:{treeId:e}})}var De=function(e){At(a,"inspection","view_inspection",z)&&(ee(e),r(k(!0)),r(A("insp")),r(w(!0)))},Ge=function(e){console.log("onClickPhotos",e);var t=[];null!==e&&void 0!==e&&e.photo1&&t.push("".concat(e.photoServer).concat(null===e||void 0===e?void 0:e.photo1)),null!==e&&void 0!==e&&e.photo2&&t.push("".concat(e.photoServer).concat(null===e||void 0===e?void 0:e.photo2)),null!==e&&void 0!==e&&e.photo3&&t.push("".concat(e.photoServer).concat(null===e||void 0===e?void 0:e.photo3)),t.length>0&&ue({visible:!0,images:t})};function ze(e,t){var r=Math.floor(t/2);return e<19&&(r+=5*(18-e)),r<2&&(r=2),r}return Object(n.useEffect)((function(){O&&(At(a,"tree","add_tree",z)||(r(M(!1)),v&&(r(C({visible:!1,position:{lat:0,lng:0}})),r(E(!1)))))}),[O]),Object(D.jsx)(re,{cityName:t.cityName,children:Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(ne,{children:Object(D.jsxs)(ae.a,{id:"controlled-tab-example",activeKey:u,onSelect:function(e){return r(A(e))},className:"mb-3",children:[Object(D.jsx)(ie.a,{eventKey:"filter",title:Oe("sidebar.filterTab.title"),children:Object(D.jsx)("div",{className:"form-wrapper",children:Object(D.jsx)(me,{onSubmitFilter:function(e){console.log(e),ge=[],i.dateTimeGenerated=Date.now(),r({type:"DATAFILTERS",payload:e}),K&&r(w(!1))}})})}),Object(D.jsx)(ie.a,{eventKey:"tree",title:Oe("sidebar.treeTab.title"),tabClassName:p?"":"d-none",children:Object(D.jsx)("div",{className:"form-wrapper",children:Object(D.jsx)(Ee,{onSubmitTree:Ie,onDeleteTree:Se,onCloseTree:function(){r(C({visible:!1,position:{}})),r(y(!1)),r(A("filter")),r(T(!1))},onNewInsp:function(e){At(a,"inspection","add_inspection",z)&&(ee({tree:e}),r(k(!0)),r(A("insp")),r(w(!0)))},onClickInspEdit:De,onClickInspPhotos:Ge,onClickEditCoords:function(e){v&&(r(w(!1)),r(E(!0))),r(C({visible:!0,position:e}))},dataTreeForm:Z,city:t.cityName,signingS3Url:qe})})}),Object(D.jsx)(ie.a,{eventKey:"insp",title:Oe("sidebar.inspTab.title"),tabClassName:j?"":"d-none",children:Object(D.jsx)("div",{className:"form-wrapper",children:Object(D.jsx)(Me,{onSubmitInsp:Ce,onDeleteInsp:Ne,onCloseInsp:function(){r(k(!1)),r(A(!0===p?"tree":"filter"))},dataInspForm:$,city:t.cityName,signingS3Url:qe})})})]})}),Object(D.jsxs)("div",{id:"page-content-wrapper",children:[Object(D.jsx)(B,{currentCity:t.cityName,authToken:z,setAuthToken:W,appname:"citytree"}),Object(D.jsx)("div",{className:"container-fluid",style:{paddingRight:"0px",paddingLeft:"0px"},children:Object(D.jsx)(te,{mainData:i,appname:"citytree",dataHeatmapPoints:ge,currentCity:t.cityName,onClickMap:function(e){if(O&&!v){r(y(!0)),r(M(!1));var t={lat:"0",lng:"0"};t.lat=e.latlng.lat.toFixed(5),t.lng=e.latlng.lng.toFixed(5),r(C({visible:!0,position:t})),r(y(!0)),r(T(!0)),r(A("tree")),r(w(!0))}},onClickCreateNewMarker:function(e){},onZoomEnd:function(e){console.log("zoom",e.target._zoom),N(e.target._zoom)},onEachLayer:function(e,t){var r,n,a=null===e||void 0===e||null===(r=e.feature)||void 0===r||null===(n=r.properties)||void 0===n?void 0:n.lastinsp_crowndiameter;a&&e.setRadius(ze(t,a))},onDragEndNewMarker:function(e){r(C({visible:!0,position:e}))},pointToLayerCallback:function(e,t){return i.dateTimeGenerated=Date.now(),f?null:(e.properties.lastinsp_status&&Array.isArray(h)&&h.forEach((function(t){t.id===e.properties.lastinsp_status&&(Ft.fillColor="#".concat(t.hexcolor),Ft.color="#".concat(t.hexcolor),Ft.radius=ze(F,e.properties.lastinsp_crowndiameter))})),m.a.circle(t,Ft).on("click",Te))},filterMapCallback:function(e){var t=function(e,t,r){var n,a,i,o={species:!0,status:!0,recommendations:!0,remarks:!0,placetype:!0,irrigationmethod:!0,plantedDateFrom:!0,plantedDateTo:!0,addedDateFrom:!0,addedDateTo:!0,comment:!0,heightFrom:!0,heightTo:!0,trunkGirthFrom:!0,trunkGirthTo:!0,crownDiameterFrom:!0,crownDiameterTo:!0,showOnlyMyTrees:!0};i=null===t||void 0===t?void 0:t.speciesFilter,Array.isArray(i)&&(o.species=jt(i,e.properties.species)),i=null===t||void 0===t?void 0:t.statusFilter,Array.isArray(i)&&(o.status=jt(i,e.properties.lastinsp_status)),i=null===t||void 0===t?void 0:t.careTypeFilter,Array.isArray(i)&&(o.recommendations=ht(i,e.properties.recommendations)),i=null===t||void 0===t?void 0:t.remarkFilter,Array.isArray(i)&&(o.remarks=ht(i,e.properties.remarks)),(i=null===t||void 0===t||null===(n=t.placeTypeFilter)||void 0===n?void 0:n.value)&&(o.placetype=i===e.properties.placetype),(i=null===t||void 0===t||null===(a=t.irrigationMethodFilter)||void 0===a?void 0:a.value)&&(o.irrigationmethod=i===e.properties.irrigationmethod),(i=null===t||void 0===t?void 0:t.datePlantedFromFilter)&&(o.plantedDateFrom=e.properties.dateplanted>=i),(i=null===t||void 0===t?void 0:t.datePlantedToFilter)&&(o.plantedDateTo=e.properties.dateplanted<=i),(i=null===t||void 0===t?void 0:t.dateAddedFromFilter)&&(o.addedDateFrom=e.properties.datetimeadded>=i),(i=null===t||void 0===t?void 0:t.dateAddedToFilter)&&(o.addedDateTo=e.properties.datetimeadded<=i),(i=null===t||void 0===t?void 0:t.commentFilter)&&-1===e.properties.comment.toLowerCase().indexOf(i.toLowerCase())&&(o.comment=!1),(i=null===t||void 0===t?void 0:t.heightFromFilter)&&(o.heightFrom=e.properties.lastinsp_height>=i),(i=null===t||void 0===t?void 0:t.heightToFilter)&&(o.heightTo=e.properties.lastinsp_height<=i),(i=null===t||void 0===t?void 0:t.trunkGirthFromFilter)&&(o.trunkGirthFrom=e.properties.lastinsp_trunkgirth>=i),(i=null===t||void 0===t?void 0:t.trunkGirthToFilter)&&(o.trunkGirthTo=e.properties.lastinsp_trunkgirth<=i),(i=null===t||void 0===t?void 0:t.crownDiameterFromFilter)&&(o.crownDiameterFrom=e.properties.lastinsp_crowndiameter>=i),(i=null===t||void 0===t?void 0:t.crownDiameterToFilter)&&(o.crownDiameterTo=e.properties.lastinsp_crowndiameter<=i),(i=null===t||void 0===t?void 0:t.showMyTreesFilter)&&null!==r&&void 0!==r&&r.user&&(o.showOnlyMyTrees=r.user.id===e.properties.useradded);var c=!0;for(var s in o)if(!1===o[s]){c=!1;break}return c}(e,c,z);if(t){var r,n=null===e||void 0===e||null===(r=e.properties)||void 0===r?void 0:r.lastinsp_crowndiameter;n||(n=1);var a=[e.properties.latitude,e.properties.longitude,n/20];ge.push(a)}return t}})})]}),o&&Object(D.jsx)(oe,{}),Object(D.jsx)(Le,{visible:de.visible,setVisible:ue,images:de.images}),Object(D.jsx)(Be,{visible:je.visible,data:je.data,setTreePreview:he,onButtonEditTreeClick:function(e){Ae(e)},onClickInspEdit:De,onClickButtonEditInsp:De,onClickButtonPhotosInsp:Ge}),Object(D.jsx)(bt,{setAuthToken:W}),Object(D.jsx)(pt,{setAuthToken:W})]})})},Et=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,203)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),i(e),o(e)}))},Mt=r(116),Nt={showSidebar:!1,showTreeTab:!1,showInspTab:!1,activeTabKey:"filter",loginModalShow:!1,registerModalShow:!1,mapBaseLayerName:"Default",mapMarkerState:{visible:!1,position:{},isMobile:!1},newTreeCreation:!1,showOkCancelMobileMarker:!1,checkButtonNewMarker:!1,checkButtonHeatmap:!1,checkButtonGPS:!1,isMobileDevice:!1},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOWSIDEBAR":return Object(ce.a)(Object(ce.a)({},e),{},{showSidebar:t.payload});case"SHOWTREETAB":return Object(ce.a)(Object(ce.a)({},e),{},{showTreeTab:t.payload});case"SHOWINSPTAB":return Object(ce.a)(Object(ce.a)({},e),{},{showInspTab:t.payload});case"ACTIVETABKEY":return Object(ce.a)(Object(ce.a)({},e),{},{activeTabKey:t.payload});case"LOGINMODALSHOW":return Object(ce.a)(Object(ce.a)({},e),{},{loginModalShow:t.payload});case"REGISTERMODALSHOW":return Object(ce.a)(Object(ce.a)({},e),{},{registerModalShow:t.payload});case"MAPBASELAYERNAME":return Object(ce.a)(Object(ce.a)({},e),{},{mapBaseLayerName:t.payload});case"MAPMARKERSTATE":return Object(ce.a)(Object(ce.a)({},e),{},{mapMarkerState:t.payload});case"NEWTREECREATION":return Object(ce.a)(Object(ce.a)({},e),{},{newTreeCreation:t.payload});case"SHOWOKCANCELMOBILEMARKER":return Object(ce.a)(Object(ce.a)({},e),{},{showOkCancelMobileMarker:t.payload});case"CHECKBUTTONNEWMARKER":return Object(ce.a)(Object(ce.a)({},e),{},{checkButtonNewMarker:t.payload});case"CHECKBUTTONHEATMAP":return Object(ce.a)(Object(ce.a)({},e),{},{checkButtonHeatmap:t.payload});case"CHECKBUTTONGPS":return Object(ce.a)(Object(ce.a)({},e),{},{checkButtonGPS:t.payload});case"ISMOBILEDEVICE":return Object(ce.a)(Object(ce.a)({},e),{},{isMobileDevice:t.payload});default:return e}},Rt={dataPermissions:{},dataTrees:[],dataFilters:{},dictStatuses:[],dictSpecieses:[],dictCareTypes:[],dictRemarks:[],dictPlaceTypes:[],dictIrrigationMethods:[],dictGroupSpec:[],dictTypeSpec:[],dataLastEditedTreeId:{treeId:0}},Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATAPERMISSIONS":return Object(ce.a)(Object(ce.a)({},e),{},{dataPermissions:t.payload});case"DATATREES":return Object(ce.a)(Object(ce.a)({},e),{},{dataTrees:t.payload});case"DATALASTEDITEDTREEID":return Object(ce.a)(Object(ce.a)({},e),{},{dataLastEditedTreeId:t.payload});case"DICTSTATUSES":return Object(ce.a)(Object(ce.a)({},e),{},{dictStatuses:t.payload});case"DICTSPECIESES":return Object(ce.a)(Object(ce.a)({},e),{},{dictSpecieses:t.payload});case"DICTCARETYPES":return Object(ce.a)(Object(ce.a)({},e),{},{dictCareTypes:t.payload});case"DICTREMARKS":return Object(ce.a)(Object(ce.a)({},e),{},{dictRemarks:t.payload});case"DICTPLACETYPES":return Object(ce.a)(Object(ce.a)({},e),{},{dictPlaceTypes:t.payload});case"DICTIRRIGATIONMETHODS":return Object(ce.a)(Object(ce.a)({},e),{},{dictIrrigationMethods:t.payload});case"DICTGROUPSPECS":return Object(ce.a)(Object(ce.a)({},e),{},{dictGroupSpec:t.payload});case"DICTTYPESPECS":return Object(ce.a)(Object(ce.a)({},e),{},{dictTypeSpec:t.payload});case"DATAFILTERS":return Object(ce.a)(Object(ce.a)({},e),{},{dataFilters:t.payload});default:return e}},Bt=Object(Mt.a)({uiReducer:Lt,dataReducer:Dt}),Gt=(r(185),Object(Mt.b)(Bt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(Object(D.jsx)(x.a,{store:Gt,children:Object(D.jsx)(a.a.StrictMode,{children:Object(D.jsx)(c.a,{basename:"/citytree",children:Object(D.jsx)(s.c,{children:Object(D.jsx)(s.a,{path:"/",element:Object(D.jsx)(Ct,{}),children:Object(D.jsx)(s.a,{path:":cityName",element:Object(D.jsx)(Ct,{}),children:Object(D.jsx)(s.a,{path:":treeId",element:Object(D.jsx)(Ct,{})})})})})})})}),document.getElementById("root")),Et()}},[[186,1,2]]]);
//# sourceMappingURL=main.ea630930.chunk.js.map