(this.webpackJsonproadaccident=this.webpackJsonproadaccident||[]).push([[0],{140:function(e){e.exports=JSON.parse('{"menu":{"menu":"Menu","home":"Home","appMaps":{"title":"Maps","roadaccident":"Road traffic accidents","citytree":"City trees","urbanobject":"Urban objects"},"city":"City","signin":"Signin","logout":"Logout"},"sidebar":{"filterTab":{"title":"Filters","from":"From","to":"To","vehicleManeuver":"Vehicle maneuver","description":"Description","violationsType":"Violations type","violators":"Violators","injured":"Injured","driver":"Driver","motorcyclist":"Motorcyclist","cyclist":"Cyclist","pedestrian":"Pedestrian","kid":"Kid","pubtrPassenger":"Public transport passenger","killed":"Killed","publicTransportInvolved":"Public transport involved","showOnlyMyAccidents":"Added by me","clear":"Clear","search":"Search","maneuversList":{"idLngForward":"Forward","idLngRightTurn":"Right turn","idLngLeftTurn":"Left turn","idLngBackward":"Backward"},"typeViolationsList":{"idLngRunningRedLight":"Running red light","idLngPriorityViolation":"Priority violation","idLngSelfCrashed":"Self-crashed","idLngDrunkDriving":"Drunk driving"},"violatorsList":{"idLngDriver":"Driver","idLngMotorcyclist":"Motorcyclist","idLngCyclist":"Cyclist","idLngPedestrian":"Pedestrian"}},"accidentTab":{"title":"Accident","latLng":"Lat/Lng","description":"Description","datetime":"Date time","vehicleManeuver":"Vehicle maneuver","violationsType":"Violations type","violators":"Violators","injured":"Injured:","killed":"Killed:","driverAndPassengers":"Driver and passengers","motorcyclist":"Motorcyclist","cyclist":"Cyclist","pedestrian":"Pedestrian","kid":"Kid","publicTransPassenger":"Public transport passenger","publicTransInvolved":"Public transport involved","delete":"Delete","close":"Close","save":"Save"}},"loginForm":{"title":"SIGN IN","username":"Username","password":"Password","rememberMe":"Remember me","wrongUsernamePassword.":"Wrong username or password.","login":"LOGIN","dontHaveAccount":"Don\'t have account?","signUp":"Sign up"},"registerForm":{"title":"SIGN UP","username":"Username","password":"Password","confirmPassword":"Confirm password","email":"E-mail","firstNameOptional":"Firstname (optional)","lastNameOptional":"Lastname (optional)","register":"Register","alreadyHaveAccount":"Already have an account?","login":"Login"},"words":{"hello":"Hello","requiredField":"Required field","deleting":"Deleting","confirmDeleting":"Are you sure you want to delete this accident?","delete":"Delete","cancel":"Cancel","done":"Done"}}')},141:function(e){e.exports=JSON.parse('{"menu":{"menu":"\u041c\u0435\u043d\u044e","home":"\u041d\u0430\u0447\u0430\u043b\u043e","appMaps":{"title":"\u041a\u0430\u0440\u0442\u0438","roadaccident":"\u041f\u044a\u0442\u043d\u043e \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442\u043d\u0438 \u043f\u0440\u043e\u0438\u0437\u0448\u0435\u0441\u0442\u0432\u0438\u044f","citytree":"\u0413\u0440\u0430\u0434\u0441\u043a\u0430 \u0440\u0430\u0441\u0442\u0438\u0442\u0435\u043b\u043d\u043e\u0441\u0442","urbanobject":"\u0413\u0440\u0430\u0434\u0441\u043a\u0438 \u043e\u0431\u0435\u043a\u0442\u0438"},"city":"\u0413\u0440\u0430\u0434","signin":"\u0412\u0445\u043e\u0434","logout":"\u0418\u0437\u0445\u043e\u0434"},"sidebar":{"filterTab":{"title":"\u0422\u044a\u0440\u0441\u0435\u043d\u0435","from":"\u041e\u0442","to":"\u0414\u043e","vehicleManeuver":"\u041c\u0430\u043d\u044c\u043e\u0432\u044a\u0440 \u043d\u0430 \u041c\u041f\u0421","description":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","violationsType":"\u0412\u0438\u0434 \u043d\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435","violators":"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u0438","injured":"\u041f\u043e\u0441\u0442\u0440\u0430\u0434\u0430\u043b\u0438","driver":"\u0428\u043e\u0444\u044c\u043e\u0440","motorcyclist":"\u041c\u043e\u0442\u043e\u0446\u0438\u043a\u043b\u0438\u0441\u0442","cyclist":"\u0412\u0435\u043b\u043e\u0441\u0438\u043f\u0435\u0434\u0438\u0441\u0442","pedestrian":"\u041f\u0435\u0448\u0435\u0445\u043e\u0434\u0435\u0446","kid":"\u0414\u0435\u0442\u0435","pubtrPassenger":"\u041f\u044a\u0442\u043d\u0438\u043a \u043d\u0430 \u0413\u0422","killed":"\u0423\u0431\u0438\u0442\u0438","publicTransportInvolved":"\u0413\u0422 \u0443\u0447\u0430\u0441\u0442\u0432\u0430 \u0432 \u041f\u0422\u041f","showOnlyMyAccidents":"\u041f\u043e\u043a\u0430\u0436\u0438 \u041f\u0422\u041f \u0434\u043e\u0431\u0430\u0432\u0435\u043d\u0438 \u043e\u0442 \u043c\u0435\u043d","clear":"\u0418\u0437\u0447\u0438\u0441\u0442\u0438","search":"\u0422\u044a\u0440\u0441\u0438","maneuversList":{"idLngForward":"\u041f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u043f\u0440\u0435\u0434","idLngRightTurn":"\u041f\u0440\u0438 \u0437\u0430\u0432\u043e\u0439 \u043d\u0430\u0434\u044f\u0441\u043d\u043e","idLngLeftTurn":"\u041f\u0440\u0438 \u0437\u0430\u0432\u043e\u0439 \u043d\u0430\u043b\u044f\u0432\u043e","idLngBackward":"\u041f\u0440\u0438 \u0434\u0432\u0438\u0436\u0435\u043d\u0438\u0435 \u043d\u0430\u0437\u0430\u0434"},"typeViolationsList":{"idLngRunningRedLight":"\u041f\u0440\u0435\u043c\u0438\u043d\u0430\u0432\u0430\u043d\u0435 \u043d\u0430 \u0447\u0435\u0440\u0432\u0435\u043d\u043e","idLngPriorityViolation":"\u041e\u0442\u043d\u0435\u043c\u0430\u043d\u043e \u043d\u0430 \u043f\u0440\u0435\u0434\u0438\u043c\u0441\u0442\u0432\u043e","idLngSelfCrashed":"\u0421\u0430\u043c\u043e\u043a\u0430\u0442\u0430\u0441\u0442\u0440\u043e\u0444\u0438\u0440\u0430\u043b","idLngDrunkDriving":"\u0423\u043f\u043e\u0442\u0440\u0435\u0431\u0430 \u043d\u0430 \u0430\u043b\u043a\u043e\u0445\u043e\u043b/\u043d\u0430\u0440\u043a\u043e\u0442\u0438\u0446\u0438"},"violatorsList":{"idLngDriver":"\u0412\u043e\u0434\u0430\u0447","idLngMotorcyclist":"\u041c\u043e\u0442\u043e\u0446\u0438\u043a\u043b\u0438\u0441\u0442","idLngCyclist":"\u0412\u0435\u043b\u043e\u0441\u0438\u043f\u0435\u0434\u0438\u0441\u0442","idLngPedestrian":"\u041f\u0435\u0448\u0435\u0445\u043e\u0434\u0435\u0446"}},"accidentTab":{"title":"\u041f\u0422\u041f","latLng":"Lat/Lng","description":"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","datetime":"\u0414\u0430\u0442\u0430 \u0438 \u0447\u0430\u0441","vehicleManeuver":"\u041c\u0430\u043d\u044c\u043e\u0432\u044a\u0440 \u043d\u0430 \u041c\u041f\u0421","violationsType":"\u0412\u0438\u0434 \u043d\u0430 \u043d\u0430\u0440\u0443\u0448\u0435\u043d\u0438\u0435","violators":"\u041d\u0430\u0440\u0443\u0448\u0438\u0442\u0435\u043b\u0438","injured":"\u041f\u043e\u0441\u0442\u0440:","killed":"\u0423\u0431\u0438\u0442\u0438:","driverAndPassengers":"\u0428\u043e\u0444\u044c\u043e\u0440 \u0438 \u043f\u044a\u0442\u043d\u0438\u0446\u0438","motorcyclist":"\u041c\u043e\u0442\u043e\u0446\u0438\u043a\u043b\u0438\u0441\u0442","cyclist":"\u0412\u0435\u043b\u043e\u0441\u0438\u043f\u0435\u0434\u0438\u0441\u0442","pedestrian":"\u041f\u0435\u0448\u0435\u0445\u043e\u0434\u0435\u0446","kid":"\u0414\u0435\u0442\u0435","publicTransPassenger":"\u041f\u044a\u0442\u043d\u0438\u043a \u043d\u0430 \u0433\u0440\u0430\u0434\u0441\u043a\u0438 \u0442\u0440\u0430\u043d\u0441\u043f\u043e\u0440\u0442","publicTransInvolved":"\u0413\u0422 \u0443\u0447\u0430\u0441\u0442\u0432\u0430 \u0432 \u041f\u0422\u041f","delete":"\u0418\u0437\u0442\u0440\u0438\u0439","close":"\u0418\u0437\u0445\u043e\u0434","save":"\u0417\u0430\u043f\u0430\u0437\u0438"}},"loginForm":{"title":"\u0412\u0445\u043e\u0434","username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","password":"\u041f\u0430\u0440\u043e\u043b\u0430","rememberMe":"\u0417\u0430\u043f\u043e\u043c\u043d\u0438 \u043c\u0435","wrongUsernamePassword":"\u0413\u0440\u0435\u0448\u043d\u043e \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435 \u0438/\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u0430.","login":"\u0412\u0425\u041e\u0414","dontHaveAccount":"\u041d\u044f\u043c\u0430\u0442\u0435 \u0430\u043a\u0430\u0443\u043d\u0442?","signUp":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u0441\u0435"},"registerForm":{"title":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f","username":"\u041f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u0441\u043a\u043e \u0438\u043c\u0435","password":"\u041f\u0430\u0440\u043e\u043b\u0430","confirmPassword":"\u041f\u043e\u0432\u0442\u043e\u0440\u0438 \u043f\u0430\u0440\u043e\u043b\u0430","email":"\u0418\u043c\u0435\u0439\u043b","firstNameOptional":"\u0418\u043c\u0435 (\u043d\u0435\u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e)","lastNameOptional":"\u0424\u0430\u043c\u0438\u043b\u0438\u044f (\u043d\u0435\u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e)","register":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0430\u0439 \u043c\u0435","alreadyHaveAccount":"\u0412\u0435\u0447\u0435 \u0438\u043c\u0430\u0442\u0435 \u0430\u043a\u0430\u0443\u043d\u0442?","login":"\u0412\u0445\u043e\u0434"},"words":{"hello":"\u0417\u0434\u0440\u0430\u0432\u0435\u0439","requiredField":"\u041f\u043e\u043b\u0435\u0442\u043e \u0437\u0430\u0434\u044a\u043b\u0436\u0438\u0442\u0435\u043b\u043d\u043e","deleting":"\u0418\u0437\u0442\u0440\u0438\u0432\u0430\u043d\u0435","confirmDeleting":"\u041d\u0430\u0438\u0441\u0442\u0438\u043d\u0430 \u043b\u0438 \u0438\u0441\u043a\u0430\u0442\u0435 \u0434\u0430 \u0438\u0437\u0442\u0440\u0438\u0435\u0442\u0435 \u0442\u043e\u0437\u0438 \u0438\u043d\u0446\u0438\u0434\u0435\u043d\u0442?","delete":"\u0418\u0437\u0442\u0440\u0438\u0439","cancel":"\u041e\u0442\u043c\u0435\u043d\u0438","done":"\u0413\u043e\u0442\u043e\u0432\u043e"}}')},150:function(e,t,r){},151:function(e,t,r){},153:function(e,t,r){},165:function(e,t,r){},183:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(24),i=r.n(a),c=r(85),o=r(11),s=(r(150),r(151),r(27)),l=r(9),d=r.n(l),u=r(17),b=r(4),j=(r(153),r(15)),m=r.n(j),p=r(133),O=r(118),f=r(57),v=r(46),h=r(60),y=r(200),x=r(10),g=function(e){return{type:"NEWACCIDENTCREATION",payload:e}},A=function(e){return{type:"SHOWSIDEBAR",payload:e}},k=function(e){return{type:"SHOWACCIDENTTAB",payload:e}},F=function(e){return{type:"ACTIVETABKEY",payload:e}},I=function(e){return{type:"LOGINMODALSHOW",payload:e}},T=function(e){return{type:"REGISTERMODALSHOW",payload:e}},w=function(e){return{type:"MAPBASELAYERNAME",payload:e}},S=function(e){return{type:"MAPMARKERSTATE",payload:e}},C=function(e){return{type:"SHOWOKCANCELMOBILEMARKER",payload:e}},N=function(e){return{type:"CHECKBUTTONNEWMARKER",payload:e}},M=function(e){return{type:"CHECKBUTTONGPS",payload:e}},L=function(e){return{type:"DATAACCIDENTS",payload:e}},E=r(1);var K=function(e){var t,r=e.currentCity,a=e.appname,i=e.authToken,o=e.setAuthToken,s=Object(x.b)(),l=Object(x.c)((function(e){return e.uiReducer.showSidebar})),j=Object(n.useState)([]),m=Object(b.a)(j,2),g=m[0],k=m[1],F=Object(y.a)(),T=F.t,w=F.i18n;function S(e){w.changeLanguage(e)}return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://smartcitykey.com/api/","cities/"));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,k(r),console.log(r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(E.jsx)(O.a,{bg:"light",expand:"lg",children:Object(E.jsxs)(p.a,{children:[Object(E.jsx)(h.a,{className:"start-0",variant:"outline-primary",id:"menu-toggle",onClick:function(){return s(A(!l))},children:T("menu.menu")})," ",Object(E.jsx)(O.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(E.jsx)(O.a.Collapse,{id:"basic-navbar-nav",children:Object(E.jsxs)(f.a,{className:"ms-auto",children:[Object(E.jsx)(f.a.Link,{href:"/",children:T("menu.home")}),Object(E.jsxs)(v.a,{title:T("menu.appMaps.title"),id:"basic-nav-dropdown",children:[Object(E.jsx)(v.a.Item,{href:"/roadaccident/".concat(r),active:"roadaccident"===a,children:T("menu.appMaps.roadaccident")},"1"),Object(E.jsx)(v.a.Item,{href:"/citytree/".concat(r),active:"citytree"===a,children:T("menu.appMaps.citytree")},"2"),Object(E.jsx)(v.a.Item,{href:"/urbanobject/".concat(r),active:"urbanobject"===a,children:T("menu.appMaps.urbanobject")},"3")]}),Object(E.jsx)(v.a,{title:T("menu.city"),id:"basic-nav-dropdown",children:g.map((function(e){return Object(E.jsx)(v.a.Item,{as:c.b,to:"/".concat(e.sysname),active:r===e.sysname,children:e.cityname},e.id)}))}),Object(E.jsxs)(v.a,{title:"Lang",id:"basic-nav-dropdown",children:[Object(E.jsx)(v.a.Item,{active:"en"===w.language||"en-US"===w.language||"en-GB"===w.language,value:"en",onClick:function(){return S("en")},children:"English"},"1"),Object(E.jsx)(v.a.Item,{active:"bg"===w.language,value:"bg",onClick:function(){return S("bg")},children:"Bulgarian"},"2")]}),i?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(f.a.Link,{children:"".concat(T("words.hello"),", ").concat(null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.name)}),Object(E.jsx)(f.a.Link,{href:"#",onClick:function(){o(null)},children:T("menu.logout")})]}):Object(E.jsx)(f.a.Link,{href:"#",onClick:function(){return s(I(!0))},children:T("menu.signin")})]})})]})})},D=r(191),R=r(192),P=r(193),z=r(189),B=r(194),H=r(195);r(164),r(165),r(166),r(167),r(130);var G=function(e,t,r,n){return m.a.easyButton({position:"topright",states:[{title:"",stateName:"off",icon:'<i class="'.concat(t,'"></i>'),onClick:function(e){e.state("on"),e.button.style.backgroundColor="red",n(!0)}},{title:"",stateName:"on",icon:'<i class="'.concat(r,'"></i>'),onClick:function(e){e.state("off"),e.button.style.backgroundColor="white",n(!1)}}]}).addTo(e)},V=r(190),U=r(142);var W,Y,J,q=function(e){var t=e.mapBaseLayerName;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(z.a.BaseLayer,{checked:"Default"===t,name:"Default",children:Object(E.jsx)(V.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/streets-v11",maxZoom:21,tileSize:512,zoomOffset:-1})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Dark"===t,name:"Dark",children:Object(E.jsx)(V.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/dark-v10",tileSize:512,zoomOffset:-1})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Google"===t,name:"Google",children:Object(E.jsx)(V.a,{attribution:"Google",url:"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Sat1"===t,name:"Sat1",children:Object(E.jsx)(U.a,{bingkey:"AniAD3xsGTaSbK1pa0_UkWS1CldG0nGI7r55MlVZqHhyKil9rD9dFK8536u8hTj1",type:"Aerial"})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Sat2"===t,name:"Sat2",children:Object(E.jsx)(V.a,{attribution:"Google",url:"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}",maxZoom:20,subdomains:["mt0","mt1","mt2","mt3"]})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Sat3"===t,name:"Sat3",children:Object(E.jsx)(V.a,{attribution:"Tiles \xa9 Esri",url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",maxZoom:19})}),Object(E.jsx)(z.a.BaseLayer,{checked:"Sat4"===t,name:"Sat4",children:Object(E.jsx)(V.a,{attribution:'Map data \xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",accessToken:"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ",id:"mapbox/satellite-v9",tileSize:512,maxZoom:21,zoomOffset:-1})})]})},Z=(r(169),r(134)),X=r.n(Z),Q=(r(171),m.a.icon({iconUrl:"data:image/png;base64,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",shadowUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]})),_="";var $=function(e){var t=e.mainData,r=e.appname,a=e.dataHeatmapPoints,i=e.currentCity,c=e.onDragEndNewMarker,o=e.onClickMap,s=e.onZoomEnd,l=e.onEachLayer,j=e.pointToLayerCallback,p=e.filterMapCallback,O=Object(x.b)(),f=Object(x.c)((function(e){return e.uiReducer.mapBaseLayerName})),v=Object(x.c)((function(e){return e.uiReducer.isMobileDevice})),h=Object(x.c)((function(e){return e.uiReducer.showSidebar})),y=Object(x.c)((function(e){return e.uiReducer.mapMarkerState})),g=Object(x.c)((function(e){return e.uiReducer.showOkCancelMobileMarker})),A=Object(x.c)((function(e){return e.uiReducer.checkButtonNewMarker})),k=Object(x.c)((function(e){return e.uiReducer.checkButtonHeatmap})),F=Object(x.c)((function(e){return e.uiReducer.checkButtonGPS})),I=Object(n.useState)(null),T=Object(b.a)(I,2),L=T[0],K=T[1],V=Object(n.useState)(null),U=Object(b.a)(V,2),Z=U[0],$=U[1],ee=Object(n.useState)(13),te=Object(b.a)(ee,2),re=te[0],ne=te[1],ae=Object(n.useState)(null),ie=Object(b.a)(ae,2),ce=ie[0],oe=ie[1],se=Object(n.useState)(null),le=Object(b.a)(se,2),de=le[0],ue=le[1],be=Object(n.useState)(null),je=Object(b.a)(be,2),me=je[0],pe=je[1],Oe=document.cookie.split("; ").find((function(e){return e.startsWith("mapname=")}));Oe&&Oe.split("=")[1];var fe=Object(n.useRef)(null);Object(n.useEffect)((function(){if(Z){oe(G(Z,"fas fa-map-marker-alt fa-lg","fas fa-map-marker-alt fa-lg",ve)),ue(G(Z,"fas fa-eye fa-lg","fas fa-eye-slash fa-lg",he)),pe(G(Z,"fas fa-satellite-dish fa-lg","fas fa-satellite-dish fa-lg",xe));var e=document.cookie.split("; ").find((function(e){return e.startsWith("mapname=")}));e&&O(w(e.split("=")[1]))}return function(){ce&&ce.remove(),de&&de.remove(),me&&me.remove()}}),[Z]),Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://smartcitykey.com/api/","cities/").concat(i));case 2:return t=e.sent,e.next=5,t.json();case 5:r=e.sent,K(r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),console.log("currentCity")}),[i]),Object(n.useEffect)((function(){ce&&(A?(ce.state("on"),ce.button.style.backgroundColor="red"):(ce.state("off"),ce.button.style.backgroundColor="white"))}),[A]),Object(n.useEffect)((function(){de&&(k?(de.state("on"),de.button.style.backgroundColor="red"):(de.state("off"),de.button.style.backgroundColor="white"))}),[k]),Object(n.useEffect)((function(){me&&(F?(me.state("on"),me.button.style.backgroundColor="red"):(me.state("off"),me.button.style.backgroundColor="white"))}),[F]),Object(n.useEffect)((function(){Z&&!v&&(A?m.a.DomUtil.addClass(Z._container,"crosshair-cursor-enabled"):m.a.DomUtil.removeClass(Z._container,"crosshair-cursor-enabled"))}),[A]),Object(n.useEffect)((function(){Z&&window.setTimeout((function(){Z.invalidateSize({pan:!1})}),600)}),[h]);var ve=function(e){O(N(e)),v&&e&&(O(S({visible:!0,position:{lat:0,lng:0}})),O(C(!0)))},he=function(e){console.log("onClickHeatmap",e),O(w(e?"Dark":"Default")),O({type:"CHECKBUTTONHEATMAP",payload:e})};function ye(){var e=Object(D.a)();return L&&(_!==L.sysname&&e.panTo([parseFloat(L.latitude),parseFloat(L.longitude)]),_=L.sysname),null}function xe(e){Z&&(e?(Y=4,Z.locate({maxZoom:20,enableHighAccuracy:!0,watch:!0,maximumAge:2e4})):(Z.stopLocate(),Z.removeLayer(J),Y=4)),O(M(e))}function ge(e,t){t.on({click:function(e){console.log("e: ",e),console.log("click")}})}function Ae(e){var t=e.mapMarkerState,r=t.visible,a=Object(D.a)(),i=Object(n.useMemo)((function(){return{dragend:function(){if(fe.current){var e=fe.current;if(!v&&null!=e){var t=e.getLatLng(),r={lat:"0",lng:"0"};r.lat=t.lat.toFixed(5),r.lng=t.lng.toFixed(5),(n=0,new Promise((function(e){return setTimeout(e,n)}))).then((function(){O(S({visible:!0,position:r}))}))}}var n}}}),[]);return Object(E.jsx)(E.Fragment,{children:r&&Object(E.jsx)(E.Fragment,{children:v?Object(E.jsx)(R.a,{icon:Q,draggable:!1,position:0==t.position.lat?a.getCenter():t.position,ref:fe},"newMarker"):Object(E.jsx)(R.a,{icon:Q,draggable:!0,position:t.position,ref:fe,eventHandlers:i},"newMarker")})})}function ke(){var e=Object(D.b)({baselayerchange:function(e){document.cookie="mapname="+e.name},move:function(e){g&&(fe.current&&fe.current.setLatLng({lat:e.target.getCenter().lat,lng:e.target.getCenter().lng}))},moveend:function(e){if(g&&fe.current){var t=fe.current.getLatLng(),r={lat:"0",lng:"0"};r.lat=t.lat.toFixed(5),r.lng=t.lng.toFixed(5),O(S({visible:!0,position:r}))}},click:function(e){o(e)},zoomend:function(e){s&&s(e),ne(e.target._zoom)},locationfound:function(t){var r=t.accuracy/2;Y>0&&(e.setView(t.latlng,20),Y-=1),e.hasLayer(J)?(J.setLatLng(t.latlng),J.setRadius(r)):J=m.a.circle(t.latlng,r).addTo(e)},locationerror:function(e){O(M(!1)),alert(e.message)}});return null}function Fe(){var e=Object(D.a)(),t=e.getZoom();return l&&e.eachLayer((function(e){l(e,t)})),null}function Ie(){var e=Object(D.a)();return W&&e.removeLayer(W),k&&a&&(W=m.a.heatLayer(a,{gradient:{.4:"#1E90FF",.8:"white",1:"red"},max:1.5,radius:14,blur:10,maxZoom:6}),e.addLayer(W)),null}return Object(E.jsx)(E.Fragment,{children:L&&"0"!==L.longitude&&"0"!==L.latitude?Object(E.jsxs)(P.a,{whenCreated:$,center:[parseFloat(L.latitude),parseFloat(L.longitude)],zoom:L.zoom,zoomControl:!1,scrollWheelZoom:!0,style:{height:"calc(100vh - 60px)",width:"100%"},children:[Object(E.jsx)(z.a,{position:"topleft",children:Object(E.jsx)(q,{mapBaseLayerName:f})}),Object(E.jsx)(ye,{}),"roadaccident"===r&&Object(E.jsx)(E.Fragment,{children:re&&re<15?Object(E.jsx)(B.a,{data:t,pointToLayer:j,filter:p,onEachFeature:ge},t.dateTimeGenerated):Object(E.jsx)(X.a,{spiderfyOnMaxZoom:!0,showCoverageOnHover:!1,zoomToBoundsOnClick:!0,maxClusterRadius:15,iconCreateFunction:function(e){var t,r=e.getChildCount();return 2==r&&(t="1"),r>=3&&r<=5&&(t="2"),r>=6&&r<=9&&(t="3"),r>=10&&r<=14&&(t="4"),r>14&&(t="5"),m.a.divIcon({html:r.toString(),className:"cluster digits-"+t,iconSize:void 0})},children:Object(E.jsx)(B.a,{data:t,pointToLayer:j,filter:p,onEachFeature:ge},t.dateTimeGenerated)})}),"citytree"===r&&Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(B.a,{data:t,pointToLayer:j,filter:p,onEachFeature:ge},t.dateTimeGenerated)}),Object(E.jsx)(Ae,{mapMarkerState:y,onDragEndNewMarker:c}),Object(E.jsx)(ke,{}),!v&&Object(E.jsx)(H.a,{position:"bottomright"}),Object(E.jsx)(Ie,{}),l&&Object(E.jsx)(Fe,{})]}):Object(E.jsx)("p",{children:"Loading..."})})},ee=function(e){var t=e.children;return Object(E.jsx)("div",{className:"bg-light border-right",id:"sidebar-wrapper",children:Object(E.jsx)("div",{className:"list-group list-group-flush",style:{marginTop:"15px"},children:t})})},te=r(138),re=r(126),ne=r(2),ae=r(8),ie=r(197),ce=r(196),oe=r(135),se=r(199),le=r(56),de=function(e){var t=e.onSubmitFilter,r=Object(x.c)((function(e){return e.dataReducer.dictManeuvers})),a=Object(x.c)((function(e){return e.dataReducer.dictTypeViolations})),i=Object(x.c)((function(e){return e.dataReducer.dictViolators})),c=Object(x.c)((function(e){return e.dataReducer.minMaxDateData})),o=Object(y.a)(),s=o.t;o.i18n;function l(){m("dateFromFilter",c.minDate),m("dateToFilter",c.maxDate)}Object(n.useEffect)((function(){l()}),[c]);var d=Object(ae.b)({reValidateMode:"onChange",defaultValues:{dateFromFilter:"",dateToFilter:"",descFilter:"",maneuverFilter:"",violationsTypeFilter:"",violatorsFilter:"",driverViolationFilter:!1,motorcyclistViolationFilter:!1,cyclistViolationFilter:!1,pedestrianViolationFilter:!1,driverInjuredFilter:!1,motorcyclistInjuredFilter:!1,cyclistInjuredFilter:!1,pedestrianInjuredFilter:!1,kidsInjuredFilter:!1,pubtrPassengersInjuredFilter:!1,driversKilledFilter:!1,motorcyclistsKilledFilter:!1,cyclistsKilledFilter:!1,pedestrianKilledFilter:!1,kidsKilledFilter:!1,pubtrPassengersKilledFilter:!1,publicTransportInvolvedFilter:!1,showOnlyMyAccidentsFilter:!1,select:{}}}),u=d.control,b=d.handleSubmit,j=d.reset,m=d.setValue,p=[];Array.isArray(r)&&(p=r.map((function(e){return{value:e.id,label:s("sidebar.filterTab.maneuversList.".concat(e.maneuvername))}})));var O=[];Array.isArray(a)&&(O=a.map((function(e){return{value:e.id,label:s("sidebar.filterTab.typeViolationsList.".concat(e.violationname))}})));var f=[];return Array.isArray(i)&&(f=i.map((function(e){return{value:e.id,label:s("sidebar.filterTab.violatorsList.".concat(e.violatorname))}}))),Object(E.jsx)("div",{children:Object(E.jsxs)(ie.a,{className:"m-1",onSubmit:b(t),children:[Object(E.jsxs)(ce.a,{children:[Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formDateFromFilter",children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.from")}),Object(E.jsx)(ae.a,{name:"dateFromFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"date"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formDateToFilter",children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.to")}),Object(E.jsx)(ae.a,{name:"dateToFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"date"},t))}})]})]}),Object(E.jsxs)(ce.a,{className:"mt-3",children:[Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formManeuverFilter",style:{minWidth:"250px"},children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.vehicleManeuver")}),Object(E.jsx)(ae.a,{name:"maneuverFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isClearable:!0,isSearchable:!1,options:p}))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formDescFilter",children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.description")}),Object(E.jsx)(ae.a,{name:"descFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text"},t))}})]})]}),Object(E.jsxs)(ie.a.Group,{controlId:"formViolationsTypeFilter",className:"mt-3",children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.violationsType")}),Object(E.jsx)(ae.a,{name:"violationsTypeFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isMulti:!0,isSearchable:!1,options:O}))}})]}),Object(E.jsxs)(ie.a.Group,{controlId:"formviolatorsFilter",className:"mt-3",children:[Object(E.jsx)(ie.a.Label,{children:s("sidebar.filterTab.violators")}),Object(E.jsx)(ae.a,{name:"violatorsFilter",control:u,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isMulti:!0,isSearchable:!1,options:f}))}})]}),Object(E.jsxs)(se.a,{body:!0,className:"mt-3",children:[Object(E.jsx)(se.a.Title,{children:Object(E.jsx)("h6",{children:s("sidebar.filterTab.injured")})}),Object(E.jsx)(ae.a,{name:"driverInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.driver"),type:"checkbox",id:"idDriverInjuredFilter"}))}}),Object(E.jsx)(ae.a,{name:"motorcyclistInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.motorcyclist"),type:"checkbox",id:"idMotorcyclistInjuredFilter"}))}}),Object(E.jsx)(ae.a,{name:"cyclistInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.cyclist"),type:"checkbox",id:"idCyclistInjuredFilter"}))}}),Object(E.jsx)(ae.a,{name:"pedestrianInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.pedestrian"),type:"checkbox",id:"idPedestrianInjuredFilter"}))}}),Object(E.jsx)(ae.a,{name:"kidsInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.kid"),type:"checkbox",id:"idKidsInjuredFilter"}))}}),Object(E.jsx)(ae.a,{name:"pubtrPassengersInjuredFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.pubtrPassenger"),type:"checkbox",id:"idPubtrPassengersInjuredFilter"}))}})]}),Object(E.jsxs)(se.a,{body:!0,className:"mt-3",children:[Object(E.jsx)(se.a.Title,{children:Object(E.jsx)("h6",{children:s("sidebar.filterTab.killed")})}),Object(E.jsx)(ae.a,{name:"driversKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.driver"),type:"checkbox",id:"idDriversKilledFilter"}))}}),Object(E.jsx)(ae.a,{name:"motorcyclistsKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.motorcyclist"),type:"checkbox",id:"idMotorcyclistsKilledFilter"}))}}),Object(E.jsx)(ae.a,{name:"cyclistsKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.cyclist"),type:"checkbox",id:"idCyclistsKilledFilter"}))}}),Object(E.jsx)(ae.a,{name:"pedestrianKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.pedestrian"),type:"checkbox",id:"idPedestrianKilledFilter"}))}}),Object(E.jsx)(ae.a,{name:"kidsKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.kid"),type:"checkbox",id:"idKidsKilledFilter"}))}}),Object(E.jsx)(ae.a,{name:"pubtrPassengersKilledFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.pubtrPassenger"),type:"checkbox",id:"idPubtrPassengersKilledFilter"}))}})]}),Object(E.jsx)(ie.a.Group,{controlId:"formPublicTransportInvolvedFilter",className:"mt-3 ms-1",children:Object(E.jsx)(ae.a,{name:"publicTransportInvolvedFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.publicTransportInvolved"),type:"checkbox",id:"idPublicTransportInvolvedFilter"}))}})}),Object(E.jsx)(ie.a.Group,{controlId:"formShowOnlyMyAccidentsFilter",className:"mt-3 ms-1",children:Object(E.jsx)(ae.a,{name:"showOnlyMyAccidentsFilter",control:u,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:s("sidebar.filterTab.showOnlyMyAccidents"),type:"checkbox",id:"idShowOnlyMyAccidentsFilter"}))}})}),Object(E.jsxs)("div",{className:"mt-4 me-2 float-end",children:[Object(E.jsx)(h.a,{variant:"light",onClick:function(){j(),l(),t({})},children:s("sidebar.filterTab.clear")})," ",Object(E.jsx)(h.a,{type:"submit",variant:"primary",style:{minWidth:"150px"},children:s("sidebar.filterTab.search")})," "]})]})})},ue=r(198),be=r(137),je=r.n(be),me=(r(181),r(125)),pe=r.n(me);var Oe=function(e){var t=e.onSubmitAccident,r=e.onDeleteAccident,a=e.onCloseAccident,i=e.onClickEditCoords,c=e.dataAccidentForm,o=Object(x.c)((function(e){return e.uiReducer.mapMarkerState})),s=Object(x.c)((function(e){return e.uiReducer.newAccidentCreation})),l=Object(x.c)((function(e){return e.dataReducer.dictManeuvers})),d=Object(x.c)((function(e){return e.dataReducer.dictTypeViolations})),u=Object(x.c)((function(e){return e.dataReducer.dictViolators})),j=Object(n.useState)(!1),m=Object(b.a)(j,2),p=m[0],O=m[1],f=Object(n.useRef)(null),v=Object(y.a)().t;Object(n.useEffect)((function(){w(),f.current.state.inputValue="",f.current.state.selectedDate=void 0,S("latAccidentForm",o.position.lat),S("lngAccidentForm",o.position.lng)}),[s]),Object(n.useEffect)((function(){o.visible&&(S("latAccidentForm",o.position.lat),S("lngAccidentForm",o.position.lng))}),[o]),Object(n.useEffect)((function(){var e,t,r,n,a,i,o,s,l,d,u,b,j,m,p,O,f,v,h,y,x,F,I={};(I.accidentId=null===c||void 0===c||null===(e=c.properties)||void 0===e?void 0:e.id,I.latAccidentForm=null===c||void 0===c||null===(t=c.properties)||void 0===t?void 0:t.latitude,I.lngAccidentForm=null===c||void 0===c||null===(r=c.properties)||void 0===r?void 0:r.longitude,I.descAccidentForm=null===c||void 0===c||null===(n=c.properties)||void 0===n?void 0:n.description,null===c||void 0===c||null===(a=c.properties)||void 0===a?void 0:a.datetime)&&(I.dateTimeAccidentForm=pe()(null===c||void 0===c||null===(F=c.properties)||void 0===F?void 0:F.datetime));var T=null===c||void 0===c||null===(i=c.properties)||void 0===i?void 0:i.maneuver;T&&(console.log("optionsManeuverFilter",g),I.maneuverAccidentForm=g.find((function(e){return e.value==T})));var S=null===c||void 0===c||null===(o=c.properties)||void 0===o?void 0:o.violations_type;if(S){var C=S.map((function(e){return parseInt(e)}));I.violationsTypeAccidentForm=A.filter((function(e){return C.includes(e.value)}))}var N=null===c||void 0===c||null===(s=c.properties)||void 0===s?void 0:s.violators;if(N){var M=N.map((function(e){return parseInt(e)}));I.violatorsAccidentForm=k.filter((function(e){return M.includes(e.value)}))}I.driversInjuredAccidentForm=null===c||void 0===c||null===(l=c.properties)||void 0===l?void 0:l.drivers_injured,I.motorcyclistsInjuredAccidentForm=null===c||void 0===c||null===(d=c.properties)||void 0===d?void 0:d.motorcyclists_injured,I.cyclistsInjuredAccidentForm=null===c||void 0===c||null===(u=c.properties)||void 0===u?void 0:u.cyclists_injured,I.pedInjuredAccidentForm=null===c||void 0===c||null===(b=c.properties)||void 0===b?void 0:b.ped_injured,I.kidsInjuredAccidentForm=null===c||void 0===c||null===(j=c.properties)||void 0===j?void 0:j.kids_injured,I.pubtrPassengersInjuredAccidentForm=null===c||void 0===c||null===(m=c.properties)||void 0===m?void 0:m.pubtr_passengers_injured,I.driversKilledAccidentForm=null===c||void 0===c||null===(p=c.properties)||void 0===p?void 0:p.drivers_killed,I.motorcyclistsKilledAccidentForm=null===c||void 0===c||null===(O=c.properties)||void 0===O?void 0:O.motorcyclists_killed,I.cyclistsKilledAccidentForm=null===c||void 0===c||null===(f=c.properties)||void 0===f?void 0:f.cyclists_killed,I.pedKilledAccidentForm=null===c||void 0===c||null===(v=c.properties)||void 0===v?void 0:v.ped_killed,I.kidsKilledAccidentForm=null===c||void 0===c||null===(h=c.properties)||void 0===h?void 0:h.kids_killed,I.pubtrPassengersKilledAccidentForm=null===c||void 0===c||null===(y=c.properties)||void 0===y?void 0:y.pubtr_passengers_killed,I.publicTransportInvolvedAccidentForm=null===c||void 0===c||null===(x=c.properties)||void 0===x?void 0:x.public_transport_involved,w(I,{keepDefaultValues:!0})}),[c]);var g=[];Array.isArray(l)&&(g=l.map((function(e){return{value:e.id,label:v("sidebar.filterTab.maneuversList.".concat(e.maneuvername))}})));var A=[];Array.isArray(d)&&(A=d.map((function(e){return{value:e.id,label:v("sidebar.filterTab.typeViolationsList.".concat(e.violationname))}})));var k=[];Array.isArray(u)&&(k=u.map((function(e){return{value:e.id,label:v("sidebar.filterTab.violatorsList.".concat(e.violatorname))}})));var F=Object(ae.b)({defaultValues:{latAccidentForm:"",lngAccidentForm:"",descAccidentForm:"",dateTimeAccidentForm:"",maneuverAccidentForm:null,violationsTypeAccidentForm:[],violatorsAccidentForm:[],driversInjuredAccidentForm:0,motorcyclistsInjuredAccidentForm:0,cyclistsInjuredAccidentForm:0,pedInjuredAccidentForm:0,kidsInjuredAccidentForm:0,pubtrPassengersInjuredAccidentForm:0,driversKilledAccidentForm:0,motorcyclistsKilledAccidentForm:0,cyclistsKilledAccidentForm:0,pedKilledAccidentForm:0,kidsKilledAccidentForm:0,pubtrPassengersKilledAccidentForm:0,publicTransportInvolvedAccidentForm:!1,accidentId:""}}),I=F.control,T=F.handleSubmit,w=F.reset,S=F.setValue,C=F.getValues,N=F.formState.errors;return Object(E.jsxs)("div",{children:[Object(E.jsxs)(ie.a,{className:"m-1",onSubmit:T((function(e){var r,n={};n.id=parseInt(C("accidentId"))||null,n.latitude=C("latAccidentForm"),n.longitude=C("lngAccidentForm"),n.datetime=C("dateTimeAccidentForm").format("YYYY-MM-DDTHH:mm"),n.maneuver=null===(r=C("maneuverAccidentForm"))||void 0===r?void 0:r.value,void 0===n.maneuver&&(n.maneuver=null),n.description=C("descAccidentForm"),n.violations_type=C("violationsTypeAccidentForm").map((function(e){return e.value})),n.violators=C("violatorsAccidentForm").map((function(e){return e.value})),n.drivers_injured=parseInt(C("driversInjuredAccidentForm").toString())||0,n.motorcyclists_injured=parseInt(C("motorcyclistsInjuredAccidentForm").toString())||0,n.cyclists_injured=parseInt(C("cyclistsInjuredAccidentForm").toString())||0,n.ped_injured=parseInt(C("pedInjuredAccidentForm").toString())||0,n.kids_injured=parseInt(C("kidsInjuredAccidentForm").toString())||0,n.pubtr_passengers_injured=parseInt(C("pubtrPassengersInjuredAccidentForm").toString())||0,n.drivers_killed=parseInt(C("driversKilledAccidentForm").toString())||0,n.motorcyclists_killed=parseInt(C("motorcyclistsKilledAccidentForm").toString())||0,n.cyclists_killed=parseInt(C("cyclistsKilledAccidentForm").toString())||0,n.ped_killed=parseInt(C("pedKilledAccidentForm").toString())||0,n.kids_killed=parseInt(C("kidsKilledAccidentForm").toString())||0,n.pubtr_passengers_killed=parseInt(C("pubtrPassengersKilledAccidentForm").toString())||0,n.public_transport_involved=C("publicTransportInvolvedAccidentForm"),t(n)})),children:[Object(E.jsxs)(ce.a,{children:[Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formDateFromFilter",children:Object(E.jsxs)(ie.a.Label,{children:[v("sidebar.accidentTab.latLng")," ",Object(E.jsx)("a",{href:"#",children:Object(E.jsx)("i",{className:"fas fa-edit align-middle",onClick:function(){return i({lat:C("latAccidentForm"),lng:C("lngAccidentForm")})}})})]})}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formLatAccident",children:[Object(E.jsx)(ae.a,{name:"latAccidentForm",control:I,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",step:"any",size:"sm",isInvalid:!!N.latAccidentForm},t))}}),Object(E.jsx)(ie.a.Control.Feedback,{type:"invalid",children:v("words.requiredField")})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formLngAccident",children:[Object(E.jsx)(ae.a,{name:"lngAccidentForm",control:I,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",step:"any",size:"sm",isInvalid:!!N.lngAccidentForm},t))}}),Object(E.jsx)(ie.a.Control.Feedback,{type:"invalid",children:v("words.requiredField")})]})]}),Object(E.jsxs)(ie.a.Group,{controlId:"formDescriptionAccident",className:"mt-3",children:[Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.description")}),Object(E.jsx)(ae.a,{name:"descAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",as:"textarea",rows:3},t))}})]}),Object(E.jsxs)(ce.a,{className:"mt-3",children:[Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formDateTimeAccident",style:{minWidth:"250px"},children:[Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.datetime")}),Object(E.jsx)(ae.a,{name:"dateTimeAccidentForm",control:I,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(je.a,Object(ne.a)(Object(ne.a)({},t),{},{ref:f}))}}),N.dateTimeAccidentForm?Object(E.jsx)("p",{style:{color:"red"},children:Object(E.jsx)("small",{children:"Required field"})}):""]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formManeuverAccident",children:[Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.vehicleManeuver")}),Object(E.jsx)(ae.a,{name:"maneuverAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isClearable:!0,isSearchable:!1,options:g}))}})]})]}),Object(E.jsxs)(ie.a.Group,{controlId:"formViolationsTypeAccident",className:"mt-3",children:[Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.violationsType")}),Object(E.jsx)(ae.a,{name:"violationsTypeAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isMulti:!0,isSearchable:!1,options:A}))}})]}),Object(E.jsxs)(ie.a.Group,{controlId:"formViolatorsAccident",className:"mt-3",children:[Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.violators")}),Object(E.jsx)(ae.a,{name:"violatorsAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(le.a,Object(ne.a)(Object(ne.a)({},t),{},{isMulti:!0,isSearchable:!1,options:k}))}})]}),Object(E.jsxs)(ce.a,{className:"mt-3",children:[Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formInjuredLabelAccident",children:Object(E.jsx)(ie.a.Label,{style:{marginTop:"32px"},children:v("sidebar.accidentTab.injured")})}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formDriversInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-car fa-lg",title:v("sidebar.accidentTab.driverAndPassengers")})}),Object(E.jsx)(ae.a,{name:"driversInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formMotorcyclistsInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-motorcycle fa-lg",title:v("sidebar.accidentTab.motorcyclist")})}),Object(E.jsx)(ae.a,{name:"motorcyclistsInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formCyclistsInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-bicycle fa-lg",title:v("sidebar.accidentTab.cyclist")})}),Object(E.jsx)(ae.a,{name:"cyclistsInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formPedInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-walking fa-lg",title:v("sidebar.accidentTab.pedestrian")})}),Object(E.jsx)(ae.a,{name:"pedInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formKidsInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-baby fa-lg",title:v("sidebar.accidentTab.kid")})}),Object(E.jsx)(ae.a,{name:"kidsInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]}),Object(E.jsxs)(ie.a.Group,{as:oe.a,controlId:"formPubtrPassengersInjuredAccident",className:"ps-1 pe-0",children:[Object(E.jsx)(ie.a.Label,{children:Object(E.jsx)("i",{className:"fas fa-bus-alt fa-lg",title:v("sidebar.accidentTab.publicTransPassenger")})}),Object(E.jsx)(ae.a,{name:"pubtrPassengersInjuredAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})]})]}),Object(E.jsxs)(ce.a,{className:"mt-0",children:[Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formKilledLabelAccident",children:Object(E.jsx)(ie.a.Label,{children:v("sidebar.accidentTab.killed")})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formDriversKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"driversKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formMotorcyclistsKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"motorcyclistsKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formCyclistsKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"cyclistsKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formPedKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"pedKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formKidsKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"kidsKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})}),Object(E.jsx)(ie.a.Group,{as:oe.a,controlId:"formPubtrPassengersKilledAccident",className:"ps-1 pe-0",children:Object(E.jsx)(ae.a,{name:"pubtrPassengersKilledAccidentForm",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",max:"99"},t))}})})]}),Object(E.jsx)(ie.a.Group,{controlId:"formPublicTransportInvolvedAccident",className:"mt-3 ms-1",children:Object(E.jsx)(ae.a,{name:"publicTransportInvolvedAccidentForm",control:I,render:function(e){var t,r=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)(Object(ne.a)({},r),{},{checked:null!==(t=r.value)&&void 0!==t&&t,inline:!0,label:v("sidebar.accidentTab.publicTransInvolved"),type:"checkbox",id:"idPublicTransportInvolvedAccident"}))}})}),Object(E.jsx)(ie.a.Group,{controlId:"formIdAccident",className:"mt-3",children:Object(E.jsx)(ae.a,{name:"accidentId",control:I,render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"number",size:"sm",min:"0",style:{display:"none"}},t))}})}),Object(E.jsxs)("div",{className:"mt-4 me-2 float-end",children:[Object(E.jsx)(h.a,{onClick:function(){return O(!0)},variant:"light",children:v("sidebar.accidentTab.delete")})," ",Object(E.jsx)(h.a,{onClick:a,variant:"secondary",children:v("sidebar.accidentTab.close")})," ",Object(E.jsx)(h.a,{type:"submit",variant:"primary",style:{minWidth:"110px"},children:v("sidebar.accidentTab.save")})]})]}),Object(E.jsxs)(ue.a,{show:p,onHide:function(){return O(!1)},children:[Object(E.jsx)(ue.a.Header,{closeButton:!0,children:Object(E.jsx)(ue.a.Title,{children:v("words.deleting")})}),Object(E.jsx)(ue.a.Body,{children:v("words.confirmDeleting")}),Object(E.jsxs)(ue.a.Footer,{children:[Object(E.jsx)(h.a,{variant:"light",onClick:function(){O(!1),r(parseInt(C("accidentId").toString()))},children:v("words.delete")}),Object(E.jsx)(h.a,{variant:"secondary",onClick:function(){return O(!1)},children:v("words.cancel")})]})]})]})},fe=r(136),ve=function(e){var t=e.setAuthToken,r=Object(x.b)(),a=Object(x.c)((function(e){return e.uiReducer.loginModalShow})),i=Object(n.useState)(!1),c=Object(b.a)(i,2),o=c[0],s=c[1],l=Object(y.a)().t;Object(n.useEffect)((function(){O(),s(!1)}),[a]);var j=Object(ae.b)({defaultValues:{username:"",password:"",rememberme:!1}}),m=j.control,p=j.handleSubmit,O=j.reset,f=j.formState.errors;function v(){return(v=Object(u.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://smartcitykey.com/api/","token/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){200===e.status?e.json().then((function(e){t(e),s(!1),r(I(!1))})):401===e.status&&s(!0)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(E.jsxs)(ue.a,{show:a,onHide:function(){return r(I(!1))},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(E.jsx)(ue.a.Header,{closeButton:!0,children:Object(E.jsx)(ue.a.Title,{id:"contained-modal-title-vcenter",children:l("loginForm.title")})}),Object(E.jsx)(ue.a.Body,{children:Object(E.jsxs)(ie.a,{onSubmit:p((function(e){s(!1),localStorage.setItem("rememberme",e.rememberme.toString()),function(e){v.apply(this,arguments)}(e)})),children:[Object(E.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formLogin",children:[Object(E.jsx)(fe.a,{controlId:"floatingInput",label:l("loginForm.username"),className:"mb-3",children:Object(E.jsx)(ae.a,{name:"username",control:m,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",placeholder:l("loginForm.username"),isInvalid:!!f.username},t))}})}),Object(E.jsx)(fe.a,{controlId:"floatingPassword",label:l("loginForm.password"),children:Object(E.jsx)(ae.a,{name:"password",control:m,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"password",placeholder:l("loginForm.password"),isInvalid:!!f.password},t))}})})]}),Object(E.jsx)(ie.a.Group,{className:"mb-3",controlId:"formBasicCheckbox",children:Object(E.jsx)(ae.a,{name:"rememberme",control:m,rules:{required:!1},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Check,Object(ne.a)({type:"checkbox",label:l("loginForm.rememberMe")},t))}})}),o&&Object(E.jsx)(ie.a.Text,{className:"text-danger",children:l("loginForm.wrongUsernamePassword")}),Object(E.jsx)(h.a,{className:"mb-3",variant:"primary",type:"submit",style:{display:"block",width:"100%"},children:l("loginForm.login")}),Object(E.jsx)(ie.a.Text,{className:"text-muted mb-0",children:Object(E.jsxs)("p",{className:"text-center",children:[l("loginForm.dontHaveAccount")," ",Object(E.jsx)("a",{href:"#",onClick:function(){r(I(!1)),r(T(!0))},children:l("loginForm.signUp")})]})})]})})]})},he=function(e){var t,r,a,i=e.setAuthToken,c=Object(x.b)(),o=Object(x.c)((function(e){return e.uiReducer.registerModalShow})),s=Object(y.a)().t;Object(n.useEffect)((function(){p()}),[o]);var l=Object(ae.b)({defaultValues:{username:"",email:"",password:"",password2:"",first_name:"",last_name:""}}),j=l.control,m=l.handleSubmit,p=l.reset,O=l.setError,f=l.formState.errors;function v(){return(v=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat("https://smartcitykey.com/api/","users/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){200===e.status?e.json().then((function(e){console.log("ok",e),c(T(!1)),i(e.token)})):e.status>=400&&e.json().then((function(e){console.log(e);for(var t=0,r=Object.entries(e);t<r.length;t++){var n=Object(b.a)(r[t],2),a=n[0],i=n[1];O(a,{type:"manual",message:i})}}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(E.jsxs)(ue.a,{show:o,onHide:function(){return c(T(!1))},"aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(E.jsx)(ue.a.Header,{closeButton:!0,children:Object(E.jsx)(ue.a.Title,{id:"contained-modal-title-vcenter",children:s("registerForm.title")})}),Object(E.jsx)(ue.a.Body,{children:Object(E.jsxs)(ie.a,{onSubmit:m((function(e){!function(e){v.apply(this,arguments)}(e)})),children:[Object(E.jsxs)(ie.a.Group,{className:"mb-3",controlId:"formRegister",children:[(null===f||void 0===f||null===(t=f.username)||void 0===t?void 0:t.message)&&Object(E.jsx)(ie.a.Text,{className:"text-danger",children:f.username.message.map((function(e){return Object(E.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(E.jsx)(fe.a,{controlId:"floatingUsername",label:s("registerForm.username"),className:"mb-3",children:Object(E.jsx)(ae.a,{name:"username",control:j,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",placeholder:s("registerForm.username"),isInvalid:!!f.username},t))}})}),(null===f||void 0===f||null===(r=f.email)||void 0===r?void 0:r.message)&&Object(E.jsx)(ie.a.Text,{className:"text-danger",children:f.email.message.map((function(e){return Object(E.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(E.jsx)(fe.a,{controlId:"floatingEmail",label:s("registerForm.email"),className:"mb-3",children:Object(E.jsx)(ae.a,{name:"email",control:j,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",placeholder:s("registerForm.email"),isInvalid:!!f.email},t))}})}),(null===f||void 0===f||null===(a=f.password)||void 0===a?void 0:a.message)&&Object(E.jsx)(ie.a.Text,{className:"text-danger",children:f.password.message.map((function(e){return Object(E.jsx)("p",{className:"mb-0",children:e},e)}))}),Object(E.jsx)(fe.a,{controlId:"floatingPassword",label:s("registerForm.password"),className:"mb-3",children:Object(E.jsx)(ae.a,{name:"password",control:j,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"password",placeholder:s("registerForm.password"),isInvalid:!!f.password},t))}})}),Object(E.jsx)(fe.a,{controlId:"floatingPassword2",label:s("registerForm.confirmPassword"),className:"mb-3",children:Object(E.jsx)(ae.a,{name:"password2",control:j,rules:{required:!0},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"password",placeholder:s("registerForm.confirmPassword"),isInvalid:!!f.password2},t))}})}),Object(E.jsxs)(ce.a,{children:[Object(E.jsx)(oe.a,{children:Object(E.jsx)(ae.a,{name:"first_name",control:j,rules:{required:!1},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",size:"sm",placeholder:s("registerForm.firstNameOptional"),isInvalid:!!f.first_name},t))}})}),Object(E.jsx)(oe.a,{children:Object(E.jsx)(ae.a,{name:"last_name",control:j,rules:{required:!1},render:function(e){var t=e.field;return Object(E.jsx)(ie.a.Control,Object(ne.a)({type:"text",size:"sm",placeholder:s("registerForm.lastNameOptional"),isInvalid:!!f.last_name},t))}})})]})]}),Object(E.jsx)(h.a,{className:"mb-3",variant:"primary",type:"submit",style:{display:"block",width:"100%"},children:s("registerForm.register")}),Object(E.jsx)(ie.a.Text,{className:"text-muted mb-0",children:Object(E.jsxs)("p",{className:"text-center",children:[s("registerForm.alreadyHaveAccount")," ",Object(E.jsx)("a",{href:"#",onClick:function(){c(T(!1)),c(I(!0))},children:s("registerForm.login")})]})})]})})]})};var ye={radius:6,fillColor:"#402000",color:"#000",weight:0,opacity:.5,fillOpacity:.6};var xe=function(){var e=Object(o.g)(),t=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken"),r=Object(x.b)(),a=Object(x.c)((function(e){return e.dataReducer.dataAccidents})),i=Object(x.c)((function(e){return e.uiReducer.showSidebar})),c=Object(x.c)((function(e){return e.uiReducer.showOkCancelMobileMarker})),l=Object(x.c)((function(e){return e.dataReducer.dataFilters})),j=Object(x.c)((function(e){return e.uiReducer.activeTabKey})),p=Object(x.c)((function(e){return e.uiReducer.showAccidentTab})),O=Object(x.c)((function(e){return e.uiReducer.checkButtonHeatmap})),f=Object(x.c)((function(e){return e.uiReducer.checkButtonNewMarker})),v=Object(x.c)((function(e){return e.uiReducer.isMobileDevice})),I=function(){var e=function(e){var t=null===e||void 0===e?void 0:e.access;if(t){var r=t.split(".");if(r.length>1)return console.log(JSON.parse(atob(r[1]))),{name:JSON.parse(atob(r[1])).username,id:JSON.parse(atob(r[1])).user_id}}},t=Object(n.useState)(function(){var t;if(t="true"===localStorage.getItem("rememberme")?localStorage.getItem("token"):sessionStorage.getItem("token")){var r=JSON.parse(t),n=e(r);return n&&(r.user=n),r}return null}()),r=Object(b.a)(t,2),a=r[0],i=r[1];return{setAuthToken:function(t){if(t){"true"===localStorage.getItem("rememberme")?localStorage.setItem("token",JSON.stringify(t)):sessionStorage.setItem("token",JSON.stringify(t));var r=e(t);r&&(t.user=r)}else localStorage.removeItem("token"),localStorage.removeItem("rememberme"),sessionStorage.removeItem("token");i(t)},authToken:a}}(),T=I.authToken,w=I.setAuthToken,M=Object(n.useState)(window.innerWidth),D=Object(b.a)(M,2),R=D[0],P=D[1],z=R<=768,B=Object(n.useState)(null),H=Object(b.a)(B,2),G=H[0],V=H[1],U=Object(y.a)().t,W=[];function Y(){P(window.innerWidth)}Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://smartcitykey.com/api/","dictionary/roadaccident/maneuvers"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r({type:"DICTMANEUVERS",payload:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://smartcitykey.com/api/","dictionary/roadaccident/typeviolations"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r({type:"DICTTYPEVIOLATIONS",payload:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(u.a)(d.a.mark((function e(){var t,n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://smartcitykey.com/api/","dictionary/roadaccident/violators"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r({type:"DICTVIOLATORS",payload:a});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return e(),n(),a(),T&&function(){var e={token:T.access},r="".concat("https://smartcitykey.com/api/","token/verify/"),n=new Headers;n.append("Content-type","application/json"),t&&n.append("X-CSRFToken",t);fetch(r,{method:"POST",headers:n,body:JSON.stringify(e)}).then((function(e){e.status>=400?e.json().then((function(e){console.log(">= 400",e),X(T.refresh)})):e.json().then((function(e){console.log("ok",e)}))}))}(),r({type:"ISMOBILEDEVICE",payload:/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)}),r(A(!z)),window.addEventListener("resize",Y),function(){window.removeEventListener("resize",Y)}}),[]),Object(n.useEffect)((function(){J()}),[e]),Object(n.useEffect)((function(){var e=setInterval((function(){T&&X(T.refresh)}),24e4);return function(){return clearInterval(e)}}),[T]);var J=function(){var t=Object(u.a)(d.a.mark((function t(){var n,a,i,c,o,l,u,b;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat("https://smartcitykey.com/api/","roadaccident/").concat(e.cityName,"/accidents/"),t.next=3,fetch(n);case 3:return a=t.sent,t.next=6,a.json();case 6:i=t.sent,c="2100-01-01",o="1970-01-01",l=Object(s.a)(i.features);try{for(l.s();!(u=l.n()).done;)b=u.value,console.log(b),b.properties.datetime>o&&(o=b.properties.datetime),b.properties.datetime<c&&(c=b.properties.datetime)}catch(d){l.e(d)}finally{l.f()}r({type:"MINMAXDATEDATA",payload:{minDate:c.slice(0,10),maxDate:o.slice(0,10)}}),i.dateTimeGenerated=Date.now(),r(L(i));case 14:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function q(e){var t=e.target.toGeoJSON();r(k(!0)),r(F("accident")),V(t),r(A(!0))}function Z(e,n,a){var i=new Headers;i.append("Content-type","application/json"),t&&i.append("X-CSRFToken",t),(null===T||void 0===T?void 0:T.access)&&i.append("Authorization","Bearer "+T.access),fetch(e,{method:n,headers:i,body:JSON.stringify(a)}).then((function(e){e.status>=400?e.json().then((function(t){alert(e.statusText+" ("+e.status+")\n\n"+t.detail)})):e.json().then((function(e){console.log(e),J(),r(S({visible:!1,position:{}})),r(g(!1)),r(F("filter")),r(k(!1))}))}))}return Object(E.jsxs)("div",{className:"main-wrapper",children:[e.cityName?Object(E.jsx)("div",{id:"app",children:Object(E.jsxs)("div",{className:"d-flex ".concat(i?"showed":"hided"),id:"wrapper",children:[Object(E.jsx)(ee,{children:Object(E.jsxs)(te.a,{id:"controlled-tab-example",activeKey:j,onSelect:function(e){return r(F(e))},className:"mb-3",children:[Object(E.jsx)(re.a,{eventKey:"filter",title:U("sidebar.filterTab.title"),children:Object(E.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",width:"100%",height:"calc(100vh - 130px)"},children:Object(E.jsx)(de,{onSubmitFilter:function(e){console.log(e),W=[],r({type:"DATAFILTERS",payload:e}),z&&r(A(!1))}})})}),Object(E.jsx)(re.a,{eventKey:"accident",title:U("sidebar.accidentTab.title"),tabClassName:p?"":"d-none",children:Object(E.jsx)("div",{style:{overflowY:"auto",overflowX:"hidden",width:"100%",height:"calc(100vh - 130px)"},children:Object(E.jsx)(Oe,{onSubmitAccident:function(t){var n,a;console.log("onSubmitAccident",t),t.id?(a="".concat("https://smartcitykey.com/api/","roadaccident/").concat(e.cityName,"/accidents/").concat(t.id,"/"),n="PUT"):(a="".concat("https://smartcitykey.com/api/","roadaccident/").concat(e.cityName,"/accidents/"),n="POST"),Z(a,n,t),z&&r(A(!1))},onDeleteAccident:function(t){Z("".concat("https://smartcitykey.com/api/","roadaccident/").concat(e.cityName,"/accidents/").concat(t,"/"),"DELETE")},onCloseAccident:function(){r(S({visible:!1,position:{}})),r(g(!1)),r(F("filter")),r(k(!1))},onClickEditCoords:function(e){r(S({visible:!0,position:e}))},dataAccidentForm:G})})})]})}),Object(E.jsxs)("div",{id:"page-content-wrapper",children:[Object(E.jsx)(K,{currentCity:e.cityName,authToken:T,setAuthToken:w,appname:"roadaccident"}),Object(E.jsxs)("div",{className:"container-fluid",style:{paddingRight:"0px",paddingLeft:"0px"},children:[Object(E.jsx)($,{mainData:a,appname:"roadaccident",dataHeatmapPoints:W,currentCity:e.cityName,onDragEndNewMarker:function(e){},onClickMap:function(e){if(f&&!v){r(N(!1));var t={lat:"0",lng:"0"};t.lat=e.latlng.lat.toFixed(5),t.lng=e.latlng.lng.toFixed(5),r(S({visible:!0,position:t})),r(g(!0)),r(k(!0)),r(F("accident"))}},pointToLayerCallback:function(e,t){if(!O)return m.a.circleMarker(t,ye).on("click",q)},filterMapCallback:function(e){var t,r,n=!0,a=!0,i=!0,c=!0,o=!0,s=!0,d=!0,u=!0,b=!0,j=!0,m=!0,p=!0,O=!0,f=!0,v=!0,h=!0,y=!0,x=!0,g=!0;((r=null===l||void 0===l?void 0:l.dateFromFilter)&&(n=e.properties.datetime.split("T")[0]>=r),(r=null===l||void 0===l?void 0:l.dateToFilter)&&(a=e.properties.datetime.split("T")[0]<=r),(r=null===l||void 0===l||null===(t=l.maneuverFilter)||void 0===t?void 0:t.value)&&(i=r===e.properties.maneuver),(r=null===l||void 0===l?void 0:l.descFilter)&&-1===e.properties.description.toLowerCase().indexOf(r.toLowerCase())&&(c=!1),r=null===l||void 0===l?void 0:l.violationsTypeFilter,Array.isArray(r))&&(o=r.filter((function(t){return e.properties.violations_type.includes(String(t.value))})).length>0);(r=null===l||void 0===l?void 0:l.violatorsFilter,Array.isArray(r))&&(s=r.filter((function(t){return e.properties.violators.includes(String(t.value))})).length>0);(r=null===l||void 0===l?void 0:l.driverInjuredFilter)&&(d=e.properties.drivers_injured>0),(r=null===l||void 0===l?void 0:l.motorcyclistInjuredFilter)&&(u=e.properties.motorcyclists_injured>0),(r=null===l||void 0===l?void 0:l.cyclistInjuredFilter)&&(b=e.properties.cyclists_injured>0),(r=null===l||void 0===l?void 0:l.pedestrianInjuredFilter)&&(j=e.properties.ped_injured>0),(r=null===l||void 0===l?void 0:l.kidsInjuredFilter)&&(m=e.properties.kids_injured>0),(r=null===l||void 0===l?void 0:l.pubtrPassengersInjuredFilter)&&(p=e.properties.pubtr_passengers_injured>0),(r=null===l||void 0===l?void 0:l.driversKilledFilter)&&(O=e.properties.drivers_killed>0),(r=null===l||void 0===l?void 0:l.motorcyclistsKilledFilter)&&(f=e.properties.motorcyclists_killed>0),(r=null===l||void 0===l?void 0:l.cyclistsKilledFilter)&&(v=e.properties.cyclists_killed>0),(r=null===l||void 0===l?void 0:l.pedestrianKilledFilter)&&(h=e.properties.ped_killed>0),(r=null===l||void 0===l?void 0:l.kidsKilledFilter)&&(y=e.properties.kids_killed>0),(r=null===l||void 0===l?void 0:l.pubtrPassengersKilledFilter)&&(x=e.properties.pubtr_passengers_killed>0),(r=null===l||void 0===l?void 0:l.publicTransportInvolvedFilter)&&(g=e.properties.public_transport_involved>0);var A=n&&a&&i&&c&&o&&s&&d&&u&&b&&j&&m&&p&&O&&f&&v&&h&&y&&x&&g&&!0;return A&&W.push([e.properties.latitude,e.properties.longitude,.1]),A}}),c&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(h.a,{variant:"success",id:"doneEditMarkerMobile",onClick:function(){r(N(!1)),r(C(!1)),r(k(!0)),r(F("accident")),r(A(!0))},children:U("words.done")})," ",Object(E.jsx)(h.a,{variant:"secondary",id:"cancelMarkerMobile",onClick:function(){r(S({visible:!1,position:{lat:0,lng:0}})),r(g(!1)),r(C(!1)),r(N(!1))},children:"\u2715"})," "]})]})]})]})}):"You must select a city.",Object(E.jsx)(ve,{setAuthToken:w}),Object(E.jsx)(he,{setAuthToken:w})]});function X(e){var r=new Headers;r.append("Content-type","application/json"),t&&r.append("X-CSRFToken",t),fetch("".concat("https://smartcitykey.com/api/","token/refresh/"),{method:"POST",headers:r,body:JSON.stringify({refresh:e})}).then((function(e){200==e.status?e.json().then((function(e){w(e)})):e.status>=400&&w(null)}))}},ge=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,201)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;r(e),n(e),a(e),i(e),c(e)}))},Ae=r(127),ke=r(92),Fe=r(139),Ie=r(140),Te=r(141);Ae.a.use(Fe.a).use(ke.e).init({resources:{en:{translation:Ie},bg:{translation:Te}},fallbackLng:"en",interpolation:{escapeValue:!1}});Ae.a;var we=r(114),Se={showSidebar:!1,showAccidentTab:!1,activeTabKey:"filter",loginModalShow:!1,registerModalShow:!1,mapBaseLayerName:"Default",mapMarkerState:{visible:!1,position:{},isMobile:!1},newAccidentCreation:!1,showOkCancelMobileMarker:!1,checkButtonNewMarker:!1,checkButtonHeatmap:!1,checkButtonGPS:!1,isMobileDevice:!1},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOWSIDEBAR":return Object(ne.a)(Object(ne.a)({},e),{},{showSidebar:t.payload});case"SHOWACCIDENTTAB":return Object(ne.a)(Object(ne.a)({},e),{},{showAccidentTab:t.payload});case"ACTIVETABKEY":return Object(ne.a)(Object(ne.a)({},e),{},{activeTabKey:t.payload});case"LOGINMODALSHOW":return Object(ne.a)(Object(ne.a)({},e),{},{loginModalShow:t.payload});case"REGISTERMODALSHOW":return Object(ne.a)(Object(ne.a)({},e),{},{registerModalShow:t.payload});case"MAPBASELAYERNAME":return Object(ne.a)(Object(ne.a)({},e),{},{mapBaseLayerName:t.payload});case"MAPMARKERSTATE":return Object(ne.a)(Object(ne.a)({},e),{},{mapMarkerState:t.payload});case"NEWACCIDENTCREATION":return Object(ne.a)(Object(ne.a)({},e),{},{newAccidentCreation:t.payload});case"SHOWOKCANCELMOBILEMARKER":return Object(ne.a)(Object(ne.a)({},e),{},{showOkCancelMobileMarker:t.payload});case"CHECKBUTTONNEWMARKER":return Object(ne.a)(Object(ne.a)({},e),{},{checkButtonNewMarker:t.payload});case"CHECKBUTTONHEATMAP":return Object(ne.a)(Object(ne.a)({},e),{},{checkButtonHeatmap:t.payload});case"CHECKBUTTONGPS":return Object(ne.a)(Object(ne.a)({},e),{},{checkButtonGPS:t.payload});case"ISMOBILEDEVICE":return Object(ne.a)(Object(ne.a)({},e),{},{isMobileDevice:t.payload});default:return e}},Ne={dataAccidents:[],dataFilters:{},dictManeuvers:[],dictTypeViolations:[],dictViolators:[],minMaxDateData:{minDate:"",maxDate:""}},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DATAACCIDENTS":return Object(ne.a)(Object(ne.a)({},e),{},{dataAccidents:t.payload});case"DICTMANEUVERS":return Object(ne.a)(Object(ne.a)({},e),{},{dictManeuvers:t.payload});case"DICTTYPEVIOLATIONS":return Object(ne.a)(Object(ne.a)({},e),{},{dictTypeViolations:t.payload});case"DICTVIOLATORS":return Object(ne.a)(Object(ne.a)({},e),{},{dictViolators:t.payload});case"DATAFILTERS":return Object(ne.a)(Object(ne.a)({},e),{},{dataFilters:t.payload});case"MINMAXDATEDATA":return Object(ne.a)(Object(ne.a)({},e),{},{minMaxDateData:t.payload});default:return e}},Le=Object(we.a)({uiReducer:Ce,dataReducer:Me}),Ee=(r(182),Object(we.b)(Le,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));i.a.render(Object(E.jsx)(x.a,{store:Ee,children:Object(E.jsx)(c.a,{basename:"/roadaccident",children:Object(E.jsx)(o.c,{children:Object(E.jsx)(o.a,{path:"/",children:Object(E.jsx)(o.a,{path:":cityName",element:Object(E.jsx)(xe,{}),children:Object(E.jsx)(o.a,{path:":accidentId",element:Object(E.jsx)(xe,{})})})})})})}),document.getElementById("root")),ge()}},[[183,1,2]]]);
//# sourceMappingURL=main.789efc65.chunk.js.map