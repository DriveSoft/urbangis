{"version":3,"sources":["actions/index.js","components_hl/MenuGlobal.tsx","components_hl/ButtonMap.js","components_hl/MapTileLayers.tsx","components_hl/Map.tsx","components/images/markers/marker-red.png","components/images/markers/marker-shadow.png","components/Sidebar.tsx","components/FormFilter.tsx","components/TableList.tsx","components/ImageS3Upload.tsx","components/images/no-photo.png","components/UploadPhotos.tsx","components/FormTree.tsx","components/FormInspection.tsx","components/ImageSlider.tsx","components/LoginModalForm.tsx","components/RegisterModalForm.tsx","App.tsx","useAuthToken.tsx","reportWebVitals.js","i18nextConf.js","reducers/userInterface.tsx","reducers/dataApp.tsx","reducers/index.ts","index.js"],"names":["actShowSidebar","value","type","payload","actShowTreeTab","actShowInspTab","actActiveTabKey","actLoginModalShow","actRegisterModalShow","actMapBaseLayerName","actNewMarkerState","actShowOkCancelMobileMarker","actCheckButtonNewMarker","actCheckButtonGPS","actDataTrees","MenuGlobal","currentCity","appname","authToken","setAuthToken","dispatch","useDispatch","rxShowSidebar","useSelector","state","uiReducer","showSidebar","useState","cities","setCities","useTranslation","t","i18n","changeLanguage","useEffect","fetchCities","a","fetch","process","res","json","data","console","log","Navbar","bg","expand","Container","Button","className","variant","id","onClick","Toggle","Collapse","Nav","Link","href","NavDropdown","title","Item","active","map","city","as","to","sysname","cityname","language","user","name","ButtonMap_","iconTrue","iconFalse","L","easyButton","position","states","stateName","icon","control","button","style","backgroundColor","addTo","MapTileLayers","heatMapLayer","setView_nTimes_gps","circle_geolocation","mapBaseLayerName","LayersControl","BaseLayer","checked","TileLayer","attribution","url","accessToken","maxZoom","tileSize","zoomOffset","subdomains","bingkey","redIcon","iconUrl","shadowUrl","iconSize","iconAnchor","popupAnchor","shadowSize","currentCitySysname","Map","mainData","dataHeatmapPoints","onDragEndNewMarker","onClickMap","pointToLayerCallback","filterMapCallback","rxMapBaseLayerName","rxIsMobileDevice","isMobileDevice","rxNewMarkerState","newMarkerState","rxShowOkCancelMobileMarker","showOkCancelMobileMarker","rxCheckButtonNewMarker","checkButtonNewMarker","rxCheckButtonHeatmap","checkButtonHeatmap","rxCheckButtonGPS","checkButtonGPS","currentCityInfo","setCurrentCityInfo","setMap","currentZoom","setCurrentZoom","buttonNewMarker","setButtonNewMarker","buttonHeatmap","setButtonHeatmap","buttonGPS","setButtonGPS","mapname_","document","cookie","split","find","row","startsWith","newMarkerRef","useRef","onClickNewMarker","onClickHeatmap","onClickGPS","remove","fetchCity","DomUtil","addClass","_container","removeClass","window","setTimeout","invalidateSize","pan","visible","lat","lng","SetPanToMap","useMap","panTo","parseFloat","locate","enableHighAccuracy","watch","maximumAge","stopLocate","removeLayer","onEachFeaturePoint","feature","layer","on","e","NewMarker","eventHandlers","useMemo","dragend","current","marker","LatLng","getLatLng","coord","toFixed","Marker","draggable","getCenter","ref","MapEvents","useMapEvents","baselayerchange","move","setLatLng","target","moveend","click","zoomend","_zoom","locationfound","radius","accuracy","setView","latlng","hasLayer","setRadius","circle","locationerror","alert","message","HeatmapFunction","heatLayer","gradient","max","blur","addLayer","MapContainer","whenCreated","center","zoom","zoomControl","scrollWheelZoom","height","width","GeoJSON","pointToLayer","filter","onEachFeature","dateTimeGenerated","spiderfyOnMaxZoom","showCoverageOnHover","zoomToBoundsOnClick","maxClusterRadius","iconCreateFunction","cluster","digits","count","getChildCount","divIcon","html","toString","undefined","ZoomControl","Sidebar","children","marginTop","FormFilter","onSubmitFilter","rxDictSpecieses","dataReducer","dictSpecieses","rxDictStatuses","dictStatuses","rxDictCareTypes","dictCareTypes","rxDictRemarks","dictRemarks","rxDictPlaceTypes","dictPlaceTypes","rxDictIrrigationMethods","dictIrrigationMethods","rxDictGroupSpecs","dictGroupSpec","useForm","reValidateMode","defaultValues","speciesFilter","statusFilter","careTypeFilter","remarkFilter","placeTypeFilter","irrigationMethodFilter","datePlantedFromFilter","datePlantedToFilter","dateAddedFromFilter","dateAddedToFilter","commentFilter","heightFromFilter","trunkGirthFromFilter","crownDiameterFromFilter","heightToFilter","trunkGirthToFilter","crownDiameterToFilter","showMyTreesFilter","handleSubmit","reset","optionsSpeciesesFilter","setValue","Array","isArray","itemGroup","label","groupname","options","spec","groupspec","localname","speciesname","typespec","optionsStatusesFilter","x","statusname","optionsCareTypesFilter","carename","optionsRemarksFilter","remarkname","optionsPlaceTypesFilter","placename","optionsIrrigationMethodsFilter","irrigationname","customStyles","option","styles","paddingLeft","Option","props","color","Form","onSubmit","Group","controlId","Label","render","field","placeholder","isMulti","isSearchable","getOptionLabel","components","Row","Col","minWidth","isClearable","Control","maxWidth","size","min","Check","inline","TableList","stateComponent","columns","sortField","sortAsc","OnClickButtons","sortState","setSortState","dataTable","setDataTable","columnsHeader","item","index","cursor","sortable","float","textAlign","headerName","fontSize","DataTable","sortedData","sort","b","length","DataRow","indexRow","colSpan","getUniqKey","String","col","dateTimeOption","Date","toLocaleDateString","toLocaleTimeString","dateTime","buttons","buttonRow","forEach","text","iconFA","idButton","buttonText","iconFASize","push","Table","striped","bordered","hover","defaultResizingOptions","enabled","autoResize","maxHeight","compressFormat","quality","rotation","ImageS3Upload","forwardRef","signingUrl","autoUpload","emptyPhoto","serverPhoto","onChange","buttonCaption","resizer","onFinish","onProgress","onError","onSignedUrl","useImperativeHandle","uploadFile","inputFileEl","files","status","resizing","startUpload","none","setStatus","imagePhoto","setImagePhoto","compressedPhoto","setCompressedPhoto","buttonCaptionState","setButtonCaptionState","showSpinner","setShowSpinner","s3DataState","setS3DataState","notLoad","setNotLoad","fields","key","slice","resizeFile","file","Promise","resolve","Resizer","imageFileResizer","uri","onChangeFile","event","URL","createObjectURL","image","resized","error","fetchUrlSign","objectName","myHeaders","Headers","append","bodyObject","method","headers","body","JSON","stringify","parse","updateProgress","ev","lengthComputable","percentComplete","Math","round","loaded","total","s3Data","xhr","XMLHttpRequest","open","timeout","upload","onprogress","postData","FormData","onreadystatechange","readyState","onload","onerror","send","filename","replace","signedUrl","file_exists","rndStr","makeRandomStr","Image","src","rounded","top","right","Spinner","animation","role","accept","display","result","characters","charactersLength","i","charAt","floor","random","UploadPhotos","controlFromUseForm","signingS3Url","onCallbackDone","photo1Ref","photo2Ref","photo3Ref","uploadedPhoto1","setUploadedPhoto1","uploadedPhoto2","setUploadedPhoto2","uploadedPhoto3","setUploadedPhoto3","resizerOptions","uploadPhotos","p1","p2","p3","onFinishPhoto1","onFinishPhoto2","onFinishPhoto3","noPhotoImage","FormTree","onSubmitTree","onDeleteTree","onCloseTree","onNewInsp","onEditInsp","onClickInspPhotos","dataTreeForm","showModalDelete","setShowModalDelete","uploadPhotosRef","inspections","setInspections","optionsIrrigationMethodsData","formData","latitude","longitude","species","species_id","isFound","optionsSpeciesesData","element","speciescomment","comment","placetype","optionsPlaceTypesData","irrigationmethod","dateplanted","googlestreeturl","keepDefaultValues","fetchInpections","photo1","photo2","photo3","typeData","optionsStatusesData","optionsCareTypesData","optionsRemarksData","crowndiameter","trunkgirth","remarks","recommendations","getValues","errors","formState","trigger","preventDefault","prepareOnSubmitTree","inspection","parseInt","isSelected","isFocused","isDisabled","rules","required","step","isInvalid","Feedback","rows","pattern","rowData","Modal","show","onHide","Header","closeButton","Title","Body","Footer","FormInspection","onSubmitInsp","onDeleteInsp","onCloseInsp","dataInspForm","treeId","isValid","tree","includes","prepareOnSubmitInsp","photoServer","ImageSlider","setVisible","images","dialogClassName","Carousel","interval","photo","LoginModalForm","rxLoginModalShow","loginModalShow","showWrongPassword","setShowWrongPassword","username","password","rememberme","credentials","then","centered","localStorage","setItem","loginUser","FloatingLabel","Text","RegisterModalForm","rxRegisterModalShow","registerModalShow","email","password2","first_name","last_name","setError","token","Object","entries","registerUser","geojsonMarkerOptions_citytree","fillColor","weight","opacity","fillOpacity","App","paramsRouter","useParams","csrftoken","cookieValue","cookies","trim","substring","decodeURIComponent","getCookie","rxDataTrees","dataTrees","rxDataFilters","dataFilters","rxActiveTabKey","activeTabKey","rxShowTreeTab","showTreeTab","rxShowInspTab","showInspTab","getUsernameFromToken","access","arToken","atob","user_id","tokenString","getItem","sessionStorage","getToken","userToken","removeItem","useAuthToken","innerWidth","screenWidth","setScreenWidth","isMobileView","setDataTreeForm","setDataInspForm","imageSlider","setImageSlider","handleWindowSizeChange","fetchSpecieses","fetchCareTypes","fetchRemarks","fetchPlaceTypes","fetchIrrigationMethods","fetchGroupSpecs","fetchTypeSpecs","response","refreshAuthToken","refresh","checkAuthToken","test","navigator","userAgent","addEventListener","removeEventListener","fetchTreesAndStatuses","setInterval","clearInterval","cityName","now","markerOnClick","fetchTreeData","idTree","geojson","toGeoJSON","properties","Tabs","activeKey","onSelect","k","Tab","eventKey","overflowY","overflowX","tabClassName","fetchUrl","paddingRight","lastinsp_status","hexcolor","circleMarker","valueFilter","species_Filter","status_Filter","recommendations_Filter","remarks_Filter","placetype_Filter","irrigationmethod_Filter","plantedDateFrom_Filter","plantedDateTo_Filter","addedDateFrom_Filter","addedDateTo_Filter","comment_Filter","heightFrom_Filter","heightTo_Filter","trunkGirthFrom_Filter","trunkGirthTo_Filter","crownDiameterFrom_Filter","crownDiameterTo_Filter","showOnlyMyTrees_Filter","every","datetimeadded","toLowerCase","indexOf","lastinsp_height","lastinsp_trunkgirth","lastinsp_crowndiameter","useradded","callBackSucceed","get","statusText","detail","refreshToken","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","use","LanguageDetector","initReactI18next","init","resources","en","translation","translationEN","translationBG","fallbackLng","interpolation","escapeValue","initialState","isMobile","action","dictTypeSpec","allReducers","combineReducers","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","ReactDOM","basename","path","getElementById"],"mappings":"8qWACaA,EAAiB,SAACC,GAC3B,MAAO,CACHC,KAAM,cACNC,QAASF,IAIJG,EAAiB,SAACH,GAC3B,MAAO,CACHC,KAAM,cACNC,QAASF,IAIJI,EAAiB,SAACJ,GAC3B,MAAO,CACHC,KAAM,cACNC,QAASF,IAIJK,EAAkB,SAACL,GAC5B,MAAO,CACHC,KAAM,eACNC,QAASF,IAIJM,EAAoB,SAACN,GAC9B,MAAO,CACHC,KAAM,iBACNC,QAASF,IAIJO,EAAuB,SAACP,GACjC,MAAO,CACHC,KAAM,oBACNC,QAASF,IAOJQ,EAAsB,SAACR,GAChC,MAAO,CACHC,KAAM,mBACNC,QAASF,IAIJS,EAAoB,SAACT,GAC9B,MAAO,CACHC,KAAM,iBACNC,QAASF,IAIJU,EAA8B,SAACV,GACxC,MAAO,CACHC,KAAM,2BACNC,QAASF,IAIJW,EAA0B,SAACX,GACpC,MAAO,CACHC,KAAM,uBACNC,QAASF,IASJY,EAAoB,SAACZ,GAC9B,MAAO,CACHC,KAAM,iBACNC,QAASF,IAoBJa,EAAc,SAACb,GACxB,MAAO,CACHC,KAAM,YACNC,QAASF,I,OC8EFc,MArJf,YAKqB,IAAD,EAJnBC,EAImB,EAJnBA,YACAC,EAGmB,EAHnBA,QACAC,EAEmB,EAFnBA,UACAC,EACmB,EADnBA,aAEMC,EAAWC,cACXC,EAAgBC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,eACxE,EAA4BC,mBAAiC,IAA7D,mBAAOC,EAAP,KAAeC,EAAf,KAEA,EAAoBC,cAAZC,EAAR,EAAQA,EAAGC,EAAX,EAAWA,KAaX,SAASC,EAAehC,GACvB+B,EAAKC,eAAehC,GAIrB,OAhBAiC,qBAAU,WACT,IAAMC,EAAW,uCAAG,8BAAAC,EAAA,sEACDC,MAAM,GAAD,OAAIC,gCAAJ,YADJ,cACbC,EADa,gBAEAA,EAAIC,OAFJ,OAEbC,EAFa,OAGnBZ,EAAUY,GACVC,QAAQC,IAAIF,GAJO,2CAAH,qDAOjBN,MACE,IAQF,cAACS,EAAA,EAAD,CAAQC,GAAG,QAAQC,OAAO,KAA1B,SACC,eAACC,EAAA,EAAD,WACC,cAACC,EAAA,EAAD,CACCC,UAAU,UACVC,QAAQ,kBACRC,GAAG,cAEHC,QAAS,kBAAMhC,EAASpB,GAAgBsB,KALzC,SAOES,EAAU,eACF,IACV,cAACa,EAAA,EAAOS,OAAR,CAAe,gBAAc,qBAC7B,cAACT,EAAA,EAAOU,SAAR,CAAiBH,GAAG,mBAApB,SACC,eAACI,EAAA,EAAD,CAAKN,UAAU,UAAf,UACC,cAACM,EAAA,EAAIC,KAAL,CAAUC,KAAK,IAAf,SAAoB1B,EAAU,eAE9B,eAAC2B,EAAA,EAAD,CACCC,MAAO5B,EAAU,sBACjBoB,GAAG,qBAFJ,UAIC,cAACO,EAAA,EAAYE,KAAb,CACCH,KAAI,wBAAmBzC,GAEvB6C,OAAoB,iBAAZ5C,EAHT,SAKEc,EAAU,8BAHP,KAKL,cAAC2B,EAAA,EAAYE,KAAb,CACCH,KAAI,oBAAezC,GAEnB6C,OAAoB,aAAZ5C,EAHT,SAKEc,EAAU,0BAHP,KAKL,cAAC2B,EAAA,EAAYE,KAAb,CACCH,KAAI,uBAAkBzC,GAEtB6C,OAAoB,gBAAZ5C,EAHT,SAKEc,EAAU,6BAHP,QAON,cAAC2B,EAAA,EAAD,CACCC,MAAO5B,EAAU,aACjBoB,GAAG,qBAFJ,SAIEvB,EAAOkC,KAAI,SAACC,GAAD,OACX,cAACL,EAAA,EAAYE,KAAb,CACCI,GAAIR,IAEJS,GAAE,WAAMF,EAAKG,SACbL,OAAQ7C,IAAgB+C,EAAKG,QAJ9B,SAMEH,EAAKI,UAJDJ,EAAKZ,SASb,eAACO,EAAA,EAAD,CAAaC,MAAM,OAAOR,GAAG,qBAA7B,UACC,cAACO,EAAA,EAAYE,KAAb,CAECC,OACC,OAAS7B,EAAKoC,UACd,UAAYpC,EAAKoC,UACjB,UAAYpC,EAAKoC,SAElBnE,MAAM,KACNmD,QAAS,kBAAMnB,EAAe,OAR/B,oBACK,KAYL,cAACyB,EAAA,EAAYE,KAAb,CAECC,OAAQ,OAAS7B,EAAKoC,SACtBnE,MAAM,KACNmD,QAAS,kBAAMnB,EAAe,OAJ/B,sBACK,QASLf,EACA,qCACC,cAACqC,EAAA,EAAIC,KAAL,oBACKzB,EAAE,eADP,oBAEEb,QAFF,IAEEA,GAFF,UAEEA,EAAWmD,YAFb,aAEE,EAAiBC,QAInB,cAACf,EAAA,EAAIC,KAAL,CACCC,KAAK,IACLL,QAAS,WACRjC,EAAa,OAHf,SAMEY,EAAU,oBAIb,cAACwB,EAAA,EAAIC,KAAL,CACCC,KAAK,IAELL,QAAS,kBACRhC,EAASb,GAAkB,KAJ7B,SAOEwB,EAAU,4B,kFCrHJwC,MA/Cf,SAAqBT,EAAKU,EAAUC,EAAWrB,GA2C3C,OAxC0BsB,IAAEC,WAAW,CAC3BC,SAAU,WACVC,OAAO,CACH,CACIlB,MAAO,GACPmB,UAAW,MACXC,KAAK,aAAD,OAAeP,EAAf,UACJpB,QAAS,SAAS4B,GACdA,EAAQxD,MAAM,MAEdwD,EAAQC,OAAOC,MAAMC,gBAAkB,MACvC/B,GAAQ,KAIhB,CACIO,MAAO,GACPmB,UAAW,KACXC,KAAK,aAAD,OAAeN,EAAf,UACJrB,QAAS,SAAS4B,GACdA,EAAQxD,MAAM,OAEdwD,EAAQC,OAAOC,MAAMC,gBAAkB,QACvC/B,GAAQ,QAGrBgC,MAAOtB,I,kBC6EPuB,IC7CXC,EAGAC,EACAC,EDyCWH,EAvGf,YAAkE,IAAzCI,EAAwC,EAAxCA,iBACxB,OACC,qCACC,cAACC,EAAA,EAAcC,UAAf,CACCC,QAA8B,YAArBH,EACTnB,KAAK,UAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,iIACZC,IAAI,qFACJC,YAAY,+FACZ7C,GAAG,qBACH8C,QAAS,GACTC,SAAU,IACVC,YAAa,MAIf,cAACT,EAAA,EAAcC,UAAf,CACCC,QAA8B,SAArBH,EACTnB,KAAK,OAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,iIACZC,IAAI,qFACJC,YAAY,+FACZ7C,GAAG,kBACH+C,SAAU,IACVC,YAAa,MAKf,cAACT,EAAA,EAAcC,UAAf,CACCC,QAA8B,WAArBH,EACTnB,KAAK,SAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,SACZC,IAAI,oDACWE,QAAS,GACTG,WAAY,CAAC,MAAM,MAAM,MAAM,WAKhD,cAACV,EAAA,EAAcC,UAAf,CACCC,QAA8B,SAArBH,EACTnB,KAAK,OAFN,SAIa,cAAC,IAAD,CAAY+B,QAAS,mEAAoEnG,KAAK,aAK3G,cAACwF,EAAA,EAAcC,UAAf,CACCC,QAA8B,SAArBH,EACTnB,KAAK,OAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,SACZC,IAAI,oDACWE,QAAS,GACTG,WAAY,CAAC,MAAM,MAAM,MAAM,WAOhD,cAACV,EAAA,EAAcC,UAAf,CACCC,QAA8B,SAArBH,EACTnB,KAAK,OAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,kBACZC,IAAI,gGACWE,QAAS,OAM1B,cAACP,EAAA,EAAcC,UAAf,CACCC,QAA8B,SAArBH,EACTnB,KAAK,OAFN,SAIC,cAACuB,EAAA,EAAD,CACCC,YAAY,iIACZC,IAAI,qFACJC,YAAY,+FACZ7C,GAAG,sBACH+C,SAAU,IACVD,QAAS,GACME,YAAa,U,2BC1D7BG,G,OAAU5B,IAAEK,KAAK,CACjBwB,QC/CW,iiLDgDXC,UEhDW,q0BFiDXC,SAAU,CAAC,GAAI,IACfC,WAAY,CAAC,GAAI,IACjBC,YAAa,CAAC,GAAI,IAClBC,WAAY,CAAC,GAAI,OAcjBC,EAAqB,GAuoBVC,MAtmBf,YAU0B,IATVC,EASS,EATTA,SACA9F,EAQS,EARTA,QACA+F,EAOS,EAPTA,kBACAhG,EAMS,EANTA,YACAiG,EAKS,EALTA,mBACAC,EAIS,EAJTA,WAEAC,EAES,EAFTA,qBACAC,EACS,EADTA,kBAGNhG,EAAWC,cAIXgG,EAAqB9F,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUgE,oBACvE6B,EAAmB/F,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAU8F,kBACrEjG,EAAgBC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,eAClE8F,EAAmBjG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUgG,kBACrEC,EAA6BnG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUkG,4BAE/EC,EAAyBrG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUoG,wBAC3EC,EAAuBvG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUsG,sBACzEC,EAAmBzG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUwG,kBAG3E,EAA8CtG,mBAAmC,MAAjF,mBAAOuG,EAAP,KAAwBC,EAAxB,KACA,EAAsBxG,mBAAc,MAApC,mBAAOmC,EAAP,KAAYsE,EAAZ,KACA,EAAsCzG,mBAhBlB,IAgBpB,mBAAO0G,GAAP,KAAoBC,GAApB,KAGA,GAA8C3G,mBAAc,MAA5D,qBAAO4G,GAAP,MAAwBC,GAAxB,MACA,GAA0C7G,mBAAc,MAAxD,qBAAO8G,GAAP,MAAsBC,GAAtB,MACA,GAAkC/G,mBAAc,MAAhD,qBAAOgH,GAAP,MAAkBC,GAAlB,MAEIC,GAAWC,SAASC,OACvBC,MAAM,MACNC,MAAK,SAAAC,GAAG,OAAIA,EAAIC,WAAW,eAGxBN,IACUA,GAASG,MAAM,KAAK,GAIlC,IAAII,GAAeC,iBAAO,MAI1BnH,qBAAU,WACN,GAAI4B,EAAK,CACL0E,GAAoBjE,EAAWT,EAAK,8BAA+B,8BAA+BwF,KAClGZ,GAAkBnE,EAAWT,EAAK,mBAAoB,yBAA0ByF,KAChFX,GAAcrE,EAAWT,EAAK,8BAA+B,8BAA+B0F,KAI5F,IAAIX,EAAWC,SAASC,OAChCC,MAAM,MACNC,MAAK,SAACC,GAAD,OAASA,EAAIC,WAAW,eAEvBN,GACMzH,EAASX,EAAoBoI,EAASG,MAAM,KAAK,KAIzD,OAAO,WACHT,IAAmBA,GAAgBkB,SACnChB,IAAiBA,GAAcgB,SAC/Bd,IAAaA,GAAUc,YAI1B,CAAC3F,IAIN5B,qBAAU,WAEN,IAAMwH,EAAS,uCAAG,8BAAAtH,EAAA,sEACEC,MAAM,GAAD,OAAIC,gCAAJ,kBAA2CtB,IADlD,cACVuB,EADU,gBAEGA,EAAIC,OAFP,OAEVC,EAFU,OAGhB0F,EAAmB1F,GAHH,2CAAH,qDAKfiH,MAGC,CAAC1I,IAKJkB,qBAAU,WACJqG,KACIX,GACAW,GAAgB/G,MAAM,MACtB+G,GAAgBtD,OAAOC,MAAMC,gBAAkB,QAE/CoD,GAAgB/G,MAAM,OACtB+G,GAAgBtD,OAAOC,MAAMC,gBAAkB,YAGtD,CAACyC,IACJ1F,qBAAU,WACJuG,KACIX,GACAW,GAAcjH,MAAM,MACpBiH,GAAcxD,OAAOC,MAAMC,gBAAkB,QAE7CsD,GAAcjH,MAAM,OACpBiH,GAAcxD,OAAOC,MAAMC,gBAAkB,YAGpD,CAAC2C,IACJ5F,qBAAU,WACJyG,KACIX,GACAW,GAAUnH,MAAM,MAChBmH,GAAU1D,OAAOC,MAAMC,gBAAkB,QAEzCwD,GAAUnH,MAAM,OAChBmH,GAAU1D,OAAOC,MAAMC,gBAAkB,YAGhD,CAAC6C,IAIN9F,qBAAU,WAGF4B,IAAQwD,IACJM,EACAlD,IAAEiF,QAAQC,SAAS9F,EAAI+F,WAAW,4BAElCnF,IAAEiF,QAAQG,YAAYhG,EAAI+F,WAAW,+BAG9C,CAACjC,IAIJ1F,qBAAU,WACF4B,GACAiG,OAAOC,YAAW,WAAWlG,EAAImG,eAAe,CAACC,KAAK,MAAW,OAEtE,CAAC5I,IASP,IAAMgI,GAAmB,SAAC9H,GACnBJ,EAASR,EAAwBY,IAEnC8F,GAAoB9F,IACdJ,EAASV,EAAkB,CAAEyJ,SAAS,EAAMvF,SAAU,CAACwF,IAAK,EAAGC,IAAK,MACpEjJ,EAAST,GAA4B,MAI1C4I,GAAiB,SAAC/H,GACvBkB,QAAQC,IAAI,iBAAkBnB,GAGpBJ,EAASX,EADfe,EACmC,OAEA,YAEjCJ,EJtMG,CACHlB,KAAM,qBACNC,QIoM+BqB,KAOnC,SAAS8I,KACL,IAAMxG,EAAMyG,cASZ,OARIrC,IAEIrB,IAAuBqB,EAAe,SACtCpE,EAAI0G,MAAO,CAACC,WAAWvC,EAAe,UAAeuC,WAAWvC,EAAe,aAEnFrB,EAAqBqB,EAAe,SAGjC,KAIX,SAASsB,GAAWhI,GACZsC,IACItC,GACA+D,EAAqB,EACrBzB,EAAI4G,OAAO,CAACzE,QAAS,GAAI0E,oBAAoB,EAAMC,OAAM,EAAMC,WAAY,QAE3E/G,EAAIgH,aACJhH,EAAIiH,YAAYvF,GAChBD,EAAqB,IAI7BnE,EAASP,EAAkBW,IAqG/B,SAASwJ,GAAmBC,EAAcC,GAGtCA,EAAMC,GAAG,CACP,MAAS,SAAUC,GAChB1I,QAAQC,IAAI,MAAOyI,GACnB1I,QAAQC,IAAI,YASrB,SAAS0I,GAAT,GAA2C,IAAvB5D,EAAsB,EAAtBA,eACV0C,EAAU1C,EAAe0C,QAEzBrG,EAAMyG,cAENe,EAAgBC,mBAClB,iBAAO,CACHC,QADG,WAEC,GAAIpC,GAAaqC,QAAS,CACtB,IAAMC,EAAmBtC,GAAaqC,QACtC,IAAKnE,GAA8B,MAAVoE,EAAgB,CAErC,IAAMC,EAASD,EAAOE,YAClBC,EAAQ,CAAEzB,IAAK,IAAKC,IAAK,KAC7BwB,EAAMzB,IAAMuB,EAAOvB,IAAI0B,QAAQ,GAC/BD,EAAMxB,IAAMsB,EAAOtB,IAAIyB,QAAQ,GAG/B1K,EAASV,EAAkB,CAAEyJ,SAAS,EAAMvF,SAAUiH,WAKtE,IAOJ,OAAQ,mCACK1B,GAAW,mCACL7C,EAWC,cAACyE,EAAA,EAAD,CACIhH,KAAMuB,EAEN0F,WAAW,EAEXpH,SAAuC,GAA7B6C,EAAe7C,SAASwF,IAAStG,EAAImI,YAAcxE,EAAe7C,SAC5EsH,IAAK9C,IAJD,aAXR,cAAC2C,EAAA,EAAD,CACIhH,KAAMuB,EAEN0F,WAAW,EACXpH,SAAU6C,EAAe7C,SACzBsH,IAAK9C,GACLkC,cAAeA,GAJX,iBAuBhC,SAASa,KACL,IAAMrI,EAAMsI,YAAa,CACrBC,gBADqB,SACLjB,GACZtC,SAASC,OAAS,WAAWqC,EAAE9G,MAInCgI,KANqB,SAMhBlB,GAEG1D,IACI0B,GAAaqC,SACYrC,GAAaqC,QAC/Bc,UAAU,CAACnC,IAAKgB,EAAEoB,OAAOP,YAAY7B,IAAKC,IAAKe,EAAEoB,OAAOP,YAAY5B,QASvFoC,QApBqB,SAoBbrB,GACJ,GAAI1D,GACI0B,GAAaqC,QAAS,CACtB,IACME,EADmBvC,GAAaqC,QAChBG,YAClBC,EAAQ,CAAEzB,IAAK,IAAKC,IAAK,KAC7BwB,EAAMzB,IAAMuB,EAAOvB,IAAI0B,QAAQ,GAC/BD,EAAMxB,IAAMsB,EAAOtB,IAAIyB,QAAQ,GAE/B1K,EAASV,EAAkB,CAACyJ,SAAS,EAAMvF,SAAUiH,OAQjEa,MArCqB,SAqCftB,GACFlE,EAAWkE,IAqBfuB,QA3DqB,SA2DbvB,GACJ9C,GAAe8C,EAAEoB,OAAOI,QAG5BC,cA/DqB,SA+DPzB,GACV,IAAI0B,EAAS1B,EAAE2B,SAAW,EAEtBxH,EAAqB,IACrBzB,EAAIkJ,QAAQ5B,EAAE6B,OAAQ,IACtB1H,GAA0C,GAG1CzB,EAAIoJ,SAAS1H,IACbA,EAAmB+G,UAAUnB,EAAE6B,QAC/BzH,EAAmB2H,UAAUL,IAE7BtH,EAAqBd,IAAE0I,OAAOhC,EAAE6B,OAAQH,GAAQ1H,MAAMtB,IAI9DuJ,cA/EqB,SA+EPjC,GAEVhK,EAASP,GAAkB,IAC3ByM,MAAMlC,EAAEmC,YAIhB,OAAO,KAOT,SAASC,KACP,IAAM1J,EAAMyG,cA2CZ,OA7BQjF,GACAxB,EAAIiH,YAAYzF,GAGhBwC,GACId,IAEA1B,EAAeZ,IAAE+I,UAAUzG,EAAmB,CAC1C0G,SAAU,CAAC,GAAK,UAAW,GAAK,QAAS,EAAG,OAE5CC,IAAK,IACLb,OAAQ,GACRc,KAAM,GACN3H,QAAS,IAGbnC,EAAI+J,SAASvI,IAalB,KA8BX,OACI,mCAEE4C,GAAoD,MAAjCA,EAAe,WAAuD,MAA9BA,EAAe,SAExE,eAAC4F,EAAA,EAAD,CAAcC,YAAa3F,EAAQ4F,OAAQ,CAACvD,WAAWvC,EAAe,UAAeuC,WAAWvC,EAAe,YAAiB+F,KA7hBpH,GA6hBuIC,aAAa,EAAOC,iBAAiB,EAAMjJ,MAAO,CAAEkJ,OAAQ,qBAAsBC,MAAO,QAA5O,UACI,cAAC3I,EAAA,EAAD,CAAed,SAAS,UAAxB,SACI,cAAC,EAAD,CAAea,iBAAkB4B,MAMrC,cAACiD,GAAD,IAIa,iBAAZrJ,GAA8B,mCAC1BoH,IAAeA,GAAc,GAC1B,cAACiG,EAAA,EAAD,CAA0C7L,KAAMsE,EAAUwH,aAAcpH,EAAsBqH,OAAQpH,EAAmBqH,cAAezD,IAA1HjE,EAAS2H,mBAGvB,cAAC,IAAD,CACAC,mBAAmB,EACnBC,qBAAqB,EACrBC,qBAAqB,EACrBC,iBAAkB,GAClBC,mBAlDa,SAAUC,GAEvC,IAIIC,EAJAC,EAAQF,EAAQG,gBAWpB,OANa,GAATD,IAAcD,EAAS,KACvBC,GAAS,GAAKA,GAAQ,IAAKD,EAAS,KACpCC,GAAS,GAAKA,GAAQ,IAAKD,EAAS,KACpCC,GAAS,IAAMA,GAAQ,KAAMD,EAAS,KACtCC,EAAQ,KAAMD,EAAS,KAEpBvK,IAAE0K,QAAQ,CACfC,KAAMH,EAAMI,WACZrM,UAAW,kBAAoBgM,EAC/BxI,cAAU8I,KA6BI,SAMI,cAACjB,EAAA,EAAD,CAA0C7L,KAAMsE,EAAUwH,aAAcpH,EAAsBqH,OAAQpH,EAAmBqH,cAAezD,IAA1HjE,EAAS2H,uBAMtB,aAAZzN,GAA0B,mCACvB,cAACqN,EAAA,EAAD,CAA0C7L,KAAMsE,EAAUwH,aAAcpH,EAAsBqH,OAAQpH,EAAmBqH,cAAezD,IAA1HjE,EAAS2H,qBAO3B,cAACrD,GAAD,CAAW5D,eAAgBD,EAAkBP,mBAAoBA,IAEjE,cAACkF,GAAD,KAEE7E,GAAoB,cAACkI,EAAA,EAAD,CAAa5K,SAAS,gBAK5C,cAAC4I,GAAD,OAMJ,8CGnrBGiC,GAVC,SAAC,GAA8B,IAA7BC,EAA4B,EAA5BA,SACjB,OACC,qBAAKzM,UAAU,wBAAwBE,GAAG,kBAA1C,SACC,qBAAKF,UAAU,8BAA8BiC,MAAO,CAAEyK,UAAW,QAAjE,SACED,O,4ECqkBUE,GA/jBI,SAAC,GAAuC,IAAtCC,EAAqC,EAArCA,eACXC,EAAkBvO,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYC,iBACtEC,EAAiB1O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYG,gBACrEC,EAAkB5O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYK,iBACzEC,EAAgB9O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYO,eACpEC,EAAmBhP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYS,kBACvEC,EAA0BlP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYW,yBAC9EC,EAAmBpP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYa,iBAG7E,EAAoB9O,cAAZC,EAAR,EAAQA,EAIR,GAJA,EAAWC,KAIwC6O,aAAQ,CAC1DC,eAAgB,WAChBC,cAAe,CACdC,cAAe,GACfC,aAAc,GACdC,eAAgB,GAChBC,aAAc,GACdC,gBAAiB,GACjBC,uBAAwB,GACxBC,sBAAuB,GACvBC,oBAAqB,GACrBC,oBAAqB,GACrBC,kBAAmB,GACnBC,cAAe,GACfC,iBAAkB,GAClBC,qBAAsB,GACtBC,wBAAyB,GACzBC,eAAgB,GAChBC,mBAAoB,GACpBC,sBAAuB,GACvBC,kBAAmB,OApBbjN,EAAR,EAAQA,QAASkN,EAAjB,EAAiBA,aAAcC,EAA/B,EAA+BA,MA8B3BC,GA9BJ,EAAsCC,SA8BJ,IAC9BC,MAAMC,QAAQzC,IAAoBwC,MAAMC,QAAQ5B,KAEnDyB,EAAyBzB,EAAiB7M,KAAI,SAAA0O,GAC7C,MAAO,CACNC,MAAOD,EAAUE,UACjBC,QAAS7C,EAAgBhM,KAAI,SAAA8O,GAC5B,GAAIJ,EAAUrP,KAAOyP,EAAKC,UACzB,MAAO,CACN5S,MAAO2S,EAAKzP,GACZsP,MAAOG,EAAKE,UACZC,YAAaH,EAAKG,YAClBC,SAAUJ,EAAKI,aAIfxE,QAAO,SAAApD,GAAC,OAAIA,UAMlB,IAAI6H,EAA0D,GAC1DX,MAAMC,QAAQtC,KACjBgD,EAAwBhD,EAAenM,KAAI,SAACoP,GAC3C,MAAO,CACNjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEC,gBAKZ,IAAIC,EAA2D,GAC3Dd,MAAMC,QAAQpC,KACjBiD,EAAyBjD,EAAgBrM,KAAI,SAACoP,GAC7C,MAAO,CACNjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEG,cAKZ,IAAIC,EAAyD,GACzDhB,MAAMC,QAAQlC,KACjBiD,EAAuBjD,EAAcvM,KAAI,SAACoP,GACzC,MAAO,CACNjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEK,gBAKZ,IAAIC,EAA4D,GAC5DlB,MAAMC,QAAQhC,KACjBiD,EAA0BjD,EAAiBzM,KAAI,SAACoP,GAC/C,MAAO,CACNjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEO,eAKZ,IAAIC,EAAmE,GACnEpB,MAAMC,QAAQ9B,KACjBiD,EAAiCjD,EAAwB3M,KAAI,SAACoP,GAC7D,MAAO,CACNjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAES,oBAMV,IAAMC,EAAe,CAEtBC,OAAQ,SAACC,EAAD,GAAuB,IAAZrR,EAAW,EAAXA,KAElB,OAAO,2BACFqR,GADL,IAEEC,YAAa,GACb5O,gBAAmC,IAAlB1C,EAAKuQ,SAAiB,eAAYzD,MAQ/CyE,EAAS,SAACC,GACjB,MAA+BA,EAAMxR,KAA7BgQ,EAAR,EAAQA,MAAOM,EAAf,EAAeA,YACf,OACE,eAAC,KAAWiB,OAAZ,2BAAuBC,GAAvB,cACD,+BAAOxB,IADN,IACoB,sBAAMvN,MAAO,CAAEgP,MAAO,YAAtB,SAAqCnB,SAY5D,OACC,8BACC,eAACoB,GAAA,EAAD,CAAMlR,UAAU,MAAMmR,SAAUlC,EAAarC,GAA7C,UACC,eAACsE,GAAA,EAAKE,MAAN,CAAYC,UAAU,oBAAoBrR,UAAU,OAApD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,+BAEZ,cAAC,KAAD,CACCuC,KAAK,gBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvB4S,SAAO,EACPC,cAAc,EAEdjC,QAASP,EAET0B,OAAQF,EAERiB,eAAgB,SAAChB,GAAD,gBAAcA,EAAOpB,MAArB,cAAgCoB,EAAOd,cACvD+B,WAAY,CAAEd,mBAMlB,eAACG,GAAA,EAAKE,MAAN,CAAYC,UAAU,mBAAmBrR,UAAU,OAAnD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,8BAEZ,cAAC,KAAD,CACCuC,KAAK,eACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvB4S,SAAO,EAEPhC,QAASM,EAETa,OAAQF,EACRkB,WAAY,CAAEd,mBAMlB,eAACG,GAAA,EAAKE,MAAN,CAAYC,UAAU,qBAAqBrR,UAAU,OAArD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,gCAEZ,cAAC,KAAD,CACCuC,KAAK,iBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvB4S,SAAO,EAEPhC,QAASS,EAETU,OAAQF,EACRkB,WAAY,CAAEd,mBAMlB,eAACG,GAAA,EAAKE,MAAN,CAAYC,UAAU,mBAAmBrR,UAAU,OAAnD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,8BAEZ,cAAC,KAAD,CACCuC,KAAK,eACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvB4S,SAAO,EAEPhC,QAASW,EAETQ,OAAQF,EACRkB,WAAY,CAAEd,mBAMlB,eAACe,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,eAACkR,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,sBACVpP,MAAO,CAAE+P,SAAU,SAHpB,UAKC,cAACd,GAAA,EAAKI,MAAN,UACExS,EAAU,iCAEZ,cAAC,KAAD,CACCuC,KAAK,kBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvBmT,aAAW,EACXN,cAAc,EAEdjC,QAASa,WAMb,eAACW,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,6BACVpP,MAAO,CAAE+P,SAAU,SAHpB,UAKC,cAACd,GAAA,EAAKI,MAAN,UACExS,EAAU,wCAEZ,cAAC,KAAD,CACCuC,KAAK,yBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EACZ,gBAEDmT,aAAW,EACXN,cAAc,EAEdjC,QAASe,cAOd,eAACqB,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,4BAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,mCAEZ,cAAC,KAAD,CACCuC,KAAK,wBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,UAKjC,eAACN,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,0BAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,iCAEZ,cAAC,KAAD,CACCuC,KAAK,sBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,aAMlC,eAACM,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,0BAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,qCAEZ,cAAC,KAAD,CACCuC,KAAK,sBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,UAKjC,eAACN,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,wBAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,mCAEZ,cAAC,KAAD,CACCuC,KAAK,oBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,aAQlC,eAACN,GAAA,EAAKE,MAAN,CAAYpR,UAAU,OAAOqR,UAAU,oBAAvC,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,+BAEZ,cAAC,KAAD,CACCuC,KAAK,gBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,UAQjC,eAACM,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,cAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,2BAA2BpP,MAAO,CAACkQ,SAAU,QAA5E,SACC,cAACjB,GAAA,EAAKI,MAAN,CAAYrP,MAAO,CAAEyK,UAAW,QAAhC,SACE5N,EAAU,8BAIb,eAACoS,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,uBACVrR,UAAU,YAHX,UAKC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,8BAEZ,cAAC,KAAD,CACCuC,KAAK,mBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,UAMR,eAACN,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,2BACVrR,UAAU,YAHX,UAKC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,kCAEZ,cAAC,KAAD,CACCuC,KAAK,uBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,UAMR,eAACN,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,8BACVrR,UAAU,YAHX,UAKC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,qCAEZ,cAAC,KAAD,CACCuC,KAAK,0BACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,aAOT,eAACM,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,cAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,yBAAyBpP,MAAO,CAACkQ,SAAU,QAA1E,SACC,cAACjB,GAAA,EAAKI,MAAN,UACExS,EAAU,4BAIb,cAACoS,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,yBACVrR,UAAU,YAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,iBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,SAMR,cAACN,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,6BACVrR,UAAU,YAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,qBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,SAMR,cAACN,GAAA,EAAKE,MAAN,CACCrQ,GAAIgR,KACJV,UAAU,gCACVrR,UAAU,YAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,wBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJ3H,IAAI,MACA8G,YAcT,cAACN,GAAA,EAAKE,MAAN,CACCC,UAAU,wBACVrR,UAAU,YAFX,SAIC,cAAC,KAAD,CACCqB,KAAK,oBACLU,QAASA,EACTwP,OAAQ,kBAAGC,EAAH,EAAGA,MAAH,OAEP,aADA,CACCN,GAAA,EAAKoB,MAAN,2BACKd,GADL,IAGC7O,QAAO,UAAE6O,EAAK,aAAP,SACPe,QAAM,EACN/C,MAAO1Q,EACN,iCAED7B,KAAK,WACLiD,GAAG,8BAeP,sBAAKF,UAAU,sBAAf,UACC,cAACD,EAAA,EAAD,CAAQE,QAAQ,QAAQE,QA3Z5B,WACC+O,IACAtC,EAAe,KAyZZ,SACE9N,EAAU,6BACF,IACV,cAACiB,EAAA,EAAD,CACC9C,KAAK,SACLgD,QAAQ,UACRgC,MAAO,CAAE+P,SAAU,SAHpB,SAKElT,EAAU,8BACF,a,oBCxXA0T,IC1KVC,GD0KUD,GAhLf,YAA6G,IAAzFE,EAAwF,EAAxFA,QAASlT,EAA+E,EAA/EA,KAAMmT,EAAyE,EAAzEA,UAAyE,IAA9DC,eAA8D,SAAhDR,EAAgD,EAAhDA,KAAMnS,EAA0C,EAA1CA,QAAS4S,EAAiC,EAAjCA,eAE1E,EAAkCnU,mBAAS,CAACiU,UAAWA,EAAWC,QAASA,IAA3E,mBAAOE,EAAP,KAAkBC,EAAlB,KACA,EAAkCrU,mBAASc,GAA3C,mBAAOwT,EAAP,KAAkBC,EAAlB,KAEAhU,qBAAU,WACTgU,EAAazT,KACX,CAACA,IAGJ,IAAM0T,EAAgBR,EAAQ7R,KAAI,SAACsS,EAAMC,GAAP,OACjC,oBACCnR,MAAO,CAAEmJ,MAAO+H,EAAK/H,MAAQ+H,EAAK/H,MAAO,GAAIiI,OAAQF,EAAKG,SAAW,UAAY,WAEjFnT,QAAS,WACJgT,EAAKG,UACRP,EAAa,CAACJ,UAAWQ,EAAK3B,MAAOoB,QAASE,EAAUH,YAAcQ,EAAK3B,QAASsB,EAAUF,WALjG,UAWU,OAATE,QAAS,IAATA,OAAA,EAAAA,EAAWH,aAAcQ,EAAK3B,MAC9B,qCACC,qBAAKvP,MAAO,CAACsR,MAAO,OAAQC,UAAW,QAAvC,SAAiDL,EAAKM,aACtD,qBAAKxR,MAAO,CAACsR,MAAO,QAASC,UAAW,SAAxC,SACC,uBAAMvR,MAAO,CAACyR,SAAU,MAAOzC,MAAO,QAAtC,cAAiD6B,EAAUF,QAAU,SAAM,iBAExEO,EAAKM,YAfLL,MAsBP,SAASO,IAuBR,IAAIC,EAA+B,GASnC,OANCA,EAFGd,EAAUH,UAEH,OAAGK,QAAH,IAAGA,OAAH,EAAGA,EAAWa,MAzBzB,SAAkB1U,EAAM2U,GAEvB,OAAK3U,EAAE2T,EAAUH,WAAamB,EAAEhB,EAAUH,WACrCG,EAAUF,SACL,EAED,EAKJzT,EAAE2T,EAAUH,WAAamB,EAAEhB,EAAUH,WACrCG,EAAUF,QACN,GAEC,EAGH,KASMI,IAIIY,EAAWG,OAAS,EAEpC,mCACCH,EAAW/S,KAAI,SAACoF,EAAUmN,GAC1B,OACC,6BACC,cAACY,EAAD,CAAS/N,IAAKA,EAAKgO,SAAUb,KADrBnN,EAAI/F,SAQT,6BAAI,oBAAI+B,MAAO,CAACuR,UAAW,UAAWU,QAASxB,EAAQqB,OAAnD,uBAQb,SAASC,EAAT,GAAsD,IAApC/N,EAAmC,EAAnCA,IAAKgO,EAA8B,EAA9BA,SAChBE,EAAa,SAAClO,EAAUmN,GAAX,gBAAyCgB,OAAOnO,EAAI/F,IAApD,YAA2DkU,OAAOhB,KAkErF,OA/DeV,EAAQ7R,KAAI,SAACwT,EAAKjB,GAGhC,GAA8B,kBAAnBnN,EAAIoO,EAAI7C,OAAqB,CAEvC,UAAI6C,QAAJ,IAAIA,KAAKC,eAAgB,CACxB,GAA2B,aAAvBD,EAAIC,eACP,OAAQ,6BAAkC,IAAIC,KAAKtO,EAAIoO,EAAI7C,QAAQgD,sBAAlDL,EAAWlO,EAAKmN,IAGlC,GAA2B,aAAvBiB,EAAIC,eACP,OAAQ,6BAAkC,IAAIC,KAAKtO,EAAIoO,EAAI7C,QAAQiD,sBAAlDN,EAAWlO,EAAKmN,IAGlC,GAA2B,aAAvBiB,EAAIC,eAA+B,CACtC,IAAII,EAAW,IAAIH,KAAKtO,EAAIoO,EAAI7C,QAAQgD,qBAAuB,IAAM,IAAID,KAAKtO,EAAIoO,EAAI7C,QAAQiD,qBAC9F,OAAQ,6BAAkCC,GAAzBP,EAAWlO,EAAKmN,IAGlC,OAAQ,6BAAkCnN,EAAIoO,EAAI7C,QAAjC2C,EAAWlO,EAAKmN,IAGlC,MAAgB,MAAZiB,EAAI7C,MACC,6BAAkCyC,EAAS,GAAlCE,EAAWlO,EAAKmN,IAE1B,6BAAkCnN,EAAIoO,EAAI7C,QAAjC2C,EAAWlO,EAAKmN,IAIlC,IAAMuB,EAAU1O,EAAIoO,EAAI7C,OAExB,GAAInC,MAAMC,QAAQqF,GAAU,CAC3B,IAAIC,EAAkB,GA0BtB,OAzBAD,EAAQE,SAAQ,SAAA7S,GACf,IAAW,OAANA,QAAM,IAANA,KAAQ8S,MAAR,OAAgB9S,QAAhB,IAAgBA,KAAQ+S,SAAzB,OAAqC/S,QAArC,IAAqCA,KAAQgT,SAAU,CAC1D,IAAIC,EAAa,GAEjB,OAAIjT,QAAJ,IAAIA,KAAQ+S,SACX,OAAI/S,QAAJ,IAAIA,KAAQkT,WACXD,EAAWE,KAAK,mBAAgDnV,UAAWgC,EAAO+S,OAAQ9S,MAAO,CAACyR,SAAU1R,EAAOkT,aAA3Ff,EAAWlO,EAAKmN,GAAOpR,EAAOgT,WAEtDC,EAAWE,KAAK,mBAAgDnV,UAAWgC,EAAO+S,QAA1DZ,EAAWlO,EAAKmN,GAAOpR,EAAOgT,YAIxD,OAAIhT,QAAJ,IAAIA,KAAQ8S,MACXG,EAAWE,KAAK,+BAAoDnT,EAAO8S,MAAhDX,EAAWlO,EAAKmN,GAAOpR,EAAOgT,WAGtDnC,EACH+B,EAAUO,KAAK,iCAAmD,mBAAG3U,KAAK,IAAIL,QAAS,kBAAI0S,EAAe5M,EAAKjE,EAAOgT,WAApD,SAAgEC,IAAnH,MAAWd,EAAWlO,EAAKmN,GAAOpR,EAAOgT,WAExDJ,EAAUO,KAAK,+BAAoDF,GAAzCd,EAAWlO,EAAKmN,GAAOpR,EAAOgT,eAMnD,6BAAkCJ,GAAzBT,EAAWlO,EAAKmN,QAYlC,OACD,eAACgC,GAAA,EAAD,CAAOC,SAAO,EAACC,UAAQ,EAACC,OAAK,EAACnD,KAAMA,EAAMnS,QAASA,EAAnD,UACC,gCACC,6BACEiT,MAGH,gCACC,cAACS,EAAD,U,mDCpKClB,O,eAAAA,I,uBAAAA,I,qBAAAA,I,yBAAAA,I,uBAAAA,I,kBAAAA,Q,KASL,IAAM+C,GAAyB,CAC3BC,SAAS,EACTC,YAAY,EACZvD,SAAU,KACVwD,UAAW,KACXC,eAAgB,OAChBC,QAAS,GACTC,SAAU,GAGRC,GAAgBC,sBAAsD,WAczE/M,GAAS,IAbRgN,EAaO,EAbPA,WACAC,EAYO,EAZPA,WAEAC,EAUO,EAVPA,WACAC,EASO,EATPA,YACApZ,EAQO,EARPA,MACAqZ,EAOO,EAPPA,SAOO,IANPC,qBAMO,MANO,YAMP,MALPC,eAKO,MALCf,GAKD,EAJPgB,EAIO,EAJPA,SACAC,EAGO,EAHPA,WACAC,EAEO,EAFPA,QACAC,EACO,EADPA,YAKAC,8BAAoB3N,GAAK,iBAAO,CAC5B4N,WAAY,WAAO,IAAD,EAG8B,EAD5C,QAAe,OAAXC,QAAW,IAAXA,GAAA,UAAAA,EAAatO,eAAb,UAAsBuO,OAA4C,IAAnCD,EAAYtO,QAAQuO,MAAMhD,UACrDiD,IAAWvE,GAAewE,WAE1BC,GAAW,OAACJ,QAAD,IAACA,GAAD,UAACA,EAAatO,eAAd,aAAC,EAAsBuO,MAAM,GAAG1V,OACpC,SASvB,IAAMyV,EAAc1Q,iBAAO,MAE3B,EAA4B1H,mBAAyB+T,GAAe0E,MAApE,mBAAOH,EAAP,KAAeI,EAAf,KACA,EAAoC1Y,wBAA6B4N,GAAjE,mBAAO+K,EAAP,KAAmBC,EAAnB,KACA,EAA8C5Y,wBAAc4N,GAA5D,mBAAOiL,EAAP,KAAwBC,EAAxB,KACA,EAAoD9Y,mBAAS4X,GAA7D,mBAAOmB,EAAP,KAA2BC,EAA3B,KAEA,EAAsChZ,oBAAkB,GAAxD,mBAAOiZ,EAAP,KAAoBC,EAApB,KACA,EAAsClZ,wBAAc4N,GAApD,mBAAOuL,EAAP,KAAoBC,EAApB,KACA,EAA8BpZ,oBAAS,GAAvC,mBAAOqZ,EAAP,KAAgBC,EAAhB,KAGA/Y,qBAAU,WACFkX,GACAmB,EAAcnB,KAEnB,IAIHlX,qBAAU,WAAK,IAAD,IACVQ,QAAQC,IAAI,cAAemY,GAC3B,OAAIA,QAAJ,IAAIA,GAAJ,UAAIA,EAAarY,YAAjB,iBAAI,EAAmByY,cAAvB,OAAI,EAA2BC,MAC3BF,GAAW,GACX3B,EAASwB,EAAYrY,KAAKyY,OAAOC,QAEtC,CAACL,IAEJ5Y,qBAAU,WACFjC,GAEmB,MAAfoZ,IACAA,EAAc,IAGW,KAAzBA,EAAY+B,OAAO,IAAkC,KAArBnb,EAAMmb,MAAM,EAAG,KAC/C/B,GAA4B,KAG3B2B,IACDL,EAAsBpB,GACtBsB,GAAe,GACf,OAAId,QAAJ,IAAIA,KAAatO,UAEbsO,EAAYtO,QAAQxL,MAAM,IAG9Bsa,EAAc,GAAD,OAAIlB,GAAJ,OAAkBpZ,MAMnCsa,EAAcnB,GAGlB6B,GAAW,KAEZ,CAAChb,IAKJiC,qBAAU,WACF+X,IAAWvE,GAAewE,SAC1BS,EAAsB,eAEtBA,EAAsBpB,KAE3B,CAACU,IAkBJ,IAAMoB,EAAa,SAACC,GAAD,OACrB,IAAIC,SAAQ,SAACC,GACZC,KAAQC,iBACPJ,EACA9B,EAAQpE,SACRoE,EAAQZ,UACRY,EAAQX,eACRW,EAAQV,QACRU,EAAQT,UACR,SAAC4C,GACAH,EAAQG,KAET,YAKMC,EAAY,uCAAG,WAAOC,GAAP,iBAAAzZ,EAAA,2DAEbyZ,EAAMrP,OAAOwN,OAAS6B,EAAMrP,OAAOwN,MAAMhD,OAAS,GAFrC,oBAGPsE,EAAOO,EAAMrP,OAAOwN,MAAM,GAGhCO,EAAcuB,IAAIC,gBAAgBT,KAE9B9B,EAAQd,UAAWc,EAAQb,WARlB,iCAUL0B,EAAU3E,GAAewE,UAVpB,SAWemB,EAAWC,GAX1B,OAWCU,EAXD,OAYLvB,EAAmBuB,GACnB3B,EAAU3E,GAAeuG,SAErB9C,GACAgB,GAAYmB,EAAKhX,MAhBhB,kDAoBL5B,QAAQC,IAAR,MACA0X,EAAU3E,GAAewG,OArBpB,gCAwBL/C,GACAgB,GAAYmB,EAAKhX,MAzBZ,0DAAH,sDAmCf6X,EAAY,uCAAG,WAAOC,GAAP,qBAAAha,EAAA,6DAEhBia,EAAY,IAAIC,SACVC,OAAO,eAAgB,oBAErBC,EAAa,CAACJ,WAAYA,GALlB,SAOE/Z,MAAM6W,EAAY,CAC9BuD,OAAQ,OACRC,QAASL,EACTM,KAAMC,KAAKC,UAAUL,KAVX,cAOVja,EAPU,gBAaDA,EAAIC,OAbH,cAadA,EAbc,yBAePoa,KAAKE,MAAMta,IAfJ,4CAAH,sDAsBTua,GAAiB,SAACC,GACpB,GAAIA,EAAGC,iBAAkB,CACrB,IAAIC,EAAkBC,KAAKC,MAAOJ,EAAGK,OAASL,EAAGM,MAAS,KAC1D3C,EAAsBtD,OAAO6F,GAAiB,KAC1CxD,GACAA,EAAWwD,GAEfxa,QAAQC,IAAI,kBAAmBua,KAKjCpD,GAAa,SAACwB,EAAWiC,GAC3B,IAAIC,EAAM,IAAIC,eACdD,EAAIE,KAAK,OAAQH,EAAOxX,KACxByX,EAAIG,QAAU,IACdH,EAAII,OAAOC,WAAad,GAExB,IAAIe,EAAW,IAAIC,SACzB,IAAK,IAAI5C,KAAOoC,EAAOrC,OACF,QAAPC,GACA2C,EAASvB,OAAOpB,EAAKoC,EAAOrC,OAAOC,IAIjD2C,EAASvB,OAAO,OAAQjB,GAExBkC,EAAIQ,mBAAqB,WACD,IAAnBR,EAAIS,aAEY,MAAfT,EAAIvD,QAAiC,MAAfuD,EAAIvD,QACdY,GAAe,GACfF,EAAsB,QAClBlB,GACAA,MAWAE,IACAkB,GAAe,GACfF,EAAsB,SAAD,OAAU6C,EAAIvD,SACnCN,EAAQ6D,EAAIvD,OAAQqB,EAAKhX,OAG7BgJ,MACd,qCACCkQ,EAAIvD,OACJ,MACAqB,EAAKhX,SAOVkZ,EAAIU,OAAS,WAEZxb,QAAQC,IAAI,wCAOP6a,EAAIW,QAAU,WAKV7Q,MAAM,6BAA+BgO,EAAKhX,OAI9C5B,QAAQC,IAAI,WAAYmb,GACxBN,EAAIY,KAAKN,IASP3D,GAAW,uCAAG,WAAOkE,GAAP,uBAAAjc,EAAA,6DAChBic,EAAWA,EAASC,QAAQ,MAAO,IAEnCzD,GAAe,GACfF,EAAsB,gBACtBI,OAAexL,GALC,SAMQ4M,EAAakC,GANrB,UAMVE,EANU,OAOhBxD,EAAewD,GACX3E,GACAA,EAAY2E,GAGhB7b,QAAQC,IAAI,YAAa4b,IAGK,IAA1BA,EAAUC,YAfE,oBAiBG,OAAXzE,QAAW,IAAXA,GAAA,UAAAA,EAAatO,eAAb,UAAsBuO,OAA4C,IAAnCD,EAAYtO,QAAQuO,MAAMhD,OAjBjD,oBAmBFsE,EAAOvB,EAAYtO,QAAQuO,MAAM,IAEnCR,EAAQd,QArBJ,qBAuBAc,EAAQb,WAvBR,iBAwBI6B,GAEAV,GAAWU,EAAiB+D,EAAU9b,MA1B1C,yCA+BI4X,EAAU3E,GAAewE,UA/B7B,UAgCwBmB,EAAWC,GAhCnC,QAgCUU,EAhCV,OAiCI3B,EAAU3E,GAAeuG,SAEzBnC,GAAWkC,EAAOuC,EAAU9b,MAnChC,mDAqCIC,QAAQC,IAAR,MACA0X,EAAU3E,GAAewG,OAtC7B,gCA6CJpC,GAAWwB,EAAMiD,EAAU9b,MA7CvB,gCAiDRgc,EAASC,GAAc,GAC3BvE,GAAYsE,EAAS,IAAMJ,GAlDf,2DAAH,sDA0DjB,OACI,qBAAKnZ,MAAO,CAACN,SAAU,YAAvB,SACI,eAACuP,GAAA,EAAKE,MAAN,WACI,cAACsK,GAAA,EAAD,CAAOC,IAAKtE,EAAYpV,MAAO,CAACkQ,SAAU,OAAQhH,OAAQ,QAASyQ,SAAO,GAAMvE,GADpF,IAEI,mBAAG7W,KAAK,IAAR,SACI,mBAAGR,UAAU,4BACTiC,MAAO,CAACgP,MAAO,UAAWtP,SAAU,WAAYka,IAAK,OAAQC,MAAO,OACpE3b,QAAS,WAGLkW,EAAS,IACTiB,EAAcnB,GACd,OAAIW,QAAJ,IAAIA,KAAatO,UAEbsO,EAAYtO,QAAQxL,MAAM,SAM1C,eAAC+C,EAAA,EAAD,CAAQE,QAAQ,oBAAoBgC,MAAO,CAACmJ,MAAO,QAASpL,UAAU,OAClEG,QAAS,WAELyX,GAAe,GACfF,EAAsBpB,GAEtBQ,EAAYtO,QAAQiB,SAN5B,UAQKkO,GAAe,cAACoE,GAAA,EAAD,CACZhb,GAAG,OACHib,UAAU,SACV5J,KAAK,KACL6J,KAAK,SACL,cAAY,SAEfxE,KACK,IAGV,uBAAOxO,IAAK6N,EAAa7Z,KAAK,OAAOif,OAAO,UAAUja,MAAO,CAACka,QAAS,QACnE9F,SAAUsC,YA4C9B,SAAS8C,GAAc1H,GAInB,IAHA,IAAIqI,EAAmB,GACjBC,EAAmB,iEACnBC,EAAmBD,EAAWtI,OAC1BwI,EAAI,EAAGA,EAAIxI,EAAQwI,IAC3BH,GAAUC,EAAWG,OAAOtC,KAAKuC,MAAMvC,KAAKwC,SACjDJ,IAEE,OAAOF,EAGKrG,UC7eA,4tSCmMA4G,GAlLM3G,sBAAqD,WAKvE/M,GAAS,IAJR2T,EAIO,EAJPA,mBACAC,EAGO,EAHPA,aACAzG,EAEO,EAFPA,YACA0G,EACO,EADPA,eAGGC,EAAY3W,mBACZ4W,EAAY5W,mBACZ6W,EAAY7W,mBAElB,EAA4C1H,oBAAS,GAArD,mBAAOwe,EAAP,KAAuBC,EAAvB,KACA,EAA4Cze,oBAAS,GAArD,mBAAO0e,EAAP,KAAuBC,EAAvB,KACA,EAA4C3e,oBAAS,GAArD,mBAAO4e,EAAP,KAAuBC,EAAvB,KAEAte,qBAAU,WACLie,GAAkBE,GAAkBE,IACvCH,GAAkB,GAClBE,GAAkB,GAClBE,GAAkB,GAElBT,OAEC,CAACI,EAAgBE,EAAgBE,IAIjC,IAAMpH,GAAa,EAEbsH,EAAiB,CACnB/H,SAAS,EACTC,YAAY,EACZvD,SAAU,KACVwD,UAAW,KACXC,eAAgB,OAChBC,QAAS,GACTC,SAAU,GAKdc,8BAAoB3N,GAAK,iBAAO,CAC5BwU,aAAc,WAAO,IAAD,MAEZC,GAAK,EACLC,GAAK,EACLC,GAAK,EAET,OAAIb,QAAJ,IAAIA,GAAJ,UAAIA,EAAWvU,eAAf,OAAI,EAAoBqO,aAEpB6G,EAAGX,EAAUvU,QAAQqO,cAIzB,OAAImG,QAAJ,IAAIA,GAAJ,UAAIA,EAAWxU,eAAf,OAAI,EAAoBqO,aAEpB8G,EAAGX,EAAUxU,QAAQqO,cAIzB,OAAIoG,QAAJ,IAAIA,GAAJ,UAAIA,EAAWzU,eAAf,OAAI,EAAoBqO,aAEpB+G,EAAGX,EAAUzU,QAAQqO,cAIzBpX,QAAQC,IAAI,IAAKge,EAAIC,EAAIC,GACpBF,GAAOC,GAAOC,GAIfT,GAAmBO,GACnBL,GAAmBM,GACnBJ,GAAmBK,IALnBd,SAef,IAAMe,EAAiB,WACtBpe,QAAQC,IAAI,kBACZyd,GAAkB,IAGbW,EAAiB,WACtBre,QAAQC,IAAI,kBACZ2d,GAAkB,IAKbU,EAAiB,WACtBte,QAAQC,IAAI,kBAEZ6d,GAAkB,IAMhB,OAGI,eAACzL,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACI,cAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,cAAcrR,UAAU,OAAvD,SACI,cAAC,KAAD,CACIqB,KAAK,SACLU,QAAS6a,EACTrL,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OAEJ,cAAC,GAAD,yBACIyE,WAAY4G,EACZ3G,WAAYA,EAEZC,WAAY6H,GACZ5H,YAAaA,EACbI,SAAUqH,EACVtH,QAASiH,GACLhM,GARR,IASIvI,IAAK8T,UAOrB,cAAC7L,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,cAAcrR,UAAU,OAAvD,SACI,cAAC,KAAD,CACIqB,KAAK,SACLU,QAAS6a,EACTrL,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OAEJ,cAAC,GAAD,yBACIyE,WAAY4G,EACZ3G,WAAYA,EACZC,WAAY6H,GACZ5H,YAAaA,EACbI,SAAUsH,EACVvH,QAASiH,GACLhM,GAPR,IAQIvI,IAAK+T,UAOrB,cAAC9L,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,cAAcrR,UAAU,OAAvD,SACI,cAAC,KAAD,CACIqB,KAAK,SACLU,QAAS6a,EACTrL,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OAEJ,cAAC,GAAD,yBACIyE,WAAY4G,EACZ3G,WAAYA,EACZC,WAAY6H,GACZ5H,YAAaA,EACbI,SAAUuH,EACVxH,QAASiH,GACLhM,GAPR,IAQIvI,IAAKgU,gBCw0BlBgB,GAh+BE,SAAC,GAUI,IAAD,kBATpBC,EASoB,EATpBA,aACAC,EAQoB,EARpBA,aACAC,EAOoB,EAPpBA,YACGC,EAMiB,EANjBA,UACAC,EAKiB,EALjBA,WACAC,EAIiB,EAJjBA,kBACHC,EAGoB,EAHpBA,aACG1d,EAEiB,EAFjBA,KACA+b,EACiB,EADjBA,aAGMtY,EAAmBjG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUgG,kBAC3E,EAA8C9F,oBAAS,GAAvD,mBAAO+f,EAAP,KAAwBC,EAAxB,KAEM7R,EAAkBvO,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYC,iBACtEC,EAAiB1O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYG,gBACrEC,EAAkB5O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYK,iBACzEC,EAAgB9O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYO,eACpEC,EAAmBhP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYS,kBACvEC,EAA0BlP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYW,yBAC3EC,EAAmBpP,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYa,iBAWvEgR,EAAkBvY,mBAQxB,EAAsC1H,wBAAqC4N,GAA3E,mBAAOsS,EAAP,KAAoBC,EAApB,KAIQ/f,GADYsH,iBAAO,MACbvH,cAANC,GAGXG,qBAAU,WACLsF,EAAiB2C,UACpBgI,KAQAE,GAAS,WAAY7K,EAAiB5C,SAASwF,KAC/CiI,GAAS,YAAa7K,EAAiB5C,SAASyF,KAEvCgI,GAAS,mBAAoB0P,EAA6B,OAElE,CAACva,IAMJtF,qBAAU,WACT,IAAI8f,EAAgB,GAEdA,EAAS7e,GAAT,OAAcse,QAAd,IAAcA,OAAd,EAAcA,EAActe,GAC5B6e,EAASC,SAAT,OAAoBR,QAApB,IAAoBA,OAApB,EAAoBA,EAAcQ,SAClCD,EAASE,UAAT,OAAqBT,QAArB,IAAqBA,OAArB,EAAqBA,EAAcS,UAEzC,IAAIC,EAAO,OAAGV,QAAH,IAAGA,OAAH,EAAGA,EAAcW,WAC5B,GAAID,EAAS,CACZ,IAAIE,GAAU,EACLC,EAAqBxK,SAAQ,SAACyK,GACf,OAAPA,QAAO,IAAPA,KAAS5P,SAAWL,MAAMC,QAAQgQ,EAAQ5P,WAErC0P,IACDL,EAASG,QAAUI,EAAQ5P,QAAQ1J,MAC/B,SAACmN,GAEG,OADAiM,EAAUjM,EAAKnW,QAAUkiB,UASjDH,EAASQ,eAAT,OAA0Bf,QAA1B,IAA0BA,OAA1B,EAA0BA,EAAce,eACxCR,EAASS,QAAT,OAAmBhB,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAcgB,QAGvC,IAAIC,EAAS,OAAGjB,QAAH,IAAGA,OAAH,EAAGA,EAAciB,UAC1BA,IACHhgB,QAAQC,IAAI,wBAAyBggB,GACrCX,EAASU,UAAYC,EAAsB1Z,MAC1C,SAACmN,GAAD,OAAUA,EAAKnW,QAAUyiB,MAI3B,IAAIE,EAAgB,OAAGnB,QAAH,IAAGA,OAAH,EAAGA,EAAcmB,iBACjCA,IAEHZ,EAASY,iBAAmBb,EAA6B9Y,MACxD,SAACmN,GAAD,OAAUA,EAAKnW,QAAU2iB,MAK3B,OAAInB,QAAJ,IAAIA,KAAcoB,cACRngB,QAAQC,IAAI,wCAAZ,OAAqD8e,QAArD,IAAqDA,OAArD,EAAqDA,EAAcoB,aAC5Eb,EAASa,YAAcpB,EAAaoB,aAG/Bb,EAASc,gBAAT,OAA2BrB,QAA3B,IAA2BA,OAA3B,EAA2BA,EAAcqB,gBAGzC3Q,GAAM6P,EAAU,CAAEe,mBAAmB,IAErC,IAAMC,EAAe,uCAAG,gCAAA5gB,EAAA,6DAEhB2D,EAFgB,UAEPzD,gCAFO,oBAEkCyB,EAFlC,kBAEgD0d,EAAate,GAF7D,0BAGVd,MAAM0D,GAHI,cAGtBxD,EAHsB,gBAITA,EAAIC,OAJK,OAOpBC,GAHFA,EAJsB,QAORqB,KAAI,SAACye,GASb,OARAA,EAAQ3K,QAAU,GAClB2K,EAAQ3K,QAAQQ,KAAK,CAACJ,OAAQ,cAAeG,WAAY,OAAQF,SAAU,UAEhE,OAAPsK,QAAO,IAAPA,KAASU,QAAT,OAAmBV,QAAnB,IAAmBA,KAASW,QAA5B,OAAsCX,QAAtC,IAAsCA,KAASY,SAC/CZ,EAAQ3K,QAAQQ,KAAK,CAACJ,OAAQ,eAAgBG,WAAY,OAAQF,SAAU,UAGhFsK,EAAQa,SAAW,aACZb,KAIX7f,QAAQC,IAAI,cAAcF,GAC1Bqf,EAAerf,GArBK,4CAAH,qDAwBrB,OAAIgf,QAAJ,IAAIA,KAActe,IACd6f,MAIR,CAACvB,IAmBD,IAAIa,EAA4B,GAC5BhQ,MAAMC,QAAQzC,IAAoBwC,MAAMC,QAAQ5B,KAEhD2R,EAAuB3R,EAAiB7M,KAAI,SAAA0O,GACxC,MAAO,CACHC,MAAOD,EAAUE,UACjBC,QAAS7C,EAAgBhM,KAAI,SAAA8O,GACzB,GAAIJ,EAAUrP,KAAOyP,EAAKC,UACtB,MAAO,CACH5S,MAAO2S,EAAKzP,GACZsP,MAAOG,EAAKE,UACZC,YAAaH,EAAKG,YAClBC,SAAUJ,EAAKI,aAIxBxE,QAAO,SAAApD,GAAC,OAAIA,UAM3B,IAAIiY,EAAwD,GACxD/Q,MAAMC,QAAQtC,KACdoT,EAAsBpT,EAAenM,KAAI,SAACoP,GACtC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEC,gBAKrB,IAAImQ,EAAyD,GACzDhR,MAAMC,QAAQpC,KACdmT,EAAuBnT,EAAgBrM,KAAI,SAACoP,GACxC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEG,cAKrB,IAAIkQ,EAAuD,GACvDjR,MAAMC,QAAQlC,KACdkT,EAAqBlT,EAAcvM,KAAI,SAACoP,GACpC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEK,gBAKrB,IAAIoP,EAA0D,GAC1DrQ,MAAMC,QAAQhC,KAEdoS,EAAwBpS,EAAiBzM,KAAI,SAACoP,GAC1C,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEO,eAKrB,IAAIsO,EAAiE,GACjEzP,MAAMC,QAAQ9B,KACdsR,EAA+BtR,EAAwB3M,KAAI,SAACoP,GACxD,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAES,oBAMxB,MAQI9C,aAAQ,CAEXE,cAAe,CACL5N,GAAI,GACJ8e,SAAU,GACVC,UAAW,GACXC,QAAS,GACTK,eAAgB,GAChBC,QAAS,GACTC,UAAW,GACXE,iBAAkB,GAClBC,YAAa,GACbC,gBAAiB,GAEjB1U,OAAQ,GACRoV,cAAe,GACfC,WAAY,GACZxJ,OAAQ,GACRyJ,QAAS,GACTC,gBAAiB,GACjBV,OAAQ,GACRC,OAAQ,GACRC,OAAQ,MA7BlBne,EADD,EACCA,QACAkN,GAFD,EAECA,aACAC,GAHD,EAGCA,MACAE,GAJD,EAICA,SACAuR,GALD,EAKCA,UACaC,GANd,EAMCC,UAAaD,OACPE,GAPP,EAOOA,QAxPa,8CAuRpB,WAA8B3Y,GAA9B,SAAAhJ,EAAA,6DACCgJ,EAAE4Y,iBADH,SAG4BD,KAH5B,eAMWnC,EAAgBnW,QAAQiV,eANnC,4CAvRoB,sBAkVpB,SAASuD,GAAoBxhB,GA+BmB,IAAD,EA6CjC,GAjDFA,EAAKogB,cACNpgB,EAAKogB,YAAc,OAGW,KAAd,OAAhBrb,QAAgB,IAAhBA,OAAA,EAAAA,EAAkB2C,WAElB1H,EAAK0f,QAAU1f,EAAK0f,QAAQliB,MAC5BwC,EAAKigB,UAAYjgB,EAAKigB,UAAUziB,MAChCwC,EAAKmgB,iBAAL,OAAwBngB,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAMmgB,wBAA9B,aAAwB,EAAwB3iB,MAGxC,OAAJwC,QAAI,IAAJA,KAAM2L,QAAN,OAAgB3L,QAAhB,IAAgBA,KAAM+gB,eAAtB,OAAuC/gB,QAAvC,IAAuCA,KAAMghB,YAA7C,OAA2DhhB,QAA3D,IAA2DA,KAAMwX,SACjExX,EAAKyhB,WAAa,CACd9V,OAAQ+V,SAAS1hB,EAAK2L,QACtBoV,cAAe/Y,WAAWhI,EAAK+gB,eAC/BC,WAAYU,SAAS1hB,EAAKghB,YAC1BxJ,OAAQxX,EAAKwX,OAAOha,MAEpBgjB,OAAQxgB,EAAKwgB,OACbC,OAAQzgB,EAAKygB,OACbC,OAAQ1gB,EAAK0gB,QAGT,OAAJ1gB,QAAI,IAAJA,KAAMihB,SAAWpR,MAAMC,QAAQ9P,EAAKihB,WACpCjhB,EAAKyhB,WAAWR,QAAU,GAC1BjhB,EAAKihB,QAAQ5L,SAAQ,SAAAyK,GACjB9f,EAAKyhB,WAAWR,QAAQtL,KAAKmK,EAAQtiB,WAIrC,OAAJwC,QAAI,IAAJA,KAAMkhB,iBAAmBrR,MAAMC,QAAQ9P,EAAKkhB,mBAC5ClhB,EAAKyhB,WAAWP,gBAAkB,GAClClhB,EAAKkhB,gBAAgB7L,SAAQ,SAAAyK,GACzB9f,EAAKyhB,WAAWP,gBAAgBvL,KAAKmK,EAAQtiB,mBAKlDwC,EAAKU,UACLV,EAAK2L,cACL3L,EAAK+gB,qBACL/gB,EAAKghB,kBACLhhB,EAAKwX,cACLxX,EAAKihB,eACLjhB,EAAKkhB,gBAEZjhB,QAAQC,IAAI,eAAgBF,GAC5B0e,EAAa1e,KAIbA,EAAK0f,QAAU1f,EAAK0f,QAAQliB,MAC5BwC,EAAKigB,UAAYjgB,EAAKigB,UAAUziB,MAChCwC,EAAKmgB,iBAAL,OAAwBngB,QAAxB,IAAwBA,GAAxB,UAAwBA,EAAMmgB,wBAA9B,aAAwB,EAAwB3iB,MAEhDyC,QAAQC,IAAI,WAAYF,GACxB0e,EAAa1e,IAOrB,IAAMmR,GAAe,CAEvBC,OAAQ,SAACC,EAAD,GAA2D,IAAhDrR,EAA+C,EAA/CA,KAAM2hB,EAAyC,EAAzCA,WAAYC,EAA6B,EAA7BA,UAAWC,EAAkB,EAAlBA,WAE/C,OAAO,2BACFxQ,GADL,IAEEC,YAAa,GAEJ5O,gBAAiBmf,OACf/U,EACA6U,EACA,UACAC,EACA,UACkB,IAAlB5hB,EAAKuQ,SAAiB,eAAYzD,MAOzCyE,GAAS,SAACC,GACjB,MAA+BA,EAAMxR,KAA7BgQ,EAAR,EAAQA,MAAOM,EAAf,EAAeA,YACf,OACE,eAAC,KAAWiB,OAAZ,2BAAuBC,GAAvB,cACD,+BAAOxB,IADN,IACoB,sBAAMvN,MAAO,CAAEgP,MAAO,YAAtB,SAAqCnB,SA0C5D,OACC,gCACC,eAACoB,GAAA,EAAD,CACClR,UAAU,MACVmR,SAAUlC,GAAa+R,IAFxB,UAIC,eAAClP,GAAA,EAAD,WACC,cAACZ,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,sBAA/B,SACC,eAACH,GAAA,EAAKI,MAAN,WACExS,EAAU,0BAA2B,IACtC,mBAAG0B,KAAK,IAAR,SACC,mBAAGR,UAAU,oCAKhB,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,cAA/B,UACC,cAAC,KAAD,CACChQ,KAAK,WACgBigB,MAAO,CAAEC,UAAU,GACxCxf,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLukB,KAAK,MACLpP,KAAK,KACLqP,YAAab,GAAO5B,UAChBxN,OAKP,cAACN,GAAA,EAAKgB,QAAQwP,SAAd,CAAuBzkB,KAAK,UAA5B,SACE6B,EAAU,4BAIb,eAACoS,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,cAA/B,UACC,cAAC,KAAD,CACChQ,KAAK,YACgBigB,MAAO,CAAEC,UAAU,GACxCxf,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLukB,KAAK,MACLpP,KAAK,KACLqP,YAAab,GAAO3B,WAChBzN,OAIP,cAACN,GAAA,EAAKgB,QAAQwP,SAAd,CAAuBzkB,KAAK,UAA5B,SACE6B,EAAU,+BASd,eAACoS,GAAA,EAAKE,MAAN,CAAYC,UAAU,cAAcrR,UAAU,OAA9C,UACC,cAACkR,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,6BAEZ,cAAC,KAAD,CACCuC,KAAK,UACaigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC/CiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBACvB6S,cAAc,EAEdjC,QAAS2P,EAETxO,OAAQF,GAERiB,eAAgB,SAAChB,GAAD,gBAAcA,EAAOpB,MAArB,cAAgCoB,EAAOd,cACvD+B,WAAY,CAAEd,iBAIF,mBAAG/Q,UAAU,gBAAb,mBAA8B4gB,GAAO1B,eAArC,aAA8B,EAAgB5U,aAI9D,eAAC4G,GAAA,EAAKE,MAAN,CACCC,UAAU,yBACVrR,UAAU,OAFX,UAIC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,oCAEZ,cAAC,KAAD,CACCuC,KAAK,iBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,QACDuU,UAMR,eAACN,GAAA,EAAKE,MAAN,CACCC,UAAU,kBACVrR,UAAU,OAFX,UAIC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,6BAEZ,cAAC,KAAD,CACCuC,KAAK,UACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACL8D,GAAG,WACH4gB,KAAM,GACFnQ,UAOR,eAACM,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,oBAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,+BAEZ,cAAC,KAAD,CACCuC,KAAK,YACgBigB,MAAO,CAAEC,SAAUziB,EAAU,wBAClDiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAE4BC,YAAa3S,EAAU,gBAClDmT,aAAW,EACXN,cAAc,EAEajC,QAASgQ,QAIrB,mBAAG1f,UAAU,gBAAb,mBAA8B4gB,GAAOnB,iBAArC,aAA8B,EAAkBnV,aAGnE,eAAC4G,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,2BAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,sCAEZ,cAAC,KAAD,CACCuC,KAAK,mBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAE4BC,YAAa3S,EAAU,gBAClDmT,aAAW,EACXN,cAAc,EAEajC,QAASoP,cASzC,eAAChN,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACgB,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,sBAA/B,UACd,cAACH,GAAA,EAAKI,MAAN,UACExS,EAAU,iCAEZ,cAAC,KAAD,CACCuC,KAAK,cACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aAAcjV,KAAK,QAAWuU,UAKlB,eAACN,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,0BAA/B,UACI,cAACH,GAAA,EAAKI,MAAN,UACKxS,EAAU,qCAEf,cAAC,KAAD,CACIuC,KAAK,kBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAACN,GAAA,EAAKgB,QAAN,aACIjV,KAAK,QACDuU,aAQvBjN,EAAiB2C,QAClB,qCACI,cAACgK,GAAA,EAAKE,MAAN,CAAYpR,UAAU,OAAOqR,UAAU,0BAAvC,SACI,cAACH,GAAA,EAAKI,MAAN,UACI,4BAAIxS,EAAU,yCAKtB,eAACgT,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACI,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,iBAA/B,UACI,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACKlB,EAAU,gCAEf,cAAC,KAAD,CACIuC,KAAK,SACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAACN,GAAA,EAAKgB,QAAN,aACIjV,KAAK,SACLmV,KAAK,MACDZ,OAIhB,mBAAGxR,UAAU,gBAAb,mBAA8B4gB,GAAOzV,cAArC,aAA8B,EAAeb,aAGjD,eAAC4G,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,mBAA/B,UACI,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACKlB,EAAU,kCAEf,cAAC,KAAD,CACIuC,KAAK,gBACLigB,MAAO,CAAEC,SAAUziB,EAAU,uBAAwB4L,IAAK,GAAIkX,QAAS,iBACvE7f,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAACN,GAAA,EAAKgB,QAAN,aACIjV,KAAK,SACLmV,KAAK,MACDZ,QAIrC,UAAAoP,GAAOL,qBAAP,eAAsBjW,UACtB,mBAAGtK,UAAU,gBAAb,mBAA8B4gB,GAAOL,qBAArC,aAA8B,EAAsBjW,UAGrB,SAA/B,UAAAsW,GAAOL,qBAAP,eAAsBtjB,OACtB,mBAAG+C,UAAU,gBAAb,iCAG+B,aAA/B,UAAA4gB,GAAOL,qBAAP,eAAsBtjB,OACtB,mBAAG+C,UAAU,gBAAb,6CAIiB,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,gBAA/B,UACI,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACKlB,EAAU,+BAEf,cAAC,KAAD,CACIuC,KAAK,aACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAACN,GAAA,EAAKgB,QAAN,aACIjV,KAAK,SACLmV,KAAK,MACDZ,OAIhB,mBAAGxR,UAAU,gBAAb,mBAA8B4gB,GAAOJ,kBAArC,aAA8B,EAAmBlW,gBAIzD,eAAC4G,GAAA,EAAKE,MAAN,CAAYC,UAAU,iBAAiBrR,UAAU,OAAjD,UACI,cAACkR,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACKlB,EAAU,4BAEf,cAAC,KAAD,CACIuC,KAAK,SACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAAC,KAAD,2BACQA,GADR,IAEIC,YAAa3S,EAAU,gBAEvB4Q,QAAS0Q,QAIrB,mBAAGpgB,UAAU,gBAAb,mBAA8B4gB,GAAO5J,cAArC,aAA8B,EAAe1M,aAGjD,eAAC4G,GAAA,EAAKE,MAAN,CAAYC,UAAU,kBAAkBrR,UAAU,OAAlD,UACI,cAACkR,GAAA,EAAKI,MAAN,UACKxS,EAAU,6BAEf,cAAC,KAAD,CACIuC,KAAK,UACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAAC,KAAD,2BACQA,GADR,IAEIE,SAAO,EACPD,YAAa3S,EAAU,gBAEvB4Q,QAAS4Q,WAMzB,eAACpP,GAAA,EAAKE,MAAN,CAAYC,UAAU,oBAAoBrR,UAAU,OAApD,UACI,cAACkR,GAAA,EAAKI,MAAN,UACKxS,EAAU,+BAEf,cAAC,KAAD,CACIuC,KAAK,kBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACJ,cAAC,KAAD,2BACQA,GADR,IAEIE,SAAO,EACPD,YAAa3S,EAAU,gBAEvB4Q,QAAS2Q,WAOzB,cAAC,GAAD,CACIzD,mBAAoB7a,EACpB8a,aAAcA,EACdC,eAhgBA,WACtBrd,QAAQC,IAAI,QACZuP,GAAa+R,GAAb/R,IA+fsBhG,IAAK0V,OAKX,qCACE,eAACzN,GAAA,EAAKE,MAAN,CAAYC,UAAU,mBAAmBrR,UAAU,OAAnD,UACI,cAACkR,GAAA,EAAKI,MAAN,UACKxS,EAAU,sCAGf,cAAC,GAAD,CAAW4T,QACP,CACI,CACIlB,MAAO,IACPiC,WAAY,IAEhB,CACIjC,MAAO,WACPiC,WAAY,2BACZrI,MAAO,MACPkI,UAAU,EACVgB,eAAgB,YAEpB,CACI9C,MAAO,WACPiC,WAAY,qBACZrI,MAAO,OAEX,CACIoG,MAAO,UACPiC,WAAY,UACZrI,MAAO,QAGjB5L,KAAMof,EAAajM,UAAW,WAAYC,SAAS,EAAOR,KAAM,KAAMS,eAla5F,SAA6BgP,EAAc7M,GACvCvV,QAAQC,IAAIsV,EAAU6M,GACP,SAAX7M,EACAsJ,EAAWuD,GACO,UAAX7M,GACPuJ,EAAkBsD,SAkaV,eAAC/P,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACI,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,oBAA/B,UACI,cAACtR,EAAA,EAAD,CACIkC,MAAO,CAACmJ,MAAO,QACfjL,QAAS,kBAAkB,OAAZqe,QAAY,IAAZA,OAAA,EAAAA,EAActe,KAAMme,EAAUG,EAAate,KAC1DD,QAAQ,QAHZ,SAKKnB,EAAU,mCACL,OAGd,eAACoS,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,mBAA/B,UACI,cAACtR,EAAA,EAAD,CACIkC,MAAO,CAACmJ,MAAO,QAEfnL,QAAQ,QAHZ,SAKKnB,EAAU,kCACL,aAQlC,cAACoS,GAAA,EAAKE,MAAN,CAAYC,UAAU,aAAarR,UAAU,OAA7C,SACC,cAAC,KAAD,CACCqB,KAAK,KACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJpQ,MAAO,CAAEka,QAAS,SACd3K,SAMR,sBAAKxR,UAAU,sBAAf,UACC,cAACD,EAAA,EAAD,CACCI,QAAS,kBAAMue,GAAmB,IAClCze,QAAQ,QAFT,SAIEnB,EAAU,4BACF,IACV,cAACiB,EAAA,EAAD,CACmBI,QAASie,EACTne,QAAQ,YAF3B,SAIEnB,EAAU,2BACF,IACV,cAACiB,EAAA,EAAD,CACC9C,KAAK,SACakD,QAAUoE,EAAiB2C,QA76B9B,kDA66ByDoF,EACxErM,QAAQ,UACRgC,MAAO,CAAE+P,SAAU,SAJpB,SAMElT,EAAU,gCAKd,eAACgjB,GAAA,EAAD,CACCC,KAAMtD,EACNuD,OAAQ,kBAAMtD,GAAmB,IAFlC,UAIC,cAACoD,GAAA,EAAMG,OAAP,CAAcC,aAAW,EAAzB,SACC,cAACJ,GAAA,EAAMK,MAAP,UAAcrjB,EAAU,sBAEzB,cAACgjB,GAAA,EAAMM,KAAP,UAAatjB,EAAU,qCACvB,eAACgjB,GAAA,EAAMO,OAAP,WACC,cAACtiB,EAAA,EAAD,CACCE,QAAQ,QACRE,QAAS,WACRue,GAAmB,GACnBP,EAAa+C,SAASP,GAAU,MAAMtU,cAJxC,SAOEvN,EAAU,kBAEZ,cAACiB,EAAA,EAAD,CACCE,QAAQ,YACRE,QAAS,kBAAMue,GAAmB,IAFnC,SAIE5f,EAAU,4BC9YFwjB,GA1kBQ,SAAC,GAOF,IAAD,cANpBC,EAMoB,EANpBA,aACAC,EAKoB,EALpBA,aACAC,EAIoB,EAJpBA,YACAC,EAGoB,EAHpBA,aAEA7F,GACoB,EAFpB/b,KAEoB,EADpB+b,cAIA,EAA8Cne,oBAAS,GAAvD,mBAAO+f,EAAP,KAAwBC,EAAxB,KAEM1R,EAAiB1O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYG,gBAClEC,EAAkB5O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYK,iBACzEC,EAAgB9O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYO,eAC/DvO,EAAMD,cAANC,EAUL6f,EAAkBvY,mBAExB,EAQIwH,aAAQ,CAEXE,cAAe,CACL5N,GAAI,GACJyiB,OAAQ,GACRxX,OAAQ,GACRoV,cAAe,GACfC,WAAY,GACZxJ,OAAQ,GACRyJ,QAAS,GACTC,gBAAiB,GAC1BV,OAAQ,GACRC,OAAQ,GACRC,OAAQ,MApBTne,EADD,EACCA,QACAkN,EAFD,EAECA,aACAC,EAHD,EAGCA,MAHD,KAICE,SAJD,EAKCuR,UALD,EAMCE,WAAaD,EANd,EAMcA,OACbE,GAPD,EAMsB8B,QANtB,EAOC9B,SAsBE7hB,qBAAU,WACZ,IAAI8f,EAAgB,GAEdA,EAAS7e,GAAT,OAAcwiB,QAAd,IAAcA,OAAd,EAAcA,EAAcxiB,GAC5B6e,EAAS4D,OAAT,OAAkBD,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAcG,KAChC9D,EAAS5T,OAAT,OAAkBuX,QAAlB,IAAkBA,OAAlB,EAAkBA,EAAcvX,OAChC4T,EAASwB,cAAT,OAAyBmC,QAAzB,IAAyBA,OAAzB,EAAyBA,EAAcnC,cACvCxB,EAASyB,WAAT,OAAsBkC,QAAtB,IAAsBA,OAAtB,EAAsBA,EAAclC,WAE1C,IAAIxJ,EAAM,OAAG0L,QAAH,IAAGA,OAAH,EAAGA,EAAc1L,OACvBA,IACH+H,EAAS/H,OAASoJ,EAAoBpa,MACrC,SAACmN,GAAD,OAAUA,EAAKnW,QAAUga,MAK3B,IAAIyJ,EAAO,OAAGiC,QAAH,IAAGA,OAAH,EAAGA,EAAcjC,QACxBA,IAEH1B,EAAS0B,QAAUH,EAAmB/U,QAEzB,SAAC4H,GAAD,OAAUsN,EAAQqC,SAAS3P,EAAKnW,WAI9C,IAAI0jB,EAAe,OAAGgC,QAAH,IAAGA,OAAH,EAAGA,EAAchC,gBAChCA,IAEH3B,EAAS2B,gBAAkBL,EAAqB9U,QAEnC,SAAC4H,GAAD,OAAUuN,EAAgBoC,SAAS3P,EAAKnW,WAKtD,OAAI0lB,QAAJ,IAAIA,KAAc1C,OACjBjB,EAASiB,OAAS0C,EAAa1C,OAE/BjB,EAASiB,OAAS,GAEnB,OAAI0C,QAAJ,IAAIA,KAAczC,OACjBlB,EAASkB,OAASyC,EAAazC,OAE/BlB,EAASkB,OAAS,GAEnB,OAAIyC,QAAJ,IAAIA,KAAcxC,OACjBnB,EAASmB,OAASwC,EAAaxC,OAE/BnB,EAASmB,OAAS,GAIbhR,EAAM6P,EAAU,CAAEe,mBAAmB,IAC3CrgB,QAAQC,IAAI,kBAEP,CAACgjB,IAkBJ,IAAItC,EAAwD,GACxD/Q,MAAMC,QAAQtC,KACdoT,EAAsBpT,EAAenM,KAAI,SAACoP,GACtC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEC,gBAKrB,IAAImQ,EAAyD,GACzDhR,MAAMC,QAAQpC,KACdmT,EAAuBnT,EAAgBrM,KAAI,SAACoP,GACxC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEG,cAKrB,IAAIkQ,EAAuD,GAjJ1C,4CA+JpB,WAA8BnY,GAA9B,SAAAhJ,EAAA,6DACCgJ,EAAE4Y,iBADH,SAEsBD,IAFtB,eAKEnC,EAAgBnW,QAAQiV,eAL1B,4CA/JoB,sBA6MpB,SAASsF,EAAoBvjB,GAqBtB,GAPNC,QAAQC,IAAI,SAAUF,GAEhBA,EAAK2L,OAAS+V,SAAS1hB,EAAK2L,QAC5B3L,EAAK+gB,cAAgB/Y,WAAWhI,EAAK+gB,eACrC/gB,EAAKghB,WAAaU,SAAS1hB,EAAKghB,YAChChhB,EAAKwX,OAASxX,EAAKwX,OAAOha,MAElB,OAAJwC,QAAI,IAAJA,KAAMihB,SAAWpR,MAAMC,QAAQ9P,EAAKihB,SAAU,CAC9C,IAAIA,EAAoB,GACxBjhB,EAAKihB,QAAQ5L,SAAQ,SAACyK,GAClBmB,EAAQtL,KAAKmK,EAAQtiB,UAEzBwC,EAAKihB,QAAUA,EAGnB,GAAQ,OAAJjhB,QAAI,IAAJA,KAAMkhB,iBAAmBrR,MAAMC,QAAQ9P,EAAKkhB,iBAAkB,CAC9D,IAAIA,EAA4B,GAChClhB,EAAKkhB,gBAAgB7L,SAAQ,SAACyK,GAC1BoB,EAAgBvL,KAAKmK,EAAQtiB,UAEjCwC,EAAKkhB,gBAAkBA,EAGjC6B,EAAa/iB,GAhGP6P,MAAMC,QAAQlC,KACdkT,EAAqBlT,EAAcvM,KAAI,SAACoP,GACpC,MAAO,CACHjT,MAAOiT,EAAE/P,GAETsP,MAAOS,EAAEK,gBA+HxB,OACC,gCACC,eAACY,GAAA,EAAD,CAAMlR,UAAU,MAAMmR,SAAUlC,EAAa8T,GAA7C,UACC,eAACjR,GAAA,EAAD,CAAK9R,UAAU,OAAf,UACC,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,iBAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,gCAEZ,cAAC,KAAD,CACCuC,KAAK,SACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCE,KAAK,KACLnV,KAAK,UACDuU,OAIP,mBAAGxR,UAAU,gBAAb,mBAA8B4gB,EAAOzV,cAArC,aAA8B,EAAeb,aAG9C,eAAC4G,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,mBAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,kCAEZ,cAAC,KAAD,CACCuC,KAAK,gBACLigB,MAAO,CAAEC,SAAUziB,EAAU,uBAAwB4L,IAAK,GAAIkX,QAAS,iBACvE7f,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCE,KAAK,KACLnV,KAAK,UACDuU,QAIN,UAAAoP,EAAOL,qBAAP,eAAsBjW,UACtB,mBAAGtK,UAAU,gBAAb,mBAA8B4gB,EAAOL,qBAArC,aAA8B,EAAsBjW,UAGrB,SAA/B,UAAAsW,EAAOL,qBAAP,eAAsBtjB,OACtB,mBAAG+C,UAAU,gBAAb,iCAG+B,aAA/B,UAAA4gB,EAAOL,qBAAP,eAAsBtjB,OACtB,mBAAG+C,UAAU,gBAAb,6CAKF,eAACkR,GAAA,EAAKE,MAAN,CAAYrQ,GAAIgR,KAAKV,UAAU,gBAA/B,UACC,cAACH,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,+BAEZ,cAAC,KAAD,CACCuC,KAAK,aACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCE,KAAK,KACLnV,KAAK,UACDuU,OAIP,mBAAGxR,UAAU,gBAAb,mBAA8B4gB,EAAOJ,kBAArC,aAA8B,EAAmBlW,gBAInD,eAAC4G,GAAA,EAAKE,MAAN,CAAYC,UAAU,iBAAiBrR,UAAU,OAAjD,UACC,cAACkR,GAAA,EAAKI,MAAN,CAAYtR,UAAU,WAAtB,SACElB,EAAU,4BAEZ,cAAC,KAAD,CACCuC,KAAK,SACLigB,MAAO,CAAEC,SAAUziB,EAAU,wBAC7BiD,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECC,YAAa3S,EAAU,gBAEvB4Q,QAAS0Q,QAIZ,mBAAGpgB,UAAU,gBAAb,mBAA8B4gB,EAAO5J,cAArC,aAA8B,EAAe1M,aAG9C,eAAC4G,GAAA,EAAKE,MAAN,CAAYC,UAAU,kBAAkBrR,UAAU,OAAlD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,6BAEZ,cAAC,KAAD,CACCuC,KAAK,UACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECE,SAAO,EACPD,YAAa3S,EAAU,gBAEvB4Q,QAAS4Q,WAMb,eAACpP,GAAA,EAAKE,MAAN,CAAYC,UAAU,oBAAoBrR,UAAU,OAApD,UACC,cAACkR,GAAA,EAAKI,MAAN,UACExS,EAAU,+BAEZ,cAAC,KAAD,CACCuC,KAAK,kBACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAAC,KAAD,2BACKA,GADL,IAECE,SAAO,EACPD,YAAa3S,EAAU,gBAEvB4Q,QAAS2Q,WAQb,cAACnP,GAAA,EAAKE,MAAN,CAAYC,UAAU,aAAarR,UAAU,OAA7C,SACC,cAAC,KAAD,CACCqB,KAAK,KACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJpQ,MAAO,CAAEka,QAAS,SACd3K,SAOR,cAAC,GAAD,CACCoL,mBAAoB7a,EACpB8a,aAAcA,EACdzG,YAAW,OAAEsM,QAAF,IAAEA,OAAF,EAAEA,EAAcM,YAC3BlG,eA/JmB,WACtBrd,QAAQC,IAAI,QACZuP,EAAa8T,EAAb9T,IA8JGhG,IAAK0V,IAqEN,cAACzN,GAAA,EAAKE,MAAN,CAAYC,UAAU,iBAAiBrR,UAAU,OAAjD,SACC,cAAC,KAAD,CACCqB,KAAK,SACLU,QAASA,EACTwP,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,SACLmV,KAAK,KACLC,IAAI,IACJpQ,MAAO,CAAEka,QAAS,SACd3K,SAQR,sBAAKxR,UAAU,sBAAf,UACC,cAACD,EAAA,EAAD,CACCI,QAAS,kBAAMue,GAAmB,IAClCze,QAAQ,QAFT,SAIEnB,EAAU,4BACF,IACV,cAACiB,EAAA,EAAD,CACmBI,QAASsiB,EACTxiB,QAAQ,YAF3B,SAIEnB,EAAU,2BACF,IACV,cAACiB,EAAA,EAAD,CACC9C,KAAK,SACLkD,QAvhBe,4CAwhBfF,QAAQ,UACRgC,MAAO,CAAE+P,SAAU,SAJpB,SAMElT,EAAU,gCASd,eAACgjB,GAAA,EAAD,CACCC,KAAMtD,EACNuD,OAAQ,kBAAMtD,GAAmB,IAFlC,UAIC,cAACoD,GAAA,EAAMG,OAAP,CAAcC,aAAW,EAAzB,SACC,cAACJ,GAAA,EAAMK,MAAP,UAAcrjB,EAAU,sBAEzB,cAACgjB,GAAA,EAAMM,KAAP,UAAatjB,EAAU,qCACvB,eAACgjB,GAAA,EAAMO,OAAP,WACC,cAACtiB,EAAA,EAAD,CACCE,QAAQ,QACRE,QAAS,WACRue,GAAmB,GAEE8D,EAAaE,IALpC,SAQE5jB,EAAU,kBAEZ,cAACiB,EAAA,EAAD,CACCE,QAAQ,YACRE,QAAS,kBAAMue,GAAmB,IAFnC,SAIE5f,EAAU,4B,UCjjBFmkB,OAnCf,YAIsB,IAHlB/b,EAGiB,EAHjBA,QACAgc,EAEiB,EAFjBA,WACAC,EACiB,EADjBA,OAEF,OAGE,cAACrB,GAAA,EAAD,CACIC,KAAM7a,EACN8a,OAAQ,kBAAMkB,EAAW,CAAChc,SAAS,EAAOic,OAAO,MAGjDC,gBAAgB,YAChB,kBAAgB,qCANpB,SAQI,cAACtB,GAAA,EAAMM,KAAP,UACI,cAACiB,GAAA,EAAD,CAAUC,SAAU,KAApB,SAEQH,EAAOtiB,KAAI,SAAC0iB,GAAD,OACP,cAACF,GAAA,EAAS1iB,KAAV,UACI,qBACIX,UAAU,gBACV2b,IAAK4H,KAHOA,a,cCiK7BC,GAxKQ,SAAC,GAAwC,IAAvCtlB,EAAsC,EAAtCA,aAClBC,EAAWC,cACXqlB,EAAmBnlB,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUklB,kBAE3E,EAAkDhlB,oBAAS,GAA3D,mBAAOilB,EAAP,KAA0BC,EAA1B,KACQ9kB,EAAMD,cAANC,EAERG,qBAAU,WACTiQ,IACA0U,GAAqB,KACnB,CAACH,IAEJ,MAKI7V,aAAQ,CAEXE,cAAe,CACd+V,SAAU,GACVC,SAAU,GACVC,YAAY,KATbhiB,EADD,EACCA,QACAkN,EAFD,EAECA,aACAC,EAHD,EAGCA,MACa0R,EAJd,EAICC,UAAaD,OAhBgD,4CA0B9D,WAAyBoD,GAAzB,SAAA7kB,EAAA,6DACCM,QAAQC,IAAIskB,GADb,kBAEQ5kB,MAAM,GAAD,OAAIC,gCAAJ,UAA2C,CACtDma,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAGjBC,KAAMC,KAAKC,UAAUoK,KACnBC,MAAK,SAACzkB,GACY,MAAhBA,EAAKwX,OACRxX,EAAKD,OAAO0kB,MAAK,SAACzkB,GAEjBtB,EAAasB,GAEbokB,GAAqB,GAGrBzlB,EAASb,GAAkB,OAEF,MAAhBkC,EAAKwX,QACf4M,GAAqB,OArBxB,4CA1B8D,sBA0D9D,OACC,eAAC9B,GAAA,EAAD,CAGCC,KAAM0B,EAENzB,OAAQ,kBAAM7jB,EAASb,GAAkB,KACzC,kBAAgB,gCAChB4mB,UAAQ,EAPT,UASC,cAACpC,GAAA,EAAMG,OAAP,CAAcC,aAAW,EAAzB,SACC,cAACJ,GAAA,EAAMK,MAAP,CAAajiB,GAAG,gCAAhB,SACEpB,EAAU,uBAGb,cAACgjB,GAAA,EAAMM,KAAP,UACC,eAAClR,GAAA,EAAD,CAAMC,SAAUlC,GAtBE,SAACzP,GACrBokB,GAAqB,GACrBO,aAAaC,QAAQ,aAAc5kB,EAAKukB,WAAW1X,YAtDU,oCAuD7DgY,CAAU7kB,MAmBR,UACC,eAAC0R,GAAA,EAAKE,MAAN,CAAYpR,UAAU,OAAOqR,UAAU,YAAvC,UACC,cAACiT,GAAA,EAAD,CACCjT,UAAU,gBACV7B,MAAO1Q,EAAU,sBACjBkB,UAAU,OAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,WACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACLwU,YAAa3S,EAAE,sBACf2iB,YAAab,EAAOiD,UAChBrS,SAMR,cAAC8S,GAAA,EAAD,CACCjT,UAAU,mBACV7B,MAAO1Q,EAAU,sBAFlB,SAIC,cAAC,KAAD,CACCuC,KAAK,WACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,WACLwU,YAAa3S,EAAE,sBACf2iB,YAAab,EAAOkD,UAChBtS,YAOT,cAACN,GAAA,EAAKE,MAAN,CAAYpR,UAAU,OAAOqR,UAAU,oBAAvC,SACC,cAAC,KAAD,CACChQ,KAAK,aACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OAEP,aADA,CACCN,GAAA,EAAKoB,MAAN,aACCrV,KAAK,WACLuS,MAAO1Q,EAAU,yBACb0S,SAMPmS,GACA,cAACzS,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,cAArB,SACElB,EAAU,qCAIb,cAACiB,EAAA,EAAD,CACCC,UAAU,OACVC,QAAQ,UACRhD,KAAK,SACLgF,MAAO,CAAEka,QAAS,QAAS/Q,MAAO,QAJnC,SAMEtM,EAAU,qBAGZ,cAACoS,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,kBAArB,SACC,oBAAGA,UAAU,cAAb,UAEElB,EAAU,6BAA8B,IACzC,mBACC0B,KAAK,IACLL,QAAS,WACRhC,EAASb,GAAkB,IAC3Ba,EAASZ,GAAqB,KAJhC,SAOEuB,EAAU,oCC8GJ0lB,GAvQW,SAAC,GAA4C,IAAD,MAA1CtmB,EAA0C,EAA1CA,aAErBC,EAAWC,cACXqmB,EAAsBnmB,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUkmB,qBAEtE5lB,EAAMD,cAANC,EAERG,qBAAU,WACTiQ,MACE,CAACuV,IAEJ,MAMI7W,aAAQ,CAEXE,cAAe,CACd+V,SAAU,GACVc,MAAO,GACPb,SAAU,GACVc,UAAW,GACXC,WAAY,GACZC,UAAW,MAbZ/iB,EADD,EACCA,QACAkN,EAFD,EAECA,aACAC,EAHD,EAGCA,MACM6V,EAJP,EAIOA,SACOnE,EALd,EAKCC,UAAaD,OAhBuD,4CAoCrE,WAA4BoD,GAA5B,SAAA7kB,EAAA,+EACQC,MAAM,GAAD,OAAIC,gCAAJ,UAA2C,CACtDma,OAAQ,OACRC,QAAS,CACR,eAAgB,oBAGjBC,KAAMC,KAAKC,UAAUoK,KAEnBC,MAAK,SAACzkB,GACY,MAAhBA,EAAKwX,OACRxX,EAAKD,OAAO0kB,MAAK,SAACzkB,GACFC,QAAQC,IAAI,KAAMF,GAEjCrB,EAASZ,GAAqB,IACfW,EAAasB,EAAKwlB,UAGxBxlB,EAAKwX,QAAU,KACzBxX,EAAKD,OAAO0kB,MAAK,SAACzkB,GACjBC,QAAQC,IAAIF,GAEG,cAA2BylB,OAAOC,QAAQ1lB,GAA1C,eAAiD,CAA5C,0BAAO0Y,EAAP,KAAYlb,EAAZ,KAEnB+nB,EAAS7M,EAAK,CACQjb,KAAM,SACNqN,QAAStN,YA1BpC,4CApCqE,sBAyErE,OACC,eAAC8kB,GAAA,EAAD,CAGCC,KAAM0C,EAENzC,OAAQ,kBAAM7jB,EAASZ,GAAqB,KAC5C,kBAAgB,gCAChB2mB,UAAQ,EAPT,UASC,cAACpC,GAAA,EAAMG,OAAP,CAAcC,aAAW,EAAzB,SACC,cAACJ,GAAA,EAAMK,MAAP,CAAajiB,GAAG,gCAAhB,SACEpB,EAAU,0BAGb,cAACgjB,GAAA,EAAMM,KAAP,UACC,eAAClR,GAAA,EAAD,CAAMC,SAAUlC,GAzDE,SAACzP,IAhC+C,oCAiCpE2lB,CAAa3lB,MAwDX,UACC,eAAC0R,GAAA,EAAKE,MAAN,CAAYpR,UAAU,OAAOqR,UAAU,eAAvC,WAG0B,OAANuP,QAAM,IAANA,GAAA,UAAAA,EAAQiD,gBAAR,eAAkBvZ,UACpC,cAAC4G,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,cAArB,SAEE4gB,EAAOiD,SAASvZ,QAAQzJ,KAAI,SAAA7D,GAAK,OAAI,mBAAegD,UAAU,OAAzB,SAAiChD,GAAzBA,QAIhD,cAACsnB,GAAA,EAAD,CACCjT,UAAU,mBACV7B,MAAO1Q,EAAU,yBACjBkB,UAAU,OAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,WACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACLwU,YAAa3S,EAAE,yBACf2iB,YAAab,EAAOiD,UAChBrS,UAOiB,OAANoP,QAAM,IAANA,GAAA,UAAAA,EAAQ+D,aAAR,eAAera,UACjC,cAAC4G,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,cAArB,SAEE4gB,EAAO+D,MAAMra,QAAQzJ,KAAI,SAAA7D,GAAK,OAAI,mBAAegD,UAAU,OAAzB,SAAiChD,GAAzBA,QAI7C,cAACsnB,GAAA,EAAD,CACCjT,UAAU,gBACV7B,MAAO1Q,EAAU,sBACjBkB,UAAU,OAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,QACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACLwU,YAAa3S,EAAE,sBACf2iB,YAAab,EAAO+D,OAChBnT,UAOiB,OAANoP,QAAM,IAANA,GAAA,UAAAA,EAAQkD,gBAAR,eAAkBxZ,UACpC,cAAC4G,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,cAArB,SAEE4gB,EAAOkD,SAASxZ,QAAQzJ,KAAI,SAAA7D,GAAK,OAAI,mBAAegD,UAAU,OAAzB,SAAiChD,GAAzBA,QAIhD,cAACsnB,GAAA,EAAD,CACCjT,UAAU,mBACV7B,MAAO1Q,EAAU,yBACjBkB,UAAU,OAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,WACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,WACLwU,YAAa3S,EAAE,yBACf2iB,YAAab,EAAOkD,UAChBtS,SAMR,cAAC8S,GAAA,EAAD,CACCjT,UAAU,oBACV7B,MAAO1Q,EAAU,gCACjBkB,UAAU,OAHX,SAKC,cAAC,KAAD,CACCqB,KAAK,YACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,WACLwU,YAAa3S,EAAE,gCACf2iB,YAAab,EAAOgE,WAChBpT,SAMR,eAACM,GAAA,EAAD,WACC,cAACC,GAAA,EAAD,UACC,cAAC,KAAD,CACC1Q,KAAK,aACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACLmV,KAAK,KACLX,YAAa3S,EAAE,kCACf2iB,YAAab,EAAOiE,YAChBrT,SAMR,cAACO,GAAA,EAAD,UACC,cAAC,KAAD,CACC1Q,KAAK,YACLU,QAASA,EACTuf,MAAO,CAAEC,UAAU,GACnBhQ,OAAQ,gBAAGC,EAAH,EAAGA,MAAH,OACP,cAACN,GAAA,EAAKgB,QAAN,aACCjV,KAAK,OACLmV,KAAK,KACLX,YAAa3S,EAAE,iCACf2iB,YAAab,EAAOkE,WAChBtT,eASV,cAACzR,EAAA,EAAD,CACCC,UAAU,OACVC,QAAQ,UACRhD,KAAK,SACLgF,MAAO,CAAEka,QAAS,QAAS/Q,MAAO,QAJnC,SAMEtM,EAAU,2BAGZ,cAACoS,GAAA,EAAKqT,KAAN,CAAWvkB,UAAU,kBAArB,SACC,oBAAGA,UAAU,cAAb,UACElB,EAAU,mCAAoC,IAC/C,mBACC0B,KAAK,IACLL,QAAS,WACRhC,EAASZ,GAAqB,IAC9BY,EAASb,GAAkB,KAJ7B,SAOEwB,EAAU,sCC1Ob+d,GAAY,UAAMxd,gCAAN,oCAEd+lB,GAAgC,CAEhCvb,OAAQ,EACRwb,UAAW,UACXpU,MAAO,UACPqU,OAAQ,EACRC,QAAS,EACTC,YAAa,IA46BFC,OAt6Bf,WACC,IAAMC,EAAeC,cACfC,EAuyBN,SAAmBvkB,GAClB,IAAIwkB,EAAc,KAClB,GAAIhgB,SAASC,QAA8B,KAApBD,SAASC,OAE/B,IADA,IAAIggB,EAAUjgB,SAASC,OAAOC,MAAM,KAC3BwW,EAAI,EAAGA,EAAIuJ,EAAQ/R,OAAQwI,IAAK,CACxC,IAAIzW,EAASggB,EAAQvJ,GAAGwJ,OAExB,GAAIjgB,EAAOkgB,UAAU,EAAG3kB,EAAK0S,OAAS,KAAO1S,EAAO,IAAK,CACxDwkB,EAAcI,mBACbngB,EAAOkgB,UAAU3kB,EAAK0S,OAAS,IAEhC,OAIH,OAAO8R,EAtzBUK,CAAU,aAGtB/nB,EAAWC,cACX+nB,EAAc7nB,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYsZ,aAClE/nB,EAAgBC,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUC,eAClEgG,EAA6BnG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUkG,4BAC/E2hB,EAAgB/nB,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYwZ,eACpEC,EAAiBjoB,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUgoB,gBACnEC,EAAgBnoB,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUkoB,eAClEC,EAAgBroB,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUooB,eAClE5Z,EAAiB1O,aAAY,SAACC,GAAD,OAAsBA,EAAMuO,YAAYG,gBACrEpI,EAAuBvG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUsG,sBAEzEH,EAAyBrG,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAUoG,wBAC3EP,EAAmB/F,aAAY,SAACC,GAAD,OAAsBA,EAAMC,UAAU8F,kBAE3E,EC/Ec,WAEX,IAAMuiB,EAAuB,SAACtnB,GAC1B,IAAIylB,EAAK,OAAGzlB,QAAH,IAAGA,OAAH,EAAGA,EAAMunB,OAElB,GAAI9B,EAAO,CACP,IAAM+B,EAAU/B,EAAMjf,MAAM,KAC5B,GAAIghB,EAAQhT,OAAS,EACjB,MAAO,CACH,KAAQ4F,KAAKE,MAAMmN,KAAKD,EAAQ,KAAKlD,SACrC,GAAMlK,KAAKE,MAAMmN,KAAKD,EAAQ,KAAKE,WA6BnD,EAAkCvoB,mBAvBjB,WACb,IAAIwoB,EAUJ,GANIA,EADa,SAFE/C,aAAagD,QAAQ,cAGtBhD,aAAagD,QAAQ,SAErBC,eAAeD,QAAQ,SAIxB,CACb,IAAI5nB,EAAOoa,KAAKE,MAAMqN,GAChB9lB,EAAOylB,EAAqBtnB,GAIlC,OAHI6B,IACA7B,EAAK6B,KAAOA,GAET7B,EAEP,OAAO,KAI4B8nB,IAA3C,mBAAOppB,EAAP,KAAkBC,EAAlB,KA4BA,MAAO,CACHA,aA1Bc,SAACopB,GACf,GAAIA,EAAW,CAIQ,SAFAnD,aAAagD,QAAQ,cAGpChD,aAAaC,QAAQ,QAASzK,KAAKC,UAAU0N,IAE7CF,eAAehD,QAAQ,QAASzK,KAAKC,UAAU0N,IAInD,IAAMlmB,EAAOylB,EAAqBS,GAC9BlmB,IACAkmB,EAAUlmB,KAAOA,QAGrB+iB,aAAaoD,WAAW,SACxBpD,aAAaoD,WAAW,cACxBH,eAAeG,WAAW,SAE9BrpB,EAAaopB,IAMbrpB,aDU6BupB,GAA5BvpB,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,aACnB,EAAsCQ,mBAASoI,OAAO2gB,YAAtD,mBAAOC,EAAP,KAAoBC,EAApB,KAEMC,EAAeF,GAAe,IAEpC,EAAwChpB,mBAA0B,MAAlE,mBAAO8f,EAAP,KAAqBqJ,EAArB,KACA,EAAwCnpB,mBAA2C,MAAnF,mBAAOgkB,EAAP,KAAqBoF,EAArB,KACA,EAAsCppB,mBAA+C,CAACwI,SAAS,EAAOic,OAAQ,KAA9G,mBAAO4E,EAAP,KAAoBC,GAApB,KACQlpB,GAAMD,cAANC,EAEJiF,GAAgC,GAgGjC,SAASkkB,KACLN,EAAe7gB,OAAO2gB,YA5F7BxoB,qBAAU,WAET,IAAMipB,EAAc,uCAAG,gCAAA/oB,EAAA,6DAChB2D,EADgB,UACPzD,gCADO,2CAEJD,MAAM0D,GAFF,cAEhBxD,EAFgB,gBAGHA,EAAIC,OAHD,OAGhBC,EAHgB,OAItBrB,ElBeQ,CACHlB,KAAM,gBACNC,QkBjBqBsC,IAJJ,2CAAH,qDAOd2oB,EAAc,uCAAG,gCAAAhpB,EAAA,6DAChB2D,EADgB,UACPzD,gCADO,2CAEJD,MAAM0D,GAFF,cAEhBxD,EAFgB,gBAGHA,EAAIC,OAHD,OAGhBC,EAHgB,OAItBrB,ElBgBQ,CACHlB,KAAM,gBACNC,QkBlBqBsC,IAJJ,2CAAH,qDAOd4oB,EAAY,uCAAG,gCAAAjpB,EAAA,6DACd2D,EADc,UACLzD,gCADK,yCAEFD,MAAM0D,GAFJ,cAEdxD,EAFc,gBAGDA,EAAIC,OAHH,OAGdC,EAHc,OAIpBrB,ElBgBQ,CACHlB,KAAM,cACNC,QkBlBmBsC,IAJJ,2CAAH,qDAOZ6oB,EAAe,uCAAG,gCAAAlpB,EAAA,6DACjB2D,EADiB,UACRzD,gCADQ,4CAELD,MAAM0D,GAFD,cAEjBxD,EAFiB,gBAGJA,EAAIC,OAHA,OAGjBC,EAHiB,OAIvBrB,ElBgBQ,CACHlB,KAAM,iBACNC,QkBlBsBsC,IAJJ,2CAAH,qDAOf8oB,EAAsB,uCAAG,gCAAAnpB,EAAA,6DACxB2D,EADwB,UACfzD,gCADe,mDAEZD,MAAM0D,GAFM,cAExBxD,EAFwB,gBAGXA,EAAIC,OAHO,OAGxBC,EAHwB,OAI9BrB,ElBgBQ,CACHlB,KAAM,wBACNC,QkBlB6BsC,IAJJ,2CAAH,qDAOtB+oB,EAAe,uCAAG,gCAAAppB,EAAA,6DACjB2D,EADiB,UACRzD,gCADQ,4CAELD,MAAM0D,GAFD,cAEjBxD,EAFiB,gBAGJA,EAAIC,OAHA,OAGjBC,EAHiB,OAIvBrB,ElBgBQ,CACHlB,KAAM,iBACNC,QkBlBsBsC,IAJJ,2CAAH,qDAOfgpB,EAAc,uCAAG,gCAAArpB,EAAA,6DAChB2D,EADgB,UACPzD,gCADO,2CAEJD,MAAM0D,GAFF,cAEhBxD,EAFgB,gBAGHA,EAAIC,OAHD,OAGhBC,EAHgB,OAItBrB,ElBgBQ,CACHlB,KAAM,gBACNC,QkBlBqBsC,IAJJ,2CAAH,qDAwBd,OAjBN0oB,IACAC,IACAC,IACAC,IACAC,IACAC,IACAC,IAEIvqB,GAoyBF,WACF,IAAIyb,EAAO,CAAEsL,MAAO/mB,EAAU6oB,QAC1BhkB,EAAG,UAAMzD,gCAAN,iBACH+Z,EAAY,IAAIC,QAEpBD,EAAUE,OAAO,eAAgB,oBAC7BsM,GACHxM,EAAUE,OAAO,cAAesM,GAGjCxmB,MAAM0D,EAAK,CACV0W,OAAQ,OACRC,QAASL,EACTM,KAAMC,KAAKC,UAAUF,KAEnBuK,MAAK,SAAUwE,GACbA,EAASzR,QAAU,IACtByR,EAASlpB,OAAO0kB,MAAK,SAACzkB,GACrBC,QAAQC,IAAI,SAAUF,GAEPkpB,GAAiBzqB,EAAU0qB,YAI3CF,EAASlpB,OAAO0kB,MAAK,SAACzkB,GACrBC,QAAQC,IAAI,KAAMF,SA5zBXopB,GAGVzqB,ElBrES,CACHlB,KAAM,iBACNC,QkBmEqB,6CAA6C2rB,KAAKC,UAAUC,aAEvF5qB,EAASpB,GAAgB6qB,IAEzB9gB,OAAOkiB,iBAAiB,SAAUf,IACrB,WACHnhB,OAAOmiB,oBAAoB,SAAUhB,OAG7C,IAGHhpB,qBAAU,WACTiqB,OACE,CAACxD,IAEDzmB,qBAAU,WACN,IACIqkB,EAAW6F,aAAY,WACnBlrB,GACAyqB,GAAiBzqB,EAAU0qB,WAHhB,MAOnB,OAAO,kBAAKS,cAAc9F,MAC3B,CAACrlB,IAQP,IAAMirB,GAAqB,uCAAG,gCAAA/pB,EAAA,6DAEzB2D,EAFyB,UAEhBzD,gCAFgB,yCAGbD,MAAM0D,GAHO,cAGzBxD,EAHyB,gBAIZA,EAAIC,OAJQ,cAIzBC,EAJyB,OAK7BrB,ElBvFS,CACHlB,KAAM,eACNC,QkBqFmBsC,IAEzBsD,EAAG,UAAMzD,gCAAN,oBAA+CqmB,EAAa2D,SAA5D,WAP0B,UAQjBjqB,MAAM0D,GARW,eAQ7BxD,EAR6B,iBAShBA,EAAIC,OATY,SAS7BC,EAT6B,QAUxBiM,kBAAoB8I,KAAK+U,MAE9BnrB,EAASN,EAAa2B,IAZO,4CAAH,qDAuB3B,SAAS+pB,GAAcphB,GAAS,IAAD,EAqBD,EApBvBqhB,EAAa,uCAAG,WAAOC,GAAP,mBAAAtqB,EAAA,6DAEhB2D,EAFgB,UAEPzD,gCAFO,oBAEkCqmB,EAAa2D,SAF/C,kBAEiEI,EAFjE,cAGJrqB,MAAM0D,GAHF,cAGhBxD,EAHgB,gBAIHA,EAAIC,OAJD,OAIhBC,EAJgB,OAMpBqoB,EAAgBroB,GAChBrB,EAAShB,GAAe,IACxBgB,EAASd,EAAgB,SACzBc,EAASpB,GAAe,IATJ,4CAAH,sDAkBf2sB,EADmBvhB,EAAEoB,OACJogB,YAErB,OAAID,QAAJ,IAAIA,GAAJ,UAAIA,EAASE,kBAAb,OAAI,EAAqB1pB,IACxBspB,EAAa,OAACE,QAAD,IAACA,GAAD,UAACA,EAASE,kBAAV,aAAC,EAAqB1pB,IASrC,IAiDMspB,GAAa,uCAAG,WAAOC,GAAP,mBAAAtqB,EAAA,6DACjB2D,EADiB,UACRzD,gCADQ,oBACiCqmB,EAAa2D,SAD9C,kBACgEI,EADhE,cAELrqB,MAAM0D,GAFD,cAEjBxD,EAFiB,gBAGJA,EAAIC,OAHA,OAGjBC,EAHiB,OAIrBqoB,EAAgBroB,GAJK,2CAAH,sDAoXnB,OACC,sBAAKQ,UAAU,eAAf,UACE0lB,EAAa2D,SACb,qBAAKnpB,GAAG,MAAR,SACC,sBACCF,UAAS,iBACR3B,EAAgB,SAAW,SAE5B6B,GAAG,UAJJ,UAMC,cAAC,GAAD,UACC,eAAC2pB,GAAA,EAAD,CACC3pB,GAAG,yBACH4pB,UAAWvD,EACXwD,SAAU,SAACC,GAAD,OAAO7rB,EAASd,EAAgB2sB,KAE1ChqB,UAAU,OALX,UAOC,cAACiqB,GAAA,EAAD,CACCC,SAAS,SACTxpB,MAAO5B,GAAU,2BAFlB,SAIC,qBACCmD,MAAO,CACNkoB,UAAW,OACXC,UAAW,SACXhf,MAAO,OACPD,OAAQ,uBALV,SAQC,cAAC,GAAD,CAAYyB,eAxGE,SAACrB,GACvB9L,QAAQC,IAAI6L,GACZxH,GAAoB,GACpB5F,ElB1aS,CACHlB,KAAM,cACNC,QkBwakBqO,IAEpBqc,GACHzpB,EAASpB,GAAe,WAuGnB,cAACktB,GAAA,EAAD,CACCC,SAAS,OACTxpB,MAAO5B,GACN,yBAEDurB,aACE5D,EAA2B,GAAX,SANnB,SASC,qBACCxkB,MAAO,CACNkoB,UAAW,OACXC,UAAW,SACXhf,MAAO,OACPD,OAAQ,uBALV,SAQC,cAAC,GAAD,CACC+S,aA1dW,SAAC1e,GACrB,IAAIga,EACA1W,EACAtD,EAAKU,IACR4C,EAAG,UAAMzD,gCAAN,oBAA+CqmB,EAAa2D,SAA5D,kBAA8E7pB,EAAKU,GAAnF,KACHsZ,EAAS,QAET1W,EAAG,UAAMzD,gCAAN,oBAA+CqmB,EAAa2D,SAA5D,WACH7P,EAAS,QAaV8Q,GAASxnB,EAAK0W,EAAQha,GAVE,WACvB0pB,KACA/qB,EAASV,EAAkB,CAAEyJ,SAAS,EAAOvF,SAAU,MACvDxD,EAASd,EAAgB,WACzBc,EAAShB,GAAe,IAEpByqB,GACHzpB,EAASpB,GAAe,QAycjBohB,aA/bW,SAACje,GAOrBoqB,GAAS,GAAD,OAAIjrB,gCAAJ,oBAA6CqmB,EAAa2D,SAA1D,kBAA4EnpB,GAAM,SAAU,IAN5E,WACvB/B,EAASd,EAAgB,WACzBc,EAAShB,GAAe,IACxB+rB,SA4bQ9K,YArbU,WACnBjgB,EAASV,EAAkB,CAAEyJ,SAAS,EAAOvF,SAAU,MACvDxD,EAASd,EAAgB,WACzBc,EAAShB,GAAe,KAmbfkhB,UAxXQ,SAACoL,GAClB3B,EAAgB,CAACjF,KAAM4G,IACvBtrB,EAASf,GAAe,IACxBe,EAASd,EAAgB,SACzBc,EAASpB,GAAe,KAqXfuhB,WAjXS,SAAC9e,GACnBC,QAAQC,IAAI,aAAcF,GAC1BsoB,EAAgB,eAAItoB,IACpBrB,EAASf,GAAe,IACxBe,EAASd,EAAgB,SACzBc,EAASpB,GAAe,KA6WfwhB,kBA1WgB,SAAC/e,GAC1BC,QAAQC,IAAI,gBAAiBF,GAE7B,IAAM2jB,EAAmB,GACzB,OAAI3jB,QAAJ,IAAIA,KAAMwgB,QACTmD,EAAOhO,KAAP,UAAe3V,EAAKwjB,aAApB,cAAkCxjB,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAMwgB,SAEzC,OAAIxgB,QAAJ,IAAIA,KAAMygB,QACTkD,EAAOhO,KAAP,UAAe3V,EAAKwjB,aAApB,cAAkCxjB,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAMygB,SAEzC,OAAIzgB,QAAJ,IAAIA,KAAM0gB,QACTiD,EAAOhO,KAAP,UAAe3V,EAAKwjB,aAApB,cAAkCxjB,QAAlC,IAAkCA,OAAlC,EAAkCA,EAAM0gB,SAGrCiD,EAAOpP,OAAS,GACnBiU,GAAe,CAAC9gB,SAAS,EAAMic,OAAQA,KA4V/B3E,aAAcA,EACd1d,KAAM4kB,EAAa2D,SACnBxM,aAAcA,SAMjB,cAACoN,GAAA,EAAD,CACCC,SAAS,OACTxpB,MAAO5B,GACN,yBAEDurB,aACE1D,EAA2B,GAAX,SANnB,SASC,qBACC1kB,MAAO,CACNkoB,UAAW,OACXC,UAAW,SACXhf,MAAO,OACPD,OAAQ,uBALV,SAQC,cAAC,GAAD,CACCoX,aAlcW,SAAC/iB,GACrB,IAAIga,EACA1W,EACAtD,EAAKU,IACR4C,EAAG,UAAMzD,gCAAN,oBAA+CqmB,EAAa2D,SAA5D,kBAA8E7pB,EAAKmjB,OAAnF,wBAAyGnjB,EAAKU,GAA9G,KACHsZ,EAAS,QAET1W,EAAG,UAAMzD,gCAAN,oBAA+CqmB,EAAa2D,SAA5D,kBAA8E7pB,EAAKmjB,OAAnF,iBACHnJ,EAAS,QAUV/Z,QAAQC,IAAI,OAAQF,EAAMsD,GAC1BwnB,GAASxnB,EAAK0W,EAAQha,GARE,WACvBgqB,GAAchqB,EAAKmjB,QACnBuG,KACA/qB,EAASd,EAAgB,SACzBc,EAASf,GAAe,QAobhBolB,aA5aW,SAAChjB,GAUrB,OAAIA,QAAJ,IAAIA,KAAMU,KACTT,QAAQC,IAAI,SAAUF,GAEtB8qB,GAAS,GAAD,OAAIjrB,gCAAJ,oBAA6CqmB,EAAa2D,SAA1D,gCAA0F7pB,EAAKU,IAAM,SAAU,IAZhG,WACnBV,IACHgqB,GAAchqB,EAAKqjB,MACnB1kB,EAASd,EAAgB,SACzBc,EAASf,GAAe,IACxB8rB,WAuaOzG,YA5ZU,WACnBtkB,EAASf,GAAe,IACxBe,EAASd,EAAgB,UA2ZhBqlB,aAAcA,EACd5hB,KAAM4kB,EAAa2D,SACnBxM,aAAcA,cAQnB,sBAAK3c,GAAG,uBAAR,UACC,cAAC,EAAD,CACCnC,YAAa2nB,EAAa2D,SAE1BprB,UAAWA,EACXC,aAAcA,EACdF,QAAQ,aAGT,sBACCgC,UAAU,kBACViC,MAAO,CACNsoB,aAAc,MACdzZ,YAAa,OAJf,UAOC,cAAC,EAAD,CACChN,SAAUqiB,EACVnoB,QAAQ,WACR+F,kBAAmBA,GACnBhG,YAAa2nB,EAAa2D,SAC1BplB,WA3YW,SAACkE,GACnB,GAAIxD,IAA2BN,EAAkB,CAEhDlG,EAASR,GAAwB,IAEjC,IAAIiL,EAAQ,CAAEzB,IAAK,IAAKC,IAAK,KAC7BwB,EAAMzB,IAAMgB,EAAE6B,OAAO7C,IAAI0B,QAAQ,GACjCD,EAAMxB,IAAMe,EAAE6B,OAAO5C,IAAIyB,QAAQ,GAEjC1K,EAASV,EAAkB,CAAEyJ,SAAS,EAAMvF,SAAUiH,KAEtDzK,EAAShB,GAAe,IACxBgB,EAASd,EAAgB,SACzBc,EAASpB,GAAe,MAgYlBiH,mBAtXmB,SAAC0E,KAuXpBxE,qBAxLR,SAA2B8D,EAAcgC,GACxC,OAAKnF,EAeG,MAbHmD,EAAQ4hB,WAAWY,iBAClBnb,MAAMC,QAAQtC,IACjBA,EAAe6H,SAAQ,SAAAyK,GACnBA,EAAQpf,KAAO8H,EAAQ4hB,WAAWY,kBACrCpF,GAA8BC,UAA9B,WAA8C/F,EAAQmL,UACtDrF,GAA8BnU,MAA9B,WAA0CqO,EAAQmL,cAM9ChpB,IAAEipB,aAAa1gB,EAAQob,IAA+Bld,GAAG,QAASqhB,MA2KnEplB,kBAjXkB,SAAC6D,GAA2B,IAAD,IAwBhD2iB,EAtBAC,GAAiB,EACjBC,GAAgB,EAChBC,GAAyB,EACzBC,GAAiB,EACjBC,GAAmB,EACnBC,GAA0B,EAE1BC,GAAyB,EACzBC,GAAuB,EACvBC,GAAuB,EACvBC,GAAqB,EACrBC,GAAiB,EAEjBC,GAAoB,EACpBC,GAAkB,EAClBC,GAAwB,EACxBC,GAAsB,EACtBC,GAA2B,EAC3BC,GAAyB,EAEzBC,GAAyB,GAK7BlB,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAetY,cAGzBsB,MAAMC,QAAQqb,KACjBC,GAAiB,EACjBD,EAAYmB,OAAM,SAAC7b,GAClB,OAAIjI,EAAQ4hB,WAAW1K,UAAYjP,EAAEjT,QACpC4tB,GAAiB,GACV,OAQVD,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAerY,aACzBqB,MAAMC,QAAQqb,KACjBE,GAAgB,EAChBF,EAAYmB,OAAM,SAAC7b,GAClB,OAAIjI,EAAQ4hB,WAAWY,kBAAoBva,EAAEjT,QAC5C6tB,GAAgB,GACT,OAQVF,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAepY,eACzBoB,MAAMC,QAAQqb,MACjBG,GAAyB,EAIzBA,EAHmBH,EAAYpf,QAAO,SAAC0E,GAAD,OACrCjI,EAAQ4hB,WAAWlJ,gBAAgBoC,SAAS1O,OAAOnE,EAAEjT,WAEhB+W,OAAS,IAIhD4W,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAenY,aACzBmB,MAAMC,QAAQqb,MACjBI,GAAiB,EAIjBA,EAHmBJ,EAAYpf,QAAO,SAAC0E,GAAD,OACrCjI,EAAQ4hB,WAAWnJ,QAAQqC,SAAS1O,OAAOnE,EAAEjT,WAEhB+W,OAAS,IAIxC4W,EAAW,OAAGtE,QAAH,IAAGA,GAAH,UAAGA,EAAelY,uBAAlB,aAAG,EAAgCnR,SAE7CguB,EAAmBL,IAAgB3iB,EAAQ4hB,WAAWnK,YAGvDkL,EAAW,OAAGtE,QAAH,IAAGA,GAAH,UAAGA,EAAejY,8BAAlB,aAAG,EAAuCpR,SAEpDiuB,EAA0BN,IAAgB3iB,EAAQ4hB,WAAWjK,mBAG9DgL,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAehY,yBAE5B6c,EACCljB,EAAQ4hB,WAAWhK,aAAe+K,IAEpCA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe/X,uBAE5B6c,EACCnjB,EAAQ4hB,WAAWhK,aAAe+K,IAGpCA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe9X,uBAE5B6c,EACCpjB,EAAQ4hB,WAAWmC,eAAiBpB,IAEtCA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe7X,qBAE5B6c,EACCrjB,EAAQ4hB,WAAWmC,eAAiBpB,IAGtCA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe5X,iBAKe,IAF1CzG,EAAQ4hB,WAAWpK,QACjBwM,cACAC,QAAQtB,EAAYqB,iBAEtBV,GAAiB,IAMnBX,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe3X,oBAE5B6c,EAAoBvjB,EAAQ4hB,WAAWsC,iBAAmBvB,IAE3DA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAexX,kBAE5B2c,EAAkBxjB,EAAQ4hB,WAAWsC,iBAAmBvB,IAGzDA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAe1X,wBAE5B8c,EAAwBzjB,EAAQ4hB,WAAWuC,qBAAuBxB,IAEnEA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAevX,sBAE5B4c,EAAsB1jB,EAAQ4hB,WAAWuC,qBAAuBxB,IAGjEA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAezX,2BAE5B+c,EAA2B3jB,EAAQ4hB,WAAWwC,wBAA0BzB,IAEzEA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAetX,yBAE5B6c,EAAyB5jB,EAAQ4hB,WAAWwC,wBAA0BzB,IAKvEA,EAAW,OAAGtE,QAAH,IAAGA,OAAH,EAAGA,EAAerX,oBACd,OAAI/Q,QAAJ,IAAIA,KAAWmD,OAC7ByqB,EAAyB5tB,EAAUmD,KAAKlB,KAAO8H,EAAQ4hB,WAAWyC,WAKnE,IAAIjQ,EAASwO,GAAkBC,GAAiBC,GAA0BC,GACtEC,GAAoBC,GACpBC,GAA0BC,GAAwBC,GAAwBC,GAC1EC,GAAkBO,GAClBN,GAAqBC,GAAmBC,GAAyBC,GAAuBC,GAA4BC,EAKxH,OADAzF,EAAY1a,kBAAoB8I,KAAK+U,MAC9BlN,KA6MA3X,GACA,qCACC,cAAC1E,EAAA,EAAD,CACCE,QAAQ,UACRC,GAAG,uBACHC,QAAS,WACRhC,EACCR,GACC,IAGFQ,EACCT,GACC,IAGFS,EACChB,GAAe,IAEhBgB,EACCd,EAAgB,SAEjBc,EAASpB,GAAe,KApB1B,SAuBE+B,GAAU,gBACF,IACV,cAACiB,EAAA,EAAD,CACCE,QAAQ,YACRC,GAAG,qBACHC,QAAS,WACRhC,EACCV,EAAkB,CACjByJ,SAAS,EACTvF,SAAU,CACTwF,IAAK,EACLC,IAAK,MAIRjJ,EACCT,GACC,IAGFS,EACCR,GACC,KApBJ,oBA0BU,kBAQhB,0BAID,cAAC,GAAD,CACCuJ,QAAS6gB,EAAY7gB,QACrBgc,WAAY8E,GACZ7E,OAAQ4E,EAAY5E,SAGrB,cAAC,GAAD,CAAgBjlB,aAAcA,IAC9B,cAAC,GAAD,CAAmBA,aAAcA,OA6BnC,SAASosB,GAASxnB,EAAa0W,EAAgBD,EAAkB+S,GAChE,IAAIlT,EAAY,IAAIC,QACpBD,EAAUE,OAAO,eAAgB,oBAE7BsM,GACHxM,EAAUE,OAAO,cAAesM,GAEjC,OAAI3nB,QAAJ,IAAIA,KAAW6oB,QACd1N,EAAUE,OAAO,gBAAiB,UAAYrb,EAAU6oB,QAIzDrnB,QAAQC,IAAI,YAAY0Z,EAAUmT,IAAI,kBAEtCntB,MAAM0D,EAAK,CACV0W,OAAQA,EACRC,QAASL,EACTM,KAAMC,KAAKC,UAAUL,KACnB0K,MAAK,SAAUwE,GACbA,EAASzR,QAAU,IACtByR,EAASlpB,OAAO0kB,MAAK,SAACzkB,GACrB6K,MACCoe,EAAS+D,WACR,KACA/D,EAASzR,OACT,QACAxX,EAAKitB,WAKJH,GACHA,OAQD,SAAS5D,GAAiBgE,GAC5B,IAAItT,EAAY,IAAIC,QACpBD,EAAUE,OAAO,eAAgB,oBAC7BsM,GACHxM,EAAUE,OAAO,cAAesM,GAG3BxmB,MAAM,GAAD,OAAIC,gCAAJ,kBAAmD,CACpDma,OAAQ,OACRC,QAASL,EACTM,KAAMC,KAAKC,UAAU,CAAE+O,QAAS+D,MAEjCzI,MAAK,SAAUwE,GACS,KAAnBA,EAASzR,OACTyR,EAASlpB,OAAO0kB,MAAK,SAACzkB,GAElBtB,EAAasB,MAEVipB,EAASzR,QAAU,KAC1B9Y,EAAa,WE76BdyuB,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqB5I,MAAK,YAAkD,IAA/C6I,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,O,iDCEd7tB,KACKouB,IAAIC,MACJD,IAAIE,MACJC,KAAK,CAIFC,UAAW,CACPC,GAAI,CACAC,YAAaC,IAGjB9tB,GAAI,CACA6tB,YAAaE,KAKrBC,YAAa,KAEbC,cAAe,CACfC,aAAa,KAON/uB,GAAf,EAAeA,I,UCrCTgvB,GAAe,CACjBtvB,aAAa,EACbioB,aAAa,EACbE,aAAa,EACbJ,aAAc,SACd9C,gBAAgB,EAChBgB,mBAAmB,EAEnBliB,iBAAkB,UAClBgC,eAAgB,CAClB0C,SAAS,EACTvF,SAAU,GACVqsB,UAAU,GAERtpB,0BAA0B,EAC1BE,sBAAsB,EACtBE,oBAAoB,EACpBE,gBAAgB,EAEhBV,gBAAgB,GAuFL9F,GApFG,WAA+D,IAA9DD,EAA6D,uDAAvDwvB,GAAcE,EAAyC,uCAC5E,OAAQA,EAAOhxB,MACX,IAAK,cACD,OAAO,2BACAsB,GADP,IAEIE,YAAawvB,EAAO/wB,UAE5B,IAAK,cACD,OAAO,2BACAqB,GADP,IAEImoB,YAAauH,EAAO/wB,UAE5B,IAAK,cACD,OAAO,2BACAqB,GADP,IAEIqoB,YAAaqH,EAAO/wB,UAE5B,IAAK,eACD,OAAO,2BACAqB,GADP,IAEIioB,aAAcyH,EAAO/wB,UAE7B,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEImlB,eAAgBuK,EAAO/wB,UAG/B,IAAK,oBACD,OAAO,2BACAqB,GADP,IAEImmB,kBAAmBuJ,EAAO/wB,UAKlC,IAAK,mBACD,OAAO,2BACAqB,GADP,IAEIiE,iBAAkByrB,EAAO/wB,UAGjC,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEIiG,eAAgBypB,EAAO/wB,UAG/B,IAAK,2BACD,OAAO,2BACAqB,GADP,IAEImG,yBAA0BupB,EAAO/wB,UAGzC,IAAK,uBACD,OAAO,2BACAqB,GADP,IAEIqG,qBAAsBqpB,EAAO/wB,UAErC,IAAK,qBACD,OAAO,2BACAqB,GADP,IAEIuG,mBAAoBmpB,EAAO/wB,UAEnC,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEIyG,eAAgBipB,EAAO/wB,UAK/B,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEI+F,eAAgB2pB,EAAO/wB,UAI/B,QACI,OAAOqB,ICtGbwvB,GAAe,CACjB3H,UAAW,GACXE,YAAa,GACbrZ,aAAc,GACdF,cAAe,GACfI,cAAe,GACfE,YAAa,GACbE,eAAgB,GAChBE,sBAAuB,GACvBE,cAAe,GACfugB,aAAc,IA0EHphB,GAvEK,WAA+D,IAA9DvO,EAA6D,uDAAvDwvB,GAAcE,EAAyC,uCAC9E,OAAQA,EAAOhxB,MACX,IAAK,YACD,OAAO,2BACAsB,GADP,IAEI6nB,UAAW6H,EAAO/wB,UAG1B,IAAK,eACD,OAAO,2BACAqB,GADP,IAEI0O,aAAcghB,EAAO/wB,UAG7B,IAAK,gBACD,OAAO,2BACAqB,GADP,IAEIwO,cAAekhB,EAAO/wB,UAG9B,IAAK,gBACD,OAAO,2BACAqB,GADP,IAEI4O,cAAe8gB,EAAO/wB,UAG9B,IAAK,cACD,OAAO,2BACAqB,GADP,IAEI8O,YAAa4gB,EAAO/wB,UAG5B,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEIgP,eAAgB0gB,EAAO/wB,UAG/B,IAAK,wBACD,OAAO,2BACAqB,GADP,IAEIkP,sBAAuBwgB,EAAO/wB,UAGtC,IAAK,iBACD,OAAO,2BACAqB,GADP,IAEIoP,cAAesgB,EAAO/wB,UAG9B,IAAK,gBACD,OAAO,2BACAqB,GADP,IAEI2vB,aAAcD,EAAO/wB,UAG7B,IAAK,cACD,OAAO,2BACAqB,GADP,IAEI+nB,YAAa2H,EAAO/wB,UAI5B,QACI,OAAOqB,ICzEN4vB,GAAcC,aAAgB,CACvC5vB,aACAsO,iBCSEuhB,I,OAAQC,aACZH,GACArnB,OAAOynB,8BAAgCznB,OAAOynB,iCAGhDC,IAASjd,OACP,cAAC,IAAD,CAAU8c,MAAOA,GAAjB,SAEE,cAAC,IAAD,CAAeI,SAAS,YAAxB,SACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOC,KAAK,IAAZ,SACE,cAAC,IAAD,CAAOA,KAAK,YAAYpP,QAAS,cAAC,GAAD,IAAjC,SACE,cAAC,IAAD,CAAOoP,KAAK,UAAUpP,QAAS,cAAC,GAAD,gBAOzCzZ,SAAS8oB,eAAe,SAM1BhC,O","file":"static/js/main.a1b70ffc.chunk.js","sourcesContent":["// userInterface actions ================================================\r\nexport const actShowSidebar = (value) => {\r\n    return {\r\n        type: 'SHOWSIDEBAR',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowTreeTab = (value) => {\r\n    return {\r\n        type: 'SHOWTREETAB',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowInspTab = (value) => {\r\n    return {\r\n        type: 'SHOWINSPTAB',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actActiveTabKey = (value) => {\r\n    return {\r\n        type: 'ACTIVETABKEY',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actLoginModalShow = (value) => {\r\n    return {\r\n        type: 'LOGINMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actRegisterModalShow = (value) => {\r\n    return {\r\n        type: 'REGISTERMODALSHOW',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actMapBaseLayerName = (value) => {\r\n    return {\r\n        type: 'MAPBASELAYERNAME',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actNewMarkerState = (value) => {\r\n    return {\r\n        type: 'NEWMARKERSTATE',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actShowOkCancelMobileMarker = (value) => {\r\n    return {\r\n        type: 'SHOWOKCANCELMOBILEMARKER',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actCheckButtonNewMarker = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONNEWMARKER',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonHeatmap = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONHEATMAP',\r\n        payload: value\r\n    }\r\n}\r\nexport const actCheckButtonGPS = (value) => {\r\n    return {\r\n        type: 'CHECKBUTTONGPS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actIsMobileDevice = (value) => {\r\n    return {\r\n        type: 'ISMOBILEDEVICE',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n// date actions ================================================\r\nexport const actDataTrees= (value) => {\r\n    return {\r\n        type: 'DATATREES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictStatuses = (value) => {\r\n    return {\r\n        type: 'DICTSTATUSES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictSpecieses = (value) => {\r\n    return {\r\n        type: 'DICTSPECIESES',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\nexport const actDictCareTypes = (value) => {\r\n    return {\r\n        type: 'DICTCARETYPES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictRemarks = (value) => {\r\n    return {\r\n        type: 'DICTREMARKS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictPlaceTypes = (value) => {\r\n    return {\r\n        type: 'DICTPLACETYPES',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictIrrigationMethods = (value) => {\r\n    return {\r\n        type: 'DICTIRRIGATIONMETHODS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictGroupSpecs = (value) => {\r\n    return {\r\n        type: 'DICTGROUPSPECS',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const actDictTypeSpecs = (value) => {\r\n    return {\r\n        type: 'DICTTYPESPECS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport const actDataFilters = (value) => {\r\n    return {\r\n        type: 'DATAFILTERS',\r\n        payload: value\r\n    }\r\n}\r\n\r\n\r\n","import { useState, useEffect } from 'react'\r\nimport Container from 'react-bootstrap/Container';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { Link } from \"react-router-dom\";\r\nimport { useTranslation } from 'react-i18next';\r\n\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { actLoginModalShow, actShowSidebar } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface IStateCities {\r\n\tcities: {\r\n\t\tid: number\r\n\t\tsysname: string;\r\n\t\tcityname: string;\r\n\t\tlatitude: number;\r\n\t\tlongitude: number;\r\n\t\tpopulation: number;\r\n\t}[]\r\n}\r\n\r\ninterface MenuGlobalProps {\r\n\tcurrentCity: string;\r\n\tappname: string;\r\n\tauthToken: any;\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n  }\r\n\r\n\r\n\r\nfunction MenuGlobal({\r\n\tcurrentCity,\r\n\tappname,\r\n\tauthToken,\r\n\tsetAuthToken,\r\n}: MenuGlobalProps) {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar)\r\n\tconst [cities, setCities] = useState<IStateCities['cities']>([]);\r\n\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchCities = async () => {\r\n\t\t\tconst res = await fetch(`${process.env.REACT_APP_API_URL}cities/`);\r\n\t\t\tconst data = await res.json();\r\n\t\t\tsetCities(data);\r\n\t\t\tconsole.log(data);\r\n\t\t};\r\n\r\n\t\tfetchCities();\r\n\t}, []);\r\n\r\n\tfunction changeLanguage(value: string) {\r\n\t\ti18n.changeLanguage(value);\r\n\t\t//localStorage.setItem('lng', value)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<Navbar bg=\"light\" expand=\"lg\">\r\n\t\t\t<Container>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tclassName=\"start-0\"\r\n\t\t\t\t\tvariant=\"outline-primary\"\r\n\t\t\t\t\tid=\"menu-toggle\"\r\n\t\t\t\t\t//onClick={onClickShowMenu}\r\n\t\t\t\t\tonClick={() => dispatch(actShowSidebar(!rxShowSidebar))}\r\n\t\t\t\t>\r\n\t\t\t\t\t{t<string>(\"menu.menu\")}\r\n\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t<Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n\t\t\t\t<Navbar.Collapse id=\"basic-navbar-nav\">\r\n\t\t\t\t\t<Nav className=\"ms-auto\">\r\n\t\t\t\t\t\t<Nav.Link href=\"/\">{t<string>(\"menu.home\")}</Nav.Link>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.appMaps.title\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/roadaccident/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"roadaccident\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.roadaccident\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/citytree/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"citytree\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.citytree\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\thref={`/urbanobject/${currentCity}`}\r\n\t\t\t\t\t\t\t\tkey=\"3\"\r\n\t\t\t\t\t\t\t\tactive={appname === \"urbanobject\"}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.appMaps.urbanobject\")}\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown\r\n\t\t\t\t\t\t\ttitle={t<string>(\"menu.city\")}\r\n\t\t\t\t\t\t\tid=\"basic-nav-dropdown\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{cities.map((city) => (\r\n\t\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\t\tas={Link}\r\n\t\t\t\t\t\t\t\t\tkey={city.id}\r\n\t\t\t\t\t\t\t\t\tto={`/${city.sysname}`}\r\n\t\t\t\t\t\t\t\t\tactive={currentCity === city.sysname}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{city.cityname}\r\n\t\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t<NavDropdown title=\"Lang\" id=\"basic-nav-dropdown\">\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"1\"\r\n\t\t\t\t\t\t\t\tactive={\r\n\t\t\t\t\t\t\t\t\t\"en\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-US\" === i18n.language ||\r\n\t\t\t\t\t\t\t\t\t\"en-GB\" === i18n.language\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvalue=\"en\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"en\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tEnglish\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\r\n\t\t\t\t\t\t\t<NavDropdown.Item\r\n\t\t\t\t\t\t\t\tkey=\"2\"\r\n\t\t\t\t\t\t\t\tactive={\"bg\" === i18n.language}\r\n\t\t\t\t\t\t\t\tvalue=\"bg\"\r\n\t\t\t\t\t\t\t\tonClick={() => changeLanguage(\"bg\")}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tBulgarian\r\n\t\t\t\t\t\t\t</NavDropdown.Item>\r\n\t\t\t\t\t\t</NavDropdown>\r\n\r\n\t\t\t\t\t\t{authToken ? (\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<Nav.Link>\r\n\t\t\t\t\t\t\t\t\t{`${t(\"words.hello\")}, ${\r\n\t\t\t\t\t\t\t\t\t\tauthToken?.user?.name\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\r\n\t\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tsetAuthToken(null);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{t<string>(\"menu.logout\")}\r\n\t\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t<Nav.Link\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\t//onClick={() => setLoginModalShow(true)}\r\n\t\t\t\t\t\t\t\tonClick={() =>\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"menu.signin\")}\r\n\t\t\t\t\t\t\t</Nav.Link>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t</Nav>\r\n\t\t\t\t</Navbar.Collapse>\r\n\t\t\t</Container>\r\n\t\t</Navbar>\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default MenuGlobal\r\n","// don't work with TypeScript, error: TypeError: leaflet__WEBPACK_IMPORTED_MODULE_0___default.a.easyButton is not a function\r\nimport L from 'leaflet';\r\nimport easyButton from 'leaflet-easybutton'\r\nimport \"leaflet-easybutton/src/easy-button.css\"\r\nimport \"@fortawesome/fontawesome-free/css/all.min.css\" \r\n \r\n\r\nfunction ButtonMap_ (map, iconTrue, iconFalse, onClick) {\r\n    //const map = useMap()\r\n    \r\n            const buttonMap = L.easyButton({\r\n                position: 'topright',\r\n                states:[\r\n                    {\r\n                        title: '',\r\n                        stateName: 'off',\r\n                        icon: `<i class=\"${iconTrue}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('on');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'red';\r\n                            onClick(true)\r\n                        }\r\n                    },\r\n        \r\n                    {\r\n                        title: '',\r\n                        stateName: 'on',\r\n                        icon: `<i class=\"${iconFalse}\"></i>`,\r\n                        onClick: function(control){\r\n                            control.state('off');\r\n                            //@ts-ignore\r\n                            control.button.style.backgroundColor = 'white';\r\n                            onClick(false)\r\n                        }\r\n                    }]\r\n            }).addTo( map );\r\n\r\n\r\n\r\n            //if (checkButtonState) {\r\n            //    buttonMap.state('on');\r\n            //    buttonMap.button.style.backgroundColor = 'red';\r\n            //} else {\r\n            //    buttonMap.state('off');\r\n            //    buttonMap.button.style.backgroundColor = 'white';            \r\n            //}\r\n            \r\n            \r\n    \r\n    return buttonMap\r\n\r\n}\r\n\r\nexport default ButtonMap_\r\n","import React from \"react\"\r\nimport { LayersControl, TileLayer } from \"react-leaflet\"\r\n//@ts-ignore\r\nimport {BingLayer} from 'react-leaflet-bing-v2/src/index'\r\n\r\n\r\ninterface MapTileLayersProps {\r\n\tmapBaseLayerName: string;\r\n}\r\n\r\nfunction MapTileLayers({ mapBaseLayerName }: MapTileLayersProps) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Default\"}\r\n\t\t\t\tname=\"Default\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/streets-v11\"\r\n\t\t\t\t\tmaxZoom={21}\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Dark\"}\r\n\t\t\t\tname=\"Dark\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/dark-v10\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tzoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Google\"}\r\n\t\t\t\tname=\"Google\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat1\"}\r\n\t\t\t\tname=\"Sat1\"\r\n\t\t\t>\r\n                <BingLayer  bingkey={'AniAD3xsGTaSbK1pa0_UkWS1CldG0nGI7r55MlVZqHhyKil9rD9dFK8536u8hTj1'} type=\"Aerial\"/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n            \r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat2\"}\r\n\t\t\t\tname=\"Sat2\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Google'\r\n\t\t\t\t\turl=\"http://{s}.google.com/vt/lyrs=s&x={x}&y={y}&z={z}\"\r\n                    maxZoom={20}\r\n                    subdomains={['mt0','mt1','mt2','mt3']}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat3\"}\r\n\t\t\t\tname=\"Sat3\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Tiles &copy; Esri'\r\n\t\t\t\t\turl=\"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}\"\r\n                    maxZoom={19}                    \r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\r\n\t\t\t<LayersControl.BaseLayer\r\n\t\t\t\tchecked={mapBaseLayerName === \"Sat4\"}\r\n\t\t\t\tname=\"Sat4\"\r\n\t\t\t>\r\n\t\t\t\t<TileLayer\r\n\t\t\t\t\tattribution='Map data &copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> <a href=\"https://www.mapbox.com/\">Mapbox</a>'\r\n\t\t\t\t\turl=\"https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}\"\r\n\t\t\t\t\taccessToken=\"pk.eyJ1IjoiZHJpdmVzb2Z0IiwiYSI6ImNqY3hkMzAwNTAwM2IzM28zajFoeG1pamYifQ.w5UaGnR0OMDIa6ARiyWoYQ\"\r\n\t\t\t\t\tid=\"mapbox/satellite-v9\"\r\n\t\t\t\t\ttileSize={512}\r\n\t\t\t\t\tmaxZoom={21}\r\n                    zoomOffset={-1}\r\n\t\t\t\t/>\r\n\t\t\t</LayersControl.BaseLayer>\r\n\r\n\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default MapTileLayers;\r\n","import { useState, useEffect, useRef, useMemo } from 'react'\r\nimport { MapContainer, LayersControl, TileLayer, ZoomControl, useMapEvents, GeoJSON, useMap, Marker, Popup } from 'react-leaflet'\r\nimport L from 'leaflet'\r\nimport \"leaflet.heat\"\r\n\r\n//import ButtonMap from './ButtonMap'\r\nimport ButtonMap_ from './ButtonMap'\r\nimport MapTileLayers from '../components_hl/MapTileLayers'\r\n\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport redIconFile from '../components/images/markers/marker-red.png';\r\nimport redIconShadowFile from '../components/images/markers/marker-shadow.png';\r\n\r\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\r\nimport 'react-leaflet-markercluster/dist/styles.min.css'; // sass\r\n//require('leaflet/dist/leaflet.css'); // inside .js file\r\n//require('react-leaflet-markercluster/dist/styles.min.css'); // inside .js file\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport {\r\n\tactCheckButtonGPS,\r\n\tactCheckButtonHeatmap,\r\n\tactCheckButtonNewMarker,\r\n\tactMapBaseLayerName,\r\n\tactNewMarkerState,\r\n\tactShowOkCancelMobileMarker,\r\n    //actShowAccidentTab,\r\n    //actActiveTabKey\r\n} from \"../actions\";\r\nimport { RootState } from '../reducers/index'\r\n\r\n// fix disapeared marker from map\r\n\r\n//import icon from 'leaflet/dist/images/marker-icon.png';\r\n//import iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n//let DefaultIcon = L.icon({\r\n//    iconAnchor: [12, 40],\r\n//    iconUrl: icon,\r\n//    shadowUrl: iconShadow\r\n//});\r\n//L.Marker.prototype.options.icon = DefaultIcon;\r\n\r\n\r\n\r\n\r\n\r\nlet redIcon = L.icon({ \r\n    iconUrl: redIconFile,\r\n    shadowUrl: redIconShadowFile,\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    shadowSize: [41, 41]\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//let buttonNewMarker = null\r\n//let buttonHeatmap = null\r\n//let buttonGPS = null\r\n\r\nlet currentCitySysname = ''\r\n\r\nlet heatMapLayer: any;\r\nlet markersLayer\r\n\r\nlet setView_nTimes_gps: number;\r\nlet circle_geolocation: L.Circle<any>;\r\n\r\n\r\n\r\n\r\n\r\ninterface IStateCurrentCity {\r\n    id: number\r\n\tsysname: string;\r\n\tcityname: string;\r\n\tlatitude: string;\r\n\tlongitude: string;\r\n\tpopulation: number;\t\r\n}\r\n\r\ninterface MapProps {\r\n    mainData: any;\r\n    appname: string;\r\n    dataHeatmapPoints: number[][]; // [[lat, lng, value],[lat, lng, value]...]\r\n    currentCity: string;\r\n    onDragEndNewMarker: (LatLng: {lon: number; lat: number}) => void;\r\n    onClickMap: (e: any) => void;\r\n    //onMarkerClick: (data: any) => void;\r\n    pointToLayerCallback: (feature: any, latlng: L.LatLng) => any;\r\n    filterMapCallback: (feature: any) => boolean;\r\n}\r\n\r\nfunction Map ({\r\n                mainData,  \r\n                appname,          \r\n                dataHeatmapPoints, \r\n                currentCity,                 \r\n                onDragEndNewMarker, \r\n                onClickMap,                               \r\n                //onMarkerClick,                 \r\n                pointToLayerCallback,\r\n                filterMapCallback               \r\n            }: MapProps) {\r\n\r\n    const dispatch = useDispatch()\r\n    const defaultZoom = 13;\r\n    //const rxDataAccidents = useSelector((state: RootState) => state.dataReducer.dataAccidents)\r\n    \r\n    const rxMapBaseLayerName = useSelector((state: RootState) => state.uiReducer.mapBaseLayerName);\r\n    const rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\r\n    const rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\r\n    const rxNewMarkerState = useSelector((state: RootState) => state.uiReducer.newMarkerState);\r\n    const rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\r\n    \r\n    const rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\r\n    const rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\r\n    const rxCheckButtonGPS = useSelector((state: RootState) => state.uiReducer.checkButtonGPS);\r\n\r\n    //const [currentCityInfo, setCurrentCityInfo] = useState({latitude: \"0\", longitude: \"0\"})\r\n    const [currentCityInfo, setCurrentCityInfo] = useState<IStateCurrentCity | null>(null)\r\n    const [map, setMap] = useState<any>(null);  \r\n    const [currentZoom, setCurrentZoom] = useState(defaultZoom)  \r\n \r\n\r\n    const [buttonNewMarker, setButtonNewMarker] = useState<any>(null);\r\n    const [buttonHeatmap, setButtonHeatmap] = useState<any>(null);\r\n    const [buttonGPS, setButtonGPS] = useState<any>(null);\r\n\r\n    let mapname_ = document.cookie\r\n    .split('; ')\r\n    .find(row => row.startsWith('mapname='))\r\n\r\n    let mapname\r\n    if (mapname_) {\r\n        mapname = mapname_.split('=')[1]    \r\n    }\r\n\r\n\r\n    let newMarkerRef = useRef(null)   \r\n \r\n\r\n    // create buttons\r\n    useEffect(() => {        \r\n        if (map) {            \r\n            setButtonNewMarker( ButtonMap_(map, 'fas fa-map-marker-alt fa-lg', 'fas fa-map-marker-alt fa-lg', onClickNewMarker) )\r\n            setButtonHeatmap( ButtonMap_(map, 'fas fa-eye fa-lg', 'fas fa-eye-slash fa-lg', onClickHeatmap) )\r\n            setButtonGPS( ButtonMap_(map, 'fas fa-satellite-dish fa-lg', 'fas fa-satellite-dish fa-lg', onClickGPS) )\r\n            \r\n            //setMapCurrentLatLng({lat: map.getCenter().lat, lng: map.getCenter().lng})                        \r\n\r\n            let mapname_ = document.cookie\r\n\t\t\t.split(\"; \")\r\n\t\t\t.find((row) => row.startsWith(\"mapname=\"));\r\n\r\n\t\t    if (mapname_) {\r\n                dispatch(actMapBaseLayerName(mapname_.split(\"=\")[1]))\r\n\t\t    }            \r\n        }\r\n\r\n        return () => { \r\n            buttonNewMarker && buttonNewMarker.remove()\r\n            buttonHeatmap && buttonHeatmap.remove()\r\n            buttonGPS && buttonGPS.remove()\r\n        }  \r\n\r\n\r\n      }, [map])  //<MapContainer whenCreated={setMap} ...\r\n\r\n\r\n    // load data for the city\r\n    useEffect(() => {\r\n\r\n        const fetchCity = async () => {\r\n          const res = await fetch(`${process.env.REACT_APP_API_URL}cities/${currentCity}`);\r\n          const data = await res.json();\r\n          setCurrentCityInfo(data);\r\n        }\r\n        fetchCity();\r\n        \r\n   \r\n      }, [currentCity])  //[currentCity]\r\n   \r\n\r\n\r\n      // apply states for buttons\r\n      useEffect(() => {        \r\n        if (buttonNewMarker) {\r\n            if (rxCheckButtonNewMarker) {\r\n                buttonNewMarker.state('on');\r\n                buttonNewMarker.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonNewMarker.state('off');\r\n                buttonNewMarker.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonNewMarker])\r\n      useEffect(() => {        \r\n        if (buttonHeatmap) {\r\n            if (rxCheckButtonHeatmap) {\r\n                buttonHeatmap.state('on');\r\n                buttonHeatmap.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonHeatmap.state('off');\r\n                buttonHeatmap.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonHeatmap])\r\n      useEffect(() => {        \r\n        if (buttonGPS) {\r\n            if (rxCheckButtonGPS) {\r\n                buttonGPS.state('on');\r\n                buttonGPS.button.style.backgroundColor = 'red';\r\n            } else {\r\n                buttonGPS.state('off');\r\n                buttonGPS.button.style.backgroundColor = 'white';            \r\n            }  \r\n        }\r\n      }, [rxCheckButtonGPS])      \r\n\r\n\r\n\r\n    useEffect(()=>{\r\n\r\n\r\n        if (map && !rxIsMobileDevice) {\r\n            if (rxCheckButtonNewMarker) {\r\n                L.DomUtil.addClass(map._container,'crosshair-cursor-enabled');\r\n            } else {\r\n                L.DomUtil.removeClass(map._container,'crosshair-cursor-enabled');\r\n            }    \r\n        }\r\n    }, [rxCheckButtonNewMarker])\r\n      \r\n\r\n\r\n    useEffect(()=>{\r\n        if (map) {\r\n            window.setTimeout(function(){map.invalidateSize({pan: false});}, 600)\r\n        }        \r\n    }, [rxShowSidebar])\r\n\r\n\r\n\r\n\r\n\r\n\r\n    \r\n\r\n\tconst onClickNewMarker = (state: boolean) => {\r\n        dispatch(actCheckButtonNewMarker(state))\r\n\r\n\t\tif (rxIsMobileDevice && state) {\t\t\t\t\t\t\r\n            dispatch(actNewMarkerState({ visible: true, position: {lat: 0, lng: 0} }))\r\n            dispatch(actShowOkCancelMobileMarker(true))\r\n\t\t}\r\n\t};\r\n\r\n\tconst onClickHeatmap = (state: boolean) => {\r\n\t\tconsole.log(\"onClickHeatmap\", state);\r\n\r\n\t\tif (state) {\r\n            dispatch(actMapBaseLayerName('Dark'))\r\n\t\t} else {\r\n            dispatch(actMapBaseLayerName('Default'))\r\n\t\t}\r\n        dispatch(actCheckButtonHeatmap(state))\r\n\t};\r\n\r\n\r\n\r\n\r\n\r\n    function SetPanToMap() {        \r\n        const map = useMap()\r\n        if (currentCityInfo) {\r\n            // change map position when current city has been changed        \r\n            if (currentCitySysname !== currentCityInfo[\"sysname\"]) {\r\n                map.panTo( [parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])] )\r\n            }\r\n            currentCitySysname = currentCityInfo[\"sysname\"]\r\n\r\n        }\r\n        return null\r\n    }    \r\n\r\n\r\n    function onClickGPS(state: boolean) {\r\n        if (map) {\r\n            if (state){\r\n                setView_nTimes_gps = 4;\r\n                map.locate({maxZoom: 20, enableHighAccuracy: true, watch:true, maximumAge: 20000});\r\n            } else {\r\n                map.stopLocate();\r\n                map.removeLayer(circle_geolocation);\r\n                setView_nTimes_gps = 4;\r\n            }\r\n\r\n        }\r\n        dispatch(actCheckButtonGPS(state))\r\n    }\r\n\r\n\r\n    //function markerOnClick(e: any)\r\n    //{\r\n    //    let marker: L.Marker = e.target;\r\n    //    let geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\r\n    //    onMarkerClick(geojson);\r\n    //    //console.log(geojson)        \r\n    //}\r\n\r\n\r\n    //function pointToLayer_roadaccident(feature: GeoJSON.Point|GeoJSON.Feature<GeoJSON.Point>, latlng: L.LatLng): any \r\n    //{\r\n    //    if (!rxCheckButtonHeatmap) {\r\n    //        return L.circleMarker(latlng, geojsonMarkerOptions).on('click', markerOnClick)        \r\n    //    }\r\n    //    //return null;\r\n    //}\r\n\r\n\r\n    \r\n    /*\r\n    function ZoomToRadius (zoom: number, crowndiameter: number) {\r\n        let r: number = Math.floor(crowndiameter / 2);\r\n\r\n        if (zoom > 17) {\r\n            r = Math.floor(crowndiameter / 2);\r\n        } else if (zoom == 17){\r\n            r = 7;\r\n        } else if (zoom == 16){\r\n            r = 10;\r\n        } else if (zoom == 15){\r\n            r = 14;\r\n        } else if (zoom == 14){\r\n            r = 19\r\n        } else if (zoom == 13){\r\n            r = 24\r\n        } else if (zoom == 12){\r\n            r = 30\r\n        } else if (zoom == 11){\r\n            r = 37\r\n        } else if (zoom < 11){\r\n            r = 45\r\n        }\r\n    \r\n        if (r < 2) { r = 2 }\r\n        return r;\r\n    }   \r\n    */ \r\n\r\n    //function pointToLayer_citytree(feature: any, latlng: L.LatLng): any {   \r\n    //    console.log('123') \r\n    //    return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)\r\n        /*\r\n        if (!rxCheckButtonHeatmap && currentZoom !== null) {\r\n            console.log('currentZoom', currentZoom)   \r\n            console.log('lastinsp_crowndiameter', feature.properties.lastinsp_crowndiameter)\r\n\r\n            geojsonMarkerOptions_citytree.radius = ZoomToRadius(currentZoom, feature.properties.lastinsp_crowndiameter);\r\n            if (geojsonMarkerOptions_citytree.radius < 2) {\r\n                geojsonMarkerOptions_citytree.radius = 2;\r\n            }\r\n\r\n            return L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)        \r\n        }*/\r\n\r\n/*\r\n\r\n        pointToLayer: function (feature, latlng) {\r\n\r\n            geojsonMarkerOptions.radius = ZoomToRadius(zoom, feature.properties.lastinsp_crowndiameter);\r\n\r\n            if (geojsonMarkerOptions.radius < 2) {\r\n                geojsonMarkerOptions.radius = 2;\r\n            }\r\n\r\n            {% if status %}\r\n                {% for statusItem in status %}\r\n                    if (feature.properties.lastinsp_status == \"{{statusItem.id}}\")\r\n                    {\r\n                        geojsonMarkerOptions.fillColor = \"#{{statusItem.hexcolor}}\";\r\n                        geojsonMarkerOptions.color = \"#{{statusItem.hexcolor}}\";\r\n                    }\r\n                {% endfor %}\r\n            {% endif %}\r\n\r\n            return L.circle(latlng, geojsonMarkerOptions).on('click', markerOnClick);\r\n\r\n        },\r\n\r\n*/\r\n\r\n\r\n\r\n    //}\r\n\r\n\r\n\r\n    //function onEachFeaturePoint(feature, layer) {\r\n    function onEachFeaturePoint(feature: any, layer: L.Layer) {        \r\n        //console.log('feature: ', feature);\r\n        //console.log('layer: ', layer);\r\n        layer.on({\r\n          'click': function (e) {\r\n             console.log('e: ', e);\r\n             console.log('click');\r\n           }\r\n        })\r\n    }    \r\n\r\n\r\n\r\n\r\n\r\n    function NewMarker({newMarkerState}: any) {          \r\n        const visible = newMarkerState.visible\r\n\r\n        const map = useMap()\r\n\r\n        const eventHandlers = useMemo(\r\n            () => ({\r\n                dragend() {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        if (!rxIsMobileDevice && marker != null) {\r\n                            //onDragEndNewMarker(marker.getLatLng())                        \r\n                            const LatLng = marker.getLatLng()\r\n                            let coord = { lat: '0', lng: '0' };\r\n                            coord.lat = LatLng.lat.toFixed(5);\r\n                            coord.lng = LatLng.lng.toFixed(5);\r\n                    \r\n                            //setNewMarkerState({ visible: true, position: coord }); \r\n                            dispatch(actNewMarkerState({ visible: true, position: coord }))                       \r\n                        }\r\n                    }\r\n                },\r\n            }),\r\n            [],\r\n        )\r\n\r\n\r\n\r\n\r\n\r\n        return (<>\r\n                    {visible && <> \r\n                        {(!rxIsMobileDevice) \r\n                        ?\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={true}\r\n                                position={newMarkerState.position}\r\n                                ref={newMarkerRef}\r\n                                eventHandlers={eventHandlers}                    \r\n                            />                    \r\n                        :\r\n                            <Marker\r\n                                icon={redIcon}\r\n                                key='newMarker'\r\n                                draggable={false}\r\n                                //position={map.getCenter()}\r\n                                position={newMarkerState.position.lat==0 ? map.getCenter() : newMarkerState.position }\r\n                                ref={newMarkerRef}                 \r\n                            />\r\n                        } \r\n                </>}\r\n                                         \r\n        </>)\r\n    }\r\n    \r\n\r\n\r\n    function MapEvents() {        \r\n        const map = useMapEvents({\r\n            baselayerchange(e) {\r\n                document.cookie = 'mapname='+e.name\r\n            }, \r\n            //baselayerchange: onBaselayerchange,\r\n\r\n            move(e) {               \r\n                \r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        marker.setLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n                                        \r\n                        //let coord = { lat: 0, lng: 0 }\r\n                        //coord.lat = e.target.getCenter().lat.toFixed(5)\r\n                        //coord.lng = e.target.getCenter().lng.toFixed(5)\r\n                    }\r\n                }    \r\n            },\r\n\r\n            moveend(e) {\r\n                if (rxShowOkCancelMobileMarker) {\r\n                    if (newMarkerRef.current) {\r\n                        const marker: L.Marker = newMarkerRef.current\r\n                        const LatLng = marker.getLatLng()\r\n                        let coord = { lat: '0', lng: '0' };\r\n                        coord.lat = LatLng.lat.toFixed(5);\r\n                        coord.lng = LatLng.lng.toFixed(5);                   \r\n                        //setNewMarkerState({visible: true, position: coord})                        \r\n                        dispatch(actNewMarkerState({visible: true, position: coord}))\r\n                    }\r\n                }\r\n                //setMapCurrentLatLng({lat: e.target.getCenter().lat, lng: e.target.getCenter().lng})\r\n\r\n\r\n            },\r\n            \r\n            click(e) {\r\n                onClickMap(e)\r\n                /*\r\n                if (rxCheckButtonNewMarker && !rxIsMobileDevice) {\r\n                    //setCheckButtonNewMarker(false)\r\n                    dispatch(actCheckButtonNewMarker(false));\r\n        \r\n                    let coord = { lat: '0', lng: '0' };\r\n                    coord.lat = e.latlng.lat.toFixed(5);\r\n                    coord.lng = e.latlng.lng.toFixed(5);\r\n        \r\n                    //setNewMarkerState({ visible: true, position: coord })\r\n                    dispatch(actNewMarkerState({ visible: true, position: coord }));\r\n        \r\n                    //setShowAccidentTab(true)\r\n                    dispatch(actShowAccidentTab(true));\r\n                    //setActiveTabKey(\"accident\")\r\n                    dispatch(actActiveTabKey('accident'));\r\n                } \r\n                */               \r\n            }, \r\n\r\n            zoomend(e){                \r\n                setCurrentZoom(e.target._zoom)\r\n            },\r\n\r\n            locationfound(e){\r\n                let radius = e.accuracy / 2;\r\n\r\n                if (setView_nTimes_gps > 0) {\r\n                    map.setView(e.latlng, 20);\r\n                    setView_nTimes_gps = setView_nTimes_gps - 1;\r\n                }\r\n    \r\n                if (map.hasLayer(circle_geolocation)) {\r\n                    circle_geolocation.setLatLng(e.latlng);\r\n                    circle_geolocation.setRadius(radius);\r\n                } else {\r\n                    circle_geolocation = L.circle(e.latlng, radius).addTo(map);\r\n                }                \r\n            },\r\n\r\n            locationerror(e){\r\n                //setCheckButtonGPS(false)\r\n                dispatch(actCheckButtonGPS(false))\r\n                alert(e.message)\r\n            }\r\n        })\r\n      \r\n        return null\r\n      }\r\n\r\n\r\n\r\n\r\n\r\n      function HeatmapFunction(){\r\n        const map = useMap()\r\n        //useEffect(() => {\r\n          //const points = addressPoints\r\n          //? addressPoints.map((p) => {\r\n          //  return [p[0], p[1], p[2]]; // lat lng intensity\r\n          //  })\r\n          //: [];\r\n     \r\n            const points = [\r\n                [43.207650, 27.958490, 1.0]\r\n            ]\r\n\r\n\r\n\r\n            if (heatMapLayer) { \r\n                map.removeLayer(heatMapLayer)\r\n            }\r\n\r\n            if (rxCheckButtonHeatmap) {                \r\n                if (dataHeatmapPoints) {\r\n                    // @ts-ignore\r\n                    heatMapLayer = L.heatLayer(dataHeatmapPoints, {\r\n                        gradient: {0.4: '#1E90FF', 0.8: 'white', 1: 'red'},                        \r\n                        //minOpacity: 0.1,\r\n                        max: 1.5,\r\n                        radius: 14,\r\n                        blur: 10,\r\n                        maxZoom: 6\r\n\r\n                    })//.addTo(map);\r\n                    map.addLayer(heatMapLayer)                \r\n                }\r\n            }\r\n\r\n\r\n            //heatMap.addLatLng([43.207650, 27.998590])\r\n            //heatMap.setLatLngs([])\r\n\r\n            //L.heatLayer(points).redraw()\r\n            //L.heatLayer(points).addLatLng([43.207650, 27.998590])\r\n\r\n        //}, [dataHeatmapPoints]);\r\n\r\n        return null\r\n     }\r\n\r\n\r\n\r\n\r\n\r\n    const createClusterCustomIcon  = function (cluster: L.MarkerCluster) {\r\n        // get the number of items in the cluster\r\n        let count = cluster.getChildCount();\r\n\r\n        // figure out how many digits long the number is\r\n        //var digits = (count + '').length;\r\n        let digits;\r\n        if (count == 2) { digits = '1'; }\r\n        if (count >= 3 && count <=5) { digits = '2'; }\r\n        if (count >= 6 && count <=9) { digits = '3'; }\r\n        if (count >= 10 && count <=14) { digits = '4'; }\r\n        if (count > 14) { digits = '5'; }\r\n\r\n        return L.divIcon({\r\n          html: count.toString(),\r\n          className: 'cluster digits-' + digits,\r\n          iconSize: undefined\r\n        });\r\n      }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <>        \r\n        {/* The map rendered before useEffect called, so first we need to load currentCityInfo before to show the map */}\r\n        { currentCityInfo && currentCityInfo[\"longitude\"] !== \"0\" && currentCityInfo[\"latitude\"]!==\"0\" ? ( \r\n\r\n            <MapContainer whenCreated={setMap} center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} zoom={defaultZoom} zoomControl={false} scrollWheelZoom={true} style={{ height: 'calc(100vh - 60px)', width: '100%' }} >                \r\n                <LayersControl position=\"topleft\">                    \r\n                    <MapTileLayers mapBaseLayerName={rxMapBaseLayerName} />                 \r\n                </LayersControl>    \r\n\r\n            \r\n                {/* To change center of the map when current city will change */}\r\n                {/*<SetViewMap center={[parseFloat(currentCityInfo[\"latitude\"]), parseFloat(currentCityInfo[\"longitude\"])]} />*/} \r\n                <SetPanToMap />\r\n\r\n\r\n\r\n                {appname === 'roadaccident' && <> \r\n                    {currentZoom && currentZoom < 15 ? (\r\n                        <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                    ) : (\r\n                        /* @ts-ignore */\r\n                        <MarkerClusterGroup\r\n                        spiderfyOnMaxZoom={true}\r\n                        showCoverageOnHover={false}\r\n                        zoomToBoundsOnClick={true}\r\n                        maxClusterRadius={15}\r\n                        iconCreateFunction={createClusterCustomIcon}>                \r\n                            <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>                \r\n                        </MarkerClusterGroup>\r\n                    )}\r\n                </>}\r\n\r\n\r\n                {appname === 'citytree' && <> \r\n                    <GeoJSON key={mainData.dateTimeGenerated} data={mainData} pointToLayer={pointToLayerCallback} filter={filterMapCallback} onEachFeature={onEachFeaturePoint}/>  \r\n                </>}\r\n\r\n\r\n\r\n\r\n\r\n                <NewMarker newMarkerState={rxNewMarkerState} onDragEndNewMarker={onDragEndNewMarker}/>\r\n                \r\n                <MapEvents />\r\n                \r\n                {!rxIsMobileDevice && <ZoomControl position='bottomright'/>}\r\n                \r\n   \r\n                {/* <ButtonsControl /> */}\r\n\r\n                <HeatmapFunction />\r\n                \r\n\r\n                \r\n            </MapContainer>\r\n        ) : (\r\n            <p>Loading...</p>\r\n        )}    \r\n            \r\n        </>\r\n        \r\n    )\r\n}\r\n\r\nexport default Map\r\n\r\n\r\n//https://egghead.io/lessons/react-create-a-new-map-using-react-leaflet\r\n\r\n//https://codesandbox.io/s/63wqz?file=/src/LeafletControlGeocoder.jsx\r\n//https://www.npmjs.com/package/leaflet-control-geocoder\r\n\r\n//https://codesandbox.io/s/how-to-add-a-legend-to-the-map-using-react-leaflet-useleaflet-hook-75jnp?file=/src/index.js\r\n\r\n//https://newbedev.com/home-button-leaflet-map\r\n\r\n//пример без React-Leaflet\r\n//https://stackoverflow.com/questions/69697017/use-leaflet-map-object-outside-useeffect-in-react","export default \"data:image/png;base64,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\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACJ0lEQVR4Ae3ShY6bQRADYIeZ3v+9yszMDZPlkSWtslPuiS6+C+8n/zNp4p/froi8Jq/Jxk+TkwmHX//Wz8lG3jNjTeaguabD6HAVbphMwIIzqtd+rzKYhsgUNNcqo3fEBlyyOWmwhbbS4b8SaLBu7SGlpL9gklw3YpYR6J5Bm0zAguspZjvqSVQxqvxsPSJJKYIFKh5A2VIDyMgYfYB9hvcmI0VPTxVZS81ER7qiBoFqBAa9MKOKLzzv2BE3EOnlmDTrNRXryToGOGR65nhvSphjMP6b6WJ6xMYYxSW7l1Pp6CSzbLFPgAN3NGLKPRn3c59qxzapCTPUFNVKh0vUe24azMkW+uRm/B8UU3O3Eiw4nOrrafOSF5gS7PqHUotBQQ6f11p22HDOi+66i2LIHcWJOZrTP+rkhOl7n8YcTzCQIuIvyZPQrvs5Br0OdTsyB+YYrwKokXvsgOIXZzbeQ0DMnhHIqGOdBMEl9qKYAo3pBbbDNkijUSgjv/PrMFhwRwS2YbbMzqg+SzdukoxbeiSEVlgyK6yFmjSYtDxhTXRv1OsgsCb2jflu8hLMyC0P7Qg54NE1qc/MF5PqeAHWSfDL3zxN9dsQ+YD3zEeRS4GeYgFm5I7HNiJPfP4V7/CKeUvwsxpqhkwFzMgjj33Vwe+EnuIxngn8FvNTSCkwmJG+rQm8J/MId/EQL3nZwe2EmSNm9ufkFq9xHzcJPscnLGMRomBKqdzOY2EH+IPOLMEAAAAASUVORK5CYII=\"","interface SidebarProps {\r\n\tchildren: JSX.Element\t\r\n}\r\n\r\nconst Sidebar = ({children}: SidebarProps) => {\r\n\treturn (\r\n\t\t<div className=\"bg-light border-right\" id=\"sidebar-wrapper\">\r\n\t\t\t<div className=\"list-group list-group-flush\" style={{ marginTop: \"15px\" }}>\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Sidebar\r\n","import { useState, useEffect } from 'react'\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { Form, Button, Card, Row, Col, } from 'react-bootstrap';\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\ninterface FormFilterProps {\r\n\tonSubmitFilter: (filter: {}) => void;\r\n}\r\n\r\n\r\nconst FormFilter = ({onSubmitFilter}: FormFilterProps) => {\r\n    const rxDictSpecieses = useSelector((state: RootState) => state.dataReducer.dictSpecieses);\r\n    const rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);\r\n\tconst rxDictPlaceTypes = useSelector((state: RootState) => state.dataReducer.dictPlaceTypes);\r\n\tconst rxDictIrrigationMethods = useSelector((state: RootState) => state.dataReducer.dictIrrigationMethods);\r\n\tconst rxDictGroupSpecs = useSelector((state: RootState) => state.dataReducer.dictGroupSpec);\r\n\t//const rxDictTypeSpecs = useSelector((state: RootState) => state.dataReducer.dictTypeSpec);\r\n\t\r\n\tconst { t, i18n } = useTranslation();\r\n\r\n\r\n\r\n\tconst { control, handleSubmit, reset, setValue } = useForm({\r\n\t\treValidateMode: \"onChange\",\r\n\t\tdefaultValues: {\r\n\t\t\tspeciesFilter: \"\",\r\n\t\t\tstatusFilter: \"\",\r\n\t\t\tcareTypeFilter: \"\",\r\n\t\t\tremarkFilter: \"\",\r\n\t\t\tplaceTypeFilter: \"\",\r\n\t\t\tirrigationMethodFilter: \"\",\r\n\t\t\tdatePlantedFromFilter: \"\",\r\n\t\t\tdatePlantedToFilter: \"\",\r\n\t\t\tdateAddedFromFilter: \"\",\r\n\t\t\tdateAddedToFilter: \"\",\r\n\t\t\tcommentFilter: \"\",\r\n\t\t\theightFromFilter: \"\",\r\n\t\t\ttrunkGirthFromFilter: \"\",\r\n\t\t\tcrownDiameterFromFilter: \"\",\r\n\t\t\theightToFilter: \"\",\r\n\t\t\ttrunkGirthToFilter: \"\",\r\n\t\t\tcrownDiameterToFilter: \"\",\t\t\t\r\n\t\t\tshowMyTreesFilter: \"\",\r\n\r\n\t\t\t//select: {},\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\t\r\n\t//let optionsSpeciesesFilter: {label: string; options: {value: number; label: string}[] | undefined}[] = [];\r\n\tlet optionsSpeciesesFilter: any = [];\r\n\tif (Array.isArray(rxDictSpecieses) && Array.isArray(rxDictGroupSpecs)) {\r\n\r\n\t\toptionsSpeciesesFilter = rxDictGroupSpecs.map(itemGroup => {\r\n\t\t\treturn {\r\n\t\t\t\tlabel: itemGroup.groupname,\r\n\t\t\t\toptions: rxDictSpecieses.map(spec => {\r\n\t\t\t\t\tif (itemGroup.id === spec.groupspec) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tvalue: spec.id,\r\n\t\t\t\t\t\t\tlabel: spec.localname,\r\n\t\t\t\t\t\t\tspeciesname: spec.speciesname,\r\n\t\t\t\t\t\t\ttypespec: spec.typespec\r\n\t\t\t\t\t\t\t//color: '#FF8B00'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}).filter(e => e) // removes all undefined items in result array\t\t\t \r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tlet optionsStatusesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictStatuses)) {\r\n\t\toptionsStatusesFilter = rxDictStatuses.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.statusname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tlet optionsCareTypesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictCareTypes)) {\r\n\t\toptionsCareTypesFilter = rxDictCareTypes.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.carename,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\r\n\tlet optionsRemarksFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictRemarks)) {\r\n\t\toptionsRemarksFilter = rxDictRemarks.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.remarkname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\t\r\n\tlet optionsPlaceTypesFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictPlaceTypes)) {\r\n\t\toptionsPlaceTypesFilter = rxDictPlaceTypes.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.placename,\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\t\r\n\tlet optionsIrrigationMethodsFilter: {value: string; label: string}[] = [];\r\n\tif (Array.isArray(rxDictIrrigationMethods)) {\r\n\t\toptionsIrrigationMethodsFilter = rxDictIrrigationMethods.map((x) => {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: x.id,\r\n\t\t\t\t//label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n\t\t\t\tlabel: x.irrigationname,\r\n\t\t\t};\r\n\t\t});\r\n\t}\t\r\n\r\n\r\n\t  const customStyles = {\r\n\t\t//@ts-ignore\r\n\t\toption: (styles, { data }) => {\r\n\t\t\t//const color = chroma(data.color);\r\n\t\t\treturn {\r\n\t\t\t  ...styles,\r\n\t\t\t  paddingLeft: 20,\r\n\t\t\t  backgroundColor: data.typespec === 2 ? '#EEFFEE' : undefined,\r\n\r\n\t\t\t};\r\n\t\t  },\r\n\t  } \r\n\r\n\r\n\r\n\t  const Option = (props: any) => {\r\n\t\tconst { label, speciesname } = props.data;\r\n\t\treturn (\r\n\t\t  <components.Option {...props}>\r\n\t\t\t<span>{label}</span> <span style={{ color: \"darkgray\" }}>{speciesname}</span>\r\n\t\t  </components.Option>\r\n\t\t);\r\n\t  };\t  \r\n\r\n\r\n\r\n\tfunction onResetButton() {\r\n\t\treset();\r\n\t\tonSubmitFilter({});\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form className=\"m-1\" onSubmit={handleSubmit(onSubmitFilter)}>\r\n\t\t\t\t<Form.Group controlId=\"formSpeciesFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.species\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"speciesFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tisSearchable={true}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsSpeciesesFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option) =>`${option.label} - ${option.speciesname}`}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formStatusFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.status\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"statusFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsStatusesFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formCareTypeFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.careType\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"careTypeFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsCareTypesFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formRemarkFilter\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.remark\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"remarkFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsRemarksFilter}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formPlaceTypeFilter\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"230px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.placeType\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"placeTypeFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\toptions={optionsPlaceTypesFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formIrrigationMethodFilter\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"230px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.irrigationMethod\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"irrigationMethodFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tplaceholder={t<string>(\r\n\t\t\t\t\t\t\t\t\t\t\"words.select\"\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\t\toptions={optionsIrrigationMethodsFilter}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDatePlantedFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.plantedFrom\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"datePlantedFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDatePlantedToFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.plantedTo\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"datePlantedToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateAddedFromFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.dateAddedFrom\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateAddedFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDateAddedToFilter\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.dateAddedTo\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateAddedToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group className=\"mt-3\" controlId=\"formCommentFilter\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.comment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"commentFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control type=\"text\" {...field} />\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formFromParamsTreeFilter\" style={{maxWidth: \"50px\"}}>\r\n\t\t\t\t\t\t<Form.Label style={{ marginTop: \"32px\"}}>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.from\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formHeightFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.height\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"heightFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formTrunkGirthFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.trunkGirth\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkGirthFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCrownDiameterFromFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.crownDiameter\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crownDiameterFromFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Row className=\"mt-0\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formToParamsTreeFilter\" style={{maxWidth: \"50px\"}}>\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.to\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formHeightToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"heightToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formTrunkGirthToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkGirthToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group\r\n\t\t\t\t\t\tas={Col}\r\n\t\t\t\t\t\tcontrolId=\"formCrownDiameterToFormFilter\"\r\n\t\t\t\t\t\tclassName=\"ps-1 pe-0\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crownDiameterToFilter\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\t\tmax=\"99\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formShowMyTreesFilter\"\r\n\t\t\t\t\tclassName=\"mt-3 ms-1\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"showMyTreesFilter\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tchecked={field[\"value\"] ?? false}\r\n\t\t\t\t\t\t\t\tinline\r\n\t\t\t\t\t\t\t\tlabel={t<string>(\r\n\t\t\t\t\t\t\t\t\t\"sidebar.filterTab.showMyTrees\"\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\tid=\"idShowMyTreesFilter\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\t\t\t\t\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button variant=\"light\" onClick={onResetButton}>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.clear\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"150px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.filterTab.search\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default FormFilter\r\n\r\n\r\n\r\n","import Table from \"react-bootstrap/Table\";\r\nimport {useState, useEffect} from 'react';\r\n\r\n\r\ninterface TableListProps {\r\n\t// columns in the table\r\n\tcolumns: {\r\n\t\tfield: string;\r\n\t\theaderName: string;\r\n\t\twidth?: string;\r\n\t\tsortable?: boolean;\r\n\t\tdateTimeOption?: 'onlyDate' | 'onlyTime' | 'dateTime'; // for Date fields you can choose format\r\n\t}[];\r\n\r\n\tsortField?: string;\r\n\tsortAsc?: boolean;\r\n\r\n\tdata: {\r\n\t\tid: number;\r\n\t\t[key: string]: any | {iconFA?: string; iconFASize?: string; text?: string; idButton: string}[]; // array of buttons, where key is field name of a column\r\n\t}[] | undefined;\r\n\r\n\tsize?: string; // sm\r\n\tvariant?: string; // dark\r\n\r\n  \tOnClickButtons?: (rowData: any, idButton: string) => void;\r\n}\r\n\r\n\r\n\r\nfunction TableList({columns, data, sortField, sortAsc=true, size, variant, OnClickButtons}: TableListProps) {\r\n\r\n\tconst [sortState, setSortState] = useState({sortField: sortField, sortAsc: sortAsc});\r\n\tconst [dataTable, setDataTable] = useState(data);\r\n\t\r\n\tuseEffect(()=>{\r\n\t\tsetDataTable(data);\r\n\t}, [data]);\r\n\r\n\r\n\tconst columnsHeader = columns.map((item, index) => ( \r\n\t\t<th \r\n\t\t\tstyle={{ width: item.width ? item.width: \"\", cursor: item.sortable ? \"pointer\" : \"default\" }} \r\n\t\t\tkey={index} \r\n\t\t\tonClick={() => {\r\n\t\t\t\tif (item.sortable) {\r\n\t\t\t\t\tsetSortState({sortField: item.field, sortAsc: sortState.sortField === item.field ? !sortState.sortAsc : true}); // inverse sortAsc, only when sortField has not changed, otherwise sortAsc=true \r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t\r\n\t\t\t{ // for current sorted column draws icon\r\n\t\t\tsortState?.sortField === item.field ? \r\n\t\t\t<>\r\n\t\t\t\t<div style={{float: \"left\", textAlign: \"left\"}}>{item.headerName}</div>\r\n\t\t\t\t<div style={{float: \"right\", textAlign: \"right\"}}>\r\n\t\t\t\t\t<span style={{fontSize: \"8pt\", color: \"gray\"}}> {sortState.sortAsc ? '▼' : '▲'}</span>\r\n\t\t\t\t</div>\t\t\t\r\n\t\t\t</>: item.headerName\r\n\t\t\t}\r\n\t\t</th>\r\n\t));\r\n\r\n\r\n\r\n\tfunction DataTable() {\r\n\t\tfunction compare( a:{}, b:{} ) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tif ( a[sortState.sortField] < b[sortState.sortField] ){\r\n\t\t\t\tif (sortState.sortAsc) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 1;\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t//@ts-ignore\r\n\t\t\tif ( a[sortState.sortField] > b[sortState.sortField] ){\r\n\t\t\t\tif (sortState.sortAsc) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn -1;\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\t// sorting of data\r\n\t\tlet sortedData:any[] | undefined = [];\r\n\t\tif (sortState.sortField) {\t\t\r\n\t\t\t//setDataTable(dataTable?.sort(compare));\t\t\t\r\n\t\t\tsortedData = dataTable?.sort(compare);\t\t\t\r\n\t\t} else {\r\n\t\t\tsortedData = dataTable;\r\n\t\t}\r\n\r\n\t\t// fill out\r\n\t\tif (sortedData && sortedData.length > 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<>\r\n\t\t\t\t{sortedData.map((row: any, index) => {\t\t\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<tr key={row.id}>\r\n\t\t\t\t\t\t\t<DataRow row={row} indexRow={index}/>\r\n\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t)\r\n\t\t\t\t})}\r\n\t\t\t\t</>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (<tr><td style={{textAlign: \"center\"}} colSpan={columns.length}>no data</td></tr>)\r\n\t}\t\r\n\r\n\r\n\tinterface DataRowProps {\r\n\t\trow: any;\r\n\t\tindexRow: number;\r\n\t}\t\r\n\tfunction DataRow({row, indexRow}: DataRowProps): any {\t\r\n\t\tconst getUniqKey = (row: any, index: number): string => (`${String(row.id)}.${String(index)}`);\r\n\t\t\r\n\t\t\r\n\t\tconst result = columns.map((col, index) => {\r\n\r\n\t\t\t\r\n\t\t\tif (typeof row[col.field] !== \"object\") { //if it's not object, then it's just value of field, else it's button\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tif (col?.dateTimeOption) {\t\t\t\t\r\n\t\t\t\t\tif (col.dateTimeOption === \"onlyDate\") {\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{new Date(row[col.field]).toLocaleDateString()}</td>)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (col.dateTimeOption === \"onlyTime\") {\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{new Date(row[col.field]).toLocaleTimeString()}</td>)\r\n\t\t\t\t\t}\t\t\t\t\t\r\n\r\n\t\t\t\t\tif (col.dateTimeOption === \"dateTime\") {\r\n\t\t\t\t\t\tlet dateTime = new Date(row[col.field]).toLocaleDateString() + ' ' + new Date(row[col.field]).toLocaleTimeString();\r\n\t\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{dateTime}</td>)\r\n\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{row[col.field]}</td>)\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (col.field===\"#\") {\r\n\t\t\t\t\treturn (<td key={getUniqKey(row, index)}>{indexRow+1}</td>)\t\r\n\t\t\t\t}\r\n\t\t\t\treturn (<td key={getUniqKey(row, index)}>{row[col.field]}</td>)\r\n\t\t\t}\t\r\n\t\t\t\r\n\t\t\t// buttons\r\n\t\t\tconst buttons = row[col.field];\r\n\t\t\t\r\n\t\t\tif (Array.isArray(buttons)) {\r\n\t\t\t\tlet buttonRow:any[] = [];\r\n\t\t\t\tbuttons.forEach(button => {\r\n\t\t\t\t\tif ((button?.text || button?.iconFA)  && button?.idButton) {\r\n\t\t\t\t\t\tlet buttonText = [];\r\n\t\r\n\t\t\t\t\t\tif (button?.iconFA) {\r\n\t\t\t\t\t\t\tif (button?.iconFASize) {\r\n\t\t\t\t\t\t\t\tbuttonText.push(<i key={getUniqKey(row, index)+button.idButton} className={button.iconFA} style={{fontSize: button.iconFASize}}></i>);\t\t\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tbuttonText.push(<i key={getUniqKey(row, index)+button.idButton} className={button.iconFA}></i>);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tif (button?.text) {\r\n\t\t\t\t\t\t\tbuttonText.push(<span key={getUniqKey(row, index)+button.idButton}>{button.text}</span>);\t\r\n\t\t\t\t\t\t}\t\t\t\t\r\n\t\r\n\t\t\t\t\t\tif (OnClickButtons) {\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbuttonRow.push(<span key={getUniqKey(row, index)+button.idButton}><a href='#' onClick={()=>OnClickButtons(row, button.idButton)}>{buttonText}</a> </span>);\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbuttonRow.push(<span key={getUniqKey(row, index)+button.idButton}>{buttonText}</span>);\r\n\t\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn (<td key={getUniqKey(row, index)}>{buttonRow}</td>);\t\t\t\t\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n  \treturn (\r\n\t\t<Table striped bordered hover size={size} variant={variant}>\r\n\t\t\t<thead>\r\n\t\t\t\t<tr>\t\t\t\t\r\n\t\t\t\t\t{columnsHeader}\t\t\t\r\n\t\t\t\t</tr>\r\n\t\t\t</thead>\r\n\t\t\t<tbody>\r\n\t\t\t\t<DataTable/>\r\n\t\t\t</tbody>\r\n\t\t</Table>\r\n  \t)\r\n}\r\n\r\nexport default TableList","import {useState, useEffect, forwardRef, useRef, useImperativeHandle} from 'react';\r\nimport { Form, Button, Spinner , Row, Col, Modal } from \"react-bootstrap\";\r\nimport Image from 'react-bootstrap/Image';\r\nimport Resizer from \"react-image-file-resizer\";\r\n\r\ninterface ImageS3UploadProps {\r\n    signingUrl: string;\r\n    autoUpload: boolean;\r\n    //startUploadState?: boolean;\r\n    value: string | undefined;\r\n    onChange: (val: string) => void;    \r\n    emptyPhoto?: string; \r\n    serverPhoto?: string | undefined | null; \r\n    buttonCaption?: string;\r\n\r\n    resizer?: {\r\n        enabled: boolean;\r\n        autoResize: boolean;\r\n        maxWidth: number;\r\n        maxHeight: number;\r\n        compressFormat: string;\r\n        quality: number;\r\n        rotation: number;\r\n    };\r\n\r\n    onFinish?: () => void;\r\n    onProgress?: (percent: number) => void;\r\n    onError?: (status: number, filename: string) => void;\r\n    onSignedUrl?: (data: any)  => void;\r\n}\r\n\r\ninterface RefObject {\r\n    uploadFile: () => boolean\r\n}\r\n\r\n\r\nenum stateComponent {\r\n    none,\r\n    resizing,\r\n    resized,\r\n    uploading,\r\n    uploaded,\r\n    error\r\n}\r\n\r\nconst defaultResizingOptions = {\r\n    enabled: false,\r\n    autoResize: true, // otherwise resizing will be preform before uploading\r\n    maxWidth: 1280,\r\n    maxHeight: 1280,\r\n    compressFormat: \"JPEG\",\r\n    quality: 70,\r\n    rotation: 0\r\n}\r\n\r\nconst ImageS3Upload = forwardRef<RefObject | undefined, ImageS3UploadProps>(({\r\n    signingUrl,\r\n    autoUpload,\r\n    //startUploadState,\r\n    emptyPhoto,\r\n    serverPhoto,\r\n    value,\r\n    onChange,\r\n    buttonCaption='Browse...',\r\n    resizer=defaultResizingOptions,\r\n    onFinish,\r\n    onProgress,\r\n    onError,\r\n    onSignedUrl\r\n}, ref) => {\r\n\r\n\r\n    // to be able to call method uploadFile\r\n    useImperativeHandle(ref, () => ({\r\n        uploadFile: () => {\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {                \r\n                if (status !== stateComponent.resizing) {\r\n                    //@ts-ignore\r\n                    startUpload(inputFileEl?.current?.files[0].name);\r\n                    return true;\r\n                }\r\n                return false;\r\n            }\r\n            return false;             \r\n        }\r\n    }));\r\n\r\n\r\n    const inputFileEl = useRef(null);\r\n    \r\n    const [status, setStatus] = useState<stateComponent>(stateComponent.none);\r\n    const [imagePhoto, setImagePhoto] = useState<string | undefined>(undefined);\r\n    const [compressedPhoto, setCompressedPhoto] = useState<any>(undefined);\r\n    const [buttonCaptionState, setButtonCaptionState] = useState(buttonCaption);\r\n    //const [stateUploading, setStateUploading] = useState(false);\r\n    const [showSpinner, setShowSpinner] = useState<boolean>(false);    \r\n    const [s3DataState, setS3DataState] = useState<any>(undefined);\r\n    const [notLoad, setNotLoad] = useState(false); // to prevent loading photo from S3 when we have this photo in blob input element\r\n   \r\n\r\n    useEffect(()=>{\r\n        if (emptyPhoto) {\r\n            setImagePhoto(emptyPhoto);    \r\n        }  \r\n    }, []);\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n        console.log('s3DataState', s3DataState); \r\n        if (s3DataState?.data?.fields?.key) {\r\n            setNotLoad(true);\r\n            onChange(s3DataState.data.fields.key);\r\n        } \r\n    }, [s3DataState]);  \r\n\r\n    useEffect(()=>{                \r\n        if (value) {\r\n            \r\n            if (serverPhoto == null) {\r\n                serverPhoto = '';    \r\n            }\r\n\r\n            if (serverPhoto.slice(-1) != '/' && value.slice(0, 1) != '/') { // if there is no symbol / between serverPhoto and value, just add it.\r\n                serverPhoto = serverPhoto + '/';\r\n            }\r\n\r\n            if (!notLoad) { // to prevent loading photo from S3 when we have this photo in blob input element\r\n                setButtonCaptionState(buttonCaption);\r\n                setShowSpinner(false);\r\n                if (inputFileEl?.current) {\r\n                    //@ts-ignore\r\n                    inputFileEl.current.value='';\r\n                }\r\n                                \r\n                setImagePhoto(`${serverPhoto}${value}`);\r\n                //console.log('serverPhotoValue', `${serverPhoto}${value}`); \r\n            }\r\n                    \r\n          \r\n        } else {\r\n            setImagePhoto(emptyPhoto);\r\n        }\r\n               \r\n        setNotLoad(false);\r\n        \r\n    }, [value]);   \r\n    \r\n    \r\n\r\n\r\n    useEffect(() => {\r\n        if (status === stateComponent.resizing) {\r\n            setButtonCaptionState(\"Resizing...\");\r\n        } else {\r\n            setButtonCaptionState(buttonCaption);            \r\n        }   \r\n    }, [status])\r\n\r\n\r\n        \r\n{/*\r\n    useEffect(()=>{\r\n        if (startUploadState === true && stateUploading === false) {\r\n            setStateUploading(true);\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {\r\n                //@ts-ignore\r\n                startUpload(inputFileEl?.current?.files[0].name);\r\n            }    \r\n        }\r\n    }, [startUploadState]);\r\n*/}\r\n\r\n\r\n    const resizeFile = (file: any) =>\r\n\t\tnew Promise((resolve) => {\r\n\t\t\tResizer.imageFileResizer(\r\n\t\t\t\tfile,\r\n\t\t\t\tresizer.maxWidth,\r\n\t\t\t\tresizer.maxHeight,\r\n\t\t\t\tresizer.compressFormat,\r\n\t\t\t\tresizer.quality,\r\n\t\t\t\tresizer.rotation,\r\n\t\t\t\t(uri) => {\r\n\t\t\t\t\tresolve(uri);\r\n\t\t\t\t},\r\n\t\t\t\t\"blob\"\r\n\t\t\t);\r\n\t\t});\r\n\r\n\r\n    const onChangeFile = async (event: any) => {\r\n        \r\n        if (event.target.files && event.target.files.length > 0) {\r\n            const file = event.target.files[0];\r\n            //onChange(file.name);\r\n            //setFilename(file.name);\r\n            setImagePhoto(URL.createObjectURL(file)); \r\n            \r\n            if (resizer.enabled && resizer.autoResize) {\r\n                try {                \r\n                    setStatus(stateComponent.resizing);\r\n                    const image = await resizeFile(file);\r\n                    setCompressedPhoto(image);\r\n                    setStatus(stateComponent.resized);\r\n\r\n                    if (autoUpload) {\r\n                        startUpload(file.name);     \r\n                    }\r\n\r\n                } catch (err) {\r\n                    console.log(err);\r\n                    setStatus(stateComponent.error);\r\n                }\r\n            } else {\r\n                if (autoUpload) {\r\n                    startUpload(file.name);     \r\n                }                \r\n            }            \r\n\r\n        }                \r\n    };\r\n\r\n\r\n\r\n\r\n\tconst fetchUrlSign = async (objectName: string) => {\t\t\t\r\n\r\n\t\tlet myHeaders = new Headers();\r\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");  \r\n\r\n        const bodyObject = {objectName: objectName};\r\n        \r\n        let res = await fetch(signingUrl, {\r\n            method: 'POST',\r\n            headers: myHeaders,\r\n            body: JSON.stringify(bodyObject)\r\n        });\r\n\r\n\t\tconst json = await res.json();\r\n\r\n        return JSON.parse(json);\t\t\t\t\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n    const updateProgress = (ev: any) => {\r\n        if (ev.lengthComputable) {\r\n            let percentComplete = Math.round((ev.loaded / ev.total) * 100);\r\n            setButtonCaptionState(String(percentComplete)+'%');\r\n            if (onProgress) {\r\n                onProgress(percentComplete);\r\n            }\r\n            console.log('percentComplete', percentComplete);\r\n            //$('#'+idElement+'_browse_button').html(percentComplete+'%');\r\n        }\r\n    } \r\n\r\n    const uploadFile = (file: any, s3Data: any) => {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open(\"POST\", s3Data.url);\r\n        xhr.timeout = 30000;\r\n        xhr.upload.onprogress = updateProgress;\r\n\r\n        let postData = new FormData();\r\n\t\tfor (let key in s3Data.fields) {\t\t\t\r\n            if (key != 'file') { // in field \"file\" must be blob of file.\r\n                postData.append(key, s3Data.fields[key]);\r\n                //console.log('append', key, s3Data.fields[key]);\r\n            }                    \r\n\t\t}\r\n\t\tpostData.append(\"file\", file); // blob\r\n\r\n\t\txhr.onreadystatechange = () => {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\t// done\r\n\t\t\t\tif (xhr.status === 200 || xhr.status === 204) {\r\n                    setShowSpinner(false);\r\n                    setButtonCaptionState('Done');\r\n                    if (onFinish) {\r\n                        onFinish();\r\n                    }\r\n\r\n                    \r\n\t\t\t\t\t//ok || 204 No Content\r\n                } else {\r\n\t\t\t\t\t//SetStateSaveButton('saveButton', true, 'Запази');\r\n\t\t\t\t\t//SetStateSaveButton('saveInspButton', true, 'Запази');\r\n\t\t\t\t\t//$('#'+idElement+'_loading').hide();\r\n\t\t\t\t\t//$('#'+idElement+'_browse_button').html('Browse...');\r\n\t\t\t\t\t\r\n                    if (onError) {\r\n                        setShowSpinner(false);\r\n                        setButtonCaptionState(`Error ${xhr.status}`);\r\n                        onError(xhr.status, file.name);\r\n                    }                    \r\n                    \r\n                    alert(\r\n\t\t\t\t\t\t\"Error during file upload (status: \" +\r\n\t\t\t\t\t\t\txhr.status +\r\n\t\t\t\t\t\t\t\"): \" +\r\n\t\t\t\t\t\t\tfile.name\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}  \r\n\t\t};\r\n\r\n\r\n\t\txhr.onload = () => {\r\n\t\t\t// transaction completes successfully.\r\n\t\t\tconsole.log(\"transaction completes successfully.\");\r\n            //if (s3DataState?.data?.fields?.key) {\r\n            //    onChange(s3DataState.data.fields.key);\r\n            //}             \r\n\t\t};  \r\n\r\n\r\n        xhr.onerror = () => {\r\n            //SetStateSaveButton('saveButton', true, 'Запази');\r\n            //SetStateSaveButton('saveInspButton', true, 'Запази');\r\n            //$('#'+idElement+'_loading').hide();\r\n            //$('#'+idElement+'_browse_button').html('Browse...');\r\n            alert('Error during file upload: ' + file.name);\r\n        };  \r\n          \r\n        \r\n        console.log('postData', postData);\r\n        xhr.send(postData);  \r\n\r\n    \r\n    //    {\"data\": {\"url\": \"https://urbangis.s3.amazonaws.com/\", \"fields\": {\"acl\": \"public-read\", \"Content-Type\": \"image/jpeg\", \"key\": \"media/citytree/images_tree/user_None/None\", \"x-amz-algorithm\": \"AWS4-HMAC-SHA256\", \"x-amz-credential\": \"***REMOVED***/20220524/eu-central-1/s3/aws4_request\", \"x-amz-date\": \"20220524T105522Z\", \"policy\": \"eyJleHBpcmF0aW9uIjogIjIwMjItMDUtMjRUMTE6NTU6MjJaIiwgImNvbmRpdGlvbnMiOiBbeyJhY2wiOiAicHVibGljLXJlYWQifSwgeyJDb250ZW50LVR5cGUiOiAiaW1hZ2UvanBlZyJ9LCB7ImJ1Y2tldCI6ICJ1cmJhbmdpcyJ9LCB7ImtleSI6ICJtZWRpYS9jaXR5dHJlZS9pbWFnZXNfdHJlZS91c2VyX05vbmUvTm9uZSJ9LCB7IngtYW16LWFsZ29yaXRobSI6ICJBV1M0LUhNQUMtU0hBMjU2In0sIHsieC1hbXotY3JlZGVudGlhbCI6ICJBS0lBMllTTzdGRTVKQllPWEU1Qy8yMDIyMDUyNC9ldS1jZW50cmFsLTEvczMvYXdzNF9yZXF1ZXN0In0sIHsieC1hbXotZGF0ZSI6ICIyMDIyMDUyNFQxMDU1MjJaIn1dfQ==\", \"x-amz-signature\": \"75a181348c86194678752f6c726582a833408925226259efc0ad6858060d56bb\", \"file\": null}}, \"url\": \"https://urbangis.s3.amazonaws.com/media/citytree/images_tree/user_None/None\", \"file_exists\": false}\r\n    }\r\n\r\n\r\n\r\n\r\n    const startUpload = async (filename: string) => {\r\n        filename = filename.replace(/\\s/g, ''); // remove spaces, because there is some problem with restAPI, which return url filename with %20 instead space, after that when we savind data again, %20 will be convert to %2520 (% = %25)\r\n\r\n        setShowSpinner(true);\r\n        setButtonCaptionState('Starting... ');\r\n        setS3DataState(undefined);\r\n        const signedUrl = await fetchUrlSign(filename);\r\n        setS3DataState(signedUrl);  \r\n        if (onSignedUrl) {\r\n            onSignedUrl(signedUrl);\r\n        }\r\n        \r\n        console.log('signedUrl', signedUrl);\r\n        \r\n\r\n        if (signedUrl.file_exists === false) {\r\n            //@ts-ignore\r\n            if (inputFileEl?.current?.files && inputFileEl.current.files.length===1) {\r\n                //@ts-ignore\r\n                const file = inputFileEl.current.files[0];\r\n\r\n                if (resizer.enabled) {\r\n                   \r\n                    if (resizer.autoResize) { // photo already resized and stored in compressedPhoto\r\n                        if (compressedPhoto) {\r\n                            //@ts-ignore\r\n                            uploadFile(compressedPhoto, signedUrl.data);\r\n                        }\r\n                    } else {\r\n                        try {                \r\n\r\n                            setStatus(stateComponent.resizing);\r\n                            const image = await resizeFile(file);\r\n                            setStatus(stateComponent.resized);\r\n                            //@ts-ignore\r\n                            uploadFile(image, signedUrl.data);                            \r\n                        } catch (err) {\r\n                            console.log(err);\r\n                            setStatus(stateComponent.error);\r\n                        }                        \r\n                    }\r\n\r\n                    \r\n                } else {\r\n                    //@ts-ignore\r\n                    uploadFile(file, signedUrl.data);\r\n                }                \r\n            }\r\n        } else {\r\n            let rndStr = makeRandomStr(5);\r\n            startUpload(rndStr + '_' + filename);            \r\n        }\r\n    \r\n    }\r\n\r\n\r\n\r\n\r\n    return (\r\n        <div style={{position: \"relative\"}}>\r\n            <Form.Group>\r\n                <Image src={imagePhoto} style={{maxWidth: \"100%\", height: \"auto\"}} rounded key={imagePhoto} /> {/* key to prevent showing previous loaded photos */}\r\n                <a href=\"#\">\r\n                    <i className=\"far fa-times-circle fa-2x\" \r\n                        style={{color: \"#BB0000\", position: \"absolute\", top: \"-3px\", right: \"8px\"}}\r\n                        onClick={() => { \r\n                            //onChange(\"*will_be_deleted*\"); \r\n                            //setFilename(\"*will_be_deleted*\");\r\n                            onChange(\"\"); \r\n                            setImagePhoto(emptyPhoto);\r\n                            if (inputFileEl?.current) {\r\n                                //@ts-ignore\r\n                                inputFileEl.current.value='';\r\n                            }                             \r\n                        }} \r\n                    />                    \r\n                </a>\r\n                \r\n                <Button variant=\"outline-secondary\" style={{width: \"100%\"}} className=\"mt-3\"\r\n                    onClick={()=>{\r\n                        //onChange(\"Helloooo\")\r\n                        setShowSpinner(false);\r\n                        setButtonCaptionState(buttonCaption);\r\n                        //@ts-ignore                        \r\n                        inputFileEl.current.click();\r\n                    }}>\r\n                    {showSpinner && <Spinner\r\n                        as=\"span\"\r\n                        animation=\"border\"\r\n                        size=\"sm\"\r\n                        role=\"status\"\r\n                        aria-hidden=\"true\"\r\n                    />}                \r\n                    {buttonCaptionState}\r\n                </Button>{' '}\r\n                \r\n                \r\n                <input ref={inputFileEl} type=\"file\" accept=\"image/*\" style={{display: \"none\"}} \r\n                    onChange={onChangeFile}\r\n                    /*\r\n                    onChange={(e)=>{\r\n                        if (e.target.files && e.target.files.length > 0) {\r\n                            const file = e.target.files[0];\r\n                            //onChange(file.name);\r\n                            //setFilename(file.name);\r\n                            setImagePhoto(URL.createObjectURL(file)); \r\n                            if (autoUpload) {\r\n                                startUpload(file.name);     \r\n                            }\r\n                        }     \r\n                    }}\r\n                    */\r\n                />\r\n\r\n                \r\n                {/* \r\n                <input ref={inputTextEl} style={{width: \"100%\"}}\r\n                    //value={filename}\r\n                    //onChange={({ target: { value } }) => onChange(value)}\r\n                /> \r\n\r\n\r\n                \r\n\r\n              \r\n\r\n                    \r\n                <img src=\"{% static 'images/no-photo.png' %}\" class=\"img-fluid rounded\" id=\"id_insp_img_photo1\">\r\n                            <a href=\"#\"><i class=\"far fa-times-circle fa-2x iconDeletePhoto\" onclick=\"document.getElementById('id_insp_photo1_new_name').value='*will_be_deleted*'; $('#id_insp_img_photo1').attr('src', '{% static 'images/no-photo.png' %}');\"></i></a>\r\n\r\n                */}\r\n            </Form.Group>        \r\n        </div>\r\n  )\r\n\r\n})\r\n\r\n\r\n\r\n\r\n\r\n\r\nfunction makeRandomStr(length: number) {\r\n    let result           = '';\r\n    const characters       = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\r\n    const charactersLength = characters.length;\r\n    for ( var i = 0; i < length; i++ ) {\r\n      result += characters.charAt(Math.floor(Math.random() *\r\n charactersLength));\r\n   }\r\n   return result;\r\n}\r\n\r\nexport default ImageS3Upload","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAIAAAAiOjnJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkMzMzRGRjBCRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkMzMzRGRjBDRDQ0RTExRUI4M0FBOEVDOTExMzA0Q0NEIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QzMzNEZGMDlENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QzMzNEZGMEFENDRFMTFFQjgzQUE4RUM5MTEzMDRDQ0QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4+BmGWAAAYBklEQVR42uxd2VcUxxce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\"","import { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap';\r\nimport {useState, useEffect, forwardRef, useRef, useImperativeHandle} from 'react'\r\nimport { Controller } from \"react-hook-form\";\r\nimport ImageS3Upload from \"./ImageS3Upload\";\r\nimport noPhotoImage from \"./images/no-photo.png\";\r\n\r\ninterface UploadPhotosProps {\r\n    controlFromUseForm: any;\r\n    signingS3Url: string;\r\n    serverPhoto?: string | undefined | null;\r\n    onCallbackDone: () => void;\r\n} \r\n\r\ninterface RefObject {\r\n    uploadPhotos: () => void\r\n}\r\n\r\nconst UploadPhotos = forwardRef<RefObject | undefined, UploadPhotosProps>(({\r\n    controlFromUseForm,\r\n    signingS3Url,\r\n    serverPhoto,\r\n    onCallbackDone\r\n}, ref) => {\r\n\r\n\tconst photo1Ref = useRef(); // to be able to call method uploadFile\r\n\tconst photo2Ref = useRef();\r\n\tconst photo3Ref = useRef();   \r\n    \r\n\tconst [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\tconst [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\tconst [uploadedPhoto3, setUploadedPhoto3] = useState(false);   \r\n\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\t\t\t\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\t\t\t\t\t\t\r\n\t\t\tonCallbackDone();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\r\n\r\n\r\n\r\n    const autoUpload = false;\r\n\r\n    const resizerOptions = {\r\n        enabled: true,\r\n        autoResize: false, // otherwise resizing will be preform before uploading\r\n        maxWidth: 1280,\r\n        maxHeight: 1280,\r\n        compressFormat: \"JPEG\",\r\n        quality: 70,\r\n        rotation: 0            \r\n    }\r\n\r\n\r\n    // to be able to call method uploadFile\r\n    useImperativeHandle(ref, () => ({\r\n        uploadPhotos: () => {\r\n\r\n            let p1 = false;\r\n            let p2 = false;\r\n            let p3 = false;\r\n            //@ts-ignore\r\n            if (photo1Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p1=photo1Ref.current.uploadFile();\r\n            }\t\r\n    \r\n            //@ts-ignore\r\n            if (photo2Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p2=photo2Ref.current.uploadFile();\r\n            }\r\n            \r\n            //@ts-ignore\r\n            if (photo3Ref?.current?.uploadFile) {\r\n                //@ts-ignore\r\n                p3=photo3Ref.current.uploadFile();\r\n            }\t\t\r\n    \r\n    \r\n            console.log('p', p1, p2, p3);\r\n            if (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n                onCallbackDone();\r\n            } else {\r\n                //e.preventDefault();\r\n                setUploadedPhoto1(!p1);\r\n                setUploadedPhoto2(!p2);\r\n                setUploadedPhoto3(!p3);\r\n                //console.log('cons', {photo1: !p1, photo2: !p2, photo3: !p3, data: data})\r\n                //setPhotosUploaded({photo1: !p1, photo2: !p2, photo3: !p3, data: data});\r\n            }\t            \r\n\r\n        }\r\n    }));\r\n\r\n\r\n\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\r\n\r\n\r\n\r\n\r\n    return (\r\n\r\n\r\n        <Row className=\"mt-3\">\r\n            <Form.Group as={Col} controlId=\"formIdInsp1\" className=\"mt-3\">\r\n                <Controller\r\n                    name=\"photo1\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\r\n                            //startUploadState={photo1StateUpload.start}\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\t\r\n                            onFinish={onFinishPhoto1}\r\n                            resizer={resizerOptions}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                            {...field}\r\n                            ref={photo1Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Col} controlId=\"formIdInsp2\" className=\"mt-3\">\r\n                <Controller\r\n                    name=\"photo2\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\t\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\r\n                            onFinish={onFinishPhoto2}\r\n                            resizer={resizerOptions}\r\n                            {...field}\r\n                            ref={photo2Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\r\n\r\n            <Form.Group as={Col} controlId=\"formIdInsp3\" className=\"mt-3\">\r\n                <Controller\r\n                    name=\"photo3\"\r\n                    control={controlFromUseForm}\r\n                    render={({ field }) => (\r\n\r\n                        <ImageS3Upload  \r\n                            signingUrl={signingS3Url}\r\n                            autoUpload={autoUpload}\r\n                            emptyPhoto={noPhotoImage}\r\n                            serverPhoto={serverPhoto}\r\n                            onFinish={onFinishPhoto3}\r\n                            resizer={resizerOptions}\r\n                            {...field}\r\n                            ref={photo3Ref}\r\n                        />\r\n\r\n                    )}\r\n                />\r\n            </Form.Group>\t\r\n        </Row>\r\n\r\n\r\n\r\n  )\r\n})\r\n\r\nexport default UploadPhotos","import { useState, useEffect, useRef } from 'react';\r\nimport { useForm, Controller  } from 'react-hook-form';\r\nimport { Form, Button, Card, Row, Col, Modal} from 'react-bootstrap';\r\nimport Datetime from 'react-datetime';\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useSelector } from 'react-redux';\r\nimport { RootState } from '../reducers/index'\r\nimport { TreeItem } from \"../interfaces\";\r\nimport moment from 'moment';\r\nimport TableList from './TableList'\r\nimport UploadPhotos from \"./UploadPhotos\"\r\n//import ImageS3Upload from \"./ImageS3Upload\";\r\n//import noPhotoImage from \"./images/no-photo.png\";\r\n\r\ninterface FormTreeProps {\r\n\tonSubmitTree: (data: {}) => void;\r\n\tonDeleteTree: (id: number) => void;\r\n\tonCloseTree: () => void;\r\n    \r\n    onNewInsp:(idTree: number) => void;\r\n    onEditInsp: (data: {}) => void;\r\n    onClickInspPhotos: (data: {}) => void;\r\n        \t\r\n    dataTreeForm: TreeItem | null;\r\n    city: string;\r\n    signingS3Url: string;\r\n}\r\n\r\n\r\nconst FormTree = ({\r\n\tonSubmitTree,\r\n\tonDeleteTree,\r\n\tonCloseTree,\r\n    onNewInsp,\r\n    onEditInsp,\r\n    onClickInspPhotos,\r\n\tdataTreeForm,\r\n    city,\r\n    signingS3Url\r\n}: FormTreeProps) => {\r\n\r\n    const rxNewMarkerState = useSelector((state: RootState) => state.uiReducer.newMarkerState);\r\n    const [showModalDelete, setShowModalDelete] = useState(false);\r\n\r\n    const rxDictSpecieses = useSelector((state: RootState) => state.dataReducer.dictSpecieses);\r\n    const rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);\r\n\tconst rxDictPlaceTypes = useSelector((state: RootState) => state.dataReducer.dictPlaceTypes);\r\n\tconst rxDictIrrigationMethods = useSelector((state: RootState) => state.dataReducer.dictIrrigationMethods);\r\n    const rxDictGroupSpecs = useSelector((state: RootState) => state.dataReducer.dictGroupSpec);\r\n\r\n\r\n\t//const [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\t//const [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\t//const [uploadedPhoto3, setUploadedPhoto3] = useState(false); \r\n    \r\n\t//const photo1Ref = useRef(); // to be able to call method uploadFile\r\n\t//const photo2Ref = useRef();\r\n\t//const photo3Ref = useRef();\r\n\r\n    const uploadPhotosRef = useRef();\r\n\r\n\r\n    interface IInspections {\r\n\t\tid: number;\r\n\t\t[key: string]: any | {iconFA?: string; iconFASize?: string; text?: string; idButton: string};\r\n\t};\r\n\r\n    const [inspections, setInspections] = useState<IInspections[] | undefined>(undefined);\r\n\r\n\r\n    const dateTimeRef = useRef(null);\r\n    const { t } = useTranslation();\r\n\r\n    // rxNewMarkerState\r\n\tuseEffect(() => {\r\n\t\tif (rxNewMarkerState.visible) {\r\n\t\t\treset();\r\n\r\n\t\t\t// perhaps a bug of component, value is not reset, so reset it manually\r\n\t\t\t//@ts-ignore\r\n\t\t\t//dateTimeRef.current.state.inputValue = \"\";\r\n\t\t\t//@ts-ignore\r\n\t\t\t//dateTimeRef.current.state.selectedDate = undefined;\r\n\r\n\t\t\tsetValue(\"latitude\", rxNewMarkerState.position.lat);\r\n\t\t\tsetValue(\"longitude\", rxNewMarkerState.position.lng);            \r\n            //@ts-ignore\r\n            setValue(\"irrigationmethod\", optionsIrrigationMethodsData[0]);            \r\n\t\t}\r\n\t}, [rxNewMarkerState]);    \r\n\r\n\r\n\r\n\r\n    // when provide data to show it\r\n\tuseEffect(() => {\r\n\t\tlet formData: any = {};\r\n\r\n        formData.id = dataTreeForm?.id;\r\n        formData.latitude = dataTreeForm?.latitude;\r\n        formData.longitude = dataTreeForm?.longitude;\r\n        \r\n\t\tlet species = dataTreeForm?.species_id;\r\n\t\tif (species) {\r\n\t\t\tlet isFound = false; // to stop loop\r\n            optionsSpeciesesData.forEach((element:any) => { // loop for categories (The most common, The medium common and so on...)\r\n                if (element?.options && Array.isArray(element.options)) { // in every categories trying to find id of species \r\n                    \r\n                    if (!isFound) {\r\n                        formData.species = element.options.find(                \t\t\t\r\n                            (item: any) => {\r\n                                isFound = item.value === species; \r\n                                return isFound;\t}\r\n                        );             \r\n                    }       \r\n                }        \r\n            });\r\n            \r\n\t\t}        \r\n        \r\n        formData.speciescomment = dataTreeForm?.speciescomment;\r\n        formData.comment = dataTreeForm?.comment;\r\n\r\n        \r\n\t\tlet placetype = dataTreeForm?.placetype;\r\n\t\tif (placetype) {\r\n\t\t\tconsole.log('optionsPlaceTypesData', optionsPlaceTypesData)\r\n\t\t\tformData.placetype = optionsPlaceTypesData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === placetype\t\r\n\t\t\t);\r\n\t\t}    \r\n        \r\n\t\tlet irrigationmethod = dataTreeForm?.irrigationmethod;\r\n\t\tif (irrigationmethod) {\r\n\t\t\t//console.log('optionsPlaceTypesData', optionsPlaceTypesData)\r\n\t\t\tformData.irrigationmethod = optionsIrrigationMethodsData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === irrigationmethod\t\r\n\t\t\t);\r\n\t\t}          \r\n        \r\n\r\n\t\tif (dataTreeForm?.dateplanted) {\r\n            console.log('dataTreeForm?.properties?.dateplanted', dataTreeForm?.dateplanted);\r\n\t\t\tformData.dateplanted = dataTreeForm.dateplanted;\r\n\t\t}\r\n\r\n        formData.googlestreeturl = dataTreeForm?.googlestreeturl;\r\n\r\n\r\n        reset(formData, { keepDefaultValues: true });\r\n\r\n        const fetchInpections = async () => {\r\n\t\t    //@ts-ignore\r\n            let url = `${process.env.REACT_APP_API_URL}citytree/${city}/trees/${dataTreeForm.id}/inspections/`;\r\n    \t\tlet res = await fetch(url);\r\n\t\t    let data = await res.json(); \r\n            \r\n            // adding buttons\r\n            data = data.map((element: any) => {\r\n                element.buttons = [];\r\n                element.buttons.push({iconFA: 'fas fa-edit', iconFASize: '15pt', idButton: 'edit'});\r\n                \r\n                if (element?.photo1 || element?.photo2 || element?.photo3) {\r\n                    element.buttons.push({iconFA: 'fa fa-camera', iconFASize: '15pt', idButton: 'photo'});                       \r\n                    \r\n                }\r\n                element.typeData = 'Inspection';\r\n                return element;\r\n                    \r\n            });\r\n            \r\n            console.log('inspections',data);\r\n            setInspections(data);       \r\n        };\r\n\r\n        if (dataTreeForm?.id) {\r\n            fetchInpections();    \r\n        }\r\n\r\n\r\n\t}, [dataTreeForm]);\r\n\r\n\r\n\r\n    /*\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\r\n\t\t\thandleSubmit(prepareOnSubmitTree)();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\r\n    */\r\n\r\n\r\n\r\n\r\n    let optionsSpeciesesData: any = [];\r\n    if (Array.isArray(rxDictSpecieses) && Array.isArray(rxDictGroupSpecs)) {\r\n\r\n        optionsSpeciesesData = rxDictGroupSpecs.map(itemGroup => {\r\n            return {\r\n                label: itemGroup.groupname,\r\n                options: rxDictSpecieses.map(spec => {\r\n                    if (itemGroup.id === spec.groupspec) {\r\n                        return {\r\n                            value: spec.id,\r\n                            label: spec.localname,\r\n                            speciesname: spec.speciesname,\r\n                            typespec: spec.typespec\r\n                            //color: '#FF8B00'\r\n                        }\r\n                    }\r\n                }).filter(e => e) // removes all undefined items in result array\t\t\t \r\n            }\r\n        })\r\n    }\r\n\r\n\r\n    let optionsStatusesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictStatuses)) {\r\n        optionsStatusesData = rxDictStatuses.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.statusname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsCareTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictCareTypes)) {\r\n        optionsCareTypesData = rxDictCareTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.carename,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsRemarksData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictRemarks)) {\r\n        optionsRemarksData = rxDictRemarks.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.remarkname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsPlaceTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictPlaceTypes)) {\r\n        //console.log('rxDictPlaceTypes', rxDictPlaceTypes)\r\n        optionsPlaceTypesData = rxDictPlaceTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.placename,\r\n            };\r\n        });\r\n    }\r\n\r\n    let optionsIrrigationMethodsData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictIrrigationMethods)) {\r\n        optionsIrrigationMethodsData = rxDictIrrigationMethods.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.irrigationname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tsetValue,\r\n\t\tgetValues,\r\n\t\tformState: { errors },\r\n        trigger\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\t\t\t\r\n            id: \"\",\r\n            latitude: \"\",\r\n            longitude: \"\",\r\n            species: \"\",\r\n            speciescomment: \"\",\r\n            comment: \"\",\r\n            placetype: \"\",\r\n            irrigationmethod: \"\",            \r\n            dateplanted: \"\",\r\n            googlestreeturl: \"\",\r\n            \r\n            height: \"\",\r\n            crowndiameter: \"\",\r\n            trunkgirth: \"\",\r\n            status: \"\",\r\n            remarks: \"\",\r\n            recommendations: \"\",\r\n            photo1: \"\",\r\n            photo2: \"\",\r\n            photo3: \"\"\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n\tasync function onSubmitBefore(e: any) {\r\n\t\te.preventDefault();\t\t\t\t\r\n\t\t\r\n        const result = await trigger(); // programmaticaly run validation\r\n        if (result) {\r\n            //@ts-ignore\r\n            uploadPhotosRef.current.uploadPhotos(); // component uploadPhotos has a callback to start a submit of the form, when uploading has been finished.\r\n        }\r\n\r\n\r\n\r\n        /*\r\n        //setPhoto1StateUpload({...photo1StateUpload, start: true})\r\n\r\n\t\tlet p1 = false;\r\n\t\tlet p2 = false;\r\n\t\tlet p3 = false;\r\n\t\t//@ts-ignore\r\n\t\tif (photo1Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp1=photo1Ref.current.uploadFile();\r\n\t\t}\t\r\n\r\n\t\t//@ts-ignore\r\n\t\tif (photo2Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp2=photo2Ref.current.uploadFile();\r\n\t\t}\r\n\t\t\r\n\t\t//@ts-ignore\r\n\t\tif (photo3Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp3=photo3Ref.current.uploadFile();\r\n\t\t}\t\t\r\n\r\n\r\n\t\tconsole.log('p', p1, p2, p3);\r\n\t\tif (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n\t\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t} else {\r\n\t\t\te.preventDefault();\r\n\t\t\tsetUploadedPhoto1(!p1);\r\n\t\t\tsetUploadedPhoto2(!p2);\r\n\t\t\tsetUploadedPhoto3(!p3);\r\n\t\t\t//console.log('cons', {photo1: !p1, photo2: !p2, photo3: !p3, data: data})\r\n\t\t\t//setPhotosUploaded({photo1: !p1, photo2: !p2, photo3: !p3, data: data});\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n        */\r\n\t}\r\n\r\n\tconst onCallbackDone = () => {\r\n\t\tconsole.log('DONE');\r\n\t\thandleSubmit(prepareOnSubmitTree)();\t\r\n\t}    \r\n\r\n\r\n\r\n\tfunction prepareOnSubmitTree(data: {\r\n        id: any;\r\n        latitude: string;\r\n        longitude: string;\r\n        species: any;\r\n        speciescomment: string;\r\n        comment: string;\r\n        placetype: any;\r\n        irrigationmethod: any;\r\n        dateplanted: any;\r\n        googlestreeturl: string | null;\r\n\r\n        inspection?: any;\r\n        height: any;\r\n        crowndiameter: any;\r\n        trunkgirth: any;\r\n        status: any;\r\n        remarks: any;\r\n        recommendations: any;\r\n        photo1: string | null; \r\n        photo2: string | null;\r\n        photo3: string | null;\r\n    }) {\r\n\t\t//let dataResult: any = {};\r\n        //console.log('data', data);\r\n\r\n\r\n        if (!data.dateplanted) {\r\n            data.dateplanted = null;    \r\n        }\r\n\r\n        if (rxNewMarkerState?.visible === true) {\r\n            // new record                \r\n            data.species = data.species.value;\r\n            data.placetype = data.placetype.value;\r\n            data.irrigationmethod = data?.irrigationmethod?.value;            \r\n\r\n            // make inspection\r\n            if (data?.height && data?.crowndiameter && data?.trunkgirth && data?.status) {\r\n                data.inspection = {\r\n                    height: parseInt(data.height),\r\n                    crowndiameter: parseFloat(data.crowndiameter),\r\n                    trunkgirth: parseInt(data.trunkgirth),\r\n                    status: data.status.value,  \r\n                    \r\n                    photo1: data.photo1,          \r\n                    photo2: data.photo2, \r\n                    photo3: data.photo3, \r\n                };\r\n\r\n                if (data?.remarks && Array.isArray(data.remarks)) {\r\n                    data.inspection.remarks = [];\r\n                    data.remarks.forEach(element => {\r\n                        data.inspection.remarks.push(element.value);     \r\n                    });                                           \r\n                }\r\n                \r\n                if (data?.recommendations && Array.isArray(data.recommendations)) {\r\n                    data.inspection.recommendations = [];\r\n                    data.recommendations.forEach(element => {\r\n                        data.inspection.recommendations.push(element.value);     \r\n                    });                                           \r\n                }                             \r\n            }   \r\n\r\n            delete data.id;\r\n            delete data.height;\r\n            delete data.crowndiameter;\r\n            delete data.trunkgirth;\r\n            delete data.status; \r\n            delete data.remarks;\r\n            delete data.recommendations; \r\n\r\n            console.log('onSubmitTree', data);\r\n            onSubmitTree(data);\r\n\r\n        } else {\r\n            // edit\r\n            data.species = data.species.value;\r\n            data.placetype = data.placetype.value;\r\n            data.irrigationmethod = data?.irrigationmethod?.value; \r\n            \r\n            console.log('dataedit', data);\r\n            onSubmitTree(data);\r\n        }\r\n\r\n        \r\n    }        \r\n\r\n\r\n    const customStyles = {\r\n\t\t//@ts-ignore\r\n\t\toption: (styles, { data, isSelected, isFocused, isDisabled  }) => {\r\n\t\t\t//const color = chroma(data.color);\r\n\t\t\treturn {\r\n\t\t\t  ...styles,\r\n\t\t\t  paddingLeft: 20,\r\n\t\t\t  //backgroundColor: data.typespec === 2 ? '#EEFFEE' : undefined,\r\n              backgroundColor: isDisabled\r\n              ? undefined\r\n              : isSelected\r\n              ? \"#606060\"\r\n              : isFocused\r\n              ? \"#EEEEEE\"\r\n              : data.typespec === 2 ? '#EEFFEE' : undefined,\r\n\t\t\t};\r\n\t\t  },\r\n\t  } \r\n\r\n\r\n\r\n\t  const Option = (props: any) => {\r\n\t\tconst { label, speciesname } = props.data;\r\n\t\treturn (\r\n\t\t  <components.Option {...props}>\r\n\t\t\t<span>{label}</span> <span style={{ color: \"darkgray\" }}>{speciesname}</span>\r\n\t\t  </components.Option>\r\n\t\t);\r\n\t  };\r\n\r\n\r\n\r\n\r\n    function OnButtonTableClick (rowData: any, idButton: string) {    \r\n        console.log(idButton, rowData);\r\n        if (idButton==='edit') {\r\n            onEditInsp(rowData);\r\n        } else if (idButton==='photo') {\r\n            onClickInspPhotos(rowData);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    /*\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\t    \r\n    */\r\n\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form\r\n\t\t\t\tclassName=\"m-1\"\r\n\t\t\t\tonSubmit={handleSubmit(prepareOnSubmitTree)}\r\n\t\t\t>\r\n\t\t\t\t<Row>\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formCoordEditButton\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.latLng\")}{\" \"}\r\n\t\t\t\t\t\t\t<a href=\"#\">\r\n\t\t\t\t\t\t\t\t<i className=\"fas fa-edit align-middle\"></i>\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLatTree\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"latitude\"\r\n                            rules={{ required: true }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.latitude}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formLngTree\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"longitude\"\r\n                            rules={{ required: true }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\tstep=\"any\"\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\tisInvalid={!!errors.longitude}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Form.Control.Feedback type=\"invalid\">\r\n\t\t\t\t\t\t\t{t<string>(\"words.requiredField\")}\r\n\t\t\t\t\t\t</Form.Control.Feedback>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formSpecies\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.species\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"species\"\r\n                        rules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\tisSearchable={true}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsSpeciesesData}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tstyles={customStyles}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\tgetOptionLabel={(option) =>`${option.label} - ${option.speciesname}`}\r\n\t\t\t\t\t\t\t\tcomponents={{ Option }}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n                    <p className=\"requiredField\">{errors.species?.message}</p>\r\n\t\t\t\t</Form.Group>\r\n\r\n                \r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formSpeciesCommentTree\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.speciescomment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"speciescomment\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n                \r\n\t\t\t\t<Form.Group\r\n\t\t\t\t\tcontrolId=\"formCommentTree\"\r\n\t\t\t\t\tclassName=\"mt-3\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.comment\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"comment\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\tas=\"textarea\"\r\n\t\t\t\t\t\t\t\trows={3}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formPlaceTypeTree\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.placetype\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"placetype\"\r\n                            rules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n                                    options={optionsPlaceTypesData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n                        <p className=\"requiredField\">{errors.placetype?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIrrigationmethodTree\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.irrigationmethod\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"irrigationmethod\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t\tisClearable\r\n\t\t\t\t\t\t\t\t\tisSearchable={false}\r\n\t\t\t\t\t\t\t\t\t//@ts-ignore\r\n                                    options={optionsIrrigationMethodsData}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n\r\n\t\t\t\t<Row className=\"mt-3\">\r\n                    <Form.Group as={Col} controlId=\"formDatePlantedTree\">\r\n\t\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.dateplanted\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"dateplanted\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control type=\"date\" {...field} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n                    <Form.Group as={Col} controlId=\"formGoogleStreetUrlTree\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.googlestreeturl\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"googlestreeturl\"\r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    {...field}\r\n                                />\r\n                            )}\r\n                        />\r\n                    </Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\r\n                {rxNewMarkerState.visible ? \r\n                <>\r\n                    <Form.Group className=\"mt-4\" controlId=\"formFirstInspectionTree\">\r\n                        <Form.Label>\r\n                            <b>{t<string>(\"sidebar.treeTab.firstInspection\")}</b>\r\n                        </Form.Label>\r\n\r\n                    </Form.Group>   \r\n                    \r\n                    <Row className=\"mt-3\">\r\n                        <Form.Group as={Col} controlId=\"formHeightTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.heightTree\")}\r\n                            </Form.Label>\r\n                            <Controller\r\n                                name=\"height\"\r\n                                rules={{ required: t<string>(\"words.requiredField\") }}                               \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"\r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n                            <p className=\"requiredField\">{errors.height?.message}</p>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formDiameterTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.diameterTree\")}\r\n                            </Form.Label>\r\n                            <Controller\r\n                                name=\"crowndiameter\"\r\n                                rules={{ required: t<string>(\"words.requiredField\"), max: 99, pattern: /^\\d+([.]\\d)?$/ }}                              \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"\r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n\t\t\t\t\t\t{errors.crowndiameter?.message && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">{errors.crowndiameter?.message}</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"max\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Maximum value is 99</p>\r\n\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"pattern\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Allow only one decimal point</p>\r\n\t\t\t\t\t\t}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formGirthTree\">\r\n                            <Form.Label className=\"required\">\r\n                                {t<string>(\"sidebar.treeTab.girthTree\")}\r\n                            </Form.Label>\r\n                            <Controller\r\n                                name=\"trunkgirth\"\r\n                                rules={{ required: t<string>(\"words.requiredField\") }}                                \r\n                                control={control}\r\n                                render={({ field }) => (\r\n                                    <Form.Control\r\n                                        type=\"number\"\r\n                                        size=\"sm\"    \r\n                                        {...field}\r\n                                    />\r\n                                )}\r\n                            />\r\n                            <p className=\"requiredField\">{errors.trunkgirth?.message}</p>\r\n                        </Form.Group>                        \r\n\t\t\t\t    </Row>  \r\n\r\n                    <Form.Group controlId=\"formStatusTree\" className=\"mt-3\">\r\n                        <Form.Label className=\"required\">\r\n                            {t<string>(\"sidebar.treeTab.status\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"status\"\r\n                            rules={{ required: t<string>(\"words.requiredField\") }} \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    //@ts-ignore\r\n                                    options={optionsStatusesData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n                        <p className=\"requiredField\">{errors.status?.message}</p>\r\n\t\t\t\t    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formRemarksTree\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.remarks\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"remarks\"                            \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    isMulti\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    //@ts-ignore\r\n                                    options={optionsRemarksData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n\t\t\t\t    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"formCareTypesTree\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.careTypes\")}\r\n                        </Form.Label>\r\n                        <Controller\r\n                            name=\"recommendations\"                            \r\n                            control={control}\r\n                            render={({ field }) => (\r\n                                <Select\r\n                                    {...field}\r\n                                    isMulti\r\n                                    placeholder={t<string>(\"words.select\")}\r\n                                    //@ts-ignore\r\n                                    options={optionsCareTypesData}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                                />\r\n                            )}\r\n                        />\r\n\t\t\t\t    </Form.Group>    \r\n\r\n\r\n                    <UploadPhotos \r\n                        controlFromUseForm={control}\r\n                        signingS3Url={signingS3Url}\r\n                        onCallbackDone={onCallbackDone}\t\r\n                        ref={uploadPhotosRef}\r\n\t\t\t\t    />\r\n                </>\r\n\r\n                \r\n                : <>\r\n                    <Form.Group controlId=\"formInspActTable\" className=\"mt-3\">\r\n                        <Form.Label>\r\n                            {t<string>(\"sidebar.treeTab.inspActionsTable\")}\r\n                        </Form.Label>\r\n                        \r\n                        <TableList columns={\r\n                            [\r\n                                {\r\n                                    field: \"#\",\r\n                                    headerName: \"\",\r\n                                },                            \r\n                                {\r\n                                    field: \"datetime\",\r\n                                    headerName: \"Дата\",\r\n                                    width: \"40%\",\r\n                                    sortable: true,\r\n                                    dateTimeOption: \"onlyDate\",\r\n                                },\r\n                                {\r\n                                    field: \"typeData\",\r\n                                    headerName: \"Тип\",\r\n                                    width: \"35%\"\r\n                                },    \r\n                                {\r\n                                    field: \"buttons\",\r\n                                    headerName: \"Actions\",\r\n                                    width: \"25%\"\r\n                                },             \r\n                            ]\r\n                        } data={inspections} sortField={\"datetime\"} sortAsc={false} size={\"sm\"} OnClickButtons={OnButtonTableClick}/>\r\n\r\n                    </Form.Group>\r\n\r\n\r\n                    <Row className=\"mt-3\">\r\n                        <Form.Group as={Col} controlId=\"formNewInspButton\">\r\n                            <Button\r\n                                style={{width: \"100%\"}}\r\n                                onClick={() => dataTreeForm?.id && onNewInsp(dataTreeForm.id)}\r\n                                variant=\"light\"\r\n                            >\r\n                                {t<string>(\"sidebar.treeTab.newInspButton\")}\r\n                            </Button>{\" \"}\r\n                        </Form.Group>\r\n\r\n                        <Form.Group as={Col} controlId=\"formNewActButton\">\r\n                            <Button\r\n                                style={{width: \"100%\"}}\r\n                                //onClick={}\r\n                                variant=\"light\"\r\n                            >\r\n                                {t<string>(\"sidebar.treeTab.newActButton\")}\r\n                            </Button>{\" \"}\r\n                        </Form.Group>\r\n                    </Row>\r\n                </>}\r\n\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"id\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(true)}\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.delete\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button \r\n                        onClick={onCloseTree} \r\n                        variant=\"secondary\"\r\n                    >\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.close\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button                        \r\n\t\t\t\t\t\ttype=\"submit\"\r\n                        onClick={ rxNewMarkerState.visible ? onSubmitBefore : undefined }\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"110px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.save\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Form>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showModalDelete}\r\n\t\t\t\tonHide={() => setShowModalDelete(false)}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{t<string>(\"words.deleting\")}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>{t<string>(\"sidebar.treeTab.confirmDeleting\")}</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowModalDelete(false);\r\n\t\t\t\t\t\t\tonDeleteTree(parseInt(getValues(\"id\").toString()));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.delete\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n\r\n}\r\n\r\n\r\nexport default FormTree","import { useState, useEffect, useRef } from \"react\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { Form, Button, Card, Row, Col, Modal } from \"react-bootstrap\";\r\nimport Datetime from \"react-datetime\";\r\nimport Select, { components } from \"react-select\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../reducers/index\";\r\nimport { InspItem } from \"../interfaces\";\r\nimport UploadPhotos from \"./UploadPhotos\"\r\n//import ImageS3Upload from \"./ImageS3Upload\";\r\n//import noPhotoImage from \"./images/no-photo.png\";\r\n\r\n\r\n\r\n\r\ninterface FormInspProps {\r\n\tonSubmitInsp: (data: {}) => void;\r\n\tonDeleteInsp: (data: InspItem | null) => void;\r\n\tonCloseInsp: () => void;\r\n\tdataInspForm: InspItem | null;\r\n\tcity: string;\r\n\tsigningS3Url: string;\r\n}\r\n\r\n\r\nlet test = 1;\r\n\r\nconst FormInspection = ({\r\n\tonSubmitInsp,\r\n\tonDeleteInsp,\r\n\tonCloseInsp,\r\n\tdataInspForm,\r\n\tcity,\r\n\tsigningS3Url\r\n}: FormInspProps) => {\r\n\r\n    \t\r\n\tconst [showModalDelete, setShowModalDelete] = useState(false);\r\n\r\n\tconst rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\r\n    const rxDictCareTypes = useSelector((state: RootState) => state.dataReducer.dictCareTypes);\r\n\tconst rxDictRemarks = useSelector((state: RootState) => state.dataReducer.dictRemarks);    \r\n    const { t } = useTranslation();\r\n\r\n\t//const [uploadedPhoto1, setUploadedPhoto1] = useState(false);\r\n\t//const [uploadedPhoto2, setUploadedPhoto2] = useState(false);\r\n\t//const [uploadedPhoto3, setUploadedPhoto3] = useState(false);\t\r\n\t\r\n\t//const photo1Ref = useRef(); // to be able to call method uploadFile\r\n\t//const photo2Ref = useRef();\r\n\t//const photo3Ref = useRef();\r\n\r\n\tconst uploadPhotosRef = useRef();\r\n\r\n\tconst {\t\t\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tsetValue,\r\n\t\tgetValues,\r\n\t\tformState: { errors, isValid },\r\n\t\ttrigger \r\n\t} = useForm({ \r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\t\t\t\r\n            id: \"\",  \r\n            treeId: \"\",          \r\n            height: \"\",\r\n            crowndiameter: \"\",\r\n            trunkgirth: \"\",\r\n            status: \"\",\r\n            remarks: [],\r\n            recommendations: [],\r\n\t\t\tphoto1: \"\",\r\n\t\t\tphoto2: \"\",\r\n\t\t\tphoto3: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n    useEffect(()=>{\r\n\t\tlet formData: any = {};\r\n\r\n        formData.id = dataInspForm?.id;  \r\n        formData.treeId = dataInspForm?.tree; \r\n        formData.height = dataInspForm?.height; \r\n        formData.crowndiameter = dataInspForm?.crowndiameter; \r\n        formData.trunkgirth = dataInspForm?.trunkgirth; \r\n        \r\n\t\tlet status = dataInspForm?.status;\r\n\t\tif (status) {\r\n\t\t\tformData.status = optionsStatusesData.find(\t\t\t\t\r\n\t\t\t\t(item) => item.value === status\t\r\n\t\t\t);\r\n\t\t}   \r\n  \r\n        \r\n\t\tlet remarks = dataInspForm?.remarks;\r\n\t\tif (remarks) {\r\n\t\t\t//let remarksValues = remarks.map((item) => item);\r\n\t\t\tformData.remarks = optionsRemarksData.filter(\r\n\t\t\t\t//@ts-ignore\r\n                (item) => remarks.includes(item.value)\r\n\t\t\t);\r\n\t\t}  \r\n        \r\n\t\tlet recommendations = dataInspForm?.recommendations;\r\n\t\tif (recommendations) {\r\n\t\t\t//let remarksValues = remarks.map((item) => item);\r\n\t\t\tformData.recommendations = optionsCareTypesData.filter(\r\n\t\t\t\t//@ts-ignore\r\n                (item) => recommendations.includes(item.value)\r\n\t\t\t);\r\n\t\t}        \r\n\r\n\r\n\t\tif (dataInspForm?.photo1) {\r\n\t\t\tformData.photo1 = dataInspForm.photo1;\r\n\t\t} else {\r\n\t\t\tformData.photo1 = '';\r\n\t\t}\r\n\t\tif (dataInspForm?.photo2) {\r\n\t\t\tformData.photo2 = dataInspForm.photo2;\r\n\t\t} else {\r\n\t\t\tformData.photo2 = '';\r\n\t\t}\r\n\t\tif (dataInspForm?.photo3) {\r\n\t\t\tformData.photo3 = dataInspForm.photo3;\r\n\t\t} else {\r\n\t\t\tformData.photo3 = '';\r\n\t\t}\t\t\r\n\t\t\r\n        \r\n        reset(formData, { keepDefaultValues: true });\r\n\t\tconsole.log('dataInspForm');\r\n\r\n    }, [dataInspForm]);\r\n\r\n\r\n\t/*\r\n\tuseEffect(() => {\r\n\t\tif (uploadedPhoto1 && uploadedPhoto2 && uploadedPhoto3) {\t\t\t\r\n\t\t\tsetUploadedPhoto1(false);\r\n\t\t\tsetUploadedPhoto2(false);\r\n\t\t\tsetUploadedPhoto3(false);\r\n\r\n\t\t\thandleSubmit(prepareOnSubmitInsp)();\r\n\t\t}\r\n\t}, [uploadedPhoto1, uploadedPhoto2, uploadedPhoto3]);\t\r\n\t*/\r\n\r\n\r\n\r\n\r\n    let optionsStatusesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictStatuses)) {\r\n        optionsStatusesData = rxDictStatuses.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.statusname,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsCareTypesData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictCareTypes)) {\r\n        optionsCareTypesData = rxDictCareTypes.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.carename,\r\n            };\r\n        });\r\n    }\t\r\n\r\n    let optionsRemarksData: {value: number; label: string}[] = [];\r\n    if (Array.isArray(rxDictRemarks)) {\r\n        optionsRemarksData = rxDictRemarks.map((x) => {\r\n            return {\r\n                value: x.id,\r\n                //label: t(`sidebar.filterTab.maneuversList.${x.maneuvername}`),\r\n                label: x.remarkname,\r\n            };\r\n        });\r\n    }    \r\n\r\n\r\n\r\n\r\n\tasync function onSubmitBefore(e: any) {\r\n\t\te.preventDefault();\t\t\t\t\r\n\t\tconst result = await trigger(); // programmaticaly run validation\r\n\t\tif (result) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tuploadPhotosRef.current.uploadPhotos(); // component uploadPhotos has a callback to start a submit of the form, when uploading has been finished.\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t/*\r\n\t\tlet p1 = false;\r\n\t\tlet p2 = false;\r\n\t\tlet p3 = false;\r\n\t\t//@ts-ignore\r\n\t\tif (photo1Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp1=photo1Ref.current.uploadFile();\r\n\t\t}\t\r\n\r\n\t\t//@ts-ignore\r\n\t\tif (photo2Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp2=photo2Ref.current.uploadFile();\r\n\t\t}\r\n\t\t\r\n\t\t//@ts-ignore\r\n\t\tif (photo3Ref?.current?.uploadFile) {\r\n\t\t\t//@ts-ignore\r\n\t\t\tp3=photo3Ref.current.uploadFile();\r\n\t\t}\t\t\r\n\r\n\r\n\t\tconsole.log('p', p1, p2, p3);\r\n\t\tif (!p1 && !p2 && !p3) { // there is no photo to upload, so just submit form\r\n\t\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t} else {\r\n\t\t\te.preventDefault();\r\n\t\t\tsetUploadedPhoto1(!p1);\r\n\t\t\tsetUploadedPhoto2(!p2);\r\n\t\t\tsetUploadedPhoto3(!p3);\r\n\t\t}\t\t\r\n\t\t\r\n\t\t//handleSubmit(prepareOnSubmitInsp)()\r\n\t\t*/\r\n\t}\r\n\r\n\tfunction prepareOnSubmitInsp(data: {\r\n        id: any;  \r\n        treeId: any;      \r\n        height: any;\r\n        crowndiameter: any;\r\n        trunkgirth: any;\r\n        status: any;\r\n        remarks: any;\r\n        recommendations: any;\r\n        //photo1: any;\r\n        //photo2: any;\r\n        //photo3: any;\r\n    }) {\r\n\r\n\t\tconsole.log('submit', data);\r\n\r\n        data.height = parseInt(data.height);\r\n        data.crowndiameter = parseFloat(data.crowndiameter);\r\n        data.trunkgirth = parseInt(data.trunkgirth);\r\n        data.status = data.status.value;\r\n\r\n        if (data?.remarks && Array.isArray(data.remarks)) {\r\n            let remarks: number[] = [];\r\n            data.remarks.forEach((element:{value: number; label: string}) => {\r\n                remarks.push(element.value);     \r\n            }); \r\n            data.remarks = remarks;                                          \r\n        }\r\n\r\n        if (data?.recommendations && Array.isArray(data.recommendations)) {\r\n            let recommendations: number[] = [];\r\n            data.recommendations.forEach((element:{value: number; label: string}) => {\r\n                recommendations.push(element.value);     \r\n            }); \r\n            data.recommendations = recommendations;                                          \r\n        }  \t\t\r\n\r\n\t\tonSubmitInsp(data);\r\n\r\n    };\r\n\r\n\r\n\t/*\r\n\tconst onFinishPhoto1 = () => {\r\n\t\tconsole.log('onFinishPhoto1');\r\n\t\tsetUploadedPhoto1(true);\r\n\t\t//setPhotosUploaded({...photosUploaded, photo1: true});\t\r\n\t}\r\n\tconst onFinishPhoto2 = () => {\r\n\t\tconsole.log('onFinishPhoto2');\r\n\t\tsetUploadedPhoto2(true);\r\n\t\r\n\t\t//setPhotosUploaded({photo1: photosUploaded.photo1, photo2: true, photo3: photosUploaded.photo3, data: photosUploaded.data});\r\n\t\t//setPhotosUploaded({...photosUploaded, photo2: true});\r\n\t}\r\n\tconst onFinishPhoto3 = () => {\r\n\t\tconsole.log('onFinishPhoto3');\r\n\t\t//setPhotosUploaded({...photosUploaded, photo3: true});\r\n\t\tsetUploadedPhoto3(true);\r\n\t}\t\r\n\t*/\r\n\r\n\r\n\tconst onUploadError = (e: any) => {\r\n\t\tconsole.log('onUploadError', e);\r\n\t}\r\n\r\n\r\n\tconst onCallbackDone = () => {\r\n\t\tconsole.log('DONE');\r\n\t\thandleSubmit(prepareOnSubmitInsp)();\t\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Form className=\"m-1\" onSubmit={handleSubmit(prepareOnSubmitInsp)}>\t\t\t\t\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formHeightTree\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.heightTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"height\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t)}\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"requiredField\">{errors.height?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formDiameterTree\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.diameterTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"crowndiameter\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\"), max: 99, pattern: /^\\d+([.]\\d)?$/ }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t{errors.crowndiameter?.message && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">{errors.crowndiameter?.message}</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"max\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Maximum value is 99</p>\r\n\t\t\t\t\t\t}\t\r\n\r\n\t\t\t\t\t\t{errors.crowndiameter?.type === \"pattern\" && \r\n\t\t\t\t\t\t\t<p className=\"requiredField\">Allow only one decimal point</p>\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formGirthTree\">\r\n\t\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.girthTree\")}\r\n\t\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"trunkgirth\"\r\n\t\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<p className=\"requiredField\">{errors.trunkgirth?.message}</p>\r\n\t\t\t\t\t</Form.Group>\r\n\t\t\t\t</Row>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formStatusTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label className=\"required\">\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.status\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"status\"\r\n\t\t\t\t\t\trules={{ required: t<string>(\"words.requiredField\") }}\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsStatusesData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<p className=\"requiredField\">{errors.status?.message}</p>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formRemarksTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.remarks\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"remarks\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsRemarksData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t<Form.Group controlId=\"formCareTypesTree\" className=\"mt-3\">\r\n\t\t\t\t\t<Form.Label>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.treeTab.careTypes\")}\r\n\t\t\t\t\t</Form.Label>\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"recommendations\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\tisMulti\r\n\t\t\t\t\t\t\t\tplaceholder={t<string>(\"words.select\")}\r\n\t\t\t\t\t\t\t\t//@ts-ignore\r\n\t\t\t\t\t\t\t\toptions={optionsCareTypesData}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\r\n\r\n\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdInsp\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"id\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>\t\t\t\t\r\n\r\n\r\n\t\t\t\t<UploadPhotos \r\n\t\t\t\t\tcontrolFromUseForm={control}\r\n\t\t\t\t\tsigningS3Url={signingS3Url}\r\n\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\tonCallbackDone={onCallbackDone}\t\r\n\t\t\t\t\tref={uploadPhotosRef}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t{/*\r\n\t\t\t\t<Row className=\"mt-3\">\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp1\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo1\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\r\n\t\t\t\t\t\t\t\t\t//startUploadState={photo1StateUpload.start}\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\t\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto1}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo1Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp2\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo2\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\t\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto2}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo2Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group as={Col} controlId=\"formIdInsp3\" className=\"mt-3\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"photo3\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\r\n\t\t\t\t\t\t\t\t<ImageS3Upload  \r\n\t\t\t\t\t\t\t\t\tsigningUrl={signingS3Url}\r\n\t\t\t\t\t\t\t\t\tautoUpload={false}\r\n\t\t\t\t\t\t\t\t\temptyPhoto={noPhotoImage}\r\n\t\t\t\t\t\t\t\t\tserverPhoto={dataInspForm?.photoServer}\r\n\t\t\t\t\t\t\t\t\tonFinish={onFinishPhoto3}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\tref={photo3Ref}\r\n\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t</Row>\r\n\t\t\t\t*/}\r\n\r\n\t\t\t\t<Form.Group controlId=\"formIdTreeInsp\" className=\"mt-3\">\r\n\t\t\t\t\t<Controller\r\n\t\t\t\t\t\tname=\"treeId\"\r\n\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\ttype=\"number\"\r\n\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\tmin=\"0\"\r\n\t\t\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Form.Group>      \r\n\r\n\r\n\r\n\t\t\t\t<div className=\"mt-4 me-2 float-end\">\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(true)}\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t> \r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.delete\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button \r\n                        onClick={onCloseInsp} \t\t\t\t\t\r\n                        variant=\"secondary\"\r\n                    >\r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.close\")}\r\n\t\t\t\t\t</Button>{\" \"}\r\n\t\t\t\t\t<Button                        \r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tonClick={onSubmitBefore}\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\tstyle={{ minWidth: \"110px\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"sidebar.inspTab.save\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\r\n\r\n\r\n\t\t\t</Form>\r\n\r\n\t\t\t<Modal\r\n\t\t\t\tshow={showModalDelete}\r\n\t\t\t\tonHide={() => setShowModalDelete(false)}\r\n\t\t\t>\r\n\t\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t\t<Modal.Title>{t<string>(\"words.deleting\")}</Modal.Title>\r\n\t\t\t\t</Modal.Header>\r\n\t\t\t\t<Modal.Body>{t<string>(\"sidebar.inspTab.confirmDeleting\")}</Modal.Body>\r\n\t\t\t\t<Modal.Footer>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"light\"\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetShowModalDelete(false);\r\n\t\t\t\t\t\t\t//onDeleteInsp(parseInt(getValues(\"id\").toString()));\r\n                            onDeleteInsp(dataInspForm);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.delete\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"secondary\"\r\n\t\t\t\t\t\tonClick={() => setShowModalDelete(false)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"words.cancel\")}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Modal.Footer>\r\n\t\t\t</Modal>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FormInspection;\r\n","import Carousel from \"react-bootstrap/Carousel\";\r\nimport Modal from \"react-bootstrap/Modal\";\r\n\r\n\r\ninterface ImageSliderProps {\r\n    visible: boolean;\r\n    setVisible: any;\r\n    images: string[];\r\n} \r\n\r\nfunction ImageSlider({\r\n    visible,\r\n    setVisible,\r\n    images\r\n}: ImageSliderProps) {\r\n  return (\r\n    \r\n    \r\n    <Modal\r\n        show={visible}\r\n        onHide={() => setVisible({visible: false, images:[]})}\r\n        //size=\"lg\"\r\n        //@ts-ignore\r\n        dialogClassName=\"modal-90w\"       \r\n        aria-labelledby=\"example-custom-modal-styling-title\"\r\n    >\r\n        <Modal.Body>\r\n            <Carousel interval={null}>\r\n                {                \r\n                    images.map((photo) => \r\n                        <Carousel.Item key={photo} >\r\n                            <img\r\n                                className=\"d-block w-100\"\r\n                                src={photo}                                               \r\n                            />\r\n                        </Carousel.Item>                    \r\n                    )                \r\n                }                \r\n            </Carousel>\r\n        </Modal.Body>\r\n    </Modal>\r\n\r\n  )\r\n}\r\n\r\nexport default ImageSlider","import { useState, useEffect } from 'react'\r\nimport { Form, Button, FloatingLabel, Modal } from \"react-bootstrap\";\r\nimport { useForm, Controller  } from 'react-hook-form'\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface Credentials {\r\n\tusername: string; \r\n\tpassword: string; \r\n\trememberme: boolean;\r\n} \r\n\r\n\r\ninterface LoginModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\nconst LoginModalForm = ({setAuthToken}:LoginModalFormProps) => {\r\n\tconst dispatch = useDispatch();\r\n\tconst rxLoginModalShow = useSelector((state: RootState) => state.uiReducer.loginModalShow)\r\n\r\n\tconst [showWrongPassword, setShowWrongPassword] = useState(false);\r\n\tconst { t } = useTranslation();\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\r\n\t\tsetShowWrongPassword(false);\r\n\t}, [rxLoginModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\trememberme: false,\r\n\t\t},\r\n\t});\r\n\r\n\tasync function loginUser(credentials: Credentials) {\r\n\t\tconsole.log(credentials)\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}token/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\t\t}).then((data) => {\r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\t//data.rememberme = credentials.rememberme\r\n\t\t\t\t\tsetAuthToken(data);\r\n\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\tsetShowWrongPassword(false);\r\n\r\n\t\t\t\t\t//setLoginModalShow(false)\r\n\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t});\r\n\t\t\t} else if (data.status === 401) {\r\n\t\t\t\tsetShowWrongPassword(true);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tconst OnSubmitForm = (data: Credentials) => {\r\n\t\tsetShowWrongPassword(false);\r\n\t\tlocalStorage.setItem(\"rememberme\", data.rememberme.toString());\r\n\t\tloginUser(data);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\t//show={show}\r\n\t\t\tshow={rxLoginModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actLoginModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>(\"loginForm.title\")}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formLogin\">\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingInput\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.username\")}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.username\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.password\")}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t(\"loginForm.password\")}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formBasicCheckbox\">\r\n\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\tname=\"rememberme\"\r\n\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t/* @ts-ignore */\r\n\t\t\t\t\t\t\t\t<Form.Check\r\n\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\tlabel={t<string>(\"loginForm.rememberMe\")}\r\n\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\t\t\t\t\t{showWrongPassword && (\r\n\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.wrongUsernamePassword\")}\r\n\t\t\t\t\t\t</Form.Text>\r\n\t\t\t\t\t)}\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>(\"loginForm.login\")}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t{/* {t('loginForm.dontHaveAccount')} <a href=\"#\" onClick={()=> { setLoginModalShow(false); setRegisterModalShow(true) } }>{t('loginForm.signUp')}</a> */}\r\n\t\t\t\t\t\t\t{t<string>(\"loginForm.dontHaveAccount\")}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(false));\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(true));\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>(\"loginForm.signUp\")}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default LoginModalForm;\r\n","import { useState, useEffect } from \"react\";\r\nimport { Form, Button, FloatingLabel, Modal, Col, Row } from \"react-bootstrap\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { useTranslation } from 'react-i18next'\r\n\r\nimport { useSelector, useDispatch } from 'react-redux'\r\nimport { actLoginModalShow, actRegisterModalShow } from '../actions'\r\nimport { RootState } from '../reducers/index'\r\n\r\n\r\n\r\ninterface RegisterModalFormProps {\r\n\tsetAuthToken: (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => void;\r\n}\r\n\r\n\r\ninterface RegisterData {\r\n\tusername: string;\r\n\temail: string;\r\n\tpassword: string;\r\n\tpassword2: string;\r\n\tfirst_name: string;\r\n\tlast_name: string;\r\n} \r\n\r\n\r\n\r\n\r\nconst RegisterModalForm = ({setAuthToken}: RegisterModalFormProps) => {\r\n\r\n\tconst dispatch = useDispatch();\r\n\tconst rxRegisterModalShow = useSelector((state: RootState) => state.uiReducer.registerModalShow)\t\r\n\t\r\n\tconst { t } = useTranslation()\r\n\r\n\tuseEffect(() => {\r\n\t\treset();\t\r\n\t}, [rxRegisterModalShow]);\r\n\r\n\tconst {\r\n\t\tcontrol,\r\n\t\thandleSubmit,\r\n\t\treset,\r\n        setError,\r\n\t\tformState: { errors },\r\n\t} = useForm({\r\n\t\t//reValidateMode: 'onChange',\r\n\t\tdefaultValues: {\r\n\t\t\tusername: \"\",\r\n\t\t\temail: \"\",\r\n\t\t\tpassword: \"\",\r\n\t\t\tpassword2: \"\",\r\n\t\t\tfirst_name: \"\",\r\n\t\t\tlast_name: \"\",\r\n\t\t},\r\n\t});\r\n\r\n\r\n\r\n\r\n\tconst OnSubmitForm = (data: RegisterData) => {\r\n\t\tregisterUser(data);\r\n\t};\r\n\r\n\tasync function registerUser(credentials: RegisterData) {\t\t\r\n\t\treturn fetch(`${process.env.REACT_APP_API_URL}users/`, {\r\n\t\t\tmethod: \"POST\",\r\n\t\t\theaders: {\r\n\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t},\r\n\r\n\t\t\tbody: JSON.stringify(credentials),\r\n\r\n\t\t}).then((data) => {            \r\n\t\t\tif (data.status === 200) {\r\n\t\t\t\tdata.json().then((data) => {\t\r\n                    console.log('ok', data)\t\t\t\t\r\n                    //setRegisterModalShow(false);\r\n\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n                    setAuthToken(data.token) // after register make login\t\t\t\t\t\r\n\t\t\t\t});\r\n\r\n\t\t\t} else if (data.status >= 400) {\r\n\t\t\t\tdata.json().then((data) => {\r\n\t\t\t\t\tconsole.log(data)\r\n                \r\n                    for (const [key, value] of Object.entries(data)) {                \r\n                        //@ts-ignore\r\n\t\t\t\t\t\tsetError(key, {\r\n                            type: \"manual\",\r\n                            message: value,\r\n                        }); \r\n                    }                   \r\n\t\t\t\t});                \r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\t//{...props}\r\n\t\t\t//show={show}\r\n\t\t\tshow={rxRegisterModalShow}\r\n\t\t\t//onHide={onHide}\r\n\t\t\tonHide={() => dispatch(actRegisterModalShow(false))}\r\n\t\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\t\tcentered\r\n\t\t>\r\n\t\t\t<Modal.Header closeButton>\r\n\t\t\t\t<Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\t\t\t{t<string>('registerForm.title')}\r\n\t\t\t\t</Modal.Title>\r\n\t\t\t</Modal.Header>\r\n\t\t\t<Modal.Body>\r\n\t\t\t\t<Form onSubmit={handleSubmit(OnSubmitForm)}>\r\n\t\t\t\t\t<Form.Group className=\"mb-3\" controlId=\"formRegister\">\r\n\t\t\t\t\t\t\r\n                \r\n                        {errors?.username?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.username.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                        \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingUsername\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.username')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.username')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.username}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n                        \r\n                        {errors?.email?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore  message is array, but declared as string */}\r\n\t\t\t\t\t\t\t\t{errors.email.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}                          \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingEmail\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.email')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"email\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.email')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.email}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\r\n                        {errors?.password?.message && (\r\n\t\t\t\t\t\t\t<Form.Text className=\"text-danger\">\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t{/*@ts-ignore*/}\r\n\t\t\t\t\t\t\t\t{errors.password.message.map(value => <p key={value} className=\"mb-0\">{value}</p>)}\r\n\t\t\t\t\t\t\t</Form.Text>                           \r\n\t\t\t\t\t\t)}  \r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.password')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.password')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<FloatingLabel\r\n\t\t\t\t\t\t\tcontrolId=\"floatingPassword2\"\r\n\t\t\t\t\t\t\tlabel={t<string>('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\tname=\"password2\"\r\n\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\trules={{ required: true }}\r\n\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.confirmPassword')}\r\n\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.password2}\r\n\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</FloatingLabel>\r\n\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"first_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.firstNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.first_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\r\n\t\t\t\t\t\t\t<Col>\r\n\t\t\t\t\t\t\t\t<Controller\r\n\t\t\t\t\t\t\t\t\tname=\"last_name\"\r\n\t\t\t\t\t\t\t\t\tcontrol={control}\r\n\t\t\t\t\t\t\t\t\trules={{ required: false }}\r\n\t\t\t\t\t\t\t\t\trender={({ field }) => (\r\n\t\t\t\t\t\t\t\t\t\t<Form.Control\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t\tsize=\"sm\"\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder={t('registerForm.lastNameOptional')}\r\n\t\t\t\t\t\t\t\t\t\t\tisInvalid={!!errors.last_name}\r\n\t\t\t\t\t\t\t\t\t\t\t{...field}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Col>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</Form.Group>\r\n\r\n\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName=\"mb-3\"\r\n\t\t\t\t\t\tvariant=\"primary\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle={{ display: \"block\", width: \"100%\" }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{t<string>('registerForm.register')}\r\n\t\t\t\t\t</Button>\r\n\r\n\t\t\t\t\t<Form.Text className=\"text-muted mb-0\">\r\n\t\t\t\t\t\t<p className=\"text-center\">\r\n\t\t\t\t\t\t\t{t<string>('registerForm.alreadyHaveAccount')}{\" \"}\r\n\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\thref=\"#\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdispatch(actRegisterModalShow(false))\r\n\t\t\t\t\t\t\t\t\tdispatch(actLoginModalShow(true))\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{t<string>('registerForm.login')}\r\n\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</Form.Text>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal.Body>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default RegisterModalForm;\r\n","import \"./App.css\";\nimport L from 'leaflet'\n\nimport { useParams } from \"react-router-dom\";\nimport { useState, useEffect, useRef } from \"react\";\n\nimport MenuGlobal from \"./components_hl/MenuGlobal\";\nimport Map from \"./components_hl/Map\";\nimport Sidebar from \"./components/Sidebar\";\nimport Tabs from \"react-bootstrap/Tabs\";\nimport Tab from \"react-bootstrap/Tab\";\nimport Button from \"react-bootstrap/Button\";\n\nimport FormFilter from './components/FormFilter';\nimport FormTree from './components/FormTree';\nimport FormInspection from './components/FormInspection';\nimport ImageSlider from './components/ImageSlider';\n\nimport useAuthToken from \"./useAuthToken\";\nimport LoginModalForm from \"./components/LoginModalForm\";\nimport RegisterModalForm from \"./components/RegisterModalForm\";\nimport { useTranslation } from \"react-i18next\";\n\nimport { RootState, allReducers } from \"./reducers/index\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n\tactNewMarkerState,\n\tactIsMobileDevice,\n\tactShowSidebar,\n\tactCheckButtonNewMarker,\n\tactShowOkCancelMobileMarker,\n\tactShowTreeTab,\n\tactActiveTabKey,\n\tactDictStatuses,\n\tactDictSpecieses,\n\tactDictCareTypes,\n\tactDictRemarks,\n\tactDictPlaceTypes,\n\tactDictIrrigationMethods,\n\tactDictGroupSpecs, \n\tactDictTypeSpecs,\n\tactDataTrees,\n\tactDataFilters,\n\tactShowInspTab,\n} from \"./actions\";\nimport { TreeItem, InspItem } from \"./interfaces\";\n\nconst signingS3Url = `${process.env.REACT_APP_API_URL}citytree/s3/generate_signed_url/`;\n\nlet geojsonMarkerOptions_citytree = {\n    //renderer: myRenderer,\n    radius: 5,\n    fillColor: \"#008000\",\n    color: \"#008000\",\n    weight: 0,\n    opacity: 1,\n    fillOpacity: 0.5\n\t};\n\n\n\n\nfunction App() {\n\tconst paramsRouter = useParams();\n\tconst csrftoken = getCookie(\"csrftoken\");\n\n\t// redux\n\tconst dispatch = useDispatch();\n\tconst rxDataTrees = useSelector((state: RootState) => state.dataReducer.dataTrees);\n\tconst rxShowSidebar = useSelector((state: RootState) => state.uiReducer.showSidebar);\n\tconst rxShowOkCancelMobileMarker = useSelector((state: RootState) => state.uiReducer.showOkCancelMobileMarker);\n\tconst rxDataFilters = useSelector((state: RootState) => state.dataReducer.dataFilters);\n\tconst rxActiveTabKey = useSelector((state: RootState) => state.uiReducer.activeTabKey);\n\tconst rxShowTreeTab = useSelector((state: RootState) => state.uiReducer.showTreeTab);\n\tconst rxShowInspTab = useSelector((state: RootState) => state.uiReducer.showInspTab);\n\tconst rxDictStatuses = useSelector((state: RootState) => state.dataReducer.dictStatuses);\n\tconst rxCheckButtonHeatmap = useSelector((state: RootState) => state.uiReducer.checkButtonHeatmap);\n\n\tconst rxCheckButtonNewMarker = useSelector((state: RootState) => state.uiReducer.checkButtonNewMarker);\n\tconst rxIsMobileDevice = useSelector((state: RootState) => state.uiReducer.isMobileDevice);\n\n\tconst { authToken, setAuthToken } = useAuthToken();\n\tconst [screenWidth, setScreenWidth] = useState(window.innerWidth);\n\t//const [isMobileDevice, setIsMobileDevice] = useState(false)\n\tconst isMobileView = screenWidth <= 768; // show or hide sidebar at startup\n\n\tconst [dataTreeForm, setDataTreeForm] = useState<TreeItem | null>(null);\n\tconst [dataInspForm, setDataInspForm] = useState<InspItem | {tree: number} | null>(null);\n\tconst [imageSlider, setImageSlider] = useState<{visible: boolean; images: string[]}>({visible: false, images: []});\n\tconst { t } = useTranslation();\n\n\tlet dataHeatmapPoints: number[][] = []; // [[lat, lng, value],[lat, lng, value]...]\n\n\n\t\n\n\tuseEffect(() => {\n\t\t\n\t\tconst fetchSpecieses = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/specieses/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictSpecieses(data));\n\t\t}\t\t\n\n\t\tconst fetchCareTypes = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/caretypes/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictCareTypes(data));\n\t\t}\t\n\n\t\tconst fetchRemarks = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/remarks/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictRemarks(data));\n\t\t}\t\n\t\t\n\t\tconst fetchPlaceTypes = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/placetypes/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictPlaceTypes(data));\n\t\t}\t\t\n\n\t\tconst fetchIrrigationMethods = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/irrigationmethods/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictIrrigationMethods(data));\n\t\t}\t\n\t\t\n\t\tconst fetchGroupSpecs = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/groupspecs/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictGroupSpecs(data));\n\t\t}\t\n\t\t\n\t\tconst fetchTypeSpecs = async () => {\t\t\t\n\t\t\tconst url = `${process.env.REACT_APP_API_URL}citytree/dictionary/typespecs/`;\n\t\t\tconst res = await fetch(url);\n\t\t\tconst data = await res.json();\n\t\t\tdispatch(actDictTypeSpecs(data));\n\t\t}\t\t\n\n\t\tfetchSpecieses();\n\t\tfetchCareTypes();\n\t\tfetchRemarks();\n\t\tfetchPlaceTypes();\n\t\tfetchIrrigationMethods();\n\t\tfetchGroupSpecs();\n\t\tfetchTypeSpecs();\n\n\t\tif (authToken) {\n            checkAuthToken()\n        }\t\n\t\t\n\t\tdispatch(actIsMobileDevice(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)))\n\t\t//dispatch(actIsMobileDevice(true))\n\t\tdispatch(actShowSidebar(!isMobileView))\t\n\t\t\n\t\twindow.addEventListener('resize', handleWindowSizeChange);\n        return () => {\n            window.removeEventListener('resize', handleWindowSizeChange);\t\t\t\n        }\t\t\n\n\t}, []); /* useEffect triggers when route has been changed too */\n\n\n\tuseEffect(() => {\n\t\tfetchTreesAndStatuses();\n\t}, [paramsRouter]); /* useEffect triggers when route has been changed too */\n\n    useEffect(() => {\n        let periodUpdate = 240000 //4 min\n        let interval = setInterval(() => {\n            if (authToken) {\n                refreshAuthToken(authToken.refresh)    \n            }\n        }, periodUpdate)\n\n        return ()=> clearInterval(interval)\n    }, [authToken]);\n\n\n    function handleWindowSizeChange() {\n        setScreenWidth(window.innerWidth);\n    }\t\n\n\n\tconst fetchTreesAndStatuses = async () => {\n\t\t//first of all, we must fetch dictionary with statuse, otherwise we can't draw points of trees in diferent color depends of them statuses.\n\t\tlet url = `${process.env.REACT_APP_API_URL}citytree/dictionary/statuses`;\n\t\tlet res = await fetch(url);\n\t\tlet data = await res.json();\n\t\tdispatch(actDictStatuses(data));\n\t\t\t\t\t\t\n\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/`;\n\t\tres = await fetch(url);\n\t\tdata = await res.json();\n\t\tdata.dateTimeGenerated = Date.now();\n\t\t\n\t\tdispatch(actDataTrees(data));\n\t};\n\n\t//const onMarkerClick = (data: AccidentItem) => {\n\t\t//console.log('data', data)\n\t//\tdispatch(actShowAccidentTab(true));\n\t//\tdispatch(actActiveTabKey(\"accident\"));\n\t//\tsetDataAccidentForm(data);\n\t//\tdispatch(actShowSidebar(true));\n\t//};\n\n\tfunction markerOnClick(e: any) {\n\t\tconst fetchTreeData = async (idTree: number) => {\n\t\t\t\n\t\t\t\tlet url = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${idTree}/`;\n\t\t\t\tlet res = await fetch(url);\n\t\t\t\tlet data = await res.json();\n\t\n\t\t\t\tsetDataTreeForm(data);\n\t\t\t\tdispatch(actShowTreeTab(true));\n\t\t\t\tdispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t\t\t\tdispatch(actShowSidebar(true));\t\t\t\n\t\t\t\t\n\t\t\t\t//onMarkerClick(geojson);\n\t\t\t\t//console.log(geojson) \n\t\t\t\n\t\t}\n\n\n\t\tlet marker: L.Marker = e.target;\n\t\tlet geojson = marker.toGeoJSON(); //: GeoJSON.FeatureCollection<any>\n\t\t//console.log(geojson);\n\t\tif (geojson?.properties?.id) {\n\t\t\tfetchTreeData(geojson?.properties?.id);\n\t\t}   \n\t}\t\n\n\n\n\n\n\t\n\tconst onSubmitTree = (data: any) => {\n\t\tlet method;\n\t\tlet url;\n\t\tif (data.id) {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.id}/`;\n\t\t\tmethod = \"PUT\";\n\t\t} else {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/`;\n\t\t\tmethod = \"POST\";\n\t\t}\n\n\t\tconst succeedCallBack = () => {\n\t\t\tfetchTreesAndStatuses();\n\t\t\tdispatch(actNewMarkerState({ visible: false, position: {} }));\n\t\t\tdispatch(actActiveTabKey('filter'));\n\t\t\tdispatch(actShowTreeTab(false));\n\n\t\t\tif (isMobileView) {\n\t\t\t\tdispatch(actShowSidebar(false))\n\t\t\t}\t\t\t\n\t\t}\t\t\n\t\tfetchUrl(url, method, data, succeedCallBack);\n\t\t\n\t\t\n\t};\n\n\n\n\tconst onDeleteTree = (id: number) => {\n\t\tconst succeedCallBack = () => {\t\t\t\t\t\n\t\t\tdispatch(actActiveTabKey('filter'));\n\t\t\tdispatch(actShowTreeTab(false));\t\t\t\t\t\t\n\t\t\tfetchTreesAndStatuses();\t\t\t\t\n\t\t}\n\n\t\tfetchUrl(`${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${id}`, \"DELETE\", {}, succeedCallBack);\n\t};\n\n\n\tconst onCloseTree = () => {\n\t\tdispatch(actNewMarkerState({ visible: false, position: {} }));\n\t\tdispatch(actActiveTabKey('filter'));\n\t\tdispatch(actShowTreeTab(false));\n\t};\n\n\n\n\n\n\tconst fetchTreeData = async (idTree: number) => {\t\t\t\n\t\tlet url = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${idTree}/`;\n\t\tlet res = await fetch(url);\n\t\tlet data = await res.json();\n\t\tsetDataTreeForm(data);\t\t\n\t}\n\n\tconst onSubmitInsp = (data: any) => {\n\t\tlet method;\n\t\tlet url;\n\t\tif (data.id) {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.treeId}/inspections/${data.id}/`;\n\t\t\tmethod = \"PUT\";\n\t\t} else {\n\t\t\turl = `${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/${data.treeId}/inspections/`;\n\t\t\tmethod = \"POST\";\n\t\t}\n\n\t\tconst succeedCallBack = () => {\n\t\t\tfetchTreeData(data.treeId);\t\t\n\t\t\tfetchTreesAndStatuses();\n\t\t\tdispatch(actActiveTabKey('tree'));\n\t\t\tdispatch(actShowInspTab(false));\t\t\t\n\t\t}\n\n\t\tconsole.log('insp', data, url);\n\t\tfetchUrl(url, method, data, succeedCallBack);\n\t\t\t\n\t};\n\n\tconst onDeleteInsp = (data: InspItem | null) => {\n\t\tconst succeedCallBack = () => {\n\t\t\tif (data) {\n\t\t\t\tfetchTreeData(data.tree);\n\t\t\t\tdispatch(actActiveTabKey('tree'));\n\t\t\t\tdispatch(actShowInspTab(false));\t\t\t\t\t\t\n\t\t\t\tfetchTreesAndStatuses();\n\t\t\t}\t\t\n\t\t}\n\n\t\tif (data?.id) {\n\t\t\tconsole.log('DELETE', data)\n\t\t\t//path('citytree/<str:city>/trees/<str:treeid>/inspections/<str:inspid>/', views.citytreeInspectionItem, name=\"citytree-restapi-inspection-item\"),\n\t\t\tfetchUrl(`${process.env.REACT_APP_API_URL}citytree/${paramsRouter.cityName}/trees/0/inspections/${data.id}`, \"DELETE\", {}, succeedCallBack);\n\t\t}\t\n\t};\t\n\n\tconst onCloseInsp = () => {\t\t\n\t\tdispatch(actShowInspTab(false));\n\t\tdispatch(actActiveTabKey('tree'));\t\t\n\t};\t\n\n\tconst onNewInsp = (idTree: number) => {\n\t\tsetDataInspForm({tree: idTree});\n\t\tdispatch(actShowInspTab(true));\n\t\tdispatch(actActiveTabKey('insp'));\t\t\t\t\t\t\t\t\t\n\t\tdispatch(actShowSidebar(true));\t\t\t\t\n\n\t}\n\n\tconst onEditInsp = (data: any) => {\n\t\tconsole.log('onEditInsp', data);\t\t\n\t\tsetDataInspForm({...data}); //таким образом передается копия объекта, которая указывает на другой участок памяти, иначе useEffect не срабатывает у формы, а значит форма не перезаполняется, когда например чтото поменяли на форме, затем ее закрыли без сохранения и снова открыли, видим вместо актуальных данных, старые, которые не сохранялись\n\t\tdispatch(actShowInspTab(true));\n\t\tdispatch(actActiveTabKey('insp'));\t\t\t\t\t\t\t\t\t\n\t\tdispatch(actShowSidebar(true));\t\t\t\n\t}\t\n\n\tconst onClickInspPhotos = (data: any) => {\n\t\tconsole.log('onClickPhotos', data);\t\t\n\t\t\n\t\tconst images: string[] = [];\n\t\tif (data?.photo1) {\n\t\t\timages.push(`${data.photoServer}${data?.photo1}`);\n\t\t}\n\t\tif (data?.photo2) {\n\t\t\timages.push(`${data.photoServer}${data?.photo2}`);\n\t\t}\n\t\tif (data?.photo3) {\n\t\t\timages.push(`${data.photoServer}${data?.photo3}`);\n\t\t}\t\t\t\t\n\n\t\tif (images.length > 0) {\n\t\t\tsetImageSlider({visible: true, images: images});\n\t\t}\n\t\t\n\t\t\n\t\t//setDataInspForm({...data}); //таким образом передается копия объекта, которая указывает на другой участок памяти, иначе useEffect не срабатывает у формы, а значит форма не перезаполняется, когда например чтото поменяли на форме, затем ее закрыли без сохранения и снова открыли, видим вместо актуальных данных, старые, которые не сохранялись\n\t\t//dispatch(actShowInspTab(true));\n\t\t//dispatch(actActiveTabKey('insp'));\t\t\t\t\t\t\t\t\t\n\t\t//dispatch(actShowSidebar(true));\t\t\t\n\t}\t\t\n\n\t\t\n\n\n\tconst onClickMap = (e: any) => {\n\t\tif (rxCheckButtonNewMarker && !rxIsMobileDevice) {\n\t\t\t//setCheckButtonNewMarker(false)\n\t\t\tdispatch(actCheckButtonNewMarker(false));\n\n\t\t\tlet coord = { lat: '0', lng: '0' };\n\t\t\tcoord.lat = e.latlng.lat.toFixed(5);\n\t\t\tcoord.lng = e.latlng.lng.toFixed(5);\n\t\t\t\n\t\t\tdispatch(actNewMarkerState({ visible: true, position: coord }));\n\n\t\t\tdispatch(actShowTreeTab(true));\n\t\t\tdispatch(actActiveTabKey('tree'));\t\t\t\t\t\t\t\t\t\n\t\t\tdispatch(actShowSidebar(true));\t\n\n\t\t\t//setShowAccidentTab(true)\n\t\t\t//dispatch(actShowTreeTab(true));\n\t\t\t//setActiveTabKey(\"accident\")\n\t\t\t//dispatch(actActiveTabKey('tree'));\n\t\t}\t\t\n\t}\n\n\n\tconst onDragEndNewMarker = (LatLng: { lon: number; lat: number }) => {\n\t\t//let coord = { lat: 0, lng: 0 };\n\t\t//coord.lat = LatLng.lat.toFixed(5);\n\t\t//coord.lng = LatLng.lng.toFixed(5);\n\t\t//setNewMarkerState({ visible: true, position: coord });\n\t};\n\n\tconst filterMapCallback = (feature: any): boolean => {\n\t\t\n\t\tlet species_Filter = true;\n\t\tlet status_Filter = true;\n\t\tlet recommendations_Filter = true;\n\t\tlet remarks_Filter = true;\n\t\tlet placetype_Filter = true;\n\t\tlet irrigationmethod_Filter = true;\n\n\t\tlet plantedDateFrom_Filter = true;\n\t\tlet plantedDateTo_Filter = true;\n\t\tlet addedDateFrom_Filter = true;\n\t\tlet addedDateTo_Filter = true;\n\t\tlet comment_Filter = true;\n\n\t\tlet heightFrom_Filter = true;\n\t\tlet heightTo_Filter = true;\n\t\tlet trunkGirthFrom_Filter = true;\n\t\tlet trunkGirthTo_Filter = true;\n\t\tlet crownDiameterFrom_Filter = true;\n\t\tlet crownDiameterTo_Filter = true;\n\n\t\tlet showOnlyMyTrees_Filter = true;\n\n\t\tlet valueFilter;\n\n\n\t\tvalueFilter = rxDataFilters?.speciesFilter;\n\t\t//console.log('valueFilter', valueFilter)\n\t\t//console.log('feature.properties', feature.properties)\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tspecies_Filter = false;\n\t\t\tvalueFilter.every((x) => {\n\t\t\t\tif (feature.properties.species === x.value) {\n\t\t\t\t\tspecies_Filter = true;\n\t\t\t\t\treturn false; // break loop\t\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\t\t\t\n\t\t}\n\n\n\t\tvalueFilter = rxDataFilters?.statusFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tstatus_Filter = false;\n\t\t\tvalueFilter.every((x) => {\n\t\t\t\tif (feature.properties.lastinsp_status === x.value) {\n\t\t\t\t\tstatus_Filter = true;\n\t\t\t\t\treturn false; // break loop\t\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\t\t\t\n\t\t}\n\n\n\t\tvalueFilter = rxDataFilters?.careTypeFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\trecommendations_Filter = false;\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.recommendations.includes(String(x.value))\n\t\t\t);\n\t\t\trecommendations_Filter = intersection.length > 0;\n\t\t}\n\n\n\t\tvalueFilter = rxDataFilters?.remarkFilter;\n\t\tif (Array.isArray(valueFilter)) {\n\t\t\tremarks_Filter = false;\n\t\t\tlet intersection = valueFilter.filter((x) =>\n\t\t\t\tfeature.properties.remarks.includes(String(x.value))\n\t\t\t);\n\t\t\tremarks_Filter = intersection.length > 0;\n\t\t}\t\t\n\n\n\t\tvalueFilter = rxDataFilters?.placeTypeFilter?.value;\n\t\tif (valueFilter) {\n\t\t\tplacetype_Filter = valueFilter === feature.properties.placetype;\n\t\t}\n\n\t\tvalueFilter = rxDataFilters?.irrigationMethodFilter?.value;\n\t\tif (valueFilter) {\n\t\t\tirrigationmethod_Filter = valueFilter === feature.properties.irrigationmethod;\n\t\t}\t\n\t\t\n\t\tvalueFilter = rxDataFilters?.datePlantedFromFilter;\n\t\tif (valueFilter) {\n\t\t\tplantedDateFrom_Filter =\n\t\t\t\tfeature.properties.dateplanted >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.datePlantedToFilter;\n\t\tif (valueFilter) {\n\t\t\tplantedDateTo_Filter =\n\t\t\t\tfeature.properties.dateplanted <= valueFilter;\n\t\t}\t\n\t\t\n\t\tvalueFilter = rxDataFilters?.dateAddedFromFilter;\n\t\tif (valueFilter) {\n\t\t\taddedDateFrom_Filter =\n\t\t\t\tfeature.properties.datetimeadded >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.dateAddedToFilter;\n\t\tif (valueFilter) {\n\t\t\taddedDateTo_Filter =\n\t\t\t\tfeature.properties.datetimeadded <= valueFilter;\n\t\t}\t\n\t\t\n\t\tvalueFilter = rxDataFilters?.commentFilter;\n\t\tif (valueFilter) {\n\t\t\tif (\n\t\t\t\tfeature.properties.comment\n\t\t\t\t\t.toLowerCase()\n\t\t\t\t\t.indexOf(valueFilter.toLowerCase()) === -1\n\t\t\t) {\n\t\t\t\tcomment_Filter = false;\n\t\t\t}\n\t\t}\t\t\n\n\n\t\t\n\t\tvalueFilter = rxDataFilters?.heightFromFilter;\n\t\tif (valueFilter) {\n\t\t\theightFrom_Filter = feature.properties.lastinsp_height >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.heightToFilter;\n\t\tif (valueFilter) {\n\t\t\theightTo_Filter = feature.properties.lastinsp_height <= valueFilter;\n\t\t}\t\n\t\t\n\t\tvalueFilter = rxDataFilters?.trunkGirthFromFilter;\n\t\tif (valueFilter) {\n\t\t\ttrunkGirthFrom_Filter = feature.properties.lastinsp_trunkgirth >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.trunkGirthToFilter;\n\t\tif (valueFilter) {\n\t\t\ttrunkGirthTo_Filter = feature.properties.lastinsp_trunkgirth <= valueFilter;\n\t\t}\t\n\t\t\n\t\tvalueFilter = rxDataFilters?.crownDiameterFromFilter;\n\t\tif (valueFilter) {\n\t\t\tcrownDiameterFrom_Filter = feature.properties.lastinsp_crowndiameter >= valueFilter;\n\t\t}\n\t\tvalueFilter = rxDataFilters?.crownDiameterToFilter;\n\t\tif (valueFilter) {\n\t\t\tcrownDiameterTo_Filter = feature.properties.lastinsp_crowndiameter <= valueFilter;\n\t\t}\t\t\n\n\n\n\t\tvalueFilter = rxDataFilters?.showMyTreesFilter;\n\t\tif (valueFilter && authToken?.user) {\n\t\t\tshowOnlyMyTrees_Filter = authToken.user.id === feature.properties.useradded;\t\n\t\t}\n\n\n\n\t\tlet result = species_Filter && status_Filter && recommendations_Filter && remarks_Filter &&\n\t\t\t\t\t placetype_Filter && irrigationmethod_Filter &&\n\t\t\t\t\t plantedDateFrom_Filter && plantedDateTo_Filter && addedDateFrom_Filter && addedDateTo_Filter &&\n\t\t\t\t\t comment_Filter && showOnlyMyTrees_Filter && \n\t\t\t\t\t heightFrom_Filter && heightTo_Filter && trunkGirthFrom_Filter && trunkGirthTo_Filter && crownDiameterFrom_Filter && crownDiameterTo_Filter;\t\t\n\t\t\t\t\t\t \t\t\n\t\t\n\t\t\n\t\trxDataTrees.dateTimeGenerated = Date.now(); // dateTimeGenerated is used like key parameter to update data on map, when it changed\n\t\treturn result;\n\t};\n\n\n\n\tconst onSubmitFilter = (filter: {}) => {\n\t\tconsole.log(filter);\n\t\tdataHeatmapPoints = [];\n\t\tdispatch(actDataFilters(filter));\t\n\n\t\tif (isMobileView) {\n\t\t\tdispatch(actShowSidebar(false))\n\t\t}\n\t};\n\n\n\n\tfunction pointToLayerTrees(feature: any, latlng: L.LatLng): any {   \n\t\tif (!rxCheckButtonHeatmap) {\n\t\t\t// change color of point depends on them status\n\t\t\tif (feature.properties.lastinsp_status) {\n\t\t\t\tif (Array.isArray(rxDictStatuses)) {\n\t\t\t\t\trxDictStatuses.forEach(element => {\n\t\t\t\t\tif (element.id === feature.properties.lastinsp_status) {\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.fillColor = `#${element.hexcolor}`;\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.color = `#${element.hexcolor}`;\n\t\t\t\t\t}\t\n\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick);\n\t\t}\n\t\t\treturn null;\n\n\t\t\n\t\t/*\n\t\tif (!rxCheckButtonHeatmap && currentZoom !== null) {\n\t\t\t\tconsole.log('currentZoom', currentZoom)   \n\t\t\t\tconsole.log('lastinsp_crowndiameter', feature.properties.lastinsp_crowndiameter)\n\n\t\t\t\tgeojsonMarkerOptions_citytree.radius = ZoomToRadius(currentZoom, feature.properties.lastinsp_crowndiameter);\n\t\t\t\tif (geojsonMarkerOptions_citytree.radius < 2) {\n\t\t\t\t\t\tgeojsonMarkerOptions_citytree.radius = 2;\n\t\t\t\t}\n\n\t\t\t\treturn L.circleMarker(latlng, geojsonMarkerOptions_citytree).on('click', markerOnClick)        \n\t\t}*/\n\n\t\t/*\n\n\t\t\t\tpointToLayer: function (feature, latlng) {\n\n\t\t\t\t\t\tgeojsonMarkerOptions.radius = ZoomToRadius(zoom, feature.properties.lastinsp_crowndiameter);\n\n\t\t\t\t\t\tif (geojsonMarkerOptions.radius < 2) {\n\t\t\t\t\t\t\t\tgeojsonMarkerOptions.radius = 2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t{% if status %}\n\t\t\t\t\t\t\t\t{% for statusItem in status %}\n\t\t\t\t\t\t\t\t\t\tif (feature.properties.lastinsp_status == \"{{statusItem.id}}\")\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tgeojsonMarkerOptions.fillColor = \"#{{statusItem.hexcolor}}\";\n\t\t\t\t\t\t\t\t\t\t\t\tgeojsonMarkerOptions.color = \"#{{statusItem.hexcolor}}\";\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t{% endfor %}\n\t\t\t\t\t\t{% endif %}\n\n\t\t\t\t\t\treturn L.circle(latlng, geojsonMarkerOptions).on('click', markerOnClick);\n\n\t\t\t\t},\n\n\t\t*/\n\n\t};\n\n\n\n\treturn (\n\t\t<div className=\"main-wrapper\">\n\t\t\t{paramsRouter.cityName ? (\n\t\t\t\t<div id=\"app\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={`d-flex ${\n\t\t\t\t\t\t\trxShowSidebar ? \"showed\" : \"hided\"\n\t\t\t\t\t\t}`}\n\t\t\t\t\t\tid=\"wrapper\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Sidebar>\n\t\t\t\t\t\t\t<Tabs\n\t\t\t\t\t\t\t\tid=\"controlled-tab-example\"\n\t\t\t\t\t\t\t\tactiveKey={rxActiveTabKey}\n\t\t\t\t\t\t\t\tonSelect={(k) => dispatch(actActiveTabKey(k))}\n\t\t\t\t\t\t\t\t//onSelect={(k) => setKey(k)}\n\t\t\t\t\t\t\t\tclassName=\"mb-3\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\teventKey=\"filter\"\n\t\t\t\t\t\t\t\t\ttitle={t<string>(\"sidebar.filterTab.title\")}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\toverflowY: \"auto\",\n\t\t\t\t\t\t\t\t\t\t\toverflowX: \"hidden\",\n\t\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\theight: \"calc(100vh - 130px)\",\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormFilter onSubmitFilter={onSubmitFilter}  \n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\teventKey=\"tree\"\n\t\t\t\t\t\t\t\t\ttitle={t<string>(\n\t\t\t\t\t\t\t\t\t\t\"sidebar.treeTab.title\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\ttabClassName={\n\t\t\t\t\t\t\t\t\t\t!rxShowTreeTab ? \"d-none\" : \"\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\toverflowY: \"auto\",\n\t\t\t\t\t\t\t\t\t\t\toverflowX: \"hidden\",\n\t\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\theight: \"calc(100vh - 130px)\",\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormTree \n\t\t\t\t\t\t\t\t\t\t\tonSubmitTree={onSubmitTree}\n\t\t\t\t\t\t\t\t\t\t\tonDeleteTree={onDeleteTree}\n\t\t\t\t\t\t\t\t\t\t\tonCloseTree={onCloseTree} \n\t\t\t\t\t\t\t\t\t\t\tonNewInsp={onNewInsp}\n\t\t\t\t\t\t\t\t\t\t\tonEditInsp={onEditInsp}\n\t\t\t\t\t\t\t\t\t\t\tonClickInspPhotos={onClickInspPhotos}\n\t\t\t\t\t\t\t\t\t\t\tdataTreeForm={dataTreeForm}\n\t\t\t\t\t\t\t\t\t\t\tcity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\t\t\tsigningS3Url={signingS3Url}\n\t\t\t\t\t\t\t\t\t\t\t//currentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tab>\n\n\t\t\t\t\t\t\t\t<Tab\n\t\t\t\t\t\t\t\t\teventKey=\"insp\"\n\t\t\t\t\t\t\t\t\ttitle={t<string>(\n\t\t\t\t\t\t\t\t\t\t\"sidebar.inspTab.title\"\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\ttabClassName={\n\t\t\t\t\t\t\t\t\t\t!rxShowInspTab ? \"d-none\" : \"\"\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\toverflowY: \"auto\",\n\t\t\t\t\t\t\t\t\t\t\toverflowX: \"hidden\",\n\t\t\t\t\t\t\t\t\t\t\twidth: \"100%\",\n\t\t\t\t\t\t\t\t\t\t\theight: \"calc(100vh - 130px)\",\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<FormInspection \n\t\t\t\t\t\t\t\t\t\t\tonSubmitInsp={onSubmitInsp}\n\t\t\t\t\t\t\t\t\t\t\tonDeleteInsp={onDeleteInsp}\n\t\t\t\t\t\t\t\t\t\t\tonCloseInsp={onCloseInsp} \n\t\t\t\t\t\t\t\t\t\t\tdataInspForm={dataInspForm}\n\t\t\t\t\t\t\t\t\t\t\tcity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\t\t\tsigningS3Url={signingS3Url}\n\t\t\t\t\t\t\t\t\t\t\t//currentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\t\t/>\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</Tab>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</Tabs>\n\t\t\t\t\t\t</Sidebar>\n\n\t\t\t\t\t\t<div id=\"page-content-wrapper\">\n\t\t\t\t\t\t\t<MenuGlobal\n\t\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t//onClickShowMenu={ () => dispatch(actShowSidebar(!rxShowSidebar)) }\n\t\t\t\t\t\t\t\tauthToken={authToken}\n\t\t\t\t\t\t\t\tsetAuthToken={setAuthToken}\n\t\t\t\t\t\t\t\tappname=\"citytree\"\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"container-fluid\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tpaddingRight: \"0px\",\n\t\t\t\t\t\t\t\t\tpaddingLeft: \"0px\",\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<Map\n\t\t\t\t\t\t\t\t\tmainData={rxDataTrees}\n\t\t\t\t\t\t\t\t\tappname=\"citytree\"\n\t\t\t\t\t\t\t\t\tdataHeatmapPoints={dataHeatmapPoints}\n\t\t\t\t\t\t\t\t\tcurrentCity={paramsRouter.cityName}\n\t\t\t\t\t\t\t\t\tonClickMap={onClickMap}\n\t\t\t\t\t\t\t\t\t//={onMarkerClick}\n\t\t\t\t\t\t\t\t\tonDragEndNewMarker={onDragEndNewMarker}\n\t\t\t\t\t\t\t\t\tpointToLayerCallback={pointToLayerTrees}\n\t\t\t\t\t\t\t\t\tfilterMapCallback={filterMapCallback}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t{rxShowOkCancelMobileMarker && (\n\t\t\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"doneEditMarkerMobile\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactCheckButtonNewMarker(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactShowOkCancelMobileMarker(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactShowTreeTab(true)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactActiveTabKey(\"tree\")\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(actShowSidebar(true));\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{t<string>(\"words.done\")}\n\t\t\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\t\t\t\tid=\"cancelMarkerMobile\"\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactNewMarkerState({\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvisible: false,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tposition: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlat: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlng: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactShowOkCancelMobileMarker(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t\tdispatch(\n\t\t\t\t\t\t\t\t\t\t\t\t\tactCheckButtonNewMarker(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t&#x2715;\n\t\t\t\t\t\t\t\t\t\t</Button>{\" \"}\n\t\t\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t\"You must select a city.\"\n\t\t\t)}\n\n\t\t\t\n\t\t\t<ImageSlider \n\t\t\t\tvisible={imageSlider.visible} \n\t\t\t\tsetVisible={setImageSlider} \n\t\t\t\timages={imageSlider.images}\n\t\t\t/>\n\n\t\t\t<LoginModalForm setAuthToken={setAuthToken}/>\n\t\t\t<RegisterModalForm setAuthToken={setAuthToken}/>\n                \n\t\t</div>\n\t);\n\n\n\tfunction getCookie(name: string) {\n\t\tvar cookieValue = null;\n\t\tif (document.cookie && document.cookie !== \"\") {\n\t\t\tvar cookies = document.cookie.split(\";\");\n\t\t\tfor (var i = 0; i < cookies.length; i++) {\n\t\t\t\tvar cookie = cookies[i].trim();\n\t\t\t\t// Does this cookie string begin with the name we want?\n\t\t\t\tif (cookie.substring(0, name.length + 1) === name + \"=\") {\n\t\t\t\t\tcookieValue = decodeURIComponent(\n\t\t\t\t\t\tcookie.substring(name.length + 1)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn cookieValue;\n\t}\n\n\n\n\n\n\n\tfunction fetchUrl(url: string, method: string, bodyObject?: any, callBackSucceed?: () => void) {\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\t\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\t\tif (authToken?.access) {\n\t\t\tmyHeaders.append(\"Authorization\", \"Bearer \" + authToken.access);\n\t\t}\n\n\n\t\tconsole.log('myHeaders',myHeaders.get('Authorization'));\n\n\t\tfetch(url, {\n\t\t\tmethod: method,\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(bodyObject),\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\talert(\n\t\t\t\t\t\tresponse.statusText +\n\t\t\t\t\t\t\t\" (\" +\n\t\t\t\t\t\t\tresponse.status +\n\t\t\t\t\t\t\t\")\\n\\n\" +\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t\n\t\t\t\tif (callBackSucceed) {\n\t\t\t\t\tcallBackSucceed();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\n\n    function refreshAuthToken(refreshToken: string){\n\t\tlet myHeaders = new Headers();\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\n        fetch(`${process.env.REACT_APP_API_URL}token/refresh/`, {\n            method: \"POST\",\n            headers: myHeaders,\n            body: JSON.stringify({ refresh: refreshToken }),\n\n        }).then(function (response) {\n            if (response.status == 200) {\n                response.json().then((data) => {    \n                    //setAuthToken({access: data.access, refresh: authToken.refresh})\n                    setAuthToken(data)\n                });\n            } else if (response.status >= 400) {\n                setAuthToken(null)    \n            }\n        });\n    };\n\n\n    function checkAuthToken() {\n\t\tlet body = { token: authToken.access }\n\t\tlet url = `${process.env.REACT_APP_API_URL}token/verify/`;\n\t\tlet myHeaders = new Headers();\n\n\t\tmyHeaders.append(\"Content-type\", \"application/json\");\n\t\tif (csrftoken) {\n\t\t\tmyHeaders.append(\"X-CSRFToken\", csrftoken);\n\t\t}\t\n\n\t\tfetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: myHeaders,\n\t\t\tbody: JSON.stringify(body),\n\n\t\t}).then(function (response) {\n\t\t\tif (response.status >= 400) {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\">= 400\", data);\n\n                    refreshAuthToken(authToken.refresh)\n\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tresponse.json().then((data) => {\n\t\t\t\t\tconsole.log(\"ok\", data);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t};\n\n\n}\n\n\n\nexport default App;\n","import { useState } from 'react';\r\n\r\nexport default function useAuthToken() {\r\n    \r\n    const getUsernameFromToken = (json: {access: string; refresh: string}) =>{\r\n        let token = json?.access \r\n\r\n        if (token) {\r\n            const arToken = token.split('.')\r\n            if (arToken.length > 1) {\r\n                return {\r\n                    \"name\": JSON.parse(atob(arToken[1])).username,\r\n                    \"id\": JSON.parse(atob(arToken[1])).user_id\r\n                }    \r\n            }\r\n        }\r\n    }\r\n    \r\n    const getToken = () => {\r\n        let tokenString\r\n        const rememberme = localStorage.getItem('rememberme')\r\n\r\n        if (rememberme==='true') {\r\n            tokenString = localStorage.getItem('token')\r\n        } else {\r\n            tokenString = sessionStorage.getItem('token')\r\n        }\r\n        \r\n\r\n        if (tokenString) {\r\n            let json = JSON.parse(tokenString)\r\n            const user = getUsernameFromToken(json)\r\n            if (user) {\r\n                json.user = user\r\n            }            \r\n            return json\r\n        } else {\r\n            return null\r\n        }\r\n      };\r\n\r\n    const [authToken, setAuthToken] = useState(getToken());\r\n\r\n\r\n    const saveToken = (userToken: {access: string; refresh: string; user?: {id: number; name: string}} | null) => {\r\n        if (userToken) {\r\n\r\n            const rememberme = localStorage.getItem('rememberme')\r\n\r\n            if (rememberme === 'true') {\r\n                localStorage.setItem('token', JSON.stringify(userToken));\r\n            } else {\r\n                sessionStorage.setItem('token', JSON.stringify(userToken));\r\n            }\r\n            \r\n            \r\n            const user = getUsernameFromToken(userToken)\r\n            if (user) {\r\n                userToken.user = user\r\n            }            \r\n        } else {\r\n            localStorage.removeItem(\"token\")    \r\n            localStorage.removeItem(\"rememberme\") \r\n            sessionStorage.removeItem(\"token\")\r\n        }           \r\n        setAuthToken(userToken);\r\n    };    \r\n\r\n\r\n    return {\r\n        setAuthToken: saveToken,\r\n        authToken\r\n    }    \r\n}","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\nimport translationEN from './locales/en/translation.json';\r\nimport translationBG from './locales/bg/translation.json';\r\nconst availableLanguages = ['en', 'bg'];\r\n\r\n\r\ni18n\r\n    .use(LanguageDetector)\r\n    .use(initReactI18next) // passes i18n down to react-i18next\r\n    .init({\r\n        // the translations\r\n        // (tip move them in a JSON file and import them,\r\n        // or even better, manage them via a UI: https://react.i18next.com/guides/multiple-translation-files#manage-your-translations-with-a-management-gui)\r\n        resources: {\r\n            en: {\r\n                translation: translationEN\r\n            },\r\n\r\n            bg: {\r\n                translation: translationBG\r\n            }      \r\n        },\r\n        //lng: \"bg\", // if you're using a language detector, do not define the lng option\r\n        //lng: localStorage.getItem('lng') || 'en',\r\n        fallbackLng: \"en\",\r\n\r\n        interpolation: {\r\n        escapeValue: false // react already safes from xss => https://www.i18next.com/translation-function/interpolation#unescape\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\nexport default i18n;","const initialState = {\r\n    showSidebar: false,\r\n    showTreeTab: false,\r\n    showInspTab: false,\r\n    activeTabKey: 'filter',\r\n    loginModalShow: false,\r\n    registerModalShow: false,\r\n\r\n    mapBaseLayerName: 'Default',\r\n    newMarkerState: {\r\n\t\tvisible: false,\r\n\t\tposition: {},\r\n\t\tisMobile: false\r\n\t},\r\n    showOkCancelMobileMarker: false,\r\n    checkButtonNewMarker: false,\r\n    checkButtonHeatmap: false,\r\n    checkButtonGPS: false,\r\n\r\n    isMobileDevice: false\r\n}\r\n\r\nconst uiReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'SHOWSIDEBAR':\r\n            return {\r\n                ...state,\r\n                showSidebar: action.payload\r\n            }\r\n        case 'SHOWTREETAB':\r\n            return {\r\n                ...state,\r\n                showTreeTab: action.payload\r\n            }   \r\n        case 'SHOWINSPTAB':\r\n            return {\r\n                ...state,\r\n                showInspTab: action.payload\r\n            }                      \r\n        case 'ACTIVETABKEY':\r\n            return {\r\n                ...state,\r\n                activeTabKey: action.payload\r\n            }                                              \r\n        case 'LOGINMODALSHOW':\r\n            return {\r\n                ...state,\r\n                loginModalShow: action.payload\r\n            }\r\n\r\n        case 'REGISTERMODALSHOW':\r\n            return {\r\n                ...state,\r\n                registerModalShow: action.payload\r\n            }    \r\n        \r\n\r\n\r\n        case 'MAPBASELAYERNAME':\r\n            return {\r\n                ...state,\r\n                mapBaseLayerName: action.payload\r\n            } \r\n            \r\n        case 'NEWMARKERSTATE':\r\n            return {\r\n                ...state,\r\n                newMarkerState: action.payload\r\n            } \r\n\r\n        case 'SHOWOKCANCELMOBILEMARKER':\r\n            return {\r\n                ...state,\r\n                showOkCancelMobileMarker: action.payload\r\n            }              \r\n        \r\n        case 'CHECKBUTTONNEWMARKER':\r\n            return {\r\n                ...state,\r\n                checkButtonNewMarker: action.payload\r\n            }\r\n        case 'CHECKBUTTONHEATMAP':\r\n            return {\r\n                ...state,\r\n                checkButtonHeatmap: action.payload\r\n            }            \r\n        case 'CHECKBUTTONGPS':\r\n            return {\r\n                ...state,\r\n                checkButtonGPS: action.payload\r\n            }            \r\n\r\n\r\n\r\n        case 'ISMOBILEDEVICE':\r\n            return {\r\n                ...state,\r\n                isMobileDevice: action.payload\r\n            }\r\n\r\n\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default uiReducer","const initialState = {\r\n    dataTrees: [],\r\n    dataFilters: {},\r\n    dictStatuses: [],\r\n    dictSpecieses: [],\r\n    dictCareTypes: [],\r\n    dictRemarks: [], \r\n    dictPlaceTypes: [],\r\n    dictIrrigationMethods: [], \r\n    dictGroupSpec: [],\r\n    dictTypeSpec: [] \r\n}\r\n\r\nconst dataReducer = (state=initialState, action: {type: string; payload: any}) => {\r\n    switch (action.type) {\r\n        case 'DATATREES':\r\n            return {\r\n                ...state,\r\n                dataTrees: action.payload\r\n            }\r\n\r\n        case 'DICTSTATUSES':\r\n            return {\r\n                ...state,\r\n                dictStatuses: action.payload\r\n            }\r\n\r\n        case 'DICTSPECIESES':\r\n            return {\r\n                ...state,\r\n                dictSpecieses: action.payload\r\n            }      \r\n\r\n        case 'DICTCARETYPES':\r\n            return {\r\n                ...state,\r\n                dictCareTypes: action.payload\r\n            }  \r\n\r\n        case 'DICTREMARKS':\r\n            return {\r\n                ...state,\r\n                dictRemarks: action.payload\r\n            }  \r\n\r\n        case 'DICTPLACETYPES':\r\n            return {\r\n                ...state,\r\n                dictPlaceTypes: action.payload\r\n            }    \r\n            \r\n        case 'DICTIRRIGATIONMETHODS':\r\n            return {\r\n                ...state,\r\n                dictIrrigationMethods: action.payload\r\n            }   \r\n            \r\n        case 'DICTGROUPSPECS':\r\n            return {\r\n                ...state,\r\n                dictGroupSpec: action.payload\r\n            }             \r\n            \r\n        case 'DICTTYPESPECS':\r\n            return {\r\n                ...state,\r\n                dictTypeSpec: action.payload\r\n            }             \r\n\r\n        case 'DATAFILTERS':\r\n            return {\r\n                ...state,\r\n                dataFilters: action.payload\r\n            }\r\n\r\n\r\n        default:\r\n            return state            \r\n    }\r\n}\r\n\r\n\r\n\r\n\r\nexport default dataReducer","import uiReducer from './userInterface'\r\nimport dataReducer from './dataApp'\r\nimport { combineReducers } from 'redux'\r\n\r\nexport const allReducers = combineReducers({\r\n    uiReducer,\r\n    dataReducer    \r\n});\r\n\r\n//export default allReducers\r\nexport type RootState = ReturnType<typeof allReducers>","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Routes, Route } from \"react-router-dom\";\nimport './index.css';\nimport './sidebar.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport './i18nextConf';\nimport { createStore } from 'redux';\nimport { allReducers } from './reducers/index.ts';\nimport { Provider } from 'react-redux';\n\n// Importing the Bootstrap CSS\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst store = createStore(\n  allReducers,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nReactDOM.render(\n  <Provider store={store}>\n  {/*<React.StrictMode>*/}\n    <BrowserRouter basename=\"/citytree\">\n      <Routes>\n        <Route path=\"/\">\n          <Route path=\":cityName\" element={<App />} >\n            <Route path=\":treeId\" element={<App />} />\n          </Route>               \n        </Route>\n      </Routes>\n    </BrowserRouter>\n  {/*</React.StrictMode>,*/}\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}